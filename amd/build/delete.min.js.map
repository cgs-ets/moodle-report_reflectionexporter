{"version":3,"sources":["../src/delete.js"],"names":["define","Ajax","Delete","console","log","_addEventListeners","prototype","self","table","document","querySelector","rows","row","l","cells","length","cl","children","aElement","setAttribute","rowIndex","addEventListener","_deleteService","bind","e","srcElement","parentElement","preventDefault","target","classList","add","remove","call","methodname","args","rid","getAttribute","done","response","deleteRow","fail","reason"],"mappings":"mnCAwBAA,OAAM,oCAAC,CACH,WADG,CAAD,CAGH,SAAUC,CAAV,CAAgB,CACf,aAEA,GAAIC,CAAAA,CAAM,CAAG,UAAY,CACrBC,OAAO,CAACC,GAAR,CAAY,QAAZ,EACA,KAAKC,kBAAL,EACH,CAHD,CAOAH,CAAM,CAACI,SAAP,CAAiBD,kBAAjB,CAAsC,UAAY,IACxCE,CAAAA,CAAI,CAAG,IADiC,CAExCC,CAAK,CAAGC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAFgC,8BAG5BF,CAAK,CAACG,IAHsB,QAG9C,2BAA8B,IAAnBC,CAAAA,CAAmB,SACpBC,CAAC,CAAGD,CAAG,CAACE,KAAJ,CAAUC,MAAV,CAAmB,CADH,CAEpBC,CAAE,CAAIJ,CAAG,CAACE,KAAJ,CAAUD,CAAV,CAAD,CAAeI,QAAf,CAAwBF,MAAxB,CAAiC,CAFlB,CAGpBG,CAAQ,CAAGN,CAAG,CAACE,KAAJ,CAAUD,CAAV,EAAaI,QAAb,CAAsBD,CAAtB,CAHS,CAI1Bb,OAAO,CAACC,GAAR,CAAYc,CAAZ,EACAA,CAAQ,CAACC,YAAT,CAAsB,gBAAtB,CAAwCP,CAAG,CAACQ,QAA5C,EACAF,CAAQ,CAACG,gBAAT,CAA0B,OAA1B,CAAmCd,CAAI,CAACe,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAAnC,CACH,CAV6C,+BAWjD,CAXD,CAaArB,CAAM,CAACI,SAAP,CAAiBgB,cAAjB,CAAkC,SAAUE,CAAV,CAAa,CAC3C,GAAMjB,CAAAA,CAAI,CAAG,IAAb,CACAJ,OAAO,CAACC,GAAR,CAAYoB,CAAZ,EACDrB,OAAO,CAACC,GAAR,CAAYoB,CAAC,CAACC,UAAF,CAAaC,aAAb,CAA2BA,aAA3B,CAAyCA,aAArD,EACCnB,CAAI,CAACa,QAAL,CAAgBI,CAAC,CAACC,UAAF,CAAaC,aAAb,CAA2BA,aAA3B,CAAyCA,aAAzC,CAAuDN,QAAvE,CACAjB,OAAO,CAACC,GAAR,CAAYG,CAAZ,EACAiB,CAAC,CAACG,cAAF,GAEAxB,OAAO,CAACC,GAAR,CAAYoB,CAAZ,EAEAA,CAAC,CAACI,MAAF,CAASC,SAAT,CAAmBC,GAAnB,CAAuB,UAAvB,EACArB,QAAQ,CAACC,aAAT,CAAuB,cAAvB,EAAuCmB,SAAvC,CAAiDE,MAAjD,CAAwD,UAAxD,EACA9B,CAAI,CAAC+B,IAAL,CAAU,CAAC,CACPC,UAAU,CAAE,0CADL,CAEPC,IAAI,CAAE,CACFC,GAAG,CAAEX,CAAC,CAACI,MAAF,CAASQ,YAAT,CAAsB,gBAAtB,CADH,CAFC,CAKPC,IAAI,CAAE,cAAUC,CAAV,CAAoB,CACtBnC,OAAO,CAACC,GAAR,CAAYkC,CAAZ,EAEA7B,QAAQ,CAACC,aAAT,CAAuB,OAAvB,EAAgC6B,SAAhC,CAA0ChC,CAAI,CAACa,QAA/C,CAEH,CAVM,CAWPoB,IAAI,CAAE,cAAUC,CAAV,CAAkB,CACpBtC,OAAO,CAACC,GAAR,CAAYqC,CAAZ,CACH,CAbM,CAAD,CAAV,CAgBH,CA5BD,CAgCA,MAAOvC,CAAAA,CAEV,CA5DK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n *\n *\n * @package    report\n * @subpackage reflectionexporter\n * @copyright  2022 Veronica Bermegui\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([\n    'core/ajax',\n\n], function (Ajax) {\n    \"use strict\";\n\n    var Delete = function () {\n        console.log('Delete');\n        this._addEventListeners();\n    }\n\n\n\n    Delete.prototype._addEventListeners = function () {\n        const self = this;\n        const table = document.querySelector(\"tbody\");\n        for (const row of table.rows) {\n            const l = row.cells.length - 1;\n            const cl = (row.cells[l]).children.length - 2;\n            const aElement = row.cells[l].children[cl];\n            console.log(aElement);\n            aElement.setAttribute('data-row-index', row.rowIndex);\n            aElement.addEventListener('click', self._deleteService.bind(this));\n        }\n    }\n\n    Delete.prototype._deleteService = function (e) {\n        const self = this;\n        console.log(e);\n       console.log(e.srcElement.parentElement.parentElement.parentElement);\n        self.rowIndex = e.srcElement.parentElement.parentElement.parentElement.rowIndex;\n        console.log(self);\n        e.preventDefault();\n        // Call the service\n        console.log(e);\n        //Hide the bin and show the processing\n        e.target.classList.add('deleting');\n        document.querySelector('div.deleting').classList.remove('deleting');\n        Ajax.call([{\n            methodname: \"report_reflectionexporter_delete_process\",\n            args: {\n                rid: e.target.getAttribute('data-to-delete')\n            },\n            done: function (response) {\n                console.log(response);\n                // remove table row\n                document.querySelector(\"tbody\").deleteRow(self.rowIndex);\n\n            },\n            fail: function (reason) {\n                console.log(reason);\n            }\n        }]);\n\n    }\n\n\n\n    return Delete;\n\n});"],"file":"delete.min.js"}