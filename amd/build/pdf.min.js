function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e3){didErr=!0,err=_e3},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var root,factory;root=window,factory=function(){return function(){var __webpack_modules__=[function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"addLinkAttributes",{enumerable:!0,get:function(){return _display_utils.addLinkAttributes}}),Object.defineProperty(exports,"getFilenameFromUrl",{enumerable:!0,get:function(){return _display_utils.getFilenameFromUrl}}),Object.defineProperty(exports,"LinkTarget",{enumerable:!0,get:function(){return _display_utils.LinkTarget}}),Object.defineProperty(exports,"loadScript",{enumerable:!0,get:function(){return _display_utils.loadScript}}),Object.defineProperty(exports,"PDFDateString",{enumerable:!0,get:function(){return _display_utils.PDFDateString}}),Object.defineProperty(exports,"RenderingCancelledException",{enumerable:!0,get:function(){return _display_utils.RenderingCancelledException}}),Object.defineProperty(exports,"build",{enumerable:!0,get:function(){return _api.build}}),Object.defineProperty(exports,"getDocument",{enumerable:!0,get:function(){return _api.getDocument}}),Object.defineProperty(exports,"LoopbackPort",{enumerable:!0,get:function(){return _api.LoopbackPort}}),Object.defineProperty(exports,"PDFDataRangeTransport",{enumerable:!0,get:function(){return _api.PDFDataRangeTransport}}),Object.defineProperty(exports,"PDFWorker",{enumerable:!0,get:function(){return _api.PDFWorker}}),Object.defineProperty(exports,"version",{enumerable:!0,get:function(){return _api.version}}),Object.defineProperty(exports,"CMapCompressionType",{enumerable:!0,get:function(){return _util.CMapCompressionType}}),Object.defineProperty(exports,"createObjectURL",{enumerable:!0,get:function(){return _util.createObjectURL}}),Object.defineProperty(exports,"createPromiseCapability",{enumerable:!0,get:function(){return _util.createPromiseCapability}}),Object.defineProperty(exports,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return _util.createValidAbsoluteUrl}}),Object.defineProperty(exports,"InvalidPDFException",{enumerable:!0,get:function(){return _util.InvalidPDFException}}),Object.defineProperty(exports,"MissingPDFException",{enumerable:!0,get:function(){return _util.MissingPDFException}}),Object.defineProperty(exports,"OPS",{enumerable:!0,get:function(){return _util.OPS}}),Object.defineProperty(exports,"PasswordResponses",{enumerable:!0,get:function(){return _util.PasswordResponses}}),Object.defineProperty(exports,"PermissionFlag",{enumerable:!0,get:function(){return _util.PermissionFlag}}),Object.defineProperty(exports,"removeNullCharacters",{enumerable:!0,get:function(){return _util.removeNullCharacters}}),Object.defineProperty(exports,"shadow",{enumerable:!0,get:function(){return _util.shadow}}),Object.defineProperty(exports,"UnexpectedResponseException",{enumerable:!0,get:function(){return _util.UnexpectedResponseException}}),Object.defineProperty(exports,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return _util.UNSUPPORTED_FEATURES}}),Object.defineProperty(exports,"Util",{enumerable:!0,get:function(){return _util.Util}}),Object.defineProperty(exports,"VerbosityLevel",{enumerable:!0,get:function(){return _util.VerbosityLevel}}),Object.defineProperty(exports,"AnnotationLayer",{enumerable:!0,get:function(){return _annotation_layer.AnnotationLayer}}),Object.defineProperty(exports,"apiCompatibilityParams",{enumerable:!0,get:function(){return _api_compatibility.apiCompatibilityParams}}),Object.defineProperty(exports,"GlobalWorkerOptions",{enumerable:!0,get:function(){return _worker_options.GlobalWorkerOptions}}),Object.defineProperty(exports,"renderTextLayer",{enumerable:!0,get:function(){return _text_layer.renderTextLayer}}),Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _svg.SVGGraphics}});var _display_utils=__w_pdfjs_require__(1),_api=__w_pdfjs_require__(5),_util=__w_pdfjs_require__(2),_annotation_layer=__w_pdfjs_require__(19),_api_compatibility=__w_pdfjs_require__(9),_worker_options=__w_pdfjs_require__(12),_text_layer=__w_pdfjs_require__(21),_svg=__w_pdfjs_require__(22);if(__w_pdfjs_require__(4).isNodeJS){var PDFNodeStream=__w_pdfjs_require__(23).PDFNodeStream;(0,_api.setPDFNetworkStreamFactory)((function(params){return new PDFNodeStream(params)}))}else{var PDFFetchStream,PDFNetworkStream=__w_pdfjs_require__(26).PDFNetworkStream;(0,_display_utils.isFetchSupported)()&&(PDFFetchStream=__w_pdfjs_require__(27).PDFFetchStream),(0,_api.setPDFNetworkStreamFactory)((function(params){return PDFFetchStream&&(0,_display_utils.isValidFetchUrl)(params.url)?new PDFFetchStream(params):new PDFNetworkStream(params)}))}},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.addLinkAttributes=function(link){var _ref7=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},url=_ref7.url,target=_ref7.target,rel=_ref7.rel,_ref7$enabled=_ref7.enabled,enabled=void 0===_ref7$enabled||_ref7$enabled;(0,_util.assert)(url&&"string"==typeof url,'addLinkAttributes: A valid "url" parameter must provided.');var urlNullRemoved=(0,_util.removeNullCharacters)(url);enabled?link.href=link.title=urlNullRemoved:(link.href="",link.title="Disabled: ".concat(urlNullRemoved),link.onclick=function(){return!1});var targetStr="";switch(target){case LinkTarget.NONE:break;case LinkTarget.SELF:targetStr="_self";break;case LinkTarget.BLANK:targetStr="_blank";break;case LinkTarget.PARENT:targetStr="_parent";break;case LinkTarget.TOP:targetStr="_top"}link.target=targetStr,link.rel="string"==typeof rel?rel:"noopener noreferrer nofollow"},exports.deprecated=function(details){console.log("Deprecated API usage: "+details)},exports.getFilenameFromUrl=function(url){var anchor=url.indexOf("#"),query=url.indexOf("?"),end=Math.min(anchor>0?anchor:url.length,query>0?query:url.length);return url.substring(url.lastIndexOf("/",end)+1,end)},exports.isFetchSupported=isFetchSupported,exports.isValidFetchUrl=isValidFetchUrl,exports.loadScript=function(src){var removeScriptElement=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(resolve,reject){var script=document.createElement("script");script.src=src,script.onload=function(evt){removeScriptElement&&script.remove(),resolve(evt)},script.onerror=function(){reject(new Error("Cannot load script at: ".concat(script.src)))},(document.head||document.documentElement).appendChild(script)}))},exports.StatTimer=exports.RenderingCancelledException=exports.PDFDateString=exports.PageViewport=exports.LinkTarget=exports.DOMSVGFactory=exports.DOMCMapReaderFactory=exports.DOMCanvasFactory=exports.DEFAULT_LINK_REL=exports.BaseCMapReaderFactory=exports.BaseCanvasFactory=void 0;var _util=__w_pdfjs_require__(2);exports.DEFAULT_LINK_REL="noopener noreferrer nofollow";var SVG_NS="http://www.w3.org/2000/svg",BaseCanvasFactory=function(){function BaseCanvasFactory(){_classCallCheck(this,BaseCanvasFactory),this.constructor===BaseCanvasFactory&&(0,_util.unreachable)("Cannot initialize BaseCanvasFactory.")}return _createClass(BaseCanvasFactory,[{key:"create",value:function(width,height){(0,_util.unreachable)("Abstract method `create` called.")}},{key:"reset",value:function(canvasAndContext,width,height){if(!canvasAndContext.canvas)throw new Error("Canvas is not specified");if(width<=0||height<=0)throw new Error("Invalid canvas size");canvasAndContext.canvas.width=width,canvasAndContext.canvas.height=height}},{key:"destroy",value:function(canvasAndContext){if(!canvasAndContext.canvas)throw new Error("Canvas is not specified");canvasAndContext.canvas.width=0,canvasAndContext.canvas.height=0,canvasAndContext.canvas=null,canvasAndContext.context=null}}]),BaseCanvasFactory}();exports.BaseCanvasFactory=BaseCanvasFactory;var DOMCanvasFactory=function(_BaseCanvasFactory){_inherits(DOMCanvasFactory,_BaseCanvasFactory);var _super=_createSuper(DOMCanvasFactory);function DOMCanvasFactory(){var _this,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$ownerDocument=_ref.ownerDocument,ownerDocument=void 0===_ref$ownerDocument?globalThis.document:_ref$ownerDocument;return _classCallCheck(this,DOMCanvasFactory),(_this=_super.call(this))._document=ownerDocument,_this}return _createClass(DOMCanvasFactory,[{key:"create",value:function(width,height){if(width<=0||height<=0)throw new Error("Invalid canvas size");var canvas=this._document.createElement("canvas"),context=canvas.getContext("2d");return canvas.width=width,canvas.height=height,{canvas:canvas,context:context}}}]),DOMCanvasFactory}(BaseCanvasFactory);exports.DOMCanvasFactory=DOMCanvasFactory;var BaseCMapReaderFactory=function(){function BaseCMapReaderFactory(_ref2){var _ref2$baseUrl=_ref2.baseUrl,baseUrl=void 0===_ref2$baseUrl?null:_ref2$baseUrl,_ref2$isCompressed=_ref2.isCompressed,isCompressed=void 0!==_ref2$isCompressed&&_ref2$isCompressed;_classCallCheck(this,BaseCMapReaderFactory),this.constructor===BaseCMapReaderFactory&&(0,_util.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=baseUrl,this.isCompressed=isCompressed}var _fetch;return _createClass(BaseCMapReaderFactory,[{key:"fetch",value:(_fetch=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref3){var name,url,compressionType,_this2=this;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(name=_ref3.name,this.baseUrl){_context.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(name){_context.next=5;break}throw new Error("CMap name must be specified.");case 5:return url=this.baseUrl+name+(this.isCompressed?".bcmap":""),compressionType=this.isCompressed?_util.CMapCompressionType.BINARY:_util.CMapCompressionType.NONE,_context.abrupt("return",this._fetchData(url,compressionType).catch((function(reason){throw new Error("Unable to load ".concat(_this2.isCompressed?"binary ":"","CMap at: ").concat(url))})));case 8:case"end":return _context.stop()}}),_callee,this)}))),function(_x){return _fetch.apply(this,arguments)})},{key:"_fetchData",value:function(url,compressionType){(0,_util.unreachable)("Abstract method `_fetchData` called.")}}]),BaseCMapReaderFactory}();exports.BaseCMapReaderFactory=BaseCMapReaderFactory;var DOMCMapReaderFactory=function(_BaseCMapReaderFactor){_inherits(DOMCMapReaderFactory,_BaseCMapReaderFactor);var _super2=_createSuper(DOMCMapReaderFactory);function DOMCMapReaderFactory(){return _classCallCheck(this,DOMCMapReaderFactory),_super2.apply(this,arguments)}return _createClass(DOMCMapReaderFactory,[{key:"_fetchData",value:function(url,compressionType){var _ref4,_this3=this;return isFetchSupported()&&isValidFetchUrl(url,document.baseURI)?fetch(url).then((_ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(response){var cMapData;return regeneratorRuntime.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(response.ok){_context2.next=2;break}throw new Error(response.statusText);case 2:if(!_this3.isCompressed){_context2.next=10;break}return _context2.t0=Uint8Array,_context2.next=6,response.arrayBuffer();case 6:_context2.t1=_context2.sent,cMapData=new _context2.t0(_context2.t1),_context2.next=15;break;case 10:return _context2.t2=_util.stringToBytes,_context2.next=13,response.text();case 13:_context2.t3=_context2.sent,cMapData=(0,_context2.t2)(_context2.t3);case 15:return _context2.abrupt("return",{cMapData:cMapData,compressionType:compressionType});case 16:case"end":return _context2.stop()}}),_callee2)}))),function(_x2){return _ref4.apply(this,arguments)})):new Promise((function(resolve,reject){var request=new XMLHttpRequest;request.open("GET",url,!0),_this3.isCompressed&&(request.responseType="arraybuffer"),request.onreadystatechange=function(){if(request.readyState===XMLHttpRequest.DONE){var cMapData;if((200===request.status||0===request.status)&&(_this3.isCompressed&&request.response?cMapData=new Uint8Array(request.response):!_this3.isCompressed&&request.responseText&&(cMapData=(0,_util.stringToBytes)(request.responseText)),cMapData))return void resolve({cMapData:cMapData,compressionType:compressionType});reject(new Error(request.statusText))}},request.send(null)}))}}]),DOMCMapReaderFactory}(BaseCMapReaderFactory);exports.DOMCMapReaderFactory=DOMCMapReaderFactory;var DOMSVGFactory=function(){function DOMSVGFactory(){_classCallCheck(this,DOMSVGFactory)}return _createClass(DOMSVGFactory,[{key:"create",value:function(width,height){(0,_util.assert)(width>0&&height>0,"Invalid SVG dimensions");var svg=document.createElementNS(SVG_NS,"svg:svg");return svg.setAttribute("version","1.1"),svg.setAttribute("width",width+"px"),svg.setAttribute("height",height+"px"),svg.setAttribute("preserveAspectRatio","none"),svg.setAttribute("viewBox","0 0 "+width+" "+height),svg}},{key:"createElement",value:function(type){return(0,_util.assert)("string"==typeof type,"Invalid SVG element type"),document.createElementNS(SVG_NS,type)}}]),DOMSVGFactory}();exports.DOMSVGFactory=DOMSVGFactory;var PageViewport=function(){function PageViewport(_ref5){var viewBox=_ref5.viewBox,scale=_ref5.scale,rotation=_ref5.rotation,_ref5$offsetX=_ref5.offsetX,offsetX=void 0===_ref5$offsetX?0:_ref5$offsetX,_ref5$offsetY=_ref5.offsetY,offsetY=void 0===_ref5$offsetY?0:_ref5$offsetY,_ref5$dontFlip=_ref5.dontFlip,dontFlip=void 0!==_ref5$dontFlip&&_ref5$dontFlip;_classCallCheck(this,PageViewport),this.viewBox=viewBox,this.scale=scale,this.rotation=rotation,this.offsetX=offsetX,this.offsetY=offsetY;var rotateA,rotateB,rotateC,rotateD,offsetCanvasX,offsetCanvasY,width,height,centerX=(viewBox[2]+viewBox[0])/2,centerY=(viewBox[3]+viewBox[1])/2;switch(rotation=(rotation%=360)<0?rotation+360:rotation){case 180:rotateA=-1,rotateB=0,rotateC=0,rotateD=1;break;case 90:rotateA=0,rotateB=1,rotateC=1,rotateD=0;break;case 270:rotateA=0,rotateB=-1,rotateC=-1,rotateD=0;break;case 0:rotateA=1,rotateB=0,rotateC=0,rotateD=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}dontFlip&&(rotateC=-rotateC,rotateD=-rotateD),0===rotateA?(offsetCanvasX=Math.abs(centerY-viewBox[1])*scale+offsetX,offsetCanvasY=Math.abs(centerX-viewBox[0])*scale+offsetY,width=Math.abs(viewBox[3]-viewBox[1])*scale,height=Math.abs(viewBox[2]-viewBox[0])*scale):(offsetCanvasX=Math.abs(centerX-viewBox[0])*scale+offsetX,offsetCanvasY=Math.abs(centerY-viewBox[1])*scale+offsetY,width=Math.abs(viewBox[2]-viewBox[0])*scale,height=Math.abs(viewBox[3]-viewBox[1])*scale),this.transform=[rotateA*scale,rotateB*scale,rotateC*scale,rotateD*scale,offsetCanvasX-rotateA*scale*centerX-rotateC*scale*centerY,offsetCanvasY-rotateB*scale*centerX-rotateD*scale*centerY],this.width=width,this.height=height}return _createClass(PageViewport,[{key:"clone",value:function(){var _ref6=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref6$scale=_ref6.scale,scale=void 0===_ref6$scale?this.scale:_ref6$scale,_ref6$rotation=_ref6.rotation,rotation=void 0===_ref6$rotation?this.rotation:_ref6$rotation,_ref6$offsetX=_ref6.offsetX,offsetX=void 0===_ref6$offsetX?this.offsetX:_ref6$offsetX,_ref6$offsetY=_ref6.offsetY,offsetY=void 0===_ref6$offsetY?this.offsetY:_ref6$offsetY,_ref6$dontFlip=_ref6.dontFlip,dontFlip=void 0!==_ref6$dontFlip&&_ref6$dontFlip;return new PageViewport({viewBox:this.viewBox.slice(),scale:scale,rotation:rotation,offsetX:offsetX,offsetY:offsetY,dontFlip:dontFlip})}},{key:"convertToViewportPoint",value:function(x,y){return _util.Util.applyTransform([x,y],this.transform)}},{key:"convertToViewportRectangle",value:function(rect){var topLeft=_util.Util.applyTransform([rect[0],rect[1]],this.transform),bottomRight=_util.Util.applyTransform([rect[2],rect[3]],this.transform);return[topLeft[0],topLeft[1],bottomRight[0],bottomRight[1]]}},{key:"convertToPdfPoint",value:function(x,y){return _util.Util.applyInverseTransform([x,y],this.transform)}}]),PageViewport}();exports.PageViewport=PageViewport;var RenderingCancelledException=function(_util$BaseException){_inherits(RenderingCancelledException,_util$BaseException);var _super3=_createSuper(RenderingCancelledException);function RenderingCancelledException(msg,type){var _this4;return _classCallCheck(this,RenderingCancelledException),(_this4=_super3.call(this,msg)).type=type,_this4}return _createClass(RenderingCancelledException)}(_util.BaseException);exports.RenderingCancelledException=RenderingCancelledException;var LinkTarget={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};exports.LinkTarget=LinkTarget;var pdfDateStringRegex,StatTimer=function(){function StatTimer(){_classCallCheck(this,StatTimer),this.started=Object.create(null),this.times=[]}return _createClass(StatTimer,[{key:"time",value:function(name){name in this.started&&(0,_util.warn)("Timer is already running for ".concat(name)),this.started[name]=Date.now()}},{key:"timeEnd",value:function(name){name in this.started||(0,_util.warn)("Timer has not been started for ".concat(name)),this.times.push({name:name,start:this.started[name],end:Date.now()}),delete this.started[name]}},{key:"toString",value:function(){var _step,outBuf=[],longest=0,_iterator=_createForOfIteratorHelper(this.times);try{for(_iterator.s();!(_step=_iterator.n()).done;){var name=_step.value.name;name.length>longest&&(longest=name.length)}}catch(err){_iterator.e(err)}finally{_iterator.f()}var _step2,_iterator2=_createForOfIteratorHelper(this.times);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _time=_step2.value,duration=_time.end-_time.start;outBuf.push("".concat(_time.name.padEnd(longest)," ").concat(duration,"ms\n"))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return outBuf.join("")}}]),StatTimer}();function isFetchSupported(){return"undefined"!=typeof fetch&&"undefined"!=typeof Response&&"body"in Response.prototype&&"undefined"!=typeof ReadableStream}function isValidFetchUrl(url,baseUrl){try{var protocol=(baseUrl?new URL(url,baseUrl):new URL(url)).protocol;return"http:"===protocol||"https:"===protocol}catch(ex){return!1}}exports.StatTimer=StatTimer;var PDFDateString=function(){function PDFDateString(){_classCallCheck(this,PDFDateString)}return _createClass(PDFDateString,null,[{key:"toDateObject",value:function(input){if(!input||!(0,_util.isString)(input))return null;pdfDateStringRegex||(pdfDateStringRegex=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var matches=pdfDateStringRegex.exec(input);if(!matches)return null;var year=parseInt(matches[1],10),month=parseInt(matches[2],10);month=month>=1&&month<=12?month-1:0;var day=parseInt(matches[3],10);day=day>=1&&day<=31?day:1;var hour=parseInt(matches[4],10);hour=hour>=0&&hour<=23?hour:0;var minute=parseInt(matches[5],10);minute=minute>=0&&minute<=59?minute:0;var second=parseInt(matches[6],10);second=second>=0&&second<=59?second:0;var universalTimeRelation=matches[7]||"Z",offsetHour=parseInt(matches[8],10);offsetHour=offsetHour>=0&&offsetHour<=23?offsetHour:0;var offsetMinute=parseInt(matches[9],10)||0;return offsetMinute=offsetMinute>=0&&offsetMinute<=59?offsetMinute:0,"-"===universalTimeRelation?(hour+=offsetHour,minute+=offsetMinute):"+"===universalTimeRelation&&(hour-=offsetHour,minute-=offsetMinute),new Date(Date.UTC(year,month,day,hour,minute,second))}}]),PDFDateString}();exports.PDFDateString=PDFDateString},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.arrayByteLength=arrayByteLength,exports.arraysToBytes=function(arr){var length=arr.length;if(1===length&&arr[0]instanceof Uint8Array)return arr[0];for(var resultLength=0,i=0;i<length;i++)resultLength+=arrayByteLength(arr[i]);for(var pos=0,data=new Uint8Array(resultLength),_i=0;_i<length;_i++){var item=arr[_i];item instanceof Uint8Array||(item="string"==typeof item?stringToBytes(item):new Uint8Array(item));var itemLength=item.byteLength;data.set(item,pos),pos+=itemLength}return data},exports.assert=assert,exports.bytesToString=function(bytes){assert(null!==bytes&&"object"===_typeof(bytes)&&void 0!==bytes.length,"Invalid argument for bytesToString");var length=bytes.length;if(length<8192)return String.fromCharCode.apply(null,bytes);for(var strBuf=[],i=0;i<length;i+=8192){var chunkEnd=Math.min(i+8192,length),chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk))}return strBuf.join("")},exports.createPromiseCapability=function(){var capability=Object.create(null),isSettled=!1;return Object.defineProperty(capability,"settled",{get:function(){return isSettled}}),capability.promise=new Promise((function(resolve,reject){capability.resolve=function(data){isSettled=!0,resolve(data)},capability.reject=function(reason){isSettled=!0,reject(reason)}})),capability},exports.createValidAbsoluteUrl=function(url,baseUrl){if(!url)return null;try{var absoluteUrl=baseUrl?new URL(url,baseUrl):new URL(url);if(function(url){if(!url)return!1;switch(url.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(absoluteUrl))return absoluteUrl}catch(ex){}return null},exports.encodeToXmlString=function(str){for(var buffer=[],start=0,i=0,ii=str.length;i<ii;i++){var char=str.codePointAt(i);if(32<=char&&char<=126){var entity=XMLEntities[char];entity&&(start<i&&buffer.push(str.substring(start,i)),buffer.push(entity),start=i+1)}else start<i&&buffer.push(str.substring(start,i)),buffer.push("&#x".concat(char.toString(16).toUpperCase(),";")),char>55295&&(char<57344||char>65533)&&i++,start=i+1}return 0===buffer.length?str:(start<str.length&&buffer.push(str.substring(start,str.length)),buffer.join(""))},exports.escapeString=function(str){return str.replace(/([()\\\n\r])/g,(function(match){return"\n"===match?"\\n":"\r"===match?"\\r":"\\".concat(match)}))},exports.getModificationDate=function(){var date=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,buffer=[date.getUTCFullYear().toString(),(date.getUTCMonth()+1).toString().padStart(2,"0"),date.getUTCDate().toString().padStart(2,"0"),date.getUTCHours().toString().padStart(2,"0"),date.getUTCMinutes().toString().padStart(2,"0"),date.getUTCSeconds().toString().padStart(2,"0")];return buffer.join("")},exports.getVerbosityLevel=function(){return verbosity},exports.info=function(msg){verbosity>=VerbosityLevel.INFOS&&console.log("Info: ".concat(msg))},exports.isArrayBuffer=function(v){return"object"===_typeof(v)&&null!==v&&void 0!==v.byteLength},exports.isArrayEqual=function(arr1,arr2){return arr1.length===arr2.length&&arr1.every((function(element,index){return element===arr2[index]}))},exports.isAscii=function(str){return/^[\x00-\x7F]*$/.test(str)},exports.isBool=function(v){return"boolean"==typeof v},exports.isNum=function(v){return"number"==typeof v},exports.isSameOrigin=function(baseUrl,otherUrl){var base;try{if(!(base=new URL(baseUrl)).origin||"null"===base.origin)return!1}catch(e){return!1}var other=new URL(otherUrl,base);return base.origin===other.origin},exports.isString=function(v){return"string"==typeof v},exports.objectFromEntries=function(iterable){return Object.assign(Object.create(null),Object.fromEntries(iterable))},exports.objectSize=function(obj){return Object.keys(obj).length},exports.removeNullCharacters=function(str){return"string"!=typeof str?(warn("The argument for removeNullCharacters must be a string."),str):str.replace(NullCharactersRegExp,"")},exports.setVerbosityLevel=function(level){Number.isInteger(level)&&(verbosity=level)},exports.shadow=shadow,exports.string32=function(value){return String.fromCharCode(value>>24&255,value>>16&255,value>>8&255,255&value)},exports.stringToBytes=stringToBytes,exports.stringToPDFString=function(str){var length=str.length,strBuf=[];if("þ"===str[0]&&"ÿ"===str[1])for(var i=2;i<length;i+=2)strBuf.push(String.fromCharCode(str.charCodeAt(i)<<8|str.charCodeAt(i+1)));else if("ÿ"===str[0]&&"þ"===str[1])for(var _i2=2;_i2<length;_i2+=2)strBuf.push(String.fromCharCode(str.charCodeAt(_i2+1)<<8|str.charCodeAt(_i2)));else for(var _i3=0;_i3<length;++_i3){var code=PDFStringTranslateTable[str.charCodeAt(_i3)];strBuf.push(code?String.fromCharCode(code):str.charAt(_i3))}return strBuf.join("")},exports.stringToUTF16BEString=function(str){for(var buf=["þÿ"],i=0,ii=str.length;i<ii;i++){var char=str.charCodeAt(i);buf.push(String.fromCharCode(char>>8&255)),buf.push(String.fromCharCode(255&char))}return buf.join("")},exports.stringToUTF8String=function(str){return decodeURIComponent(escape(str))},exports.unreachable=unreachable,exports.utf8StringToString=function(str){return unescape(encodeURIComponent(str))},exports.warn=warn,exports.VerbosityLevel=exports.Util=exports.UNSUPPORTED_FEATURES=exports.UnknownErrorException=exports.UnexpectedResponseException=exports.TextRenderingMode=exports.StreamType=exports.PermissionFlag=exports.PasswordResponses=exports.PasswordException=exports.PageActionEventType=exports.OPS=exports.MissingPDFException=exports.IsLittleEndianCached=exports.IsEvalSupportedCached=exports.InvalidPDFException=exports.ImageKind=exports.IDENTITY_MATRIX=exports.FormatError=exports.FontType=exports.FONT_IDENTITY_MATRIX=exports.DocumentActionEventType=exports.createObjectURL=exports.CMapCompressionType=exports.BaseException=exports.AnnotationType=exports.AnnotationStateModelType=exports.AnnotationReviewState=exports.AnnotationReplyType=exports.AnnotationMarkedState=exports.AnnotationFlag=exports.AnnotationFieldFlag=exports.AnnotationBorderStyleType=exports.AnnotationActionEventType=exports.AbortException=void 0,__w_pdfjs_require__(3),exports.IDENTITY_MATRIX=[1,0,0,1,0,0],exports.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],exports.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},exports.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},exports.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},exports.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},exports.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},exports.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},exports.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},exports.AnnotationReplyType={GROUP:"Group",REPLY:"R"},exports.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},exports.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},exports.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},exports.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},exports.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},exports.PageActionEventType={O:"PageOpen",C:"PageClose"},exports.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},exports.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};var VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5};exports.VerbosityLevel=VerbosityLevel,exports.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},exports.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},exports.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent"},exports.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var verbosity=VerbosityLevel.WARNINGS;function warn(msg){verbosity>=VerbosityLevel.WARNINGS&&console.log("Warning: ".concat(msg))}function unreachable(msg){throw new Error(msg)}function assert(cond,msg){cond||unreachable(msg)}function shadow(obj,prop,value){return Object.defineProperty(obj,prop,{value:value,enumerable:!0,configurable:!0,writable:!1}),value}var BaseException=function(){function BaseException(message){this.constructor===BaseException&&unreachable("Cannot initialize BaseException."),this.message=message,this.name=this.constructor.name}return BaseException.prototype=new Error,BaseException.constructor=BaseException,BaseException}();exports.BaseException=BaseException;var PasswordException=function(_BaseException){_inherits(PasswordException,_BaseException);var _super4=_createSuper(PasswordException);function PasswordException(msg,code){var _this5;return _classCallCheck(this,PasswordException),(_this5=_super4.call(this,msg)).code=code,_this5}return _createClass(PasswordException)}(BaseException);exports.PasswordException=PasswordException;var UnknownErrorException=function(_BaseException2){_inherits(UnknownErrorException,_BaseException2);var _super5=_createSuper(UnknownErrorException);function UnknownErrorException(msg,details){var _this6;return _classCallCheck(this,UnknownErrorException),(_this6=_super5.call(this,msg)).details=details,_this6}return _createClass(UnknownErrorException)}(BaseException);exports.UnknownErrorException=UnknownErrorException;var InvalidPDFException=function(_BaseException3){_inherits(InvalidPDFException,_BaseException3);var _super6=_createSuper(InvalidPDFException);function InvalidPDFException(){return _classCallCheck(this,InvalidPDFException),_super6.apply(this,arguments)}return _createClass(InvalidPDFException)}(BaseException);exports.InvalidPDFException=InvalidPDFException;var MissingPDFException=function(_BaseException4){_inherits(MissingPDFException,_BaseException4);var _super7=_createSuper(MissingPDFException);function MissingPDFException(){return _classCallCheck(this,MissingPDFException),_super7.apply(this,arguments)}return _createClass(MissingPDFException)}(BaseException);exports.MissingPDFException=MissingPDFException;var UnexpectedResponseException=function(_BaseException5){_inherits(UnexpectedResponseException,_BaseException5);var _super8=_createSuper(UnexpectedResponseException);function UnexpectedResponseException(msg,status){var _this7;return _classCallCheck(this,UnexpectedResponseException),(_this7=_super8.call(this,msg)).status=status,_this7}return _createClass(UnexpectedResponseException)}(BaseException);exports.UnexpectedResponseException=UnexpectedResponseException;var FormatError=function(_BaseException6){_inherits(FormatError,_BaseException6);var _super9=_createSuper(FormatError);function FormatError(){return _classCallCheck(this,FormatError),_super9.apply(this,arguments)}return _createClass(FormatError)}(BaseException);exports.FormatError=FormatError;var AbortException=function(_BaseException7){_inherits(AbortException,_BaseException7);var _super10=_createSuper(AbortException);function AbortException(){return _classCallCheck(this,AbortException),_super10.apply(this,arguments)}return _createClass(AbortException)}(BaseException);exports.AbortException=AbortException;var NullCharactersRegExp=/\x00/g;function stringToBytes(str){assert("string"==typeof str,"Invalid argument for stringToBytes");for(var length=str.length,bytes=new Uint8Array(length),i=0;i<length;++i)bytes[i]=255&str.charCodeAt(i);return bytes}function arrayByteLength(arr){return void 0!==arr.length?arr.length:(assert(void 0!==arr.byteLength,"arrayByteLength - invalid argument."),arr.byteLength)}var IsLittleEndianCached={get value(){return shadow(this,"value",((buffer8=new Uint8Array(4))[0]=1,1===new Uint32Array(buffer8.buffer,0,1)[0]));var buffer8}};exports.IsLittleEndianCached=IsLittleEndianCached;var IsEvalSupportedCached={get value(){return shadow(this,"value",function(){try{return new Function(""),!0}catch(e){return!1}}())}};exports.IsEvalSupportedCached=IsEvalSupportedCached;var hexNumbers=_toConsumableArray(Array(256).keys()).map((function(n){return n.toString(16).padStart(2,"0")})),Util=function(){function Util(){_classCallCheck(this,Util)}return _createClass(Util,null,[{key:"makeHexColor",value:function(r,g,b){return"#".concat(hexNumbers[r]).concat(hexNumbers[g]).concat(hexNumbers[b])}},{key:"transform",value:function(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]]}},{key:"applyTransform",value:function(p,m){return[p[0]*m[0]+p[1]*m[2]+m[4],p[0]*m[1]+p[1]*m[3]+m[5]]}},{key:"applyInverseTransform",value:function(p,m){var d=m[0]*m[3]-m[1]*m[2];return[(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d,(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d]}},{key:"getAxialAlignedBoundingBox",value:function(r,m){var p1=Util.applyTransform(r,m),p2=Util.applyTransform(r.slice(2,4),m),p3=Util.applyTransform([r[0],r[3]],m),p4=Util.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])]}},{key:"inverseTransform",value:function(m){var d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d]}},{key:"apply3dTransform",value:function(m,v){return[m[0]*v[0]+m[1]*v[1]+m[2]*v[2],m[3]*v[0]+m[4]*v[1]+m[5]*v[2],m[6]*v[0]+m[7]*v[1]+m[8]*v[2]]}},{key:"singularValueDecompose2dScale",value:function(m){var transpose=[m[0],m[2],m[1],m[3]],a=m[0]*transpose[0]+m[1]*transpose[2],b=m[0]*transpose[1]+m[1]*transpose[3],c=m[2]*transpose[0]+m[3]*transpose[2],d=m[2]*transpose[1]+m[3]*transpose[3],first=(a+d)/2,second=Math.sqrt((a+d)*(a+d)-4*(a*d-c*b))/2,sx=first+second||1,sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)]}},{key:"normalizeRect",value:function(rect){var r=rect.slice(0);return rect[0]>rect[2]&&(r[0]=rect[2],r[2]=rect[0]),rect[1]>rect[3]&&(r[1]=rect[3],r[3]=rect[1]),r}},{key:"intersect",value:function(rect1,rect2){function compare(a,b){return a-b}var orderedX=[rect1[0],rect1[2],rect2[0],rect2[2]].sort(compare),orderedY=[rect1[1],rect1[3],rect2[1],rect2[3]].sort(compare),result=[];return rect1=Util.normalizeRect(rect1),rect2=Util.normalizeRect(rect2),orderedX[0]===rect1[0]&&orderedX[1]===rect2[0]||orderedX[0]===rect2[0]&&orderedX[1]===rect1[0]?(result[0]=orderedX[1],result[2]=orderedX[2],orderedY[0]===rect1[1]&&orderedY[1]===rect2[1]||orderedY[0]===rect2[1]&&orderedY[1]===rect1[1]?(result[1]=orderedY[1],result[3]=orderedY[2],result):null):null}}]),Util}();exports.Util=Util;var digits,PDFStringTranslateTable=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364],createObjectURL=(digits="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",function(data,contentType){var forceDataSchema=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!forceDataSchema&&URL.createObjectURL){var blob=new Blob([data],{type:contentType});return URL.createObjectURL(blob)}for(var buffer="data:".concat(contentType,";base64,"),i=0,ii=data.length;i<ii;i+=3){var b1=255&data[i],b2=255&data[i+1],b3=255&data[i+2],d1=b1>>2,d2=(3&b1)<<4|b2>>4,d3=i+1<ii?(15&b2)<<2|b3>>6:64,d4=i+2<ii?63&b3:64;buffer+=digits[d1]+digits[d2]+digits[d3]+digits[d4]}return buffer});exports.createObjectURL=createObjectURL;var XMLEntities={60:"&lt;",62:"&gt;",38:"&amp;",34:"&quot;",39:"&apos;"}},function(__unused_webpack_module,__unused_webpack_exports,__w_pdfjs_require__){__w_pdfjs_require__(4)},function(__unused_webpack_module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNodeJS=void 0;var isNodeJS=!("object"!==("undefined"==typeof process?"undefined":_typeof(process))||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);exports.isNodeJS=isNodeJS},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultCMapReaderFactory=exports.DefaultCanvasFactory=exports.build=void 0;var _util=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(6),_node_utils=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_api_compatibility=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(12),_is_node=__w_pdfjs_require__(4),_message_handler=__w_pdfjs_require__(13),_metadata=__w_pdfjs_require__(14),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_webgl=__w_pdfjs_require__(18),DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;var DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory,createPDFNetworkStream;function setPDFNetworkStreamFactory(pdfNetworkStreamFactory){createPDFNetworkStream=pdfNetworkStreamFactory}function getDocument(src){var source,task=new PDFDocumentLoadingTask;if("string"==typeof src)source={url:src};else if((0,_util.isArrayBuffer)(src))source={data:src};else if(src instanceof PDFDataRangeTransport)source={range:src};else{if("object"!==_typeof(src))throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!src.url&&!src.data&&!src.range)throw new Error("Invalid parameter object: need either .data, .range or .url");source=src}var params=Object.create(null),rangeTransport=null,worker=null;for(var key in source)if("url"!==key||"undefined"==typeof window)if("range"!==key)if("worker"!==key)if("data"!==key||source[key]instanceof Uint8Array)params[key]=source[key];else{var pdfBytes=source[key];if("string"==typeof pdfBytes)params[key]=(0,_util.stringToBytes)(pdfBytes);else if("object"!==_typeof(pdfBytes)||null===pdfBytes||isNaN(pdfBytes.length)){if(!(0,_util.isArrayBuffer)(pdfBytes))throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");params[key]=new Uint8Array(pdfBytes)}else params[key]=new Uint8Array(pdfBytes)}else worker=source[key];else rangeTransport=source[key];else params[key]=new URL(source[key],window.location).href;if(params.rangeChunkSize=params.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,params.CMapReaderFactory=params.CMapReaderFactory||DefaultCMapReaderFactory,params.ignoreErrors=!0!==params.stopAtErrors,params.fontExtraProperties=!0===params.fontExtraProperties,params.pdfBug=!0===params.pdfBug,Number.isInteger(params.maxImageSize)||(params.maxImageSize=-1),"boolean"!=typeof params.isEvalSupported&&(params.isEvalSupported=!0),"boolean"!=typeof params.disableFontFace&&(params.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1),void 0===params.ownerDocument&&(params.ownerDocument=globalThis.document),"boolean"!=typeof params.disableRange&&(params.disableRange=!1),"boolean"!=typeof params.disableStream&&(params.disableStream=!1),"boolean"!=typeof params.disableAutoFetch&&(params.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(params.verbosity),!worker){var workerParams={verbosity:params.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};worker=workerParams.port?PDFWorker.fromPort(workerParams):new PDFWorker(workerParams),task._worker=worker}var docId=task.docId;return worker.promise.then((function(){if(task.destroyed)throw new Error("Loading aborted");var workerIdPromise=_fetchDocument(worker,params,rangeTransport,docId),networkStreamPromise=new Promise((function(resolve){var networkStream;rangeTransport?networkStream=new _transport_stream.PDFDataTransportStream({length:params.length,initialData:params.initialData,progressiveDone:params.progressiveDone,disableRange:params.disableRange,disableStream:params.disableStream},rangeTransport):params.data||(networkStream=createPDFNetworkStream({url:params.url,length:params.length,httpHeaders:params.httpHeaders,withCredentials:params.withCredentials,rangeChunkSize:params.rangeChunkSize,disableRange:params.disableRange,disableStream:params.disableStream})),resolve(networkStream)}));return Promise.all([workerIdPromise,networkStreamPromise]).then((function(_ref9){var _ref10=_slicedToArray(_ref9,2),workerId=_ref10[0],networkStream=_ref10[1];if(task.destroyed)throw new Error("Loading aborted");var messageHandler=new _message_handler.MessageHandler(docId,workerId,worker.port);messageHandler.postMessageTransfers=worker.postMessageTransfers;var transport=new WorkerTransport(messageHandler,task,networkStream,params);task._transport=transport,messageHandler.send("Ready",null)}))})).catch(task._capability.reject),task}function _fetchDocument(worker,source,pdfDataRangeTransport,docId){return worker.destroyed?Promise.reject(new Error("Worker was destroyed")):(pdfDataRangeTransport&&(source.length=pdfDataRangeTransport.length,source.initialData=pdfDataRangeTransport.initialData,source.progressiveDone=pdfDataRangeTransport.progressiveDone),worker.messageHandler.sendWithPromise("GetDocRequest",{docId:docId,apiVersion:"2.7.570",source:{data:source.data,url:source.url,password:source.password,disableAutoFetch:source.disableAutoFetch,rangeChunkSize:source.rangeChunkSize,length:source.length},maxImageSize:source.maxImageSize,disableFontFace:source.disableFontFace,postMessageTransfers:worker.postMessageTransfers,docBaseUrl:source.docBaseUrl,ignoreErrors:source.ignoreErrors,isEvalSupported:source.isEvalSupported,fontExtraProperties:source.fontExtraProperties}).then((function(workerId){if(worker.destroyed)throw new Error("Worker was destroyed");return workerId})))}exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;var PDFDocumentLoadingTask=(nextDocumentId=0,function(){function PDFDocumentLoadingTask(){_classCallCheck(this,PDFDocumentLoadingTask),this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+nextDocumentId++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}return _createClass(PDFDocumentLoadingTask,[{key:"promise",get:function(){return this._capability.promise}},{key:"destroy",value:function(){var _this8=this;return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then((function(){_this8._transport=null,_this8._worker&&(_this8._worker.destroy(),_this8._worker=null)}))}}]),PDFDocumentLoadingTask}()),nextDocumentId,PDFDataRangeTransport=function(){function PDFDataRangeTransport(length,initialData){var progressiveDone=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,PDFDataRangeTransport),this.length=length,this.initialData=initialData,this.progressiveDone=progressiveDone,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}return _createClass(PDFDataRangeTransport,[{key:"addRangeListener",value:function(listener){this._rangeListeners.push(listener)}},{key:"addProgressListener",value:function(listener){this._progressListeners.push(listener)}},{key:"addProgressiveReadListener",value:function(listener){this._progressiveReadListeners.push(listener)}},{key:"addProgressiveDoneListener",value:function(listener){this._progressiveDoneListeners.push(listener)}},{key:"onDataRange",value:function(begin,chunk){var _step3,_iterator3=_createForOfIteratorHelper(this._rangeListeners);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;)(0,_step3.value)(begin,chunk)}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}},{key:"onDataProgress",value:function(loaded,total){var _this9=this;this._readyCapability.promise.then((function(){var _step4,_iterator4=_createForOfIteratorHelper(_this9._progressListeners);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;)(0,_step4.value)(loaded,total)}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}))}},{key:"onDataProgressiveRead",value:function(chunk){var _this10=this;this._readyCapability.promise.then((function(){var _step5,_iterator5=_createForOfIteratorHelper(_this10._progressiveReadListeners);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;)(0,_step5.value)(chunk)}catch(err){_iterator5.e(err)}finally{_iterator5.f()}}))}},{key:"onDataProgressiveDone",value:function(){var _this11=this;this._readyCapability.promise.then((function(){var _step6,_iterator6=_createForOfIteratorHelper(_this11._progressiveDoneListeners);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;)(0,_step6.value)()}catch(err){_iterator6.e(err)}finally{_iterator6.f()}}))}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(begin,end){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}]),PDFDataRangeTransport}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){function PDFDocumentProxy(pdfInfo,transport){_classCallCheck(this,PDFDocumentProxy),this._pdfInfo=pdfInfo,this._transport=transport}return _createClass(PDFDocumentProxy,[{key:"annotationStorage",get:function(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprint",get:function(){return this._pdfInfo.fingerprint}},{key:"getPage",value:function(pageNumber){return this._transport.getPage(pageNumber)}},{key:"getPageIndex",value:function(ref){return this._transport.getPageIndex(ref)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(id){return this._transport.getDestination(id)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function(){return this._transport.getMarkInfo()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"getStats",value:function(){return this._transport.getStats()}},{key:"cleanup",value:function(){return this._transport.startCleanup()}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}},{key:"saveDocument",value:function(annotationStorage){return this._transport.saveDocument(annotationStorage)}},{key:"getFieldObjects",value:function(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function(){return this._transport.getCalculationOrderIds()}}]),PDFDocumentProxy}();exports.PDFDocumentProxy=PDFDocumentProxy;var PDFPageProxy=function(){function PDFPageProxy(pageIndex,pageInfo,transport,ownerDocument){var pdfBug=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,PDFPageProxy),this._pageIndex=pageIndex,this._pageInfo=pageInfo,this._ownerDocument=ownerDocument,this._transport=transport,this._stats=pdfBug?new _display_utils.StatTimer:null,this._pdfBug=pdfBug,this.commonObjs=transport.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}return _createClass(PDFPageProxy,[{key:"pageNumber",get:function(){return this._pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"getViewport",value:function(){var _ref11=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},scale=_ref11.scale,_ref11$rotation=_ref11.rotation,rotation=void 0===_ref11$rotation?this.rotate:_ref11$rotation,_ref11$offsetX=_ref11.offsetX,offsetX=void 0===_ref11$offsetX?0:_ref11$offsetX,_ref11$offsetY=_ref11.offsetY,offsetY=void 0===_ref11$offsetY?0:_ref11$offsetY,_ref11$dontFlip=_ref11.dontFlip,dontFlip=void 0!==_ref11$dontFlip&&_ref11$dontFlip;return new _display_utils.PageViewport({viewBox:this.view,scale:scale,rotation:rotation,offsetX:offsetX,offsetY:offsetY,dontFlip:dontFlip})}},{key:"getAnnotations",value:function(){var _ref12=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref12$intent=_ref12.intent,intent=void 0===_ref12$intent?null:_ref12$intent;return this.annotationsPromise&&this.annotationsIntent===intent||(this.annotationsPromise=this._transport.getAnnotations(this._pageIndex,intent),this.annotationsIntent=intent),this.annotationsPromise}},{key:"getJSActions",value:function(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}},{key:"render",value:function(_ref13){var _this12=this,canvasContext=_ref13.canvasContext,viewport=_ref13.viewport,_ref13$intent=_ref13.intent,intent=void 0===_ref13$intent?"display":_ref13$intent,_ref13$enableWebGL=_ref13.enableWebGL,enableWebGL=void 0!==_ref13$enableWebGL&&_ref13$enableWebGL,_ref13$renderInteract=_ref13.renderInteractiveForms,renderInteractiveForms=void 0!==_ref13$renderInteract&&_ref13$renderInteract,_ref13$transform=_ref13.transform,transform=void 0===_ref13$transform?null:_ref13$transform,_ref13$imageLayer=_ref13.imageLayer,imageLayer=void 0===_ref13$imageLayer?null:_ref13$imageLayer,_ref13$canvasFactory=_ref13.canvasFactory,canvasFactory=void 0===_ref13$canvasFactory?null:_ref13$canvasFactory,_ref13$background=_ref13.background,background=void 0===_ref13$background?null:_ref13$background,_ref13$annotationStor=_ref13.annotationStorage,annotationStorage=void 0===_ref13$annotationStor?null:_ref13$annotationStor,_ref13$optionalConten=_ref13.optionalContentConfigPromise,optionalContentConfigPromise=void 0===_ref13$optionalConten?null:_ref13$optionalConten;this._stats&&this._stats.time("Overall");var renderingIntent="print"===intent?"print":"display";this.pendingCleanup=!1,optionalContentConfigPromise||(optionalContentConfigPromise=this._transport.getOptionalContentConfig());var intentState=this._intentStates.get(renderingIntent);intentState||(intentState=Object.create(null),this._intentStates.set(renderingIntent,intentState)),intentState.streamReaderCancelTimeout&&(clearTimeout(intentState.streamReaderCancelTimeout),intentState.streamReaderCancelTimeout=null);var canvasFactoryInstance=canvasFactory||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),webGLContext=new _webgl.WebGLContext({enable:enableWebGL});intentState.displayReadyCapability||(intentState.displayReadyCapability=(0,_util.createPromiseCapability)(),intentState.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:renderingIntent,renderInteractiveForms:!0===renderInteractiveForms,annotationStorage:(null==annotationStorage?void 0:annotationStorage.getAll())||null}));var complete=function(error){var i=intentState.renderTasks.indexOf(internalRenderTask);i>=0&&intentState.renderTasks.splice(i,1),(_this12.cleanupAfterRender||"print"===renderingIntent)&&(_this12.pendingCleanup=!0),_this12._tryCleanup(),error?(internalRenderTask.capability.reject(error),_this12._abortOperatorList({intentState:intentState,reason:error})):internalRenderTask.capability.resolve(),_this12._stats&&(_this12._stats.timeEnd("Rendering"),_this12._stats.timeEnd("Overall"))},internalRenderTask=new InternalRenderTask({callback:complete,params:{canvasContext:canvasContext,viewport:viewport,transform:transform,imageLayer:imageLayer,background:background},objs:this.objs,commonObjs:this.commonObjs,operatorList:intentState.operatorList,pageIndex:this._pageIndex,canvasFactory:canvasFactoryInstance,webGLContext:webGLContext,useRequestAnimationFrame:"print"!==renderingIntent,pdfBug:this._pdfBug});intentState.renderTasks||(intentState.renderTasks=[]),intentState.renderTasks.push(internalRenderTask);var renderTask=internalRenderTask.task;return Promise.all([intentState.displayReadyCapability.promise,optionalContentConfigPromise]).then((function(_ref14){var _ref15=_slicedToArray(_ref14,2),transparency=_ref15[0],optionalContentConfig=_ref15[1];_this12.pendingCleanup?complete():(_this12._stats&&_this12._stats.time("Rendering"),internalRenderTask.initializeGraphics({transparency:transparency,optionalContentConfig:optionalContentConfig}),internalRenderTask.operatorListChanged())})).catch(complete),renderTask}},{key:"getOperatorList",value:function(){var opListTask,intentState=this._intentStates.get("oplist");return intentState||(intentState=Object.create(null),this._intentStates.set("oplist",intentState)),intentState.opListReadCapability||((opListTask=Object.create(null)).operatorListChanged=function(){if(intentState.operatorList.lastChunk){intentState.opListReadCapability.resolve(intentState.operatorList);var i=intentState.renderTasks.indexOf(opListTask);i>=0&&intentState.renderTasks.splice(i,1)}},intentState.opListReadCapability=(0,_util.createPromiseCapability)(),intentState.renderTasks=[],intentState.renderTasks.push(opListTask),intentState.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:"oplist"})),intentState.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var _ref16=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref16$normalizeWhite=_ref16.normalizeWhitespace,normalizeWhitespace=void 0!==_ref16$normalizeWhite&&_ref16$normalizeWhite,_ref16$disableCombine=_ref16.disableCombineTextItems,disableCombineTextItems=void 0!==_ref16$disableCombine&&_ref16$disableCombine,TEXT_CONTENT_CHUNK_SIZE=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:!0===normalizeWhitespace,combineTextItems:!0!==disableCombineTextItems},{highWaterMark:TEXT_CONTENT_CHUNK_SIZE,size:function(textContent){return textContent.items.length}})}},{key:"getTextContent",value:function(){var params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},readableStream=this.streamTextContent(params);return new Promise((function(resolve,reject){var reader=readableStream.getReader(),textContent={items:[],styles:Object.create(null)};!function pump(){reader.read().then((function(_ref17){var _textContent$items,value=_ref17.value;_ref17.done?resolve(textContent):(Object.assign(textContent.styles,value.styles),(_textContent$items=textContent.items).push.apply(_textContent$items,_toConsumableArray(value.items)),pump())}),reject)}()}))}},{key:"_destroy",value:function(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;var _step7,waitOn=[],_iterator7=_createForOfIteratorHelper(this._intentStates);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var _step7$value=_slicedToArray(_step7.value,2),intent=_step7$value[0],intentState=_step7$value[1];if(this._abortOperatorList({intentState:intentState,reason:new Error("Page was destroyed."),force:!0}),"oplist"!==intent){var _step8,_iterator8=_createForOfIteratorHelper(intentState.renderTasks);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var internalRenderTask=_step8.value;waitOn.push(internalRenderTask.completed),internalRenderTask.cancel()}}catch(err){_iterator8.e(err)}finally{_iterator8.f()}}}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}return this.objs.clear(),this.annotationsPromise=null,this._jsActionsPromise=null,this.pendingCleanup=!1,Promise.all(waitOn)}},{key:"cleanup",value:function(){var resetStats=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.pendingCleanup=!0,this._tryCleanup(resetStats)}},{key:"_tryCleanup",value:function(){var resetStats=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.pendingCleanup)return!1;var _step9,_iterator9=_createForOfIteratorHelper(this._intentStates.values());try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _step9$value=_step9.value,renderTasks=_step9$value.renderTasks,operatorList=_step9$value.operatorList;if(0!==renderTasks.length||!operatorList.lastChunk)return!1}}catch(err){_iterator9.e(err)}finally{_iterator9.f()}return this._intentStates.clear(),this.objs.clear(),this.annotationsPromise=null,this._jsActionsPromise=null,resetStats&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}},{key:"_startRenderPage",value:function(transparency,intent){var intentState=this._intentStates.get(intent);intentState&&(this._stats&&this._stats.timeEnd("Page Request"),intentState.displayReadyCapability&&intentState.displayReadyCapability.resolve(transparency))}},{key:"_renderPageChunk",value:function(operatorListChunk,intentState){for(var i=0,ii=operatorListChunk.length;i<ii;i++)intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]),intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);intentState.operatorList.lastChunk=operatorListChunk.lastChunk;for(var _i4=0;_i4<intentState.renderTasks.length;_i4++)intentState.renderTasks[_i4].operatorListChanged();operatorListChunk.lastChunk&&this._tryCleanup()}},{key:"_pumpOperatorList",value:function(args){var _this13=this;(0,_util.assert)(args.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');var reader=this._transport.messageHandler.sendWithStream("GetOperatorList",args).getReader(),intentState=this._intentStates.get(args.intent);intentState.streamReader=reader,function pump(){reader.read().then((function(_ref18){var value=_ref18.value;_ref18.done?intentState.streamReader=null:_this13._transport.destroyed||(_this13._renderPageChunk(value,intentState),pump())}),(function(reason){if(intentState.streamReader=null,!_this13._transport.destroyed){if(intentState.operatorList){intentState.operatorList.lastChunk=!0;for(var i=0;i<intentState.renderTasks.length;i++)intentState.renderTasks[i].operatorListChanged();_this13._tryCleanup()}if(intentState.displayReadyCapability)intentState.displayReadyCapability.reject(reason);else{if(!intentState.opListReadCapability)throw reason;intentState.opListReadCapability.reject(reason)}}}))}()}},{key:"_abortOperatorList",value:function(_ref19){var _this14=this,intentState=_ref19.intentState,reason=_ref19.reason,_ref19$force=_ref19.force,force=void 0!==_ref19$force&&_ref19$force;if((0,_util.assert)(reason instanceof Error||"object"===_typeof(reason)&&null!==reason,'PDFPageProxy._abortOperatorList: Expected "reason" argument.'),intentState.streamReader){if(!force){if(0!==intentState.renderTasks.length)return;if(reason instanceof _display_utils.RenderingCancelledException)return void(intentState.streamReaderCancelTimeout=setTimeout((function(){_this14._abortOperatorList({intentState:intentState,reason:reason,force:!0}),intentState.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT))}if(intentState.streamReader.cancel(new _util.AbortException(null==reason?void 0:reason.message)),intentState.streamReader=null,!this._transport.destroyed){var _step10,_iterator10=_createForOfIteratorHelper(this._intentStates);try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _step10$value=_slicedToArray(_step10.value,2),intent=_step10$value[0];if(_step10$value[1]===intentState){this._intentStates.delete(intent);break}}}catch(err){_iterator10.e(err)}finally{_iterator10.f()}this.cleanup()}}}},{key:"stats",get:function(){return this._stats}}]),PDFPageProxy}();exports.PDFPageProxy=PDFPageProxy;var LoopbackPort=function(){function LoopbackPort(){var defer=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_classCallCheck(this,LoopbackPort),this._listeners=[],this._defer=defer,this._deferred=Promise.resolve(void 0)}return _createClass(LoopbackPort,[{key:"postMessage",value:function(obj,transfers){var _this15=this;if(this._defer){var cloned=new WeakMap,e={data:function cloneValue(value){if("object"!==_typeof(value)||null===value)return value;if(cloned.has(value))return cloned.get(value);var buffer,result;if((buffer=value.buffer)&&(0,_util.isArrayBuffer)(buffer))return result=null!=transfers&&transfers.includes(buffer)?new value.constructor(buffer,value.byteOffset,value.byteLength):new value.constructor(value),cloned.set(value,result),result;for(var i in result=Array.isArray(value)?[]:{},cloned.set(value,result),value){for(var desc=void 0,p=value;!(desc=Object.getOwnPropertyDescriptor(p,i));)p=Object.getPrototypeOf(p);if(void 0!==desc.value)if("function"!=typeof desc.value)result[i]=cloneValue(desc.value);else if(value.hasOwnProperty&&value.hasOwnProperty(i))throw new Error("LoopbackPort.postMessage - cannot clone: ".concat(value[i]))}return result}(obj)};this._deferred.then((function(){_this15._listeners.forEach((function(listener){listener.call(_this15,e)}))}))}else this._listeners.forEach((function(listener){listener.call(_this15,{data:obj})}))}},{key:"addEventListener",value:function(name,listener){this._listeners.push(listener)}},{key:"removeEventListener",value:function(name,listener){var i=this._listeners.indexOf(listener);this._listeners.splice(i,1)}},{key:"terminate",value:function(){this._listeners.length=0}}]),LoopbackPort}();exports.LoopbackPort=LoopbackPort;var PDFWorker=function PDFWorkerClosure(){var pdfWorkerPorts=new WeakMap,isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS&&"function"==typeof require)isWorkerDisabled=!0,fallbackWorkerSrc="./pdf.worker.js";else if("object"===("undefined"==typeof document?"undefined":_typeof(document))&&"currentScript"in document){var _document$currentScri,pdfjsFilePath=null===(_document$currentScri=document.currentScript)||void 0===_document$currentScri?void 0:_document$currentScri.src;pdfjsFilePath&&(fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function _getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(void 0!==fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){var mainWorkerMessageHandler;try{var _globalThis$pdfjsWork;mainWorkerMessageHandler=null===(_globalThis$pdfjsWork=globalThis.pdfjsWorker)||void 0===_globalThis$pdfjsWork?void 0:_globalThis$pdfjsWork.WorkerMessageHandler}catch(ex){}return mainWorkerMessageHandler||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();var loader=function(){var _ref20=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var mainWorkerMessageHandler,worker;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(mainWorkerMessageHandler=getMainThreadWorkerMessageHandler(),!mainWorkerMessageHandler){_context3.next=3;break}return _context3.abrupt("return",mainWorkerMessageHandler);case 3:if(!_is_node.isNodeJS||"function"!=typeof require){_context3.next=6;break}return worker=eval("require")(_getWorkerSrc()),_context3.abrupt("return",worker.WorkerMessageHandler);case 6:return _context3.next=8,(0,_display_utils.loadScript)(_getWorkerSrc());case 8:return _context3.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context3.stop()}}),_callee3)})));return function(){return _ref20.apply(this,arguments)}}();return loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject),fakeWorkerCapability.promise}function createCDNWrapper(url){var wrapper="importScripts('"+url+"');";return URL.createObjectURL(new Blob([wrapper]))}var PDFWorker=function(){function PDFWorker(){var _ref21=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref21$name=_ref21.name,name=void 0===_ref21$name?null:_ref21$name,_ref21$port=_ref21.port,port=void 0===_ref21$port?null:_ref21$port,_ref21$verbosity=_ref21.verbosity,verbosity=void 0===_ref21$verbosity?(0,_util.getVerbosityLevel)():_ref21$verbosity;if(_classCallCheck(this,PDFWorker),port&&pdfWorkerPorts.has(port))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=name,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=verbosity,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,port)return pdfWorkerPorts.set(port,this),void this._initializeFromPort(port);this._initialize()}return _createClass(PDFWorker,[{key:"promise",get:function(){return this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}},{key:"_initializeFromPort",value:function(port){this._port=port,this._messageHandler=new _message_handler.MessageHandler("main","worker",port),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}},{key:"_initialize",value:function(){var _this16=this;if("undefined"!=typeof Worker&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){var workerSrc=_getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,workerSrc)||(workerSrc=createCDNWrapper(new URL(workerSrc,window.location).href));var worker=new Worker(workerSrc),messageHandler=new _message_handler.MessageHandler("main","worker",worker),terminateEarly=function(){worker.removeEventListener("error",onWorkerError),messageHandler.destroy(),worker.terminate(),_this16.destroyed?_this16._readyCapability.reject(new Error("Worker was destroyed")):_this16._setupFakeWorker()},onWorkerError=function(){_this16._webWorker||terminateEarly()};worker.addEventListener("error",onWorkerError),messageHandler.on("test",(function(data){worker.removeEventListener("error",onWorkerError),_this16.destroyed?terminateEarly():data?(_this16._messageHandler=messageHandler,_this16._port=worker,_this16._webWorker=worker,data.supportTransfers||(_this16.postMessageTransfers=!1),_this16._readyCapability.resolve(),messageHandler.send("configure",{verbosity:_this16.verbosity})):(_this16._setupFakeWorker(),messageHandler.destroy(),worker.terminate())})),messageHandler.on("ready",(function(data){if(worker.removeEventListener("error",onWorkerError),_this16.destroyed)terminateEarly();else try{sendTest()}catch(e){_this16._setupFakeWorker()}}));var sendTest=function(){var testObj=new Uint8Array([_this16.postMessageTransfers?255:0]);try{messageHandler.send("test",testObj,[testObj.buffer])}catch(ex){(0,_util.warn)("Cannot use postMessage transfers."),testObj[0]=0,messageHandler.send("test",testObj)}};return void sendTest()}catch(e){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function(){var _this17=this;isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),isWorkerDisabled=!0),setupFakeWorkerGlobal().then((function(WorkerMessageHandler){if(_this17.destroyed)_this17._readyCapability.reject(new Error("Worker was destroyed"));else{var port=new LoopbackPort;_this17._port=port;var id="fake"+nextFakeWorkerId++,workerHandler=new _message_handler.MessageHandler(id+"_worker",id,port);WorkerMessageHandler.setup(workerHandler,port);var messageHandler=new _message_handler.MessageHandler(id,id+"_worker",port);_this17._messageHandler=messageHandler,_this17._readyCapability.resolve(),messageHandler.send("configure",{verbosity:_this17.verbosity})}})).catch((function(reason){_this17._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(reason.message,'".')))}))}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pdfWorkerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}],[{key:"fromPort",value:function(params){if(!params||!params.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(params.port)?pdfWorkerPorts.get(params.port):new PDFWorker(params)}},{key:"getWorkerSrc",value:function(){return _getWorkerSrc()}}]),PDFWorker}();return PDFWorker}();exports.PDFWorker=PDFWorker;var WorkerTransport=function(){function WorkerTransport(messageHandler,loadingTask,networkStream,params){_classCallCheck(this,WorkerTransport),this.messageHandler=messageHandler,this.loadingTask=loadingTask,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:loadingTask.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:params.ownerDocument}),this._params=params,this.CMapReaderFactory=new params.CMapReaderFactory({baseUrl:params.cMapUrl,isCompressed:params.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=networkStream,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}return _createClass(WorkerTransport,[{key:"loadingTaskSettled",get:function(){return this.loadingTask._capability.settled}},{key:"destroy",value:function(){var _this18=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var waitOn=[];this.pageCache.forEach((function(page){page&&waitOn.push(page._destroy())})),this.pageCache.length=0,this.pagePromises.length=0;var terminated=this.messageHandler.sendWithPromise("Terminate",null);if(waitOn.push(terminated),this.loadingTaskSettled){var annotationStorageResetModified=this.loadingTask.promise.then((function(pdfDocument){pdfDocument.hasOwnProperty("annotationStorage")&&pdfDocument.annotationStorage.resetModified()})).catch((function(){}));waitOn.push(annotationStorageResetModified)}return Promise.all(waitOn).then((function(){_this18.commonObjs.clear(),_this18.fontLoader.clear(),_this18._hasJSActionsPromise=null,_this18._networkStream&&_this18._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),_this18.messageHandler&&(_this18.messageHandler.destroy(),_this18.messageHandler=null),_this18.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var _this19=this,messageHandler=this.messageHandler,loadingTask=this.loadingTask;messageHandler.on("GetReader",(function(data,sink){(0,_util.assert)(_this19._networkStream,"GetReader - no `IPDFStream` instance available."),_this19._fullReader=_this19._networkStream.getFullReader(),_this19._fullReader.onProgress=function(evt){_this19._lastProgress={loaded:evt.loaded,total:evt.total}},sink.onPull=function(){_this19._fullReader.read().then((function(_ref22){var value=_ref22.value;_ref22.done?sink.close():((0,_util.assert)((0,_util.isArrayBuffer)(value),"GetReader - expected an ArrayBuffer."),sink.enqueue(new Uint8Array(value),1,[value]))})).catch((function(reason){sink.error(reason)}))},sink.onCancel=function(reason){_this19._fullReader.cancel(reason),sink.ready.catch((function(readyReason){if(!_this19.destroyed)throw readyReason}))}})),messageHandler.on("ReaderHeadersReady",(function(data){var headersCapability=(0,_util.createPromiseCapability)(),fullReader=_this19._fullReader;return fullReader.headersReady.then((function(){fullReader.isStreamingSupported&&fullReader.isRangeSupported||(_this19._lastProgress&&loadingTask.onProgress&&loadingTask.onProgress(_this19._lastProgress),fullReader.onProgress=function(evt){loadingTask.onProgress&&loadingTask.onProgress({loaded:evt.loaded,total:evt.total})}),headersCapability.resolve({isStreamingSupported:fullReader.isStreamingSupported,isRangeSupported:fullReader.isRangeSupported,contentLength:fullReader.contentLength})}),headersCapability.reject),headersCapability.promise})),messageHandler.on("GetRangeReader",(function(data,sink){(0,_util.assert)(_this19._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var rangeReader=_this19._networkStream.getRangeReader(data.begin,data.end);rangeReader?(sink.onPull=function(){rangeReader.read().then((function(_ref23){var value=_ref23.value;_ref23.done?sink.close():((0,_util.assert)((0,_util.isArrayBuffer)(value),"GetRangeReader - expected an ArrayBuffer."),sink.enqueue(new Uint8Array(value),1,[value]))})).catch((function(reason){sink.error(reason)}))},sink.onCancel=function(reason){rangeReader.cancel(reason),sink.ready.catch((function(readyReason){if(!_this19.destroyed)throw readyReason}))}):sink.close()})),messageHandler.on("GetDoc",(function(_ref24){var pdfInfo=_ref24.pdfInfo;_this19._numPages=pdfInfo.numPages,loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo,_this19))})),messageHandler.on("DocException",(function(ex){var reason;switch(ex.name){case"PasswordException":reason=new _util.PasswordException(ex.message,ex.code);break;case"InvalidPDFException":reason=new _util.InvalidPDFException(ex.message);break;case"MissingPDFException":reason=new _util.MissingPDFException(ex.message);break;case"UnexpectedResponseException":reason=new _util.UnexpectedResponseException(ex.message,ex.status);break;case"UnknownErrorException":reason=new _util.UnknownErrorException(ex.message,ex.details)}reason instanceof Error||(0,_util.warn)("DocException - expected a valid Error."),loadingTask._capability.reject(reason)})),messageHandler.on("PasswordRequest",(function(exception){if(_this19._passwordCapability=(0,_util.createPromiseCapability)(),loadingTask.onPassword)try{loadingTask.onPassword((function(password){_this19._passwordCapability.resolve({password:password})}),exception.code)}catch(ex){_this19._passwordCapability.reject(ex)}else _this19._passwordCapability.reject(new _util.PasswordException(exception.message,exception.code));return _this19._passwordCapability.promise})),messageHandler.on("DataLoaded",(function(data){loadingTask.onProgress&&loadingTask.onProgress({loaded:data.length,total:data.length}),_this19.downloadInfoCapability.resolve(data)})),messageHandler.on("StartRenderPage",(function(data){_this19.destroyed||_this19.pageCache[data.pageIndex]._startRenderPage(data.transparency,data.intent)})),messageHandler.on("commonobj",(function(data){var _globalThis$FontInspe;if(!_this19.destroyed){var _data=_slicedToArray(data,3),id=_data[0],type=_data[1],exportedData=_data[2];if(!_this19.commonObjs.has(id))switch(type){case"Font":var params=_this19._params;if("error"in exportedData){var exportedError=exportedData.error;(0,_util.warn)("Error during font loading: ".concat(exportedError)),_this19.commonObjs.resolve(id,exportedError);break}var fontRegistry=null;params.pdfBug&&null!==(_globalThis$FontInspe=globalThis.FontInspector)&&void 0!==_globalThis$FontInspe&&_globalThis$FontInspe.enabled&&(fontRegistry={registerFont:function(font,url){globalThis.FontInspector.fontAdded(font,url)}});var font=new _font_loader.FontFaceObject(exportedData,{isEvalSupported:params.isEvalSupported,disableFontFace:params.disableFontFace,ignoreErrors:params.ignoreErrors,onUnsupportedFeature:_this19._onUnsupportedFeature.bind(_this19),fontRegistry:fontRegistry});_this19.fontLoader.bind(font).catch((function(reason){return messageHandler.sendWithPromise("FontFallback",{id:id})})).finally((function(){!params.fontExtraProperties&&font.data&&(font.data=null),_this19.commonObjs.resolve(id,font)}));break;case"FontPath":case"Image":_this19.commonObjs.resolve(id,exportedData);break;default:throw new Error("Got unknown common object type ".concat(type))}}})),messageHandler.on("obj",(function(data){var _imageData$data;if(!_this19.destroyed){var _data2=_slicedToArray(data,4),id=_data2[0],pageIndex=_data2[1],type=_data2[2],imageData=_data2[3],pageProxy=_this19.pageCache[pageIndex];if(!pageProxy.objs.has(id)){if("Image"!==type)throw new Error("Got unknown object type ".concat(type));pageProxy.objs.resolve(id,imageData),(null==imageData||null===(_imageData$data=imageData.data)||void 0===_imageData$data?void 0:_imageData$data.length)>8e6&&(pageProxy.cleanupAfterRender=!0)}}})),messageHandler.on("DocProgress",(function(data){_this19.destroyed||loadingTask.onProgress&&loadingTask.onProgress({loaded:data.loaded,total:data.total})})),messageHandler.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),messageHandler.on("FetchBuiltInCMap",(function(data,sink){if(_this19.destroyed)sink.error(new Error("Worker was destroyed"));else{var fetched=!1;sink.onPull=function(){fetched?sink.close():(fetched=!0,_this19.CMapReaderFactory.fetch(data).then((function(builtInCMap){sink.enqueue(builtInCMap,1,[builtInCMap.cMapData.buffer])})).catch((function(reason){sink.error(reason)})))}}}))}},{key:"_onUnsupportedFeature",value:function(_ref25){var featureId=_ref25.featureId;this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(featureId)}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function(pageNumber){var _this20=this;if(!Number.isInteger(pageNumber)||pageNumber<=0||pageNumber>this._numPages)return Promise.reject(new Error("Invalid page request"));var pageIndex=pageNumber-1;if(pageIndex in this.pagePromises)return this.pagePromises[pageIndex];var promise=this.messageHandler.sendWithPromise("GetPage",{pageIndex:pageIndex}).then((function(pageInfo){if(_this20.destroyed)throw new Error("Transport destroyed");var page=new PDFPageProxy(pageIndex,pageInfo,_this20,_this20._params.ownerDocument,_this20._params.pdfBug);return _this20.pageCache[pageIndex]=page,page}));return this.pagePromises[pageIndex]=promise,promise}},{key:"getPageIndex",value:function(ref){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:ref}).catch((function(reason){return Promise.reject(new Error(reason))}))}},{key:"getAnnotations",value:function(pageIndex,intent){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:pageIndex,intent:intent})}},{key:"saveDocument",value:function(annotationStorage){var _this$_fullReader$fil,_this$_fullReader;return this.messageHandler.sendWithPromise("SaveDocument",{numPages:this._numPages,annotationStorage:(null==annotationStorage?void 0:annotationStorage.getAll())||null,filename:null!==(_this$_fullReader$fil=null===(_this$_fullReader=this._fullReader)||void 0===_this$_fullReader?void 0:_this$_fullReader.filename)&&void 0!==_this$_fullReader$fil?_this$_fullReader$fil:null}).finally((function(){annotationStorage&&annotationStorage.resetModified()}))}},{key:"getFieldObjects",value:function(){return this.messageHandler.sendWithPromise("GetFieldObjects",null)}},{key:"hasJSActions",value:function(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}},{key:"getCalculationOrderIds",value:function(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(id){return"string"!=typeof id?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:id})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function(pageIndex){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:pageIndex})}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((function(results){return new _optional_content_config.OptionalContentConfig(results)}))}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var _this21=this;return this.messageHandler.sendWithPromise("GetMetadata",null).then((function(results){var _this21$_fullReader$f,_this21$_fullReader,_this21$_fullReader$c,_this21$_fullReader2;return{info:results[0],metadata:results[1]?new _metadata.Metadata(results[1]):null,contentDispositionFilename:null!==(_this21$_fullReader$f=null===(_this21$_fullReader=_this21._fullReader)||void 0===_this21$_fullReader?void 0:_this21$_fullReader.filename)&&void 0!==_this21$_fullReader$f?_this21$_fullReader$f:null,contentLength:null!==(_this21$_fullReader$c=null===(_this21$_fullReader2=_this21._fullReader)||void 0===_this21$_fullReader2?void 0:_this21$_fullReader2.contentLength)&&void 0!==_this21$_fullReader$c?_this21$_fullReader$c:null}}))}},{key:"getMarkInfo",value:function(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"getStats",value:function(){return this.messageHandler.sendWithPromise("GetStats",null)}},{key:"startCleanup",value:function(){var _this22=this;return this.messageHandler.sendWithPromise("Cleanup",null).then((function(){for(var i=0,ii=_this22.pageCache.length;i<ii;i++){var page=_this22.pageCache[i];if(page&&!page.cleanup())throw new Error("startCleanup: Page ".concat(i+1," is currently rendering."))}_this22.commonObjs.clear(),_this22.fontLoader.clear(),_this22._hasJSActionsPromise=null}))}},{key:"loadingParams",get:function(){var params=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:params.disableAutoFetch,disableFontFace:params.disableFontFace})}}]),WorkerTransport}(),PDFObjects=function(){function PDFObjects(){_classCallCheck(this,PDFObjects),this._objs=Object.create(null)}return _createClass(PDFObjects,[{key:"_ensureObj",value:function(objId){return this._objs[objId]?this._objs[objId]:this._objs[objId]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}},{key:"get",value:function(objId){var callback=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(callback)return this._ensureObj(objId).capability.promise.then(callback),null;var obj=this._objs[objId];if(!obj||!obj.resolved)throw new Error("Requesting object that isn't resolved yet ".concat(objId,"."));return obj.data}},{key:"has",value:function(objId){var obj=this._objs[objId];return(null==obj?void 0:obj.resolved)||!1}},{key:"resolve",value:function(objId,data){var obj=this._ensureObj(objId);obj.resolved=!0,obj.data=data,obj.capability.resolve(data)}},{key:"clear",value:function(){this._objs=Object.create(null)}}]),PDFObjects}(),RenderTask=function(){function RenderTask(internalRenderTask){_classCallCheck(this,RenderTask),this._internalRenderTask=internalRenderTask,this.onContinue=null}return _createClass(RenderTask,[{key:"promise",get:function(){return this._internalRenderTask.capability.promise}},{key:"cancel",value:function(){this._internalRenderTask.cancel()}}]),RenderTask}(),InternalRenderTask=function(){var canvasInRendering=new WeakSet,InternalRenderTask=function(){function InternalRenderTask(_ref26){var callback=_ref26.callback,params=_ref26.params,objs=_ref26.objs,commonObjs=_ref26.commonObjs,operatorList=_ref26.operatorList,pageIndex=_ref26.pageIndex,canvasFactory=_ref26.canvasFactory,webGLContext=_ref26.webGLContext,_ref26$useRequestAnim=_ref26.useRequestAnimationFrame,useRequestAnimationFrame=void 0!==_ref26$useRequestAnim&&_ref26$useRequestAnim,_ref26$pdfBug=_ref26.pdfBug,pdfBug=void 0!==_ref26$pdfBug&&_ref26$pdfBug;_classCallCheck(this,InternalRenderTask),this.callback=callback,this.params=params,this.objs=objs,this.commonObjs=commonObjs,this.operatorListIdx=null,this.operatorList=operatorList,this._pageIndex=pageIndex,this.canvasFactory=canvasFactory,this.webGLContext=webGLContext,this._pdfBug=pdfBug,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===useRequestAnimationFrame&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=params.canvasContext.canvas}var _next2;return _createClass(InternalRenderTask,[{key:"completed",get:function(){return this.capability.promise.catch((function(){}))}},{key:"initializeGraphics",value:function(_ref27){var _globalThis$StepperMa,_ref27$transparency=_ref27.transparency,transparency=void 0!==_ref27$transparency&&_ref27$transparency,optionalContentConfig=_ref27.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(canvasInRendering.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");canvasInRendering.add(this._canvas)}this._pdfBug&&null!==(_globalThis$StepperMa=globalThis.StepperManager)&&void 0!==_globalThis$StepperMa&&_globalThis$StepperMa.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var _this$params=this.params,canvasContext=_this$params.canvasContext,viewport=_this$params.viewport,transform=_this$params.transform,imageLayer=_this$params.imageLayer,background=_this$params.background;this.gfx=new _canvas.CanvasGraphics(canvasContext,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,imageLayer,optionalContentConfig),this.gfx.beginDrawing({transform:transform,viewport:viewport,transparency:transparency,background:background}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function(){var error=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&canvasInRendering.delete(this._canvas),this.callback(error||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas"))}},{key:"operatorListChanged",value:function(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var _this23=this;this._useRequestAnimationFrame?window.requestAnimationFrame((function(){_this23._nextBound().catch(_this23.cancel.bind(_this23))})):Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}},{key:"_next",value:(_next2=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){return regeneratorRuntime.wrap((function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(!this.cancelled){_context4.next=2;break}return _context4.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&canvasInRendering.delete(this._canvas),this.callback()));case 4:case"end":return _context4.stop()}}),_callee4,this)}))),function(){return _next2.apply(this,arguments)})}]),InternalRenderTask}();return InternalRenderTask}(),version="2.7.570";exports.version=version;var build="f2c7338b0";exports.build=build},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.FontLoader=exports.FontFaceObject=void 0;var FontLoader,_util=__w_pdfjs_require__(2),BaseFontLoader=function(){function BaseFontLoader(_ref28){var docId=_ref28.docId,onUnsupportedFeature=_ref28.onUnsupportedFeature,_ref28$ownerDocument=_ref28.ownerDocument,ownerDocument=void 0===_ref28$ownerDocument?globalThis.document:_ref28$ownerDocument;_classCallCheck(this,BaseFontLoader),this.constructor===BaseFontLoader&&(0,_util.unreachable)("Cannot initialize BaseFontLoader."),this.docId=docId,this._onUnsupportedFeature=onUnsupportedFeature,this._document=ownerDocument,this.nativeFontFaces=[],this.styleElement=null}var _bind;return _createClass(BaseFontLoader,[{key:"addNativeFontFace",value:function(nativeFontFace){this.nativeFontFaces.push(nativeFontFace),this._document.fonts.add(nativeFontFace)}},{key:"insertRule",value:function(rule){var styleElement=this.styleElement;styleElement||((styleElement=this.styleElement=this._document.createElement("style")).id="PDFJS_FONT_STYLE_TAG_".concat(this.docId),this._document.documentElement.getElementsByTagName("head")[0].appendChild(styleElement));var styleSheet=styleElement.sheet;styleSheet.insertRule(rule,styleSheet.cssRules.length)}},{key:"clear",value:function(){var _this24=this;this.nativeFontFaces.forEach((function(nativeFontFace){_this24._document.fonts.delete(nativeFontFace)})),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:(_bind=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(font){var nativeFontFace,rule,_this25=this;return regeneratorRuntime.wrap((function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(!font.attached&&!font.missingFile){_context5.next=2;break}return _context5.abrupt("return");case 2:if(font.attached=!0,!this.isFontLoadingAPISupported){_context5.next=19;break}if(!(nativeFontFace=font.createNativeFontFace())){_context5.next=18;break}return this.addNativeFontFace(nativeFontFace),_context5.prev=7,_context5.next=10,nativeFontFace.loaded;case 10:_context5.next=18;break;case 12:throw _context5.prev=12,_context5.t0=_context5.catch(7),this._onUnsupportedFeature({featureId:_util.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,_util.warn)("Failed to load font '".concat(nativeFontFace.family,"': '").concat(_context5.t0,"'.")),font.disableFontFace=!0,_context5.t0;case 18:return _context5.abrupt("return");case 19:if(!(rule=font.createFontFaceRule())){_context5.next=26;break}if(this.insertRule(rule),!this.isSyncFontLoadingSupported){_context5.next=24;break}return _context5.abrupt("return");case 24:return _context5.next=26,new Promise((function(resolve){var request=_this25._queueLoadingCallback(resolve);_this25._prepareFontLoadEvent([rule],[font],request)}));case 26:case"end":return _context5.stop()}}),_callee5,this,[[7,12]])}))),function(_x3){return _bind.apply(this,arguments)})},{key:"_queueLoadingCallback",value:function(callback){(0,_util.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"isFontLoadingAPISupported",get:function(){var _this$_document;return(0,_util.shadow)(this,"isFontLoadingAPISupported",!(null===(_this$_document=this._document)||void 0===_this$_document||!_this$_document.fonts))}},{key:"isSyncFontLoadingSupported",get:function(){(0,_util.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function(){(0,_util.unreachable)("Abstract method `_loadTestFont`.")}},{key:"_prepareFontLoadEvent",value:function(rules,fontsToLoad,request){(0,_util.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}]),BaseFontLoader}();exports.FontLoader=FontLoader,exports.FontLoader=FontLoader=function(_BaseFontLoader){_inherits(GenericFontLoader,_BaseFontLoader);var _super11=_createSuper(GenericFontLoader);function GenericFontLoader(params){var _this26;return _classCallCheck(this,GenericFontLoader),(_this26=_super11.call(this,params)).loadingContext={requests:[],nextRequestId:0},_this26.loadTestFontId=0,_this26}return _createClass(GenericFontLoader,[{key:"isSyncFontLoadingSupported",get:function(){var supported=!1;if("undefined"==typeof navigator)supported=!0;else{var m=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==m?void 0:m[1])>=14&&(supported=!0)}return(0,_util.shadow)(this,"isSyncFontLoadingSupported",supported)}},{key:"_queueLoadingCallback",value:function(callback){var context=this.loadingContext,request={id:"pdfjs-font-loading-".concat(context.nextRequestId++),done:!1,complete:function(){for((0,_util.assert)(!request.done,"completeRequest() cannot be called twice."),request.done=!0;context.requests.length>0&&context.requests[0].done;){var otherRequest=context.requests.shift();setTimeout(otherRequest.callback,0)}},callback:callback};return context.requests.push(request),request}},{key:"_loadTestFont",get:function(){return(0,_util.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}},{key:"_prepareFontLoadEvent",value:function(rules,fonts,request){var i,ii,_this27=this;function int32(data,offset){return data.charCodeAt(offset)<<24|data.charCodeAt(offset+1)<<16|data.charCodeAt(offset+2)<<8|255&data.charCodeAt(offset+3)}function spliceString(s,offset,remove,insert){return s.substring(0,offset)+insert+s.substring(offset+remove)}var canvas=this._document.createElement("canvas");canvas.width=1,canvas.height=1;var ctx=canvas.getContext("2d"),called=0,loadTestFontId="lt".concat(Date.now()).concat(this.loadTestFontId++),data=this._loadTestFont,checksum=int32(data=spliceString(data,976,loadTestFontId.length,loadTestFontId),16);for(i=0,ii=loadTestFontId.length-3;i<ii;i+=4)checksum=checksum-1482184792+int32(loadTestFontId,i)|0;i<loadTestFontId.length&&(checksum=checksum-1482184792+int32(loadTestFontId+"XXX",i)|0),data=spliceString(data,16,4,(0,_util.string32)(checksum));var url="url(data:font/opentype;base64,".concat(btoa(data),");"),rule='@font-face {font-family:"'.concat(loadTestFontId,'";src:').concat(url,"}");this.insertRule(rule);var names=[];for(i=0,ii=fonts.length;i<ii;i++)names.push(fonts[i].loadedName);names.push(loadTestFontId);var div=this._document.createElement("div");for(div.style.visibility="hidden",div.style.width=div.style.height="10px",div.style.position="absolute",div.style.top=div.style.left="0px",i=0,ii=names.length;i<ii;++i){var span=this._document.createElement("span");span.textContent="Hi",span.style.fontFamily=names[i],div.appendChild(span)}this._document.body.appendChild(div),function isFontReady(name,callback){if(++called>30)return(0,_util.warn)("Load test font never loaded."),void callback();ctx.font="30px "+name,ctx.fillText(".",0,20),ctx.getImageData(0,0,1,1).data[3]>0?callback():setTimeout(isFontReady.bind(null,name,callback))}(loadTestFontId,(function(){_this27._document.body.removeChild(div),request.complete()}))}}]),GenericFontLoader}(BaseFontLoader);var FontFaceObject=function(){function FontFaceObject(translatedData,_ref29){var _ref29$isEvalSupporte=_ref29.isEvalSupported,isEvalSupported=void 0===_ref29$isEvalSupporte||_ref29$isEvalSupporte,_ref29$disableFontFac=_ref29.disableFontFace,disableFontFace=void 0!==_ref29$disableFontFac&&_ref29$disableFontFac,_ref29$ignoreErrors=_ref29.ignoreErrors,ignoreErrors=void 0!==_ref29$ignoreErrors&&_ref29$ignoreErrors,_ref29$onUnsupportedF=_ref29.onUnsupportedFeature,onUnsupportedFeature=void 0===_ref29$onUnsupportedF?null:_ref29$onUnsupportedF,_ref29$fontRegistry=_ref29.fontRegistry,fontRegistry=void 0===_ref29$fontRegistry?null:_ref29$fontRegistry;for(var i in _classCallCheck(this,FontFaceObject),this.compiledGlyphs=Object.create(null),translatedData)this[i]=translatedData[i];this.isEvalSupported=!1!==isEvalSupported,this.disableFontFace=!0===disableFontFace,this.ignoreErrors=!0===ignoreErrors,this._onUnsupportedFeature=onUnsupportedFeature,this.fontRegistry=fontRegistry}return _createClass(FontFaceObject,[{key:"createNativeFontFace",value:function(){if(!this.data||this.disableFontFace)return null;var nativeFontFace=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),nativeFontFace}},{key:"createFontFaceRule",value:function(){if(!this.data||this.disableFontFace)return null;var data=(0,_util.bytesToString)(new Uint8Array(this.data)),url="url(data:".concat(this.mimetype,";base64,").concat(btoa(data),");"),rule='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(url,"}");return this.fontRegistry&&this.fontRegistry.registerFont(this,url),rule}},{key:"getPathGenerator",value:function(objs,character){if(void 0!==this.compiledGlyphs[character])return this.compiledGlyphs[character];var cmds,current;try{cmds=objs.get(this.loadedName+"_path_"+character)}catch(ex){if(!this.ignoreErrors)throw ex;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:_util.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,_util.warn)('getPathGenerator - ignoring character: "'.concat(ex,'".')),this.compiledGlyphs[character]=function(c,size){}}if(this.isEvalSupported&&_util.IsEvalSupportedCached.value){for(var args,js="",i=0,ii=cmds.length;i<ii;i++)args=void 0!==(current=cmds[i]).args?current.args.join(","):"",js+="c."+current.cmd+"("+args+");\n";return this.compiledGlyphs[character]=new Function("c","size",js)}return this.compiledGlyphs[character]=function(c,size){for(var _i5=0,_ii=cmds.length;_i5<_ii;_i5++)"scale"===(current=cmds[_i5]).cmd&&(current.args=[size,-size]),c[current.cmd].apply(c,current.args)}}}]),FontFaceObject}();exports.FontFaceObject=FontFaceObject},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.NodeCMapReaderFactory=exports.NodeCanvasFactory=void 0;var _display_utils=__w_pdfjs_require__(1),_is_node=__w_pdfjs_require__(4),_util=__w_pdfjs_require__(2),NodeCanvasFactory=_createClass((function NodeCanvasFactory(){_classCallCheck(this,NodeCanvasFactory),(0,_util.unreachable)("Not implemented: NodeCanvasFactory")}));exports.NodeCanvasFactory=NodeCanvasFactory;var NodeCMapReaderFactory=_createClass((function NodeCMapReaderFactory(){_classCallCheck(this,NodeCMapReaderFactory),(0,_util.unreachable)("Not implemented: NodeCMapReaderFactory")}));exports.NodeCMapReaderFactory=NodeCMapReaderFactory,_is_node.isNodeJS&&(exports.NodeCanvasFactory=NodeCanvasFactory=function(_display_utils$BaseCa){_inherits(NodeCanvasFactory,_display_utils$BaseCa);var _super12=_createSuper(NodeCanvasFactory);function NodeCanvasFactory(){return _classCallCheck(this,NodeCanvasFactory),_super12.apply(this,arguments)}return _createClass(NodeCanvasFactory,[{key:"create",value:function(width,height){if(width<=0||height<=0)throw new Error("Invalid canvas size");var canvas=require("canvas").createCanvas(width,height);return{canvas:canvas,context:canvas.getContext("2d")}}}]),NodeCanvasFactory}(_display_utils.BaseCanvasFactory),exports.NodeCMapReaderFactory=NodeCMapReaderFactory=function(_display_utils$BaseCM){_inherits(NodeCMapReaderFactory,_display_utils$BaseCM);var _super13=_createSuper(NodeCMapReaderFactory);function NodeCMapReaderFactory(){return _classCallCheck(this,NodeCMapReaderFactory),_super13.apply(this,arguments)}return _createClass(NodeCMapReaderFactory,[{key:"_fetchData",value:function(url,compressionType){return new Promise((function(resolve,reject){require("fs").readFile(url,(function(error,data){!error&&data?resolve({cMapData:new Uint8Array(data),compressionType:compressionType}):reject(new Error(error))}))}))}}]),NodeCMapReaderFactory}(_display_utils.BaseCMapReaderFactory))},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnnotationStorage=void 0;var _util=__w_pdfjs_require__(2),AnnotationStorage=function(){function AnnotationStorage(){_classCallCheck(this,AnnotationStorage),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}return _createClass(AnnotationStorage,[{key:"getOrCreateValue",value:function(key,defaultValue){return this._storage.has(key)?this._storage.get(key):(this._storage.set(key,defaultValue),defaultValue)}},{key:"setValue",value:function(key,value){var obj=this._storage.get(key),modified=!1;if(void 0!==obj)for(var _i6=0,_Object$entries=Object.entries(value);_i6<_Object$entries.length;_i6++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i6],2),entry=_Object$entries$_i[0],val=_Object$entries$_i[1];obj[entry]!==val&&(modified=!0,obj[entry]=val)}else this._storage.set(key,value),modified=!0;modified&&this._setModified()}},{key:"getAll",value:function(){return 0===this._storage.size?null:(0,_util.objectFromEntries)(this._storage)}},{key:"size",get:function(){return this._storage.size}},{key:"_setModified",value:function(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}},{key:"resetModified",value:function(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}}]),AnnotationStorage}();exports.AnnotationStorage=AnnotationStorage},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.apiCompatibilityParams=void 0;var _is_node=__w_pdfjs_require__(4),compatibilityParams=Object.create(null);_is_node.isNodeJS&&(compatibilityParams.disableFontFace=!0);var apiCompatibilityParams=Object.freeze(compatibilityParams);exports.apiCompatibilityParams=apiCompatibilityParams},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.CanvasGraphics=void 0;var _util=__w_pdfjs_require__(2),_pattern_helper=__w_pdfjs_require__(11);function addContextCurrentTransform(ctx){ctx.mozCurrentTransform||(ctx._originalSave=ctx.save,ctx._originalRestore=ctx.restore,ctx._originalRotate=ctx.rotate,ctx._originalScale=ctx.scale,ctx._originalTranslate=ctx.translate,ctx._originalTransform=ctx.transform,ctx._originalSetTransform=ctx.setTransform,ctx._transformMatrix=ctx._transformMatrix||[1,0,0,1,0,0],ctx._transformStack=[],Object.defineProperty(ctx,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(ctx,"mozCurrentTransformInverse",{get:function(){var m=this._transformMatrix,a=m[0],b=m[1],c=m[2],d=m[3],e=m[4],f=m[5],ad_bc=a*d-b*c,bc_ad=b*c-a*d;return[d/ad_bc,b/bc_ad,c/bc_ad,a/ad_bc,(d*e-c*f)/bc_ad,(b*e-a*f)/ad_bc]}}),ctx.save=function(){var old=this._transformMatrix;this._transformStack.push(old),this._transformMatrix=old.slice(0,6),this._originalSave()},ctx.restore=function(){var prev=this._transformStack.pop();prev&&(this._transformMatrix=prev,this._originalRestore())},ctx.translate=function(x,y){var m=this._transformMatrix;m[4]=m[0]*x+m[2]*y+m[4],m[5]=m[1]*x+m[3]*y+m[5],this._originalTranslate(x,y)},ctx.scale=function(x,y){var m=this._transformMatrix;m[0]=m[0]*x,m[1]=m[1]*x,m[2]=m[2]*y,m[3]=m[3]*y,this._originalScale(x,y)},ctx.transform=function(a,b,c,d,e,f){var m=this._transformMatrix;this._transformMatrix=[m[0]*a+m[2]*b,m[1]*a+m[3]*b,m[0]*c+m[2]*d,m[1]*c+m[3]*d,m[0]*e+m[2]*f+m[4],m[1]*e+m[3]*f+m[5]],ctx._originalTransform(a,b,c,d,e,f)},ctx.setTransform=function(a,b,c,d,e,f){this._transformMatrix=[a,b,c,d,e,f],ctx._originalSetTransform(a,b,c,d,e,f)},ctx.rotate=function(angle){var cosValue=Math.cos(angle),sinValue=Math.sin(angle),m=this._transformMatrix;this._transformMatrix=[m[0]*cosValue+m[2]*sinValue,m[1]*cosValue+m[3]*sinValue,m[0]*-sinValue+m[2]*cosValue,m[1]*-sinValue+m[3]*cosValue,m[4],m[5]],this._originalRotate(angle)})}var CachedCanvases=function(){function CachedCanvases(canvasFactory){this.canvasFactory=canvasFactory,this.cache=Object.create(null)}return CachedCanvases.prototype={getCanvas:function(id,width,height,trackTransform){var canvasEntry;return void 0!==this.cache[id]?(canvasEntry=this.cache[id],this.canvasFactory.reset(canvasEntry,width,height),canvasEntry.context.setTransform(1,0,0,1,0,0)):(canvasEntry=this.canvasFactory.create(width,height),this.cache[id]=canvasEntry),trackTransform&&addContextCurrentTransform(canvasEntry.context),canvasEntry},clear:function(){for(var id in this.cache){var canvasEntry=this.cache[id];this.canvasFactory.destroy(canvasEntry),delete this.cache[id]}}},CachedCanvases}(),CanvasExtraState=function(){function CanvasExtraState(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=_util.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=_util.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=_util.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null,this.transferMaps=null}return CanvasExtraState.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(x,y){this.x=x,this.y=y}},CanvasExtraState}(),CanvasGraphics=function(){function CanvasGraphics(canvasCtx,commonObjs,objs,canvasFactory,webGLContext,imageLayer,optionalContentConfig){this.ctx=canvasCtx,this.current=new CanvasExtraState,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=commonObjs,this.objs=objs,this.canvasFactory=canvasFactory,this.webGLContext=webGLContext,this.imageLayer=imageLayer,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=optionalContentConfig,this.cachedCanvases=new CachedCanvases(this.canvasFactory),canvasCtx&&addContextCurrentTransform(canvasCtx),this._cachedGetSinglePixelWidth=null}function putBinaryImageData(ctx,imgData){var transferMaps=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("undefined"!=typeof ImageData&&imgData instanceof ImageData)ctx.putImageData(imgData,0,0);else{var destPos,i,j,thisChunkHeight,elemsInThisChunk,transferMapRed,transferMapGreen,transferMapBlue,transferMapGray,height=imgData.height,width=imgData.width,partialChunkHeight=height%16,fullChunks=(height-partialChunkHeight)/16,totalChunks=0===partialChunkHeight?fullChunks:fullChunks+1,chunkImgData=ctx.createImageData(width,16),srcPos=0,src=imgData.data,dest=chunkImgData.data;if(transferMaps)switch(transferMaps.length){case 1:transferMapRed=transferMaps[0],transferMapGreen=transferMaps[0],transferMapBlue=transferMaps[0],transferMapGray=transferMaps[0];break;case 4:transferMapRed=transferMaps[0],transferMapGreen=transferMaps[1],transferMapBlue=transferMaps[2],transferMapGray=transferMaps[3]}if(imgData.kind===_util.ImageKind.GRAYSCALE_1BPP){var srcLength=src.byteLength,dest32=new Uint32Array(dest.buffer,0,dest.byteLength>>2),dest32DataLength=dest32.length,fullSrcDiff=width+7>>3,white=4294967295,black=_util.IsLittleEndianCached.value?4278190080:255;if(transferMapGray&&255===transferMapGray[0]&&0===transferMapGray[255]){var _ref30=[black,white];white=_ref30[0],black=_ref30[1]}for(i=0;i<totalChunks;i++){for(thisChunkHeight=i<fullChunks?16:partialChunkHeight,destPos=0,j=0;j<thisChunkHeight;j++){for(var srcDiff=srcLength-srcPos,k=0,kEnd=srcDiff>fullSrcDiff?width:8*srcDiff-7,kEndUnrolled=-8&kEnd,mask=0,srcByte=0;k<kEndUnrolled;k+=8)srcByte=src[srcPos++],dest32[destPos++]=128&srcByte?white:black,dest32[destPos++]=64&srcByte?white:black,dest32[destPos++]=32&srcByte?white:black,dest32[destPos++]=16&srcByte?white:black,dest32[destPos++]=8&srcByte?white:black,dest32[destPos++]=4&srcByte?white:black,dest32[destPos++]=2&srcByte?white:black,dest32[destPos++]=1&srcByte?white:black;for(;k<kEnd;k++)0===mask&&(srcByte=src[srcPos++],mask=128),dest32[destPos++]=srcByte&mask?white:black,mask>>=1}for(;destPos<dest32DataLength;)dest32[destPos++]=0;ctx.putImageData(chunkImgData,0,16*i)}}else if(imgData.kind===_util.ImageKind.RGBA_32BPP){var hasTransferMaps=!!(transferMapRed||transferMapGreen||transferMapBlue);for(j=0,elemsInThisChunk=16*width*4,i=0;i<fullChunks;i++){if(dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk)),srcPos+=elemsInThisChunk,hasTransferMaps)for(var _k=0;_k<elemsInThisChunk;_k+=4)transferMapRed&&(dest[_k+0]=transferMapRed[dest[_k+0]]),transferMapGreen&&(dest[_k+1]=transferMapGreen[dest[_k+1]]),transferMapBlue&&(dest[_k+2]=transferMapBlue[dest[_k+2]]);ctx.putImageData(chunkImgData,0,j),j+=16}if(i<totalChunks){if(elemsInThisChunk=width*partialChunkHeight*4,dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk)),hasTransferMaps)for(var _k2=0;_k2<elemsInThisChunk;_k2+=4)transferMapRed&&(dest[_k2+0]=transferMapRed[dest[_k2+0]]),transferMapGreen&&(dest[_k2+1]=transferMapGreen[dest[_k2+1]]),transferMapBlue&&(dest[_k2+2]=transferMapBlue[dest[_k2+2]]);ctx.putImageData(chunkImgData,0,j)}}else{if(imgData.kind!==_util.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(imgData.kind));var _hasTransferMaps=!!(transferMapRed||transferMapGreen||transferMapBlue);for(elemsInThisChunk=width*(thisChunkHeight=16),i=0;i<totalChunks;i++){for(i>=fullChunks&&(elemsInThisChunk=width*(thisChunkHeight=partialChunkHeight)),destPos=0,j=elemsInThisChunk;j--;)dest[destPos++]=src[srcPos++],dest[destPos++]=src[srcPos++],dest[destPos++]=src[srcPos++],dest[destPos++]=255;if(_hasTransferMaps)for(var _k3=0;_k3<destPos;_k3+=4)transferMapRed&&(dest[_k3+0]=transferMapRed[dest[_k3+0]]),transferMapGreen&&(dest[_k3+1]=transferMapGreen[dest[_k3+1]]),transferMapBlue&&(dest[_k3+2]=transferMapBlue[dest[_k3+2]]);ctx.putImageData(chunkImgData,0,16*i)}}}}function putBinaryImageMask(ctx,imgData){for(var height=imgData.height,width=imgData.width,partialChunkHeight=height%16,fullChunks=(height-partialChunkHeight)/16,totalChunks=0===partialChunkHeight?fullChunks:fullChunks+1,chunkImgData=ctx.createImageData(width,16),srcPos=0,src=imgData.data,dest=chunkImgData.data,i=0;i<totalChunks;i++){for(var thisChunkHeight=i<fullChunks?16:partialChunkHeight,destPos=3,j=0;j<thisChunkHeight;j++)for(var elem=void 0,mask=0,k=0;k<width;k++)mask||(elem=src[srcPos++],mask=128),dest[destPos]=elem&mask?0:255,destPos+=4,mask>>=1;ctx.putImageData(chunkImgData,0,16*i)}}function copyCtxState(sourceCtx,destCtx){for(var properties=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],i=0,ii=properties.length;i<ii;i++){var property=properties[i];void 0!==sourceCtx[property]&&(destCtx[property]=sourceCtx[property])}void 0!==sourceCtx.setLineDash&&(destCtx.setLineDash(sourceCtx.getLineDash()),destCtx.lineDashOffset=sourceCtx.lineDashOffset)}function resetCtxToDefault(ctx){ctx.strokeStyle="#000000",ctx.fillStyle="#000000",ctx.fillRule="nonzero",ctx.globalAlpha=1,ctx.lineWidth=1,ctx.lineCap="butt",ctx.lineJoin="miter",ctx.miterLimit=10,ctx.globalCompositeOperation="source-over",ctx.font="10px sans-serif",void 0!==ctx.setLineDash&&(ctx.setLineDash([]),ctx.lineDashOffset=0)}function composeSMaskBackdrop(bytes,r0,g0,b0){for(var length=bytes.length,i=3;i<length;i+=4){var alpha=bytes[i];if(0===alpha)bytes[i-3]=r0,bytes[i-2]=g0,bytes[i-1]=b0;else if(alpha<255){var alpha_=255-alpha;bytes[i-3]=bytes[i-3]*alpha+r0*alpha_>>8,bytes[i-2]=bytes[i-2]*alpha+g0*alpha_>>8,bytes[i-1]=bytes[i-1]*alpha+b0*alpha_>>8}}}function composeSMaskAlpha(maskData,layerData,transferMap){for(var length=maskData.length,i=3;i<length;i+=4){var alpha=transferMap?transferMap[maskData[i]]:maskData[i];layerData[i]=layerData[i]*alpha*.00392156862745098|0}}function composeSMaskLuminosity(maskData,layerData,transferMap){for(var length=maskData.length,i=3;i<length;i+=4){var y=77*maskData[i-3]+152*maskData[i-2]+28*maskData[i-1];layerData[i]=transferMap?layerData[i]*transferMap[y>>8]>>8:layerData[i]*y>>16}}function composeSMask(ctx,smask,layerCtx,webGLContext){var mask=smask.canvas,maskCtx=smask.context;ctx.setTransform(smask.scaleX,0,0,smask.scaleY,smask.offsetX,smask.offsetY);var backdrop=smask.backdrop||null;if(!smask.transferMap&&webGLContext.isEnabled){var composed=webGLContext.composeSMask({layer:layerCtx.canvas,mask:mask,properties:{subtype:smask.subtype,backdrop:backdrop}});return ctx.setTransform(1,0,0,1,0,0),void ctx.drawImage(composed,smask.offsetX,smask.offsetY)}!function(maskCtx,layerCtx,width,height,subtype,backdrop,transferMap){var composeFn,hasBackdrop=!!backdrop,r0=hasBackdrop?backdrop[0]:0,g0=hasBackdrop?backdrop[1]:0,b0=hasBackdrop?backdrop[2]:0;composeFn="Luminosity"===subtype?composeSMaskLuminosity:composeSMaskAlpha;for(var chunkSize=Math.min(height,Math.ceil(1048576/width)),row=0;row<height;row+=chunkSize){var chunkHeight=Math.min(chunkSize,height-row),maskData=maskCtx.getImageData(0,row,width,chunkHeight),layerData=layerCtx.getImageData(0,row,width,chunkHeight);hasBackdrop&&composeSMaskBackdrop(maskData.data,r0,g0,b0),composeFn(maskData.data,layerData.data,transferMap),maskCtx.putImageData(layerData,0,row)}}(maskCtx,layerCtx,mask.width,mask.height,smask.subtype,backdrop,smask.transferMap),ctx.drawImage(mask,0,0)}var LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};for(var op in CanvasGraphics.prototype={beginDrawing:function(_ref31){var transform=_ref31.transform,viewport=_ref31.viewport,_ref31$transparency=_ref31.transparency,transparency=void 0!==_ref31$transparency&&_ref31$transparency,_ref31$background=_ref31.background,background=void 0===_ref31$background?null:_ref31$background,width=this.ctx.canvas.width,height=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=background||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,width,height),this.ctx.restore(),transparency){var transparentCanvas=this.cachedCanvases.getCanvas("transparent",width,height,!0);this.compositeCtx=this.ctx,this.transparentCanvas=transparentCanvas.canvas,this.ctx=transparentCanvas.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),resetCtxToDefault(this.ctx),transform&&this.ctx.transform.apply(this.ctx,transform),this.ctx.transform.apply(this.ctx,viewport.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(operatorList,executionStartIdx,continueCallback,stepper){var argsArray=operatorList.argsArray,fnArray=operatorList.fnArray,i=executionStartIdx||0,argsArrayLen=argsArray.length;if(argsArrayLen===i)return i;for(var fnId,chunkOperations=argsArrayLen-i>10&&"function"==typeof continueCallback,endTime=chunkOperations?Date.now()+15:0,steps=0,commonObjs=this.commonObjs,objs=this.objs;;){if(void 0!==stepper&&i===stepper.nextBreakPoint)return stepper.breakIt(i,continueCallback),i;if((fnId=fnArray[i])!==_util.OPS.dependency)this[fnId].apply(this,argsArray[i]);else{var _step11,_iterator11=_createForOfIteratorHelper(argsArray[i]);try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var depObjId=_step11.value,objsPool=depObjId.startsWith("g_")?commonObjs:objs;if(!objsPool.has(depObjId))return objsPool.get(depObjId,continueCallback),i}}catch(err){_iterator11.e(err)}finally{_iterator11.f()}}if(++i===argsArrayLen)return i;if(chunkOperations&&++steps>10){if(Date.now()>endTime)return continueCallback(),i;steps=0}}},endDrawing:function(){for(;this.stateStack.length||null!==this.current.activeSMask;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(width){this.current.lineWidth=width,this.ctx.lineWidth=width},setLineCap:function(style){this.ctx.lineCap=LINE_CAP_STYLES[style]},setLineJoin:function(style){this.ctx.lineJoin=LINE_JOIN_STYLES[style]},setMiterLimit:function(limit){this.ctx.miterLimit=limit},setDash:function(dashArray,dashPhase){var ctx=this.ctx;void 0!==ctx.setLineDash&&(ctx.setLineDash(dashArray),ctx.lineDashOffset=dashPhase)},setRenderingIntent:function(intent){},setFlatness:function(flatness){},setGState:function(states){for(var i=0,ii=states.length;i<ii;i++){var state=states[i],key=state[0],value=state[1];switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value[0],value[1]);break;case"CA":this.current.strokeAlpha=state[1];break;case"ca":this.current.fillAlpha=state[1],this.ctx.globalAlpha=state[1];break;case"BM":this.ctx.globalCompositeOperation=value;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=value?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null;break;case"TR":this.current.transferMaps=value}}},beginSMaskGroup:function(){var activeSMask=this.current.activeSMask,drawnWidth=activeSMask.canvas.width,drawnHeight=activeSMask.canvas.height,cacheId="smaskGroupAt"+this.groupLevel,scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight,!0),currentCtx=this.ctx,currentTransform=currentCtx.mozCurrentTransform;this.ctx.save();var groupCtx=scratchCanvas.context;groupCtx.scale(1/activeSMask.scaleX,1/activeSMask.scaleY),groupCtx.translate(-activeSMask.offsetX,-activeSMask.offsetY),groupCtx.transform.apply(groupCtx,currentTransform),activeSMask.startTransformInverse=groupCtx.mozCurrentTransformInverse,copyCtxState(currentCtx,groupCtx),this.ctx=groupCtx,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(currentCtx),this.groupLevel++},suspendSMaskGroup:function(){var groupCtx=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),composeSMask(this.ctx,this.current.activeSMask,groupCtx,this.webGLContext),this.ctx.restore(),this.ctx.save(),copyCtxState(groupCtx,this.ctx),this.current.resumeSMaskCtx=groupCtx;var deltaTransform=_util.Util.transform(this.current.activeSMask.startTransformInverse,groupCtx.mozCurrentTransform);this.ctx.transform.apply(this.ctx,deltaTransform),groupCtx.save(),groupCtx.setTransform(1,0,0,1,0,0),groupCtx.clearRect(0,0,groupCtx.canvas.width,groupCtx.canvas.height),groupCtx.restore()},resumeSMaskGroup:function(){var groupCtx=this.current.resumeSMaskCtx,currentCtx=this.ctx;this.ctx=groupCtx,this.groupStack.push(currentCtx),this.groupLevel++},endSMaskGroup:function(){var groupCtx=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),composeSMask(this.ctx,this.current.activeSMask,groupCtx,this.webGLContext),this.ctx.restore(),copyCtxState(groupCtx,this.ctx);var deltaTransform=_util.Util.transform(this.current.activeSMask.startTransformInverse,groupCtx.mozCurrentTransform);this.ctx.transform.apply(this.ctx,deltaTransform)},save:function(){this.ctx.save();var old=this.current;this.stateStack.push(old),this.current=old.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup(),0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null):this.current.activeSMask=null},transform:function(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f),this._cachedGetSinglePixelWidth=null},constructPath:function(ops,args){for(var ctx=this.ctx,current=this.current,x=current.x,y=current.y,i=0,j=0,ii=ops.length;i<ii;i++)switch(0|ops[i]){case _util.OPS.rectangle:x=args[j++],y=args[j++];var width=args[j++],height=args[j++],xw=x+width,yh=y+height;ctx.moveTo(x,y),0===width||0===height?ctx.lineTo(xw,yh):(ctx.lineTo(xw,y),ctx.lineTo(xw,yh),ctx.lineTo(x,yh)),ctx.closePath();break;case _util.OPS.moveTo:x=args[j++],y=args[j++],ctx.moveTo(x,y);break;case _util.OPS.lineTo:x=args[j++],y=args[j++],ctx.lineTo(x,y);break;case _util.OPS.curveTo:x=args[j+4],y=args[j+5],ctx.bezierCurveTo(args[j],args[j+1],args[j+2],args[j+3],x,y),j+=6;break;case _util.OPS.curveTo2:ctx.bezierCurveTo(x,y,args[j],args[j+1],args[j+2],args[j+3]),x=args[j+2],y=args[j+3],j+=4;break;case _util.OPS.curveTo3:x=args[j+2],y=args[j+3],ctx.bezierCurveTo(args[j],args[j+1],x,y,x,y),j+=4;break;case _util.OPS.closePath:ctx.closePath()}current.setCurrentPoint(x,y)},closePath:function(){this.ctx.closePath()},stroke:function(consumePath){consumePath=void 0===consumePath||consumePath;var ctx=this.ctx,strokeColor=this.current.strokeColor;if(ctx.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===_typeof(strokeColor)&&null!=strokeColor&&strokeColor.getPattern){ctx.save();var transform=ctx.mozCurrentTransform,scale=_util.Util.singularValueDecompose2dScale(transform)[0];ctx.strokeStyle=strokeColor.getPattern(ctx,this);var lineWidth=this.getSinglePixelWidth(),scaledLineWidth=this.current.lineWidth*scale;lineWidth<0&&-lineWidth>=scaledLineWidth?(ctx.resetTransform(),ctx.lineWidth=Math.round(this._combinedScaleFactor)):ctx.lineWidth=Math.max(lineWidth,scaledLineWidth),ctx.stroke(),ctx.restore()}else{var _lineWidth=this.getSinglePixelWidth();_lineWidth<0&&-_lineWidth>=this.current.lineWidth?(ctx.save(),ctx.resetTransform(),ctx.lineWidth=Math.round(this._combinedScaleFactor),ctx.stroke(),ctx.restore()):(ctx.lineWidth=Math.max(_lineWidth,this.current.lineWidth),ctx.stroke())}consumePath&&this.consumePath(),ctx.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(consumePath){consumePath=void 0===consumePath||consumePath;var ctx=this.ctx,fillColor=this.current.fillColor,needRestore=!1;this.current.patternFill&&(ctx.save(),this.baseTransform&&ctx.setTransform.apply(ctx,this.baseTransform),ctx.fillStyle=fillColor.getPattern(ctx,this),needRestore=!0),this.contentVisible&&(this.pendingEOFill?(ctx.fill("evenodd"),this.pendingEOFill=!1):ctx.fill()),needRestore&&ctx.restore(),consumePath&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=NORMAL_CLIP},eoClip:function(){this.pendingClip=EO_CLIP},beginText:function(){this.current.textMatrix=_util.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var paths=this.pendingTextPaths,ctx=this.ctx;if(void 0!==paths){ctx.save(),ctx.beginPath();for(var i=0;i<paths.length;i++){var path=paths[i];ctx.setTransform.apply(ctx,path.transform),ctx.translate(path.x,path.y),path.addToPath(ctx,path.fontSize)}ctx.restore(),ctx.clip(),ctx.beginPath(),delete this.pendingTextPaths}else ctx.beginPath()},setCharSpacing:function(spacing){this.current.charSpacing=spacing},setWordSpacing:function(spacing){this.current.wordSpacing=spacing},setHScale:function(scale){this.current.textHScale=scale/100},setLeading:function(leading){this.current.leading=-leading},setFont:function(fontRefName,size){var fontObj=this.commonObjs.get(fontRefName),current=this.current;if(!fontObj)throw new Error("Can't find font for ".concat(fontRefName));if(current.fontMatrix=fontObj.fontMatrix||_util.FONT_IDENTITY_MATRIX,0!==current.fontMatrix[0]&&0!==current.fontMatrix[3]||(0,_util.warn)("Invalid font matrix for font "+fontRefName),size<0?(size=-size,current.fontDirection=-1):current.fontDirection=1,this.current.font=fontObj,this.current.fontSize=size,!fontObj.isType3Font){var name=fontObj.loadedName||"sans-serif",bold="normal";fontObj.black?bold="900":fontObj.bold&&(bold="bold");var italic=fontObj.italic?"italic":"normal",typeface='"'.concat(name,'", ').concat(fontObj.fallbackName),browserFontSize=size;size<16?browserFontSize=16:size>100&&(browserFontSize=100),this.current.fontSizeScale=size/browserFontSize,this.ctx.font="".concat(italic," ").concat(bold," ").concat(browserFontSize,"px ").concat(typeface)}},setTextRenderingMode:function(mode){this.current.textRenderingMode=mode},setTextRise:function(rise){this.current.textRise=rise},moveText:function(x,y){this.current.x=this.current.lineX+=x,this.current.y=this.current.lineY+=y},setLeadingMoveText:function(x,y){this.setLeading(-y),this.moveText(x,y)},setTextMatrix:function(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f],this.current.textMatrixScale=Math.sqrt(a*a+b*b),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar:function(character,x,y,patternTransform,resetLineWidthToOne){var addToPath,ctx=this.ctx,current=this.current,font=current.font,textRenderingMode=current.textRenderingMode,fontSize=current.fontSize/current.fontSizeScale,fillStrokeMode=textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK,isAddToPathSet=!!(textRenderingMode&_util.TextRenderingMode.ADD_TO_PATH_FLAG),patternFill=current.patternFill&&!font.missingFile;(font.disableFontFace||isAddToPathSet||patternFill)&&(addToPath=font.getPathGenerator(this.commonObjs,character)),font.disableFontFace||patternFill?(ctx.save(),ctx.translate(x,y),ctx.beginPath(),addToPath(ctx,fontSize),patternTransform&&ctx.setTransform.apply(ctx,patternTransform),fillStrokeMode!==_util.TextRenderingMode.FILL&&fillStrokeMode!==_util.TextRenderingMode.FILL_STROKE||ctx.fill(),fillStrokeMode!==_util.TextRenderingMode.STROKE&&fillStrokeMode!==_util.TextRenderingMode.FILL_STROKE||(resetLineWidthToOne&&(ctx.resetTransform(),ctx.lineWidth=Math.round(this._combinedScaleFactor)),ctx.stroke()),ctx.restore()):(fillStrokeMode!==_util.TextRenderingMode.FILL&&fillStrokeMode!==_util.TextRenderingMode.FILL_STROKE||ctx.fillText(character,x,y),fillStrokeMode!==_util.TextRenderingMode.STROKE&&fillStrokeMode!==_util.TextRenderingMode.FILL_STROKE||(resetLineWidthToOne?(ctx.save(),ctx.moveTo(x,y),ctx.resetTransform(),ctx.lineWidth=Math.round(this._combinedScaleFactor),ctx.strokeText(character,0,0),ctx.restore()):ctx.strokeText(character,x,y))),isAddToPathSet&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ctx.mozCurrentTransform,x:x,y:y,fontSize:fontSize,addToPath:addToPath})},get isFontSubpixelAAEnabled(){var ctx=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context;ctx.scale(1.5,1),ctx.fillText("I",0,10);for(var data=ctx.getImageData(0,0,10,10).data,enabled=!1,i=3;i<data.length;i+=4)if(data[i]>0&&data[i]<255){enabled=!0;break}return(0,_util.shadow)(this,"isFontSubpixelAAEnabled",enabled)},showText:function(glyphs){var current=this.current,font=current.font;if(font.isType3Font)return this.showType3Text(glyphs);var fontSize=current.fontSize;if(0!==fontSize){var patternTransform,ctx=this.ctx,fontSizeScale=current.fontSizeScale,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,fontDirection=current.fontDirection,textHScale=current.textHScale*fontDirection,glyphsLength=glyphs.length,vertical=font.vertical,spacingDir=vertical?1:-1,defaultVMetrics=font.defaultVMetrics,widthAdvanceScale=fontSize*current.fontMatrix[0],simpleFillText=current.textRenderingMode===_util.TextRenderingMode.FILL&&!font.disableFontFace&&!current.patternFill;if(ctx.save(),current.patternFill){ctx.save();var pattern=current.fillColor.getPattern(ctx,this);patternTransform=ctx.mozCurrentTransform,ctx.restore(),ctx.fillStyle=pattern}ctx.transform.apply(ctx,current.textMatrix),ctx.translate(current.x,current.y+current.textRise),fontDirection>0?ctx.scale(textHScale,-1):ctx.scale(textHScale,1);var lineWidth=current.lineWidth,resetLineWidthToOne=!1,scale=current.textMatrixScale;if(0===scale||0===lineWidth){var fillStrokeMode=current.textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK;fillStrokeMode!==_util.TextRenderingMode.STROKE&&fillStrokeMode!==_util.TextRenderingMode.FILL_STROKE||(this._cachedGetSinglePixelWidth=null,resetLineWidthToOne=(lineWidth=this.getSinglePixelWidth())<0)}else lineWidth/=scale;1!==fontSizeScale&&(ctx.scale(fontSizeScale,fontSizeScale),lineWidth/=fontSizeScale),ctx.lineWidth=lineWidth;var i,x=0;for(i=0;i<glyphsLength;++i){var glyph=glyphs[i];if((0,_util.isNum)(glyph))x+=spacingDir*glyph*fontSize/1e3;else{var restoreNeeded=!1,spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,character=glyph.fontChar,accent=glyph.accent,scaledX=void 0,scaledY=void 0,width=glyph.width;if(vertical){var vmetric=glyph.vmetric||defaultVMetrics,vx=-(glyph.vmetric?vmetric[1]:.5*width)*widthAdvanceScale,vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width,scaledX=vx/fontSizeScale,scaledY=(x+vy)/fontSizeScale}else scaledX=x/fontSizeScale,scaledY=0;if(font.remeasure&&width>0){var measuredWidth=1e3*ctx.measureText(character).width/fontSize*fontSizeScale;if(width<measuredWidth&&this.isFontSubpixelAAEnabled){var characterScaleX=width/measuredWidth;restoreNeeded=!0,ctx.save(),ctx.scale(characterScaleX,1),scaledX/=characterScaleX}else width!==measuredWidth&&(scaledX+=(width-measuredWidth)/2e3*fontSize/fontSizeScale)}if(this.contentVisible&&(glyph.isInFont||font.missingFile))if(simpleFillText&&!accent)ctx.fillText(character,scaledX,scaledY);else if(this.paintChar(character,scaledX,scaledY,patternTransform,resetLineWidthToOne),accent){var scaledAccentX=scaledX+fontSize*accent.offset.x/fontSizeScale,scaledAccentY=scaledY-fontSize*accent.offset.y/fontSizeScale;this.paintChar(accent.fontChar,scaledAccentX,scaledAccentY,patternTransform,resetLineWidthToOne)}x+=vertical?width*widthAdvanceScale-spacing*fontDirection:width*widthAdvanceScale+spacing*fontDirection,restoreNeeded&&ctx.restore()}}vertical?current.y-=x:current.x+=x*textHScale,ctx.restore()}},showType3Text:function(glyphs){var i,glyph,width,spacingLength,ctx=this.ctx,current=this.current,font=current.font,fontSize=current.fontSize,fontDirection=current.fontDirection,spacingDir=font.vertical?1:-1,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,textHScale=current.textHScale*fontDirection,fontMatrix=current.fontMatrix||_util.FONT_IDENTITY_MATRIX,glyphsLength=glyphs.length;if(current.textRenderingMode!==_util.TextRenderingMode.INVISIBLE&&0!==fontSize){for(this._cachedGetSinglePixelWidth=null,ctx.save(),ctx.transform.apply(ctx,current.textMatrix),ctx.translate(current.x,current.y),ctx.scale(textHScale,fontDirection),i=0;i<glyphsLength;++i)if(glyph=glyphs[i],(0,_util.isNum)(glyph))spacingLength=spacingDir*glyph*fontSize/1e3,this.ctx.translate(spacingLength,0),current.x+=spacingLength*textHScale;else{var spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,operatorList=font.charProcOperatorList[glyph.operatorListId];operatorList?(this.contentVisible&&(this.processingType3=glyph,this.save(),ctx.scale(fontSize,fontSize),ctx.transform.apply(ctx,fontMatrix),this.executeOperatorList(operatorList),this.restore()),width=_util.Util.applyTransform([glyph.width,0],fontMatrix)[0]*fontSize+spacing,ctx.translate(width,0),current.x+=width*textHScale):(0,_util.warn)('Type3 character "'.concat(glyph.operatorListId,'" is not available.'))}ctx.restore(),this.processingType3=null}},setCharWidth:function(xWidth,yWidth){},setCharWidthAndBounds:function(xWidth,yWidth,llx,lly,urx,ury){this.ctx.rect(llx,lly,urx-llx,ury-lly),this.clip(),this.endPath()},getColorN_Pattern:function(IR){var pattern,_this28=this;if("TilingPattern"===IR[0]){var color=IR[1],baseTransform=this.baseTransform||this.ctx.mozCurrentTransform.slice(),canvasGraphicsFactory={createCanvasGraphics:function(ctx){return new CanvasGraphics(ctx,_this28.commonObjs,_this28.objs,_this28.canvasFactory,_this28.webGLContext)}};pattern=new _pattern_helper.TilingPattern(IR,color,this.ctx,canvasGraphicsFactory,baseTransform)}else pattern=(0,_pattern_helper.getShadingPatternFromIR)(IR);return pattern},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(r,g,b){var color=_util.Util.makeHexColor(r,g,b);this.ctx.strokeStyle=color,this.current.strokeColor=color},setFillRGBColor:function(r,g,b){var color=_util.Util.makeHexColor(r,g,b);this.ctx.fillStyle=color,this.current.fillColor=color,this.current.patternFill=!1},shadingFill:function(patternIR){if(this.contentVisible){var ctx=this.ctx;this.save();var pattern=(0,_pattern_helper.getShadingPatternFromIR)(patternIR);ctx.fillStyle=pattern.getPattern(ctx,this,!0);var inv=ctx.mozCurrentTransformInverse;if(inv){var canvas=ctx.canvas,width=canvas.width,height=canvas.height,bl=_util.Util.applyTransform([0,0],inv),br=_util.Util.applyTransform([0,height],inv),ul=_util.Util.applyTransform([width,0],inv),ur=_util.Util.applyTransform([width,height],inv),x0=Math.min(bl[0],br[0],ul[0],ur[0]),y0=Math.min(bl[1],br[1],ul[1],ur[1]),x1=Math.max(bl[0],br[0],ul[0],ur[0]),y1=Math.max(bl[1],br[1],ul[1],ur[1]);this.ctx.fillRect(x0,y0,x1-x0,y1-y0)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()}},beginInlineImage:function(){(0,_util.unreachable)("Should not call beginInlineImage")},beginImageData:function(){(0,_util.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function(matrix,bbox){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(matrix)&&6===matrix.length&&this.transform.apply(this,matrix),this.baseTransform=this.ctx.mozCurrentTransform,bbox)){var width=bbox[2]-bbox[0],height=bbox[3]-bbox[1];this.ctx.rect(bbox[0],bbox[1],width,height),this.clip(),this.endPath()}},paintFormXObjectEnd:function(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())},beginGroup:function(group){if(this.contentVisible){this.save();var currentCtx=this.ctx;group.isolated||(0,_util.info)("TODO: Support non-isolated groups."),group.knockout&&(0,_util.warn)("Knockout groups not supported.");var currentTransform=currentCtx.mozCurrentTransform;if(group.matrix&&currentCtx.transform.apply(currentCtx,group.matrix),!group.bbox)throw new Error("Bounding box is required.");var bounds=_util.Util.getAxialAlignedBoundingBox(group.bbox,currentCtx.mozCurrentTransform),canvasBounds=[0,0,currentCtx.canvas.width,currentCtx.canvas.height];bounds=_util.Util.intersect(bounds,canvasBounds)||[0,0,0,0];var offsetX=Math.floor(bounds[0]),offsetY=Math.floor(bounds[1]),drawnWidth=Math.max(Math.ceil(bounds[2])-offsetX,1),drawnHeight=Math.max(Math.ceil(bounds[3])-offsetY,1),scaleX=1,scaleY=1;drawnWidth>4096&&(scaleX=drawnWidth/4096,drawnWidth=4096),drawnHeight>4096&&(scaleY=drawnHeight/4096,drawnHeight=4096);var cacheId="groupAt"+this.groupLevel;group.smask&&(cacheId+="_smask_"+this.smaskCounter++%2);var scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight,!0),groupCtx=scratchCanvas.context;groupCtx.scale(1/scaleX,1/scaleY),groupCtx.translate(-offsetX,-offsetY),groupCtx.transform.apply(groupCtx,currentTransform),group.smask?this.smaskStack.push({canvas:scratchCanvas.canvas,context:groupCtx,offsetX:offsetX,offsetY:offsetY,scaleX:scaleX,scaleY:scaleY,subtype:group.smask.subtype,backdrop:group.smask.backdrop,transferMap:group.smask.transferMap||null,startTransformInverse:null}):(currentCtx.setTransform(1,0,0,1,0,0),currentCtx.translate(offsetX,offsetY),currentCtx.scale(scaleX,scaleY)),copyCtxState(currentCtx,groupCtx),this.ctx=groupCtx,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(currentCtx),this.groupLevel++,this.current.activeSMask=null}},endGroup:function(group){if(this.contentVisible){this.groupLevel--;var groupCtx=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,group.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(groupCtx.canvas,0,0),this.restore()}},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(rect,transform,matrix){if(this.save(),resetCtxToDefault(this.ctx),this.current=new CanvasExtraState,Array.isArray(rect)&&4===rect.length){var width=rect[2]-rect[0],height=rect[3]-rect[1];this.ctx.rect(rect[0],rect[1],width,height),this.clip(),this.endPath()}this.transform.apply(this,transform),this.transform.apply(this,matrix)},endAnnotation:function(){this.restore()},paintImageMaskXObject:function(img){if(this.contentVisible){var ctx=this.ctx,width=img.width,height=img.height,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill,glyph=this.processingType3;if(glyph&&void 0===glyph.compiled&&(glyph.compiled=width<=1e3&&height<=1e3?function(imgData){var i,ii,j,j0,width=imgData.width,height=imgData.height,width1=width+1,points=new Uint8Array(width1*(height+1)),POINT_TYPES=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),lineSize=width+7&-8,data0=imgData.data,data=new Uint8Array(lineSize*height),pos=0;for(i=0,ii=data0.length;i<ii;i++)for(var elem=data0[i],mask=128;mask>0;)data[pos++]=elem&mask?0:255,mask>>=1;var count=0;for(0!==data[pos=0]&&(points[0]=1,++count),j=1;j<width;j++)data[pos]!==data[pos+1]&&(points[j]=data[pos]?2:1,++count),pos++;for(0!==data[pos]&&(points[j]=2,++count),i=1;i<height;i++){j0=i*width1,data[(pos=i*lineSize)-lineSize]!==data[pos]&&(points[j0]=data[pos]?1:8,++count);var sum=(data[pos]?4:0)+(data[pos-lineSize]?8:0);for(j=1;j<width;j++)POINT_TYPES[sum=(sum>>2)+(data[pos+1]?4:0)+(data[pos-lineSize+1]?8:0)]&&(points[j0+j]=POINT_TYPES[sum],++count),pos++;if(data[pos-lineSize]!==data[pos]&&(points[j0+j]=data[pos]?2:4,++count),count>1e3)return null}for(j0=i*width1,0!==data[pos=lineSize*(height-1)]&&(points[j0]=8,++count),j=1;j<width;j++)data[pos]!==data[pos+1]&&(points[j0+j]=data[pos]?4:8,++count),pos++;if(0!==data[pos]&&(points[j0+j]=4,++count),count>1e3)return null;var steps=new Int32Array([0,width1,-1,0,-width1,0,0,0,1]),outlines=[];for(i=0;count&&i<=height;i++){for(var p=i*width1,end=p+width;p<end&&!points[p];)p++;if(p!==end){var coords=[p%width1,i],p0=p,type=points[p];do{var step=steps[type];do{p+=step}while(!points[p]);var pp=points[p];5!==pp&&10!==pp?(type=pp,points[p]=0):(type=pp&51*type>>4,points[p]&=type>>2|type<<2),coords.push(p%width1),coords.push(p/width1|0),points[p]||--count}while(p0!==p);outlines.push(coords),--i}}return function(c){c.save(),c.scale(1/width,-1/height),c.translate(0,-height),c.beginPath();for(var k=0,kk=outlines.length;k<kk;k++){var o=outlines[k];c.moveTo(o[0],o[1]);for(var l=2,ll=o.length;l<ll;l+=2)c.lineTo(o[l],o[l+1])}c.fill(),c.beginPath(),c.restore()}}({data:img.data,width:width,height:height}):null),null!=glyph&&glyph.compiled)glyph.compiled(ctx);else{var maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height),maskCtx=maskCanvas.context;maskCtx.save(),putBinaryImageMask(maskCtx,img),maskCtx.globalCompositeOperation="source-in",maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this):fillColor,maskCtx.fillRect(0,0,width,height),maskCtx.restore(),this.paintInlineImageXObject(maskCanvas.canvas)}}},paintImageMaskXObjectRepeat:function(imgData,scaleX){var skewX=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,skewY=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,scaleY=arguments.length>4?arguments[4]:void 0,positions=arguments.length>5?arguments[5]:void 0;if(this.contentVisible){var width=imgData.width,height=imgData.height,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill,maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height),maskCtx=maskCanvas.context;maskCtx.save(),putBinaryImageMask(maskCtx,imgData),maskCtx.globalCompositeOperation="source-in",maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this):fillColor,maskCtx.fillRect(0,0,width,height),maskCtx.restore();for(var ctx=this.ctx,i=0,ii=positions.length;i<ii;i+=2)ctx.save(),ctx.transform(scaleX,skewX,skewY,scaleY,positions[i],positions[i+1]),ctx.scale(1,-1),ctx.drawImage(maskCanvas.canvas,0,0,width,height,0,-1,1,1),ctx.restore()}},paintImageMaskXObjectGroup:function(images){if(this.contentVisible)for(var ctx=this.ctx,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill,i=0,ii=images.length;i<ii;i++){var image=images[i],width=image.width,height=image.height,maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height),maskCtx=maskCanvas.context;maskCtx.save(),putBinaryImageMask(maskCtx,image),maskCtx.globalCompositeOperation="source-in",maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this):fillColor,maskCtx.fillRect(0,0,width,height),maskCtx.restore(),ctx.save(),ctx.transform.apply(ctx,image.transform),ctx.scale(1,-1),ctx.drawImage(maskCanvas.canvas,0,0,width,height,0,-1,1,1),ctx.restore()}},paintImageXObject:function(objId){if(this.contentVisible){var imgData=objId.startsWith("g_")?this.commonObjs.get(objId):this.objs.get(objId);imgData?this.paintInlineImageXObject(imgData):(0,_util.warn)("Dependent image isn't ready yet")}},paintImageXObjectRepeat:function(objId,scaleX,scaleY,positions){if(this.contentVisible){var imgData=objId.startsWith("g_")?this.commonObjs.get(objId):this.objs.get(objId);if(imgData){for(var width=imgData.width,height=imgData.height,map=[],i=0,ii=positions.length;i<ii;i+=2)map.push({transform:[scaleX,0,0,scaleY,positions[i],positions[i+1]],x:0,y:0,w:width,h:height});this.paintInlineImageXObjectGroup(imgData,map)}else(0,_util.warn)("Dependent image isn't ready yet")}},paintInlineImageXObject:function(imgData){if(this.contentVisible){var width=imgData.width,height=imgData.height,ctx=this.ctx;this.save(),ctx.scale(1/width,-1/height);var imgToPaint,tmpCanvas,tmpCtx,currentTransform=ctx.mozCurrentTransformInverse,a=currentTransform[0],b=currentTransform[1],widthScale=Math.max(Math.sqrt(a*a+b*b),1),c=currentTransform[2],d=currentTransform[3],heightScale=Math.max(Math.sqrt(c*c+d*d),1);"function"==typeof HTMLElement&&imgData instanceof HTMLElement||!imgData.data?imgToPaint=imgData:(putBinaryImageData(tmpCtx=(tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",width,height)).context,imgData,this.current.transferMaps),imgToPaint=tmpCanvas.canvas);for(var paintWidth=width,paintHeight=height,tmpCanvasId="prescale1";widthScale>2&&paintWidth>1||heightScale>2&&paintHeight>1;){var newWidth=paintWidth,newHeight=paintHeight;widthScale>2&&paintWidth>1&&(widthScale/=paintWidth/(newWidth=Math.ceil(paintWidth/2))),heightScale>2&&paintHeight>1&&(heightScale/=paintHeight/(newHeight=Math.ceil(paintHeight/2))),(tmpCtx=(tmpCanvas=this.cachedCanvases.getCanvas(tmpCanvasId,newWidth,newHeight)).context).clearRect(0,0,newWidth,newHeight),tmpCtx.drawImage(imgToPaint,0,0,paintWidth,paintHeight,0,0,newWidth,newHeight),imgToPaint=tmpCanvas.canvas,paintWidth=newWidth,paintHeight=newHeight,tmpCanvasId="prescale1"===tmpCanvasId?"prescale2":"prescale1"}if(ctx.drawImage(imgToPaint,0,0,paintWidth,paintHeight,0,-height,width,height),this.imageLayer){var position=this.getCanvasPosition(0,-height);this.imageLayer.appendImage({imgData:imgData,left:position[0],top:position[1],width:width/currentTransform[0],height:height/currentTransform[3]})}this.restore()}},paintInlineImageXObjectGroup:function(imgData,map){if(this.contentVisible){var ctx=this.ctx,w=imgData.width,h=imgData.height,tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",w,h);putBinaryImageData(tmpCanvas.context,imgData,this.current.transferMaps);for(var i=0,ii=map.length;i<ii;i++){var entry=map[i];if(ctx.save(),ctx.transform.apply(ctx,entry.transform),ctx.scale(1,-1),ctx.drawImage(tmpCanvas.canvas,entry.x,entry.y,entry.w,entry.h,0,-1,1,1),this.imageLayer){var position=this.getCanvasPosition(entry.x,entry.y);this.imageLayer.appendImage({imgData:imgData,left:position[0],top:position[1],width:w,height:h})}ctx.restore()}}},paintSolidColorImageMask:function(){this.contentVisible&&this.ctx.fillRect(0,0,1,1)},markPoint:function(tag){},markPointProps:function(tag,properties){},beginMarkedContent:function(tag){this.markedContentStack.push({visible:!0})},beginMarkedContentProps:function(tag,properties){"OC"===tag?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(properties)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()},endMarkedContent:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()},beginCompat:function(){},endCompat:function(){},consumePath:function(){var ctx=this.ctx;this.pendingClip&&(this.pendingClip===EO_CLIP?ctx.clip("evenodd"):ctx.clip(),this.pendingClip=null),ctx.beginPath()},getSinglePixelWidth:function(){if(null===this._cachedGetSinglePixelWidth){var m=this.ctx.mozCurrentTransform,absDet=Math.abs(m[0]*m[3]-m[2]*m[1]),sqNorm1=Math.pow(m[0],2)+Math.pow(m[2],2),sqNorm2=Math.pow(m[1],2)+Math.pow(m[3],2),pixelHeight=Math.sqrt(Math.max(sqNorm1,sqNorm2))/absDet;sqNorm1!==sqNorm2&&this._combinedScaleFactor*pixelHeight>1?this._cachedGetSinglePixelWidth=-this._combinedScaleFactor*pixelHeight:absDet>Number.EPSILON?this._cachedGetSinglePixelWidth=1.0000001*pixelHeight:this._cachedGetSinglePixelWidth=1}return this._cachedGetSinglePixelWidth},getCanvasPosition:function(x,y){var transform=this.ctx.mozCurrentTransform;return[transform[0]*x+transform[2]*y+transform[4],transform[1]*x+transform[3]*y+transform[5]]},isContentVisible:function(){for(var i=this.markedContentStack.length-1;i>=0;i--)if(!this.markedContentStack[i].visible)return!1;return!0}},_util.OPS)CanvasGraphics.prototype[_util.OPS[op]]=CanvasGraphics.prototype[op];return CanvasGraphics}();exports.CanvasGraphics=CanvasGraphics},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.getShadingPatternFromIR=function(raw){var shadingIR=ShadingIRs[raw[0]];if(!shadingIR)throw new Error("Unknown IR type: ".concat(raw[0]));return shadingIR.fromIR(raw)},exports.TilingPattern=void 0;var _util=__w_pdfjs_require__(2),ShadingIRs={};function applyBoundingBox(ctx,bbox){if(bbox&&"undefined"!=typeof Path2D){var width=bbox[2]-bbox[0],height=bbox[3]-bbox[1],region=new Path2D;region.rect(bbox[0],bbox[1],width,height),ctx.clip(region)}}ShadingIRs.RadialAxial={fromIR:function(raw){var type=raw[1],bbox=raw[2],colorStops=raw[3],p0=raw[4],p1=raw[5],r0=raw[6],r1=raw[7];return{getPattern:function(ctx){var grad;applyBoundingBox(ctx,bbox),"axial"===type?grad=ctx.createLinearGradient(p0[0],p0[1],p1[0],p1[1]):"radial"===type&&(grad=ctx.createRadialGradient(p0[0],p0[1],r0,p1[0],p1[1],r1));for(var i=0,ii=colorStops.length;i<ii;++i){var c=colorStops[i];grad.addColorStop(c[0],c[1])}return grad}}}};var createMeshCanvas=function(){function drawTriangle(data,context,p1,p2,p3,c1,c2,c3){var tmp,coords=context.coords,colors=context.colors,bytes=data.data,rowSize=4*data.width;coords[p1+1]>coords[p2+1]&&(tmp=p1,p1=p2,p2=tmp,tmp=c1,c1=c2,c2=tmp),coords[p2+1]>coords[p3+1]&&(tmp=p2,p2=p3,p3=tmp,tmp=c2,c2=c3,c3=tmp),coords[p1+1]>coords[p2+1]&&(tmp=p1,p1=p2,p2=tmp,tmp=c1,c1=c2,c2=tmp);var x1=(coords[p1]+context.offsetX)*context.scaleX,y1=(coords[p1+1]+context.offsetY)*context.scaleY,x2=(coords[p2]+context.offsetX)*context.scaleX,y2=(coords[p2+1]+context.offsetY)*context.scaleY,x3=(coords[p3]+context.offsetX)*context.scaleX,y3=(coords[p3+1]+context.offsetY)*context.scaleY;if(!(y1>=y3))for(var xa,car,cag,cab,xb,cbr,cbg,cbb,c1r=colors[c1],c1g=colors[c1+1],c1b=colors[c1+2],c2r=colors[c2],c2g=colors[c2+1],c2b=colors[c2+2],c3r=colors[c3],c3g=colors[c3+1],c3b=colors[c3+2],minY=Math.round(y1),maxY=Math.round(y3),y=minY;y<=maxY;y++){if(y<y2){var _k4=void 0;xa=x1-(x1-x2)*(_k4=y<y1?0:y1===y2?1:(y1-y)/(y1-y2)),car=c1r-(c1r-c2r)*_k4,cag=c1g-(c1g-c2g)*_k4,cab=c1b-(c1b-c2b)*_k4}else{var _k5=void 0;xa=x2-(x2-x3)*(_k5=y>y3?1:y2===y3?0:(y2-y)/(y2-y3)),car=c2r-(c2r-c3r)*_k5,cag=c2g-(c2g-c3g)*_k5,cab=c2b-(c2b-c3b)*_k5}var k=void 0;xb=x1-(x1-x3)*(k=y<y1?0:y>y3?1:(y1-y)/(y1-y3)),cbr=c1r-(c1r-c3r)*k,cbg=c1g-(c1g-c3g)*k,cbb=c1b-(c1b-c3b)*k;for(var x1_=Math.round(Math.min(xa,xb)),x2_=Math.round(Math.max(xa,xb)),j=rowSize*y+4*x1_,x=x1_;x<=x2_;x++)(k=(xa-x)/(xa-xb))<0?k=0:k>1&&(k=1),bytes[j++]=car-(car-cbr)*k|0,bytes[j++]=cag-(cag-cbg)*k|0,bytes[j++]=cab-(cab-cbb)*k|0,bytes[j++]=255}}function drawFigure(data,figure,context){var i,ii,ps=figure.coords,cs=figure.colors;switch(figure.type){case"lattice":var verticesPerRow=figure.verticesPerRow,rows=Math.floor(ps.length/verticesPerRow)-1,cols=verticesPerRow-1;for(i=0;i<rows;i++)for(var q=i*verticesPerRow,j=0;j<cols;j++,q++)drawTriangle(data,context,ps[q],ps[q+1],ps[q+verticesPerRow],cs[q],cs[q+1],cs[q+verticesPerRow]),drawTriangle(data,context,ps[q+verticesPerRow+1],ps[q+1],ps[q+verticesPerRow],cs[q+verticesPerRow+1],cs[q+1],cs[q+verticesPerRow]);break;case"triangles":for(i=0,ii=ps.length;i<ii;i+=3)drawTriangle(data,context,ps[i],ps[i+1],ps[i+2],cs[i],cs[i+1],cs[i+2]);break;default:throw new Error("illegal figure")}}return function(bounds,combinesScale,coords,colors,figures,backgroundColor,cachedCanvases,webGLContext){var canvas,tmpCanvas,i,ii,offsetX=Math.floor(bounds[0]),offsetY=Math.floor(bounds[1]),boundsWidth=Math.ceil(bounds[2])-offsetX,boundsHeight=Math.ceil(bounds[3])-offsetY,width=Math.min(Math.ceil(Math.abs(boundsWidth*combinesScale[0]*1.1)),3e3),height=Math.min(Math.ceil(Math.abs(boundsHeight*combinesScale[1]*1.1)),3e3),scaleX=boundsWidth/width,scaleY=boundsHeight/height,context={coords:coords,colors:colors,offsetX:-offsetX,offsetY:-offsetY,scaleX:1/scaleX,scaleY:1/scaleY},paddedWidth=width+4,paddedHeight=height+4;if(webGLContext.isEnabled)canvas=webGLContext.drawFigures({width:width,height:height,backgroundColor:backgroundColor,figures:figures,context:context}),(tmpCanvas=cachedCanvases.getCanvas("mesh",paddedWidth,paddedHeight,!1)).context.drawImage(canvas,2,2),canvas=tmpCanvas.canvas;else{var tmpCtx=(tmpCanvas=cachedCanvases.getCanvas("mesh",paddedWidth,paddedHeight,!1)).context,data=tmpCtx.createImageData(width,height);if(backgroundColor){var bytes=data.data;for(i=0,ii=bytes.length;i<ii;i+=4)bytes[i]=backgroundColor[0],bytes[i+1]=backgroundColor[1],bytes[i+2]=backgroundColor[2],bytes[i+3]=255}for(i=0;i<figures.length;i++)drawFigure(data,figures[i],context);tmpCtx.putImageData(data,2,2),canvas=tmpCanvas.canvas}return{canvas:canvas,offsetX:offsetX-2*scaleX,offsetY:offsetY-2*scaleY,scaleX:scaleX,scaleY:scaleY}}}();ShadingIRs.Mesh={fromIR:function(raw){var coords=raw[2],colors=raw[3],figures=raw[4],bounds=raw[5],matrix=raw[6],bbox=raw[7],background=raw[8];return{getPattern:function(ctx,owner,shadingFill){var scale;if(applyBoundingBox(ctx,bbox),shadingFill)scale=_util.Util.singularValueDecompose2dScale(ctx.mozCurrentTransform);else if(scale=_util.Util.singularValueDecompose2dScale(owner.baseTransform),matrix){var matrixScale=_util.Util.singularValueDecompose2dScale(matrix);scale=[scale[0]*matrixScale[0],scale[1]*matrixScale[1]]}var temporaryPatternCanvas=createMeshCanvas(bounds,scale,coords,colors,figures,shadingFill?null:background,owner.cachedCanvases,owner.webGLContext);return shadingFill||(ctx.setTransform.apply(ctx,owner.baseTransform),matrix&&ctx.transform.apply(ctx,matrix)),ctx.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY),ctx.scale(temporaryPatternCanvas.scaleX,temporaryPatternCanvas.scaleY),ctx.createPattern(temporaryPatternCanvas.canvas,"no-repeat")}}}},ShadingIRs.Dummy={fromIR:function(){return{getPattern:function(){return"hotpink"}}}};var TilingPattern=function(){var PaintType_COLORED=1,PaintType_UNCOLORED=2;function TilingPattern(IR,color,ctx,canvasGraphicsFactory,baseTransform){this.operatorList=IR[2],this.matrix=IR[3]||[1,0,0,1,0,0],this.bbox=IR[4],this.xstep=IR[5],this.ystep=IR[6],this.paintType=IR[7],this.tilingType=IR[8],this.color=color,this.canvasGraphicsFactory=canvasGraphicsFactory,this.baseTransform=baseTransform,this.ctx=ctx}return TilingPattern.prototype={createPatternCanvas:function(owner){var operatorList=this.operatorList,bbox=this.bbox,xstep=this.xstep,ystep=this.ystep,paintType=this.paintType,tilingType=this.tilingType,color=this.color,canvasGraphicsFactory=this.canvasGraphicsFactory;(0,_util.info)("TilingType: "+tilingType);var x0=bbox[0],y0=bbox[1],x1=bbox[2],y1=bbox[3],matrixScale=_util.Util.singularValueDecompose2dScale(this.matrix),curMatrixScale=_util.Util.singularValueDecompose2dScale(this.baseTransform),combinedScale=[matrixScale[0]*curMatrixScale[0],matrixScale[1]*curMatrixScale[1]],dimx=this.getSizeAndScale(xstep,this.ctx.canvas.width,combinedScale[0]),dimy=this.getSizeAndScale(ystep,this.ctx.canvas.height,combinedScale[1]),tmpCanvas=owner.cachedCanvases.getCanvas("pattern",dimx.size,dimy.size,!0),tmpCtx=tmpCanvas.context,graphics=canvasGraphicsFactory.createCanvasGraphics(tmpCtx);return graphics.groupLevel=owner.groupLevel,this.setFillAndStrokeStyleToContext(graphics,paintType,color),graphics.transform(dimx.scale,0,0,dimy.scale,0,0),graphics.transform(1,0,0,1,-x0,-y0),this.clipBbox(graphics,bbox,x0,y0,x1,y1),graphics.executeOperatorList(operatorList),this.ctx.transform(1,0,0,1,x0,y0),this.ctx.scale(1/dimx.scale,1/dimy.scale),tmpCanvas.canvas},getSizeAndScale:function(step,realOutputSize,scale){step=Math.abs(step);var maxSize=Math.max(3e3,realOutputSize),size=Math.ceil(step*scale);return size>=maxSize?size=maxSize:scale=size/step,{scale:scale,size:size}},clipBbox:function(graphics,bbox,x0,y0,x1,y1){if(Array.isArray(bbox)&&4===bbox.length){var bboxWidth=x1-x0,bboxHeight=y1-y0;graphics.ctx.rect(x0,y0,bboxWidth,bboxHeight),graphics.clip(),graphics.endPath()}},setFillAndStrokeStyleToContext:function(graphics,paintType,color){var context=graphics.ctx,current=graphics.current;switch(paintType){case PaintType_COLORED:var ctx=this.ctx;context.fillStyle=ctx.fillStyle,context.strokeStyle=ctx.strokeStyle,current.fillColor=ctx.fillStyle,current.strokeColor=ctx.strokeStyle;break;case PaintType_UNCOLORED:var cssColor=_util.Util.makeHexColor(color[0],color[1],color[2]);context.fillStyle=cssColor,context.strokeStyle=cssColor,current.fillColor=cssColor,current.strokeColor=cssColor;break;default:throw new _util.FormatError("Unsupported paint type: ".concat(paintType))}},getPattern:function(ctx,owner){(ctx=this.ctx).setTransform.apply(ctx,this.baseTransform),ctx.transform.apply(ctx,this.matrix);var temporaryPatternCanvas=this.createPatternCanvas(owner);return ctx.createPattern(temporaryPatternCanvas,"repeat")}},TilingPattern}();exports.TilingPattern=TilingPattern},function(__unused_webpack_module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.GlobalWorkerOptions=void 0;var GlobalWorkerOptions=Object.create(null);exports.GlobalWorkerOptions=GlobalWorkerOptions,GlobalWorkerOptions.workerPort=void 0===GlobalWorkerOptions.workerPort?null:GlobalWorkerOptions.workerPort,GlobalWorkerOptions.workerSrc=void 0===GlobalWorkerOptions.workerSrc?"":GlobalWorkerOptions.workerSrc},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.MessageHandler=void 0;var _util=__w_pdfjs_require__(2),CallbackKind_DATA=1,CallbackKind_ERROR=2,StreamKind_CANCEL=1,StreamKind_CANCEL_COMPLETE=2,StreamKind_CLOSE=3,StreamKind_ENQUEUE=4,StreamKind_ERROR=5,StreamKind_PULL=6,StreamKind_PULL_COMPLETE=7,StreamKind_START_COMPLETE=8;function wrapReason(reason){if("object"!==_typeof(reason)||null===reason)return reason;switch(reason.name){case"AbortException":return new _util.AbortException(reason.message);case"MissingPDFException":return new _util.MissingPDFException(reason.message);case"UnexpectedResponseException":return new _util.UnexpectedResponseException(reason.message,reason.status);case"UnknownErrorException":return new _util.UnknownErrorException(reason.message,reason.details);default:return new _util.UnknownErrorException(reason.message,reason.toString())}}var MessageHandler=function(){function MessageHandler(sourceName,targetName,comObj){var _this29=this;_classCallCheck(this,MessageHandler),this.sourceName=sourceName,this.targetName=targetName,this.comObj=comObj,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(event){var data=event.data;if(data.targetName===_this29.sourceName)if(data.stream)_this29._processStreamMessage(data);else if(data.callback){var callbackId=data.callbackId,capability=_this29.callbackCapabilities[callbackId];if(!capability)throw new Error("Cannot resolve callback ".concat(callbackId));if(delete _this29.callbackCapabilities[callbackId],data.callback===CallbackKind_DATA)capability.resolve(data.data);else{if(data.callback!==CallbackKind_ERROR)throw new Error("Unexpected callback case");capability.reject(wrapReason(data.reason))}}else{var action=_this29.actionHandler[data.action];if(!action)throw new Error("Unknown action from worker: ".concat(data.action));if(data.callbackId){var cbSourceName=_this29.sourceName,cbTargetName=data.sourceName;new Promise((function(resolve){resolve(action(data.data))})).then((function(result){comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind_DATA,callbackId:data.callbackId,data:result})}),(function(reason){comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind_ERROR,callbackId:data.callbackId,reason:wrapReason(reason)})}))}else data.streamId?_this29._createStreamSink(data):action(data.data)}},comObj.addEventListener("message",this._onComObjOnMessage)}var _deleteStreamController2;return _createClass(MessageHandler,[{key:"on",value:function(actionName,handler){var ah=this.actionHandler;if(ah[actionName])throw new Error('There is already an actionName called "'.concat(actionName,'"'));ah[actionName]=handler}},{key:"send",value:function(actionName,data,transfers){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,data:data},transfers)}},{key:"sendWithPromise",value:function(actionName,data,transfers){var callbackId=this.callbackId++,capability=(0,_util.createPromiseCapability)();this.callbackCapabilities[callbackId]=capability;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,callbackId:callbackId,data:data},transfers)}catch(ex){capability.reject(ex)}return capability.promise}},{key:"sendWithStream",value:function(actionName,data,queueingStrategy,transfers){var _this30=this,streamId=this.streamId++,sourceName=this.sourceName,targetName=this.targetName,comObj=this.comObj;return new ReadableStream({start:function(controller){var startCapability=(0,_util.createPromiseCapability)();return _this30.streamControllers[streamId]={controller:controller,startCall:startCapability,pullCall:null,cancelCall:null,isClosed:!1},_this30._postMessage({sourceName:sourceName,targetName:targetName,action:actionName,streamId:streamId,data:data,desiredSize:controller.desiredSize},transfers),startCapability.promise},pull:function(controller){var pullCapability=(0,_util.createPromiseCapability)();return _this30.streamControllers[streamId].pullCall=pullCapability,comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_PULL,streamId:streamId,desiredSize:controller.desiredSize}),pullCapability.promise},cancel:function(reason){(0,_util.assert)(reason instanceof Error,"cancel must have a valid reason");var cancelCapability=(0,_util.createPromiseCapability)();return _this30.streamControllers[streamId].cancelCall=cancelCapability,_this30.streamControllers[streamId].isClosed=!0,comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_CANCEL,streamId:streamId,reason:wrapReason(reason)}),cancelCapability.promise}},queueingStrategy)}},{key:"_createStreamSink",value:function(data){var self=this,action=this.actionHandler[data.action],streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj,streamSink={enqueue:function(chunk){var size=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,transfers=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var lastDesiredSize=this.desiredSize;this.desiredSize-=size,lastDesiredSize>0&&this.desiredSize<=0&&(this.sinkCapability=(0,_util.createPromiseCapability)(),this.ready=this.sinkCapability.promise),self._postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_ENQUEUE,streamId:streamId,chunk:chunk},transfers)}},close:function(){this.isCancelled||(this.isCancelled=!0,comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_CLOSE,streamId:streamId}),delete self.streamSinks[streamId])},error:function(reason){(0,_util.assert)(reason instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_ERROR,streamId:streamId,reason:wrapReason(reason)}))},sinkCapability:(0,_util.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:data.desiredSize,ready:null};streamSink.sinkCapability.resolve(),streamSink.ready=streamSink.sinkCapability.promise,this.streamSinks[streamId]=streamSink,new Promise((function(resolve){resolve(action(data.data,streamSink))})).then((function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_START_COMPLETE,streamId:streamId,success:!0})}),(function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_START_COMPLETE,streamId:streamId,reason:wrapReason(reason)})}))}},{key:"_processStreamMessage",value:function(data){var streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;switch(data.stream){case StreamKind_START_COMPLETE:data.success?this.streamControllers[streamId].startCall.resolve():this.streamControllers[streamId].startCall.reject(wrapReason(data.reason));break;case StreamKind_PULL_COMPLETE:data.success?this.streamControllers[streamId].pullCall.resolve():this.streamControllers[streamId].pullCall.reject(wrapReason(data.reason));break;case StreamKind_PULL:if(!this.streamSinks[streamId]){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_PULL_COMPLETE,streamId:streamId,success:!0});break}this.streamSinks[streamId].desiredSize<=0&&data.desiredSize>0&&this.streamSinks[streamId].sinkCapability.resolve(),this.streamSinks[streamId].desiredSize=data.desiredSize;var onPull=this.streamSinks[data.streamId].onPull;new Promise((function(resolve){resolve(onPull&&onPull())})).then((function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_PULL_COMPLETE,streamId:streamId,success:!0})}),(function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_PULL_COMPLETE,streamId:streamId,reason:wrapReason(reason)})}));break;case StreamKind_ENQUEUE:if((0,_util.assert)(this.streamControllers[streamId],"enqueue should have stream controller"),this.streamControllers[streamId].isClosed)break;this.streamControllers[streamId].controller.enqueue(data.chunk);break;case StreamKind_CLOSE:if((0,_util.assert)(this.streamControllers[streamId],"close should have stream controller"),this.streamControllers[streamId].isClosed)break;this.streamControllers[streamId].isClosed=!0,this.streamControllers[streamId].controller.close(),this._deleteStreamController(streamId);break;case StreamKind_ERROR:(0,_util.assert)(this.streamControllers[streamId],"error should have stream controller"),this.streamControllers[streamId].controller.error(wrapReason(data.reason)),this._deleteStreamController(streamId);break;case StreamKind_CANCEL_COMPLETE:data.success?this.streamControllers[streamId].cancelCall.resolve():this.streamControllers[streamId].cancelCall.reject(wrapReason(data.reason)),this._deleteStreamController(streamId);break;case StreamKind_CANCEL:if(!this.streamSinks[streamId])break;var onCancel=this.streamSinks[data.streamId].onCancel;new Promise((function(resolve){resolve(onCancel&&onCancel(wrapReason(data.reason)))})).then((function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_CANCEL_COMPLETE,streamId:streamId,success:!0})}),(function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_CANCEL_COMPLETE,streamId:streamId,reason:wrapReason(reason)})})),this.streamSinks[streamId].sinkCapability.reject(wrapReason(data.reason)),this.streamSinks[streamId].isCancelled=!0,delete this.streamSinks[streamId];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:(_deleteStreamController2=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(streamId){return regeneratorRuntime.wrap((function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,Promise.allSettled([this.streamControllers[streamId].startCall,this.streamControllers[streamId].pullCall,this.streamControllers[streamId].cancelCall].map((function(capability){return capability&&capability.promise})));case 2:delete this.streamControllers[streamId];case 3:case"end":return _context6.stop()}}),_callee6,this)}))),function(_x4){return _deleteStreamController2.apply(this,arguments)})},{key:"_postMessage",value:function(message,transfers){transfers&&this.postMessageTransfers?this.comObj.postMessage(message,transfers):this.comObj.postMessage(message)}},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]),MessageHandler}();exports.MessageHandler=MessageHandler},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.Metadata=void 0;var _util=__w_pdfjs_require__(2),_xml_parser=__w_pdfjs_require__(15),Metadata=function(){function Metadata(data){_classCallCheck(this,Metadata),(0,_util.assert)("string"==typeof data,"Metadata: input is not a string"),data=this._repair(data);var xmlDocument=new _xml_parser.SimpleXMLParser({lowerCaseName:!0}).parseFromString(data);this._metadataMap=new Map,xmlDocument&&this._parse(xmlDocument),this._data=data}return _createClass(Metadata,[{key:"_repair",value:function(data){return data.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,(function(all,codes){for(var bytes=codes.replace(/\\([0-3])([0-7])([0-7])/g,(function(code,d1,d2,d3){return String.fromCharCode(64*d1+8*d2+1*d3)})).replace(/&(amp|apos|gt|lt|quot);/g,(function(str,name){switch(name){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error("_repair: ".concat(name," isn't defined."))})),chars="",i=0,ii=bytes.length;i<ii;i+=2){var code=256*bytes.charCodeAt(i)+bytes.charCodeAt(i+1);chars+=code>=32&&code<127&&60!==code&&62!==code&&38!==code?String.fromCharCode(code):"&#x"+(65536+code).toString(16).substring(1)+";"}return">"+chars}))}},{key:"_getSequence",value:function(entry){var name=entry.nodeName;return"rdf:bag"!==name&&"rdf:seq"!==name&&"rdf:alt"!==name?null:entry.childNodes.filter((function(node){return"rdf:li"===node.nodeName}))}},{key:"_getCreators",value:function(entry){if("dc:creator"!==entry.nodeName)return!1;if(!entry.hasChildNodes())return!0;var seqNode=entry.childNodes[0],authors=this._getSequence(seqNode)||[];return this._metadataMap.set(entry.nodeName,authors.map((function(node){return node.textContent.trim()}))),!0}},{key:"_parse",value:function(xmlDocument){var rdf=xmlDocument.documentElement;if("rdf:rdf"!==rdf.nodeName)for(rdf=rdf.firstChild;rdf&&"rdf:rdf"!==rdf.nodeName;)rdf=rdf.nextSibling;if(rdf&&"rdf:rdf"===rdf.nodeName&&rdf.hasChildNodes()){var _step12,_iterator12=_createForOfIteratorHelper(rdf.childNodes);try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var desc=_step12.value;if("rdf:description"===desc.nodeName){var _step13,_iterator13=_createForOfIteratorHelper(desc.childNodes);try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var entry=_step13.value,name=entry.nodeName;"#text"!==name&&(this._getCreators(entry)||this._metadataMap.set(name,entry.textContent.trim()))}}catch(err){_iterator13.e(err)}finally{_iterator13.f()}}}}catch(err){_iterator12.e(err)}finally{_iterator12.f()}}}},{key:"getRaw",value:function(){return this._data}},{key:"get",value:function(name){var _this$_metadataMap$ge;return null!==(_this$_metadataMap$ge=this._metadataMap.get(name))&&void 0!==_this$_metadataMap$ge?_this$_metadataMap$ge:null}},{key:"getAll",value:function(){return(0,_util.objectFromEntries)(this._metadataMap)}},{key:"has",value:function(name){return this._metadataMap.has(name)}}]),Metadata}();exports.Metadata=Metadata},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleXMLParser=exports.SimpleDOMNode=void 0;var _util=__w_pdfjs_require__(2),XMLParserErrorCode_NoError=0,XMLParserErrorCode_UnterminatedCdat=-2,XMLParserErrorCode_UnterminatedXmlDeclaration=-3,XMLParserErrorCode_UnterminatedDoctypeDeclaration=-4,XMLParserErrorCode_UnterminatedComment=-5,XMLParserErrorCode_MalformedElement=-6,XMLParserErrorCode_UnterminatedElement=-9;function isWhitespace(s,index){var ch=s[index];return" "===ch||"\n"===ch||"\r"===ch||"\t"===ch}var XMLParserBase=function(){function XMLParserBase(){_classCallCheck(this,XMLParserBase)}return _createClass(XMLParserBase,[{key:"_resolveEntities",value:function(s){var _this31=this;return s.replace(/&([^;]+);/g,(function(all,entity){if("#x"===entity.substring(0,2))return String.fromCodePoint(parseInt(entity.substring(2),16));if("#"===entity.substring(0,1))return String.fromCodePoint(parseInt(entity.substring(1),10));switch(entity){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return _this31.onResolveEntity(entity)}))}},{key:"_parseContent",value:function(s,start){var attributes=[],pos=start;function skipWs(){for(;pos<s.length&&isWhitespace(s,pos);)++pos}for(;pos<s.length&&!isWhitespace(s,pos)&&">"!==s[pos]&&"/"!==s[pos];)++pos;var name=s.substring(start,pos);for(skipWs();pos<s.length&&">"!==s[pos]&&"/"!==s[pos]&&"?"!==s[pos];){skipWs();for(var attrValue,attrName="";pos<s.length&&!isWhitespace(s,pos)&&"="!==s[pos];)attrName+=s[pos],++pos;if(skipWs(),"="!==s[pos])return null;++pos,skipWs();var attrEndChar=s[pos];if('"'!==attrEndChar&&"'"!==attrEndChar)return null;var attrEndIndex=s.indexOf(attrEndChar,++pos);if(attrEndIndex<0)return null;attrValue=s.substring(pos,attrEndIndex),attributes.push({name:attrName,value:this._resolveEntities(attrValue)}),pos=attrEndIndex+1,skipWs()}return{name:name,attributes:attributes,parsed:pos-start}}},{key:"_parseProcessingInstruction",value:function(s,start){for(var pos=start;pos<s.length&&!isWhitespace(s,pos)&&">"!==s[pos]&&"/"!==s[pos];)++pos;var name=s.substring(start,pos);!function(){for(;pos<s.length&&isWhitespace(s,pos);)++pos}();for(var attrStart=pos;pos<s.length&&("?"!==s[pos]||">"!==s[pos+1]);)++pos;return{name:name,value:s.substring(attrStart,pos),parsed:pos-start}}},{key:"parseXml",value:function(s){for(var i=0;i<s.length;){var j=i;if("<"===s[i]){var q=void 0;switch(s[++j]){case"/":if(++j,(q=s.indexOf(">",j))<0)return void this.onError(XMLParserErrorCode_UnterminatedElement);this.onEndElement(s.substring(j,q)),j=q+1;break;case"?":++j;var pi=this._parseProcessingInstruction(s,j);if("?>"!==s.substring(j+pi.parsed,j+pi.parsed+2))return void this.onError(XMLParserErrorCode_UnterminatedXmlDeclaration);this.onPi(pi.name,pi.value),j+=pi.parsed+2;break;case"!":if("--"===s.substring(j+1,j+3)){if((q=s.indexOf("--\x3e",j+3))<0)return void this.onError(XMLParserErrorCode_UnterminatedComment);this.onComment(s.substring(j+3,q)),j=q+3}else if("[CDATA["===s.substring(j+1,j+8)){if((q=s.indexOf("]]>",j+8))<0)return void this.onError(XMLParserErrorCode_UnterminatedCdat);this.onCdata(s.substring(j+8,q)),j=q+3}else{if("DOCTYPE"!==s.substring(j+1,j+8))return void this.onError(XMLParserErrorCode_MalformedElement);var q2=s.indexOf("[",j+8),complexDoctype=!1;if((q=s.indexOf(">",j+8))<0)return void this.onError(XMLParserErrorCode_UnterminatedDoctypeDeclaration);if(q2>0&&q>q2){if((q=s.indexOf("]>",j+8))<0)return void this.onError(XMLParserErrorCode_UnterminatedDoctypeDeclaration);complexDoctype=!0}var doctypeContent=s.substring(j+8,q+(complexDoctype?1:0));this.onDoctype(doctypeContent),j=q+(complexDoctype?2:1)}break;default:var content=this._parseContent(s,j);if(null===content)return void this.onError(XMLParserErrorCode_MalformedElement);var isClosed=!1;if("/>"===s.substring(j+content.parsed,j+content.parsed+2))isClosed=!0;else if(">"!==s.substring(j+content.parsed,j+content.parsed+1))return void this.onError(XMLParserErrorCode_UnterminatedElement);this.onBeginElement(content.name,content.attributes,isClosed),j+=content.parsed+(isClosed?2:1)}}else{for(;j<s.length&&"<"!==s[j];)j++;var text=s.substring(i,j);this.onText(this._resolveEntities(text))}i=j}}},{key:"onResolveEntity",value:function(name){return"&".concat(name,";")}},{key:"onPi",value:function(name,value){}},{key:"onComment",value:function(text){}},{key:"onCdata",value:function(text){}},{key:"onDoctype",value:function(doctypeContent){}},{key:"onText",value:function(text){}},{key:"onBeginElement",value:function(name,attributes,isEmpty){}},{key:"onEndElement",value:function(name){}},{key:"onError",value:function(code){}}]),XMLParserBase}(),SimpleDOMNode=function(){function SimpleDOMNode(nodeName,nodeValue){_classCallCheck(this,SimpleDOMNode),this.nodeName=nodeName,this.nodeValue=nodeValue,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}return _createClass(SimpleDOMNode,[{key:"firstChild",get:function(){return this.childNodes&&this.childNodes[0]}},{key:"nextSibling",get:function(){var childNodes=this.parentNode.childNodes;if(childNodes){var index=childNodes.indexOf(this);if(-1!==index)return childNodes[index+1]}}},{key:"textContent",get:function(){return this.childNodes?this.childNodes.map((function(child){return child.textContent})).join(""):this.nodeValue||""}},{key:"hasChildNodes",value:function(){return this.childNodes&&this.childNodes.length>0}},{key:"searchNode",value:function(paths,pos){if(pos>=paths.length)return this;for(var component=paths[pos],stack=[],node=this;;){if(component.name===node.nodeName){if(0!==component.pos){if(0===stack.length)return null;var _step14,siblingPos=0,_iterator14=_createForOfIteratorHelper(_slicedToArray(stack.pop(),1)[0].childNodes);try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var child=_step14.value;if(component.name===child.nodeName){if(siblingPos===component.pos)return child.searchNode(paths,pos+1);siblingPos++}}}catch(err){_iterator14.e(err)}finally{_iterator14.f()}return node.searchNode(paths,pos+1)}var res=node.searchNode(paths,pos+1);if(null!==res)return res}if(node.childNodes&&0!==node.childNodes.length)stack.push([node,0]),node=node.childNodes[0];else{if(0===stack.length)return null;for(;0!==stack.length;){var _stack$pop4=_slicedToArray(stack.pop(),2),_parent=_stack$pop4[0],newPos=_stack$pop4[1]+1;if(newPos<_parent.childNodes.length){stack.push([_parent,newPos]),node=_parent.childNodes[newPos];break}}if(0===stack.length)return null}}}},{key:"dump",value:function(buffer){if("#text"!==this.nodeName){if(buffer.push("<".concat(this.nodeName)),this.attributes){var _step15,_iterator15=_createForOfIteratorHelper(this.attributes);try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var attribute=_step15.value;buffer.push(" ".concat(attribute.name,'="').concat((0,_util.encodeToXmlString)(attribute.value),'"'))}}catch(err){_iterator15.e(err)}finally{_iterator15.f()}}if(this.hasChildNodes()){buffer.push(">");var _step16,_iterator16=_createForOfIteratorHelper(this.childNodes);try{for(_iterator16.s();!(_step16=_iterator16.n()).done;)_step16.value.dump(buffer)}catch(err){_iterator16.e(err)}finally{_iterator16.f()}buffer.push("</".concat(this.nodeName,">"))}else this.nodeValue?buffer.push(">".concat((0,_util.encodeToXmlString)(this.nodeValue),"</").concat(this.nodeName,">")):buffer.push("/>")}else buffer.push((0,_util.encodeToXmlString)(this.nodeValue))}}]),SimpleDOMNode}();exports.SimpleDOMNode=SimpleDOMNode;var SimpleXMLParser=function(_XMLParserBase){_inherits(SimpleXMLParser,_XMLParserBase);var _super14=_createSuper(SimpleXMLParser);function SimpleXMLParser(_ref32){var _this32,_ref32$hasAttributes=_ref32.hasAttributes,hasAttributes=void 0!==_ref32$hasAttributes&&_ref32$hasAttributes,_ref32$lowerCaseName=_ref32.lowerCaseName,lowerCaseName=void 0!==_ref32$lowerCaseName&&_ref32$lowerCaseName;return _classCallCheck(this,SimpleXMLParser),(_this32=_super14.call(this))._currentFragment=null,_this32._stack=null,_this32._errorCode=XMLParserErrorCode_NoError,_this32._hasAttributes=hasAttributes,_this32._lowerCaseName=lowerCaseName,_this32}return _createClass(SimpleXMLParser,[{key:"parseFromString",value:function(data){if(this._currentFragment=[],this._stack=[],this._errorCode=XMLParserErrorCode_NoError,this.parseXml(data),this._errorCode===XMLParserErrorCode_NoError){var documentElement=_slicedToArray(this._currentFragment,1)[0];if(documentElement)return{documentElement:documentElement}}}},{key:"onResolveEntity",value:function(name){return"apos"===name?"'":_get(_getPrototypeOf(SimpleXMLParser.prototype),"onResolveEntity",this).call(this,name)}},{key:"onText",value:function(text){if(!function(s){for(var i=0,ii=s.length;i<ii;i++)if(!isWhitespace(s,i))return!1;return!0}(text)){var node=new SimpleDOMNode("#text",text);this._currentFragment.push(node)}}},{key:"onCdata",value:function(text){var node=new SimpleDOMNode("#text",text);this._currentFragment.push(node)}},{key:"onBeginElement",value:function(name,attributes,isEmpty){this._lowerCaseName&&(name=name.toLowerCase());var node=new SimpleDOMNode(name);node.childNodes=[],this._hasAttributes&&(node.attributes=attributes),this._currentFragment.push(node),isEmpty||(this._stack.push(this._currentFragment),this._currentFragment=node.childNodes)}},{key:"onEndElement",value:function(name){this._currentFragment=this._stack.pop()||[];var lastElement=this._currentFragment[this._currentFragment.length-1];if(lastElement)for(var i=0,ii=lastElement.childNodes.length;i<ii;i++)lastElement.childNodes[i].parentNode=lastElement}},{key:"onError",value:function(code){this._errorCode=code}}]),SimpleXMLParser}(XMLParserBase);exports.SimpleXMLParser=SimpleXMLParser},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.OptionalContentConfig=void 0;var _util=__w_pdfjs_require__(2),OptionalContentGroup=_createClass((function OptionalContentGroup(name,intent){_classCallCheck(this,OptionalContentGroup),this.visible=!0,this.name=name,this.intent=intent})),OptionalContentConfig=function(){function OptionalContentConfig(data){if(_classCallCheck(this,OptionalContentConfig),this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==data){this.name=data.name,this.creator=data.creator,this._order=data.order;var _step17,_iterator17=_createForOfIteratorHelper(data.groups);try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var _group=_step17.value;this._groups.set(_group.id,new OptionalContentGroup(_group.name,_group.intent))}}catch(err){_iterator17.e(err)}finally{_iterator17.f()}if("OFF"===data.baseState){var _step18,_iterator18=_createForOfIteratorHelper(this._groups);try{for(_iterator18.s();!(_step18=_iterator18.n()).done;)_step18.value.visible=!1}catch(err){_iterator18.e(err)}finally{_iterator18.f()}}var _step19,_iterator19=_createForOfIteratorHelper(data.on);try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var on=_step19.value;this._groups.get(on).visible=!0}}catch(err){_iterator19.e(err)}finally{_iterator19.f()}var _step20,_iterator20=_createForOfIteratorHelper(data.off);try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var off=_step20.value;this._groups.get(off).visible=!1}}catch(err){_iterator20.e(err)}finally{_iterator20.f()}}}return _createClass(OptionalContentConfig,[{key:"isVisible",value:function(group){if("OCG"===group.type)return this._groups.has(group.id)?this._groups.get(group.id).visible:((0,_util.warn)("Optional content group not found: ".concat(group.id)),!0);if("OCMD"===group.type){if(group.expression&&(0,_util.warn)("Visibility expression not supported yet."),!group.policy||"AnyOn"===group.policy){var _step21,_iterator21=_createForOfIteratorHelper(group.ids);try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var id=_step21.value;if(!this._groups.has(id))return(0,_util.warn)("Optional content group not found: ".concat(id)),!0;if(this._groups.get(id).visible)return!0}}catch(err){_iterator21.e(err)}finally{_iterator21.f()}return!1}if("AllOn"===group.policy){var _step22,_iterator22=_createForOfIteratorHelper(group.ids);try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var _id=_step22.value;if(!this._groups.has(_id))return(0,_util.warn)("Optional content group not found: ".concat(_id)),!0;if(!this._groups.get(_id).visible)return!1}}catch(err){_iterator22.e(err)}finally{_iterator22.f()}return!0}if("AnyOff"===group.policy){var _step23,_iterator23=_createForOfIteratorHelper(group.ids);try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var _id2=_step23.value;if(!this._groups.has(_id2))return(0,_util.warn)("Optional content group not found: ".concat(_id2)),!0;if(!this._groups.get(_id2).visible)return!0}}catch(err){_iterator23.e(err)}finally{_iterator23.f()}return!1}if("AllOff"===group.policy){var _step24,_iterator24=_createForOfIteratorHelper(group.ids);try{for(_iterator24.s();!(_step24=_iterator24.n()).done;){var _id3=_step24.value;if(!this._groups.has(_id3))return(0,_util.warn)("Optional content group not found: ".concat(_id3)),!0;if(this._groups.get(_id3).visible)return!1}}catch(err){_iterator24.e(err)}finally{_iterator24.f()}return!0}return(0,_util.warn)("Unknown optional content policy ".concat(group.policy,".")),!0}return(0,_util.warn)("Unknown group type ".concat(group.type,".")),!0}},{key:"setVisibility",value:function(id){var visible=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._groups.has(id)?this._groups.get(id).visible=!!visible:(0,_util.warn)("Optional content group not found: ".concat(id))}},{key:"getOrder",value:function(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}},{key:"getGroups",value:function(){return this._groups.size?(0,_util.objectFromEntries)(this._groups):null}},{key:"getGroup",value:function(id){return this._groups.get(id)||null}}]),OptionalContentConfig}();exports.OptionalContentConfig=OptionalContentConfig},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFDataTransportStream=void 0;var _util=__w_pdfjs_require__(2),PDFDataTransportStream=function(){function PDFDataTransportStream(params,pdfDataRangeTransport){var _this33=this;_classCallCheck(this,PDFDataTransportStream),(0,_util.assert)(pdfDataRangeTransport,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=params.progressiveDone||!1;var initialData=params.initialData;if((null==initialData?void 0:initialData.length)>0){var buffer=new Uint8Array(initialData).buffer;this._queuedChunks.push(buffer)}this._pdfDataRangeTransport=pdfDataRangeTransport,this._isStreamingSupported=!params.disableStream,this._isRangeSupported=!params.disableRange,this._contentLength=params.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((function(begin,chunk){_this33._onReceiveData({begin:begin,chunk:chunk})})),this._pdfDataRangeTransport.addProgressListener((function(loaded,total){_this33._onProgress({loaded:loaded,total:total})})),this._pdfDataRangeTransport.addProgressiveReadListener((function(chunk){_this33._onReceiveData({chunk:chunk})})),this._pdfDataRangeTransport.addProgressiveDoneListener((function(){_this33._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}return _createClass(PDFDataTransportStream,[{key:"_onReceiveData",value:function(args){var buffer=new Uint8Array(args.chunk).buffer;if(void 0===args.begin)this._fullRequestReader?this._fullRequestReader._enqueue(buffer):this._queuedChunks.push(buffer);else{var found=this._rangeReaders.some((function(rangeReader){return rangeReader._begin===args.begin&&(rangeReader._enqueue(buffer),!0)}));(0,_util.assert)(found,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_progressiveDataLength",get:function(){var _this$_fullRequestRea,_this$_fullRequestRea2;return null!==(_this$_fullRequestRea=null===(_this$_fullRequestRea2=this._fullRequestReader)||void 0===_this$_fullRequestRea2?void 0:_this$_fullRequestRea2._loaded)&&void 0!==_this$_fullRequestRea?_this$_fullRequestRea:0}},{key:"_onProgress",value:function(evt){if(void 0===evt.total){var firstReader=this._rangeReaders[0];null!=firstReader&&firstReader.onProgress&&firstReader.onProgress({loaded:evt.loaded})}else{var fullReader=this._fullRequestReader;null!=fullReader&&fullReader.onProgress&&fullReader.onProgress({loaded:evt.loaded,total:evt.total})}}},{key:"_onProgressiveDone",value:function(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(reader){var i=this._rangeReaders.indexOf(reader);i>=0&&this._rangeReaders.splice(i,1)}},{key:"getFullReader",value:function(){(0,_util.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var queuedChunks=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,queuedChunks,this._progressiveDone)}},{key:"getRangeReader",value:function(begin,end){if(end<=this._progressiveDataLength)return null;var reader=new PDFDataTransportStreamRangeReader(this,begin,end);return this._pdfDataRangeTransport.requestDataRange(begin,end),this._rangeReaders.push(reader),reader}},{key:"cancelAllRequests",value:function(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason),this._rangeReaders.slice(0).forEach((function(rangeReader){rangeReader.cancel(reason)})),this._pdfDataRangeTransport.abort()}}]),PDFDataTransportStream}();exports.PDFDataTransportStream=PDFDataTransportStream;var PDFDataTransportStreamReader=function(){function PDFDataTransportStreamReader(stream,queuedChunks){var progressiveDone=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,PDFDataTransportStreamReader),this._stream=stream,this._done=progressiveDone||!1,this._filename=null,this._queuedChunks=queuedChunks||[],this._loaded=0;var _step25,_iterator25=_createForOfIteratorHelper(this._queuedChunks);try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var chunk=_step25.value;this._loaded+=chunk.byteLength}}catch(err){_iterator25.e(err)}finally{_iterator25.f()}this._requests=[],this._headersReady=Promise.resolve(),stream._fullRequestReader=this,this.onProgress=null}var _read;return _createClass(PDFDataTransportStreamReader,[{key:"_enqueue",value:function(chunk){this._done||(this._requests.length>0?this._requests.shift().resolve({value:chunk,done:!1}):this._queuedChunks.push(chunk),this._loaded+=chunk.byteLength)}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}},{key:"read",value:(_read=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){var chunk,requestCapability;return regeneratorRuntime.wrap((function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(!(this._queuedChunks.length>0)){_context7.next=3;break}return chunk=this._queuedChunks.shift(),_context7.abrupt("return",{value:chunk,done:!1});case 3:if(!this._done){_context7.next=5;break}return _context7.abrupt("return",{value:void 0,done:!0});case 5:return requestCapability=(0,_util.createPromiseCapability)(),this._requests.push(requestCapability),_context7.abrupt("return",requestCapability.promise);case 8:case"end":return _context7.stop()}}),_callee7,this)}))),function(){return _read.apply(this,arguments)})},{key:"cancel",value:function(reason){this._done=!0,this._requests.forEach((function(requestCapability){requestCapability.resolve({value:void 0,done:!0})})),this._requests=[]}},{key:"progressiveDone",value:function(){this._done||(this._done=!0)}}]),PDFDataTransportStreamReader}(),PDFDataTransportStreamRangeReader=function(){function PDFDataTransportStreamRangeReader(stream,begin,end){_classCallCheck(this,PDFDataTransportStreamRangeReader),this._stream=stream,this._begin=begin,this._end=end,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}var _read2;return _createClass(PDFDataTransportStreamRangeReader,[{key:"_enqueue",value:function(chunk){this._done||(0===this._requests.length?this._queuedChunk=chunk:(this._requests.shift().resolve({value:chunk,done:!1}),this._requests.forEach((function(requestCapability){requestCapability.resolve({value:void 0,done:!0})})),this._requests=[]),this._done=!0,this._stream._removeRangeReader(this))}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(_read2=_asyncToGenerator(regeneratorRuntime.mark((function _callee8(){var chunk,requestCapability;return regeneratorRuntime.wrap((function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(!this._queuedChunk){_context8.next=4;break}return chunk=this._queuedChunk,this._queuedChunk=null,_context8.abrupt("return",{value:chunk,done:!1});case 4:if(!this._done){_context8.next=6;break}return _context8.abrupt("return",{value:void 0,done:!0});case 6:return requestCapability=(0,_util.createPromiseCapability)(),this._requests.push(requestCapability),_context8.abrupt("return",requestCapability.promise);case 9:case"end":return _context8.stop()}}),_callee8,this)}))),function(){return _read2.apply(this,arguments)})},{key:"cancel",value:function(reason){this._done=!0,this._requests.forEach((function(requestCapability){requestCapability.resolve({value:void 0,done:!0})})),this._requests=[],this._stream._removeRangeReader(this)}}]),PDFDataTransportStreamRangeReader}()},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLContext=void 0;var _util=__w_pdfjs_require__(2),WebGLContext=function(){function WebGLContext(_ref33){var _ref33$enable=_ref33.enable,enable=void 0!==_ref33$enable&&_ref33$enable;_classCallCheck(this,WebGLContext),this._enabled=!0===enable}return _createClass(WebGLContext,[{key:"isEnabled",get:function(){var enabled=this._enabled;return enabled&&(enabled=WebGLUtils.tryInitGL()),(0,_util.shadow)(this,"isEnabled",enabled)}},{key:"composeSMask",value:function(_ref34){var layer=_ref34.layer,mask=_ref34.mask,properties=_ref34.properties;return WebGLUtils.composeSMask(layer,mask,properties)}},{key:"drawFigures",value:function(_ref35){var width=_ref35.width,height=_ref35.height,backgroundColor=_ref35.backgroundColor,figures=_ref35.figures,context=_ref35.context;return WebGLUtils.drawFigures(width,height,backgroundColor,figures,context)}},{key:"clear",value:function(){WebGLUtils.cleanup()}}]),WebGLContext}();exports.WebGLContext=WebGLContext;var WebGLUtils=function(){function loadShader(gl,code,shaderType){var shader=gl.createShader(shaderType);if(gl.shaderSource(shader,code),gl.compileShader(shader),!gl.getShaderParameter(shader,gl.COMPILE_STATUS)){var errorMsg=gl.getShaderInfoLog(shader);throw new Error("Error during shader compilation: "+errorMsg)}return shader}function createVertexShader(gl,code){return loadShader(gl,code,gl.VERTEX_SHADER)}function createFragmentShader(gl,code){return loadShader(gl,code,gl.FRAGMENT_SHADER)}function createProgram(gl,shaders){for(var program=gl.createProgram(),i=0,ii=shaders.length;i<ii;++i)gl.attachShader(program,shaders[i]);if(gl.linkProgram(program),!gl.getProgramParameter(program,gl.LINK_STATUS)){var errorMsg=gl.getProgramInfoLog(program);throw new Error("Error during program linking: "+errorMsg)}return program}function createTexture(gl,image,textureId){gl.activeTexture(textureId);var texture=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,texture),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,image),texture}var currentGL,currentCanvas;function generateGL(){currentGL||(currentCanvas=document.createElement("canvas"),currentGL=currentCanvas.getContext("webgl",{premultipliedalpha:!1}))}var smaskCache=null,figuresCache=null;return{tryInitGL:function(){try{return generateGL(),!!currentGL}catch(ex){}return!1},composeSMask:function(layer,mask,properties){var width=layer.width,height=layer.height;smaskCache||function(){generateGL();var canvas=currentCanvas;currentCanvas=null;var gl=currentGL;currentGL=null;var program=createProgram(gl,[createVertexShader(gl,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             "),createFragmentShader(gl,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ")]);gl.useProgram(program);var cache={};cache.gl=gl,cache.canvas=canvas,cache.resolutionLocation=gl.getUniformLocation(program,"u_resolution"),cache.positionLocation=gl.getAttribLocation(program,"a_position"),cache.backdropLocation=gl.getUniformLocation(program,"u_backdrop"),cache.subtypeLocation=gl.getUniformLocation(program,"u_subtype");var texCoordLocation=gl.getAttribLocation(program,"a_texCoord"),texLayerLocation=gl.getUniformLocation(program,"u_image"),texMaskLocation=gl.getUniformLocation(program,"u_mask"),texCoordBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,texCoordBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),gl.STATIC_DRAW),gl.enableVertexAttribArray(texCoordLocation),gl.vertexAttribPointer(texCoordLocation,2,gl.FLOAT,!1,0,0),gl.uniform1i(texLayerLocation,0),gl.uniform1i(texMaskLocation,1),smaskCache=cache}();var cache=smaskCache,canvas=cache.canvas,gl=cache.gl;canvas.width=width,canvas.height=height,gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight),gl.uniform2f(cache.resolutionLocation,width,height),properties.backdrop?gl.uniform4f(cache.resolutionLocation,properties.backdrop[0],properties.backdrop[1],properties.backdrop[2],1):gl.uniform4f(cache.resolutionLocation,0,0,0,0),gl.uniform1i(cache.subtypeLocation,"Luminosity"===properties.subtype?1:0);var texture=createTexture(gl,layer,gl.TEXTURE0),maskTexture=createTexture(gl,mask,gl.TEXTURE1),buffer=gl.createBuffer();return gl.bindBuffer(gl.ARRAY_BUFFER,buffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0,0,width,0,0,height,0,height,width,0,width,height]),gl.STATIC_DRAW),gl.enableVertexAttribArray(cache.positionLocation),gl.vertexAttribPointer(cache.positionLocation,2,gl.FLOAT,!1,0,0),gl.clearColor(0,0,0,0),gl.enable(gl.BLEND),gl.blendFunc(gl.ONE,gl.ONE_MINUS_SRC_ALPHA),gl.clear(gl.COLOR_BUFFER_BIT),gl.drawArrays(gl.TRIANGLES,0,6),gl.flush(),gl.deleteTexture(texture),gl.deleteTexture(maskTexture),gl.deleteBuffer(buffer),canvas},drawFigures:function(width,height,backgroundColor,figures,context){figuresCache||function(){generateGL();var canvas=currentCanvas;currentCanvas=null;var gl=currentGL;currentGL=null;var program=createProgram(gl,[createVertexShader(gl,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             "),createFragmentShader(gl,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ")]);gl.useProgram(program);var cache={};cache.gl=gl,cache.canvas=canvas,cache.resolutionLocation=gl.getUniformLocation(program,"u_resolution"),cache.scaleLocation=gl.getUniformLocation(program,"u_scale"),cache.offsetLocation=gl.getUniformLocation(program,"u_offset"),cache.positionLocation=gl.getAttribLocation(program,"a_position"),cache.colorLocation=gl.getAttribLocation(program,"a_color"),figuresCache=cache}();var cache=figuresCache,canvas=cache.canvas,gl=cache.gl;canvas.width=width,canvas.height=height,gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight),gl.uniform2f(cache.resolutionLocation,width,height);for(var count=0,i=0,ii=figures.length;i<ii;i++)switch(figures[i].type){case"lattice":count+=((figures[i].coords.length/figures[i].verticesPerRow|0)-1)*(figures[i].verticesPerRow-1)*6;break;case"triangles":count+=figures[i].coords.length}for(var coords=new Float32Array(2*count),colors=new Uint8Array(3*count),coordsMap=context.coords,colorsMap=context.colors,pIndex=0,cIndex=0,_i7=0,_ii2=figures.length;_i7<_ii2;_i7++){var figure=figures[_i7],ps=figure.coords,cs=figure.colors;switch(figure.type){case"lattice":for(var cols=figure.verticesPerRow,_rows=ps.length/cols|0,row=1;row<_rows;row++)for(var offset=row*cols+1,col=1;col<cols;col++,offset++)coords[pIndex]=coordsMap[ps[offset-cols-1]],coords[pIndex+1]=coordsMap[ps[offset-cols-1]+1],coords[pIndex+2]=coordsMap[ps[offset-cols]],coords[pIndex+3]=coordsMap[ps[offset-cols]+1],coords[pIndex+4]=coordsMap[ps[offset-1]],coords[pIndex+5]=coordsMap[ps[offset-1]+1],colors[cIndex]=colorsMap[cs[offset-cols-1]],colors[cIndex+1]=colorsMap[cs[offset-cols-1]+1],colors[cIndex+2]=colorsMap[cs[offset-cols-1]+2],colors[cIndex+3]=colorsMap[cs[offset-cols]],colors[cIndex+4]=colorsMap[cs[offset-cols]+1],colors[cIndex+5]=colorsMap[cs[offset-cols]+2],colors[cIndex+6]=colorsMap[cs[offset-1]],colors[cIndex+7]=colorsMap[cs[offset-1]+1],colors[cIndex+8]=colorsMap[cs[offset-1]+2],coords[pIndex+6]=coords[pIndex+2],coords[pIndex+7]=coords[pIndex+3],coords[pIndex+8]=coords[pIndex+4],coords[pIndex+9]=coords[pIndex+5],coords[pIndex+10]=coordsMap[ps[offset]],coords[pIndex+11]=coordsMap[ps[offset]+1],colors[cIndex+9]=colors[cIndex+3],colors[cIndex+10]=colors[cIndex+4],colors[cIndex+11]=colors[cIndex+5],colors[cIndex+12]=colors[cIndex+6],colors[cIndex+13]=colors[cIndex+7],colors[cIndex+14]=colors[cIndex+8],colors[cIndex+15]=colorsMap[cs[offset]],colors[cIndex+16]=colorsMap[cs[offset]+1],colors[cIndex+17]=colorsMap[cs[offset]+2],pIndex+=12,cIndex+=18;break;case"triangles":for(var j=0,jj=ps.length;j<jj;j++)coords[pIndex]=coordsMap[ps[j]],coords[pIndex+1]=coordsMap[ps[j]+1],colors[cIndex]=colorsMap[cs[j]],colors[cIndex+1]=colorsMap[cs[j]+1],colors[cIndex+2]=colorsMap[cs[j]+2],pIndex+=2,cIndex+=3}}backgroundColor?gl.clearColor(backgroundColor[0]/255,backgroundColor[1]/255,backgroundColor[2]/255,1):gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT);var coordsBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,coordsBuffer),gl.bufferData(gl.ARRAY_BUFFER,coords,gl.STATIC_DRAW),gl.enableVertexAttribArray(cache.positionLocation),gl.vertexAttribPointer(cache.positionLocation,2,gl.FLOAT,!1,0,0);var colorsBuffer=gl.createBuffer();return gl.bindBuffer(gl.ARRAY_BUFFER,colorsBuffer),gl.bufferData(gl.ARRAY_BUFFER,colors,gl.STATIC_DRAW),gl.enableVertexAttribArray(cache.colorLocation),gl.vertexAttribPointer(cache.colorLocation,3,gl.UNSIGNED_BYTE,!1,0,0),gl.uniform2f(cache.scaleLocation,context.scaleX,context.scaleY),gl.uniform2f(cache.offsetLocation,context.offsetX,context.offsetY),gl.drawArrays(gl.TRIANGLES,0,count),gl.flush(),gl.deleteBuffer(coordsBuffer),gl.deleteBuffer(colorsBuffer),canvas},cleanup:function(){var _smaskCache,_figuresCache;null!==(_smaskCache=smaskCache)&&void 0!==_smaskCache&&_smaskCache.canvas&&(smaskCache.canvas.width=0,smaskCache.canvas.height=0),null!==(_figuresCache=figuresCache)&&void 0!==_figuresCache&&_figuresCache.canvas&&(figuresCache.canvas.width=0,figuresCache.canvas.height=0),smaskCache=null,figuresCache=null}}}()},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnnotationLayer=void 0;var _display_utils=__w_pdfjs_require__(1),_util=__w_pdfjs_require__(2),_annotation_storage=__w_pdfjs_require__(8),_scripting_utils=__w_pdfjs_require__(20),AnnotationElementFactory=function(){function AnnotationElementFactory(){_classCallCheck(this,AnnotationElementFactory)}return _createClass(AnnotationElementFactory,null,[{key:"create",value:function(parameters){switch(parameters.data.annotationType){case _util.AnnotationType.LINK:return new LinkAnnotationElement(parameters);case _util.AnnotationType.TEXT:return new TextAnnotationElement(parameters);case _util.AnnotationType.WIDGET:switch(parameters.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(parameters);case"Btn":return parameters.data.radioButton?new RadioButtonWidgetAnnotationElement(parameters):parameters.data.checkBox?new CheckboxWidgetAnnotationElement(parameters):new PushButtonWidgetAnnotationElement(parameters);case"Ch":return new ChoiceWidgetAnnotationElement(parameters)}return new WidgetAnnotationElement(parameters);case _util.AnnotationType.POPUP:return new PopupAnnotationElement(parameters);case _util.AnnotationType.FREETEXT:return new FreeTextAnnotationElement(parameters);case _util.AnnotationType.LINE:return new LineAnnotationElement(parameters);case _util.AnnotationType.SQUARE:return new SquareAnnotationElement(parameters);case _util.AnnotationType.CIRCLE:return new CircleAnnotationElement(parameters);case _util.AnnotationType.POLYLINE:return new PolylineAnnotationElement(parameters);case _util.AnnotationType.CARET:return new CaretAnnotationElement(parameters);case _util.AnnotationType.INK:return new InkAnnotationElement(parameters);case _util.AnnotationType.POLYGON:return new PolygonAnnotationElement(parameters);case _util.AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(parameters);case _util.AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(parameters);case _util.AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(parameters);case _util.AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(parameters);case _util.AnnotationType.STAMP:return new StampAnnotationElement(parameters);case _util.AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(parameters);default:return new AnnotationElement(parameters)}}}]),AnnotationElementFactory}(),AnnotationElement=function(){function AnnotationElement(parameters){var _ref36=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref36$isRenderable=_ref36.isRenderable,isRenderable=void 0!==_ref36$isRenderable&&_ref36$isRenderable,_ref36$ignoreBorder=_ref36.ignoreBorder,ignoreBorder=void 0!==_ref36$ignoreBorder&&_ref36$ignoreBorder,_ref36$createQuadrila=_ref36.createQuadrilaterals,createQuadrilaterals=void 0!==_ref36$createQuadrila&&_ref36$createQuadrila;_classCallCheck(this,AnnotationElement),this.isRenderable=isRenderable,this.data=parameters.data,this.layer=parameters.layer,this.page=parameters.page,this.viewport=parameters.viewport,this.linkService=parameters.linkService,this.downloadManager=parameters.downloadManager,this.imageResourcesPath=parameters.imageResourcesPath,this.renderInteractiveForms=parameters.renderInteractiveForms,this.svgFactory=parameters.svgFactory,this.annotationStorage=parameters.annotationStorage,this.enableScripting=parameters.enableScripting,this.hasJSActions=parameters.hasJSActions,this._mouseState=parameters.mouseState,isRenderable&&(this.container=this._createContainer(ignoreBorder)),createQuadrilaterals&&(this.quadrilaterals=this._createQuadrilaterals(ignoreBorder))}return _createClass(AnnotationElement,[{key:"_createContainer",value:function(){var ignoreBorder=arguments.length>0&&void 0!==arguments[0]&&arguments[0],data=this.data,page=this.page,viewport=this.viewport,container=document.createElement("section"),width=data.rect[2]-data.rect[0],height=data.rect[3]-data.rect[1];container.setAttribute("data-annotation-id",data.id);var rect=_util.Util.normalizeRect([data.rect[0],page.view[3]-data.rect[1]+page.view[1],data.rect[2],page.view[3]-data.rect[3]+page.view[1]]);if(container.style.transform="matrix(".concat(viewport.transform.join(","),")"),container.style.transformOrigin="".concat(-rect[0],"px ").concat(-rect[1],"px"),!ignoreBorder&&data.borderStyle.width>0){container.style.borderWidth="".concat(data.borderStyle.width,"px"),data.borderStyle.style!==_util.AnnotationBorderStyleType.UNDERLINE&&(width-=2*data.borderStyle.width,height-=2*data.borderStyle.width);var horizontalRadius=data.borderStyle.horizontalCornerRadius,verticalRadius=data.borderStyle.verticalCornerRadius;if(horizontalRadius>0||verticalRadius>0){var radius="".concat(horizontalRadius,"px / ").concat(verticalRadius,"px");container.style.borderRadius=radius}switch(data.borderStyle.style){case _util.AnnotationBorderStyleType.SOLID:container.style.borderStyle="solid";break;case _util.AnnotationBorderStyleType.DASHED:container.style.borderStyle="dashed";break;case _util.AnnotationBorderStyleType.BEVELED:(0,_util.warn)("Unimplemented border style: beveled");break;case _util.AnnotationBorderStyleType.INSET:(0,_util.warn)("Unimplemented border style: inset");break;case _util.AnnotationBorderStyleType.UNDERLINE:container.style.borderBottomStyle="solid"}data.color?container.style.borderColor=_util.Util.makeHexColor(0|data.color[0],0|data.color[1],0|data.color[2]):container.style.borderWidth=0}return container.style.left="".concat(rect[0],"px"),container.style.top="".concat(rect[1],"px"),container.style.width="".concat(width,"px"),container.style.height="".concat(height,"px"),container}},{key:"_createQuadrilaterals",value:function(){var ignoreBorder=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.data.quadPoints)return null;var _step26,quadrilaterals=[],savedRect=this.data.rect,_iterator26=_createForOfIteratorHelper(this.data.quadPoints);try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var quadPoint=_step26.value;this.data.rect=[quadPoint[2].x,quadPoint[2].y,quadPoint[1].x,quadPoint[1].y],quadrilaterals.push(this._createContainer(ignoreBorder))}}catch(err){_iterator26.e(err)}finally{_iterator26.f()}return this.data.rect=savedRect,quadrilaterals}},{key:"_createPopup",value:function(trigger,data){var container=this.container;this.quadrilaterals&&(trigger=trigger||this.quadrilaterals,container=this.quadrilaterals[0]),trigger||((trigger=document.createElement("div")).style.height=container.style.height,trigger.style.width=container.style.width,container.appendChild(trigger));var popup=new PopupElement({container:container,trigger:trigger,color:data.color,title:data.title,modificationDate:data.modificationDate,contents:data.contents,hideWrapper:!0}).render();popup.style.left=container.style.width,container.appendChild(popup)}},{key:"_renderQuadrilaterals",value:function(className){return this.quadrilaterals.forEach((function(quadrilateral){quadrilateral.className=className})),this.quadrilaterals}},{key:"render",value:function(){(0,_util.unreachable)("Abstract method `AnnotationElement.render` called")}}]),AnnotationElement}(),LinkAnnotationElement=function(_AnnotationElement){_inherits(LinkAnnotationElement,_AnnotationElement);var _super15=_createSuper(LinkAnnotationElement);function LinkAnnotationElement(parameters){_classCallCheck(this,LinkAnnotationElement);var isRenderable=!!(parameters.data.url||parameters.data.dest||parameters.data.action||parameters.data.isTooltipOnly||parameters.data.actions&&(parameters.data.actions.Action||parameters.data.actions["Mouse Up"]||parameters.data.actions["Mouse Down"]));return _super15.call(this,parameters,{isRenderable:isRenderable,createQuadrilaterals:!0})}return _createClass(LinkAnnotationElement,[{key:"render",value:function(){var data=this.data,linkService=this.linkService,link=document.createElement("a");return data.url?(0,_display_utils.addLinkAttributes)(link,{url:data.url,target:data.newWindow?_display_utils.LinkTarget.BLANK:linkService.externalLinkTarget,rel:linkService.externalLinkRel,enabled:linkService.externalLinkEnabled}):data.action?this._bindNamedAction(link,data.action):data.dest?this._bindLink(link,data.dest):data.actions&&(data.actions.Action||data.actions["Mouse Up"]||data.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions?this._bindJSAction(link,data):this._bindLink(link,""),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((function(quadrilateral,index){var linkElement=0===index?link:link.cloneNode();return quadrilateral.appendChild(linkElement),quadrilateral})):(this.container.className="linkAnnotation",this.container.appendChild(link),this.container)}},{key:"_bindLink",value:function(link,destination){var _this34=this;link.href=this.linkService.getDestinationHash(destination),link.onclick=function(){return destination&&_this34.linkService.goToDestination(destination),!1},(destination||""===destination)&&(link.className="internalLink")}},{key:"_bindNamedAction",value:function(link,action){var _this35=this;link.href=this.linkService.getAnchorUrl(""),link.onclick=function(){return _this35.linkService.executeNamedAction(action),!1},link.className="internalLink"}},{key:"_bindJSAction",value:function(link,data){var _this36=this;link.href=this.linkService.getAnchorUrl("");for(var map=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),_loop=function(){var name=_Object$keys[_i8],jsName=map.get(name);if(!jsName)return"continue";link[jsName]=function(){var _this36$linkService$e;return null===(_this36$linkService$e=_this36.linkService.eventBus)||void 0===_this36$linkService$e||_this36$linkService$e.dispatch("dispatcheventinsandbox",{source:_this36,detail:{id:data.id,name:name}}),!1}},_i8=0,_Object$keys=Object.keys(data.actions);_i8<_Object$keys.length;_i8++)_loop();link.className="internalLink"}}]),LinkAnnotationElement}(AnnotationElement),TextAnnotationElement=function(_AnnotationElement2){_inherits(TextAnnotationElement,_AnnotationElement2);var _super16=_createSuper(TextAnnotationElement);function TextAnnotationElement(parameters){_classCallCheck(this,TextAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);return _super16.call(this,parameters,{isRenderable:isRenderable})}return _createClass(TextAnnotationElement,[{key:"render",value:function(){this.container.className="textAnnotation";var image=document.createElement("img");return image.style.height=this.container.style.height,image.style.width=this.container.style.width,image.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",image.alt="[{{type}} Annotation]",image.dataset.l10nId="text_annotation_type",image.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(image,this.data),this.container.appendChild(image),this.container}}]),TextAnnotationElement}(AnnotationElement),WidgetAnnotationElement=function(_AnnotationElement3){_inherits(WidgetAnnotationElement,_AnnotationElement3);var _super17=_createSuper(WidgetAnnotationElement);function WidgetAnnotationElement(){return _classCallCheck(this,WidgetAnnotationElement),_super17.apply(this,arguments)}return _createClass(WidgetAnnotationElement,[{key:"render",value:function(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}},{key:"_getKeyModifier",value:function(event){return navigator.platform.includes("Win")&&event.ctrlKey||navigator.platform.includes("Mac")&&event.metaKey}},{key:"_setEventListener",value:function(element,baseName,eventName,valueGetter){var _this37=this;baseName.includes("mouse")?element.addEventListener(baseName,(function(event){var _this37$linkService$e;null===(_this37$linkService$e=_this37.linkService.eventBus)||void 0===_this37$linkService$e||_this37$linkService$e.dispatch("dispatcheventinsandbox",{source:_this37,detail:{id:_this37.data.id,name:eventName,value:valueGetter(event),shift:event.shiftKey,modifier:_this37._getKeyModifier(event)}})})):element.addEventListener(baseName,(function(event){var _this37$linkService$e2;null===(_this37$linkService$e2=_this37.linkService.eventBus)||void 0===_this37$linkService$e2||_this37$linkService$e2.dispatch("dispatcheventinsandbox",{source:_this37,detail:{id:_this37.data.id,name:eventName,value:event.target.checked}})}))}},{key:"_setEventListeners",value:function(element,names,getter){var _step27,_iterator27=_createForOfIteratorHelper(names);try{for(_iterator27.s();!(_step27=_iterator27.n()).done;){var _this$data$actions,_step27$value=_slicedToArray(_step27.value,2),baseName=_step27$value[0],eventName=_step27$value[1];("Action"===eventName||null!==(_this$data$actions=this.data.actions)&&void 0!==_this$data$actions&&_this$data$actions[eventName])&&this._setEventListener(element,baseName,eventName,getter)}}catch(err){_iterator27.e(err)}finally{_iterator27.f()}}}]),WidgetAnnotationElement}(AnnotationElement),TextWidgetAnnotationElement=function(_WidgetAnnotationElem){_inherits(TextWidgetAnnotationElement,_WidgetAnnotationElem);var _super18=_createSuper(TextWidgetAnnotationElement);function TextWidgetAnnotationElement(parameters){_classCallCheck(this,TextWidgetAnnotationElement);var isRenderable=parameters.renderInteractiveForms||!parameters.data.hasAppearance&&!!parameters.data.fieldValue;return _super18.call(this,parameters,{isRenderable:isRenderable})}return _createClass(TextWidgetAnnotationElement,[{key:"render",value:function(){var _this38=this,storage=this.annotationStorage,id=this.data.id;this.container.className="textWidgetAnnotation";var element=null;if(this.renderInteractiveForms){var textContent=storage.getOrCreateValue(id,{value:this.data.fieldValue}).value,elementData={userValue:null,formattedValue:null,beforeInputSelectionRange:null,beforeInputValue:null};this.data.multiLine?(element=document.createElement("textarea")).textContent=textContent:((element=document.createElement("input")).type="text",element.setAttribute("value",textContent)),elementData.userValue=textContent,element.setAttribute("id",id),element.addEventListener("input",(function(event){storage.setValue(id,{value:event.target.value})}));var blurListener=function(event){elementData.formattedValue&&(event.target.value=elementData.formattedValue),event.target.setSelectionRange(0,0),elementData.beforeInputSelectionRange=null};if(this.enableScripting&&this.hasJSActions&&(element.addEventListener("focus",(function(event){elementData.userValue&&(event.target.value=elementData.userValue)})),element.addEventListener("updatefromsandbox",(function(event){var detail=event.detail,actions={value:function(){elementData.userValue=detail.value||"",storage.setValue(id,{value:elementData.userValue.toString()}),elementData.formattedValue||(event.target.value=elementData.userValue)},valueAsString:function(){elementData.formattedValue=detail.valueAsString||"",event.target!==document.activeElement&&(event.target.value=elementData.formattedValue),storage.setValue(id,{formattedValue:elementData.formattedValue})},focus:function(){setTimeout((function(){return event.target.focus({preventScroll:!1})}),0)},userName:function(){event.target.title=detail.userName},hidden:function(){event.target.style.visibility=detail.hidden?"hidden":"visible",storage.setValue(id,{hidden:detail.hidden})},editable:function(){event.target.disabled=!detail.editable},selRange:function(){var _detail$selRange=_slicedToArray(detail.selRange,2),selStart=_detail$selRange[0],selEnd=_detail$selRange[1];selStart>=0&&selEnd<event.target.value.length&&event.target.setSelectionRange(selStart,selEnd)},strokeColor:function(){var color=detail.strokeColor;event.target.style.color=_scripting_utils.ColorConverters["".concat(color[0],"_HTML")](color.slice(1))}};Object.keys(detail).filter((function(name){return name in actions})).forEach((function(name){return actions[name]()}))})),this.data.actions)){element.addEventListener("keydown",(function(event){var _this38$linkService$e;elementData.beforeInputValue=event.target.value;var commitKey=-1;"Escape"===event.key?commitKey=0:"Enter"===event.key?commitKey=2:"Tab"===event.key&&(commitKey=3),-1!==commitKey&&(elementData.userValue=event.target.value,null===(_this38$linkService$e=_this38.linkService.eventBus)||void 0===_this38$linkService$e||_this38$linkService$e.dispatch("dispatcheventinsandbox",{source:_this38,detail:{id:id,name:"Keystroke",value:event.target.value,willCommit:!0,commitKey:commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}}))}));var _blurListener=blurListener;blurListener=null,element.addEventListener("blur",(function(event){var _this38$linkService$e2;_this38._mouseState.isDown&&(elementData.userValue=event.target.value,null===(_this38$linkService$e2=_this38.linkService.eventBus)||void 0===_this38$linkService$e2||_this38$linkService$e2.dispatch("dispatcheventinsandbox",{source:_this38,detail:{id:id,name:"Keystroke",value:event.target.value,willCommit:!0,commitKey:1,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}})),_blurListener(event)})),element.addEventListener("mousedown",(function(event){elementData.beforeInputValue=event.target.value,elementData.beforeInputSelectionRange=null})),element.addEventListener("keyup",(function(event){event.target.selectionStart===event.target.selectionEnd&&(elementData.beforeInputSelectionRange=null)})),element.addEventListener("select",(function(event){elementData.beforeInputSelectionRange=[event.target.selectionStart,event.target.selectionEnd]})),"Keystroke"in this.data.actions&&element.addEventListener("input",(function(event){var _this38$linkService$e3,selStart=-1,selEnd=-1;if(elementData.beforeInputSelectionRange){var _elementData$beforeIn=_slicedToArray(elementData.beforeInputSelectionRange,2);selStart=_elementData$beforeIn[0],selEnd=_elementData$beforeIn[1]}null===(_this38$linkService$e3=_this38.linkService.eventBus)||void 0===_this38$linkService$e3||_this38$linkService$e3.dispatch("dispatcheventinsandbox",{source:_this38,detail:{id:id,name:"Keystroke",value:elementData.beforeInputValue,change:event.data,willCommit:!1,selStart:selStart,selEnd:selEnd}})})),this._setEventListeners(element,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(event){return event.target.value}))}if(blurListener&&element.addEventListener("blur",blurListener),element.disabled=this.data.readOnly,element.name=this.data.fieldName,null!==this.data.maxLen&&(element.maxLength=this.data.maxLen),this.data.comb){var combWidth=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;element.classList.add("comb"),element.style.letterSpacing="calc(".concat(combWidth,"px - 1ch)")}}else(element=document.createElement("div")).textContent=this.data.fieldValue,element.style.verticalAlign="middle",element.style.display="table-cell";return this._setTextStyle(element),this.container.appendChild(element),this.container}},{key:"_setTextStyle",value:function(element){var _this$data$defaultApp=this.data.defaultAppearanceData,fontSize=_this$data$defaultApp.fontSize,fontColor=_this$data$defaultApp.fontColor,style=element.style;fontSize&&(style.fontSize="".concat(fontSize,"px")),style.color=_util.Util.makeHexColor(fontColor[0],fontColor[1],fontColor[2]),null!==this.data.textAlignment&&(style.textAlign=["left","center","right"][this.data.textAlignment])}}]),TextWidgetAnnotationElement}(WidgetAnnotationElement),CheckboxWidgetAnnotationElement=function(_WidgetAnnotationElem2){_inherits(CheckboxWidgetAnnotationElement,_WidgetAnnotationElem2);var _super19=_createSuper(CheckboxWidgetAnnotationElement);function CheckboxWidgetAnnotationElement(parameters){return _classCallCheck(this,CheckboxWidgetAnnotationElement),_super19.call(this,parameters,{isRenderable:parameters.renderInteractiveForms})}return _createClass(CheckboxWidgetAnnotationElement,[{key:"render",value:function(){var storage=this.annotationStorage,data=this.data,id=data.id,value=storage.getOrCreateValue(id,{value:data.fieldValue&&"Off"!==data.fieldValue}).value;this.container.className="buttonWidgetAnnotation checkBox";var element=document.createElement("input");return element.disabled=data.readOnly,element.type="checkbox",element.name=this.data.fieldName,value&&element.setAttribute("checked",!0),element.setAttribute("id",id),element.addEventListener("change",(function(event){var _step28,name=event.target.name,_iterator28=_createForOfIteratorHelper(document.getElementsByName(name));try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var checkbox=_step28.value;checkbox!==event.target&&(checkbox.checked=!1,storage.setValue(checkbox.parentNode.getAttribute("data-annotation-id"),{value:!1}))}}catch(err){_iterator28.e(err)}finally{_iterator28.f()}storage.setValue(id,{value:event.target.checked})})),this.enableScripting&&this.hasJSActions&&(element.addEventListener("updatefromsandbox",(function(event){var detail=event.detail,actions={value:function(){event.target.checked="Off"!==detail.value,storage.setValue(id,{value:event.target.checked})},focus:function(){setTimeout((function(){return event.target.focus({preventScroll:!1})}),0)},hidden:function(){event.target.style.visibility=detail.hidden?"hidden":"visible",storage.setValue(id,{hidden:detail.hidden})},editable:function(){event.target.disabled=!detail.editable}};Object.keys(detail).filter((function(name){return name in actions})).forEach((function(name){return actions[name]()}))})),this._setEventListeners(element,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(event){return event.target.checked}))),this.container.appendChild(element),this.container}}]),CheckboxWidgetAnnotationElement}(WidgetAnnotationElement),RadioButtonWidgetAnnotationElement=function(_WidgetAnnotationElem3){_inherits(RadioButtonWidgetAnnotationElement,_WidgetAnnotationElem3);var _super20=_createSuper(RadioButtonWidgetAnnotationElement);function RadioButtonWidgetAnnotationElement(parameters){return _classCallCheck(this,RadioButtonWidgetAnnotationElement),_super20.call(this,parameters,{isRenderable:parameters.renderInteractiveForms})}return _createClass(RadioButtonWidgetAnnotationElement,[{key:"render",value:function(){this.container.className="buttonWidgetAnnotation radioButton";var storage=this.annotationStorage,data=this.data,id=data.id,value=storage.getOrCreateValue(id,{value:data.fieldValue===data.buttonValue}).value,element=document.createElement("input");return element.disabled=data.readOnly,element.type="radio",element.name=data.fieldName,value&&element.setAttribute("checked",!0),element.setAttribute("pdfButtonValue",data.buttonValue),element.setAttribute("id",id),element.addEventListener("change",(function(event){var _step29,target=event.target,_iterator29=_createForOfIteratorHelper(document.getElementsByName(target.name));try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var radio=_step29.value;radio!==target&&storage.setValue(radio.getAttribute("id"),{value:!1})}}catch(err){_iterator29.e(err)}finally{_iterator29.f()}storage.setValue(id,{value:target.checked})})),this.enableScripting&&this.hasJSActions&&(element.addEventListener("updatefromsandbox",(function(event){var detail=event.detail,actions={value:function(){var _step30,fieldValue=detail.value,_iterator30=_createForOfIteratorHelper(document.getElementsByName(event.target.name));try{for(_iterator30.s();!(_step30=_iterator30.n()).done;){var radio=_step30.value,radioId=radio.getAttribute("id");fieldValue===radio.getAttribute("pdfButtonValue")?(radio.setAttribute("checked",!0),storage.setValue(radioId,{value:!0})):storage.setValue(radioId,{value:!1})}}catch(err){_iterator30.e(err)}finally{_iterator30.f()}},focus:function(){setTimeout((function(){return event.target.focus({preventScroll:!1})}),0)},hidden:function(){event.target.style.visibility=detail.hidden?"hidden":"visible",storage.setValue(id,{hidden:detail.hidden})},editable:function(){event.target.disabled=!detail.editable}};Object.keys(detail).filter((function(name){return name in actions})).forEach((function(name){return actions[name]()}))})),this._setEventListeners(element,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(event){return event.target.checked}))),this.container.appendChild(element),this.container}}]),RadioButtonWidgetAnnotationElement}(WidgetAnnotationElement),PushButtonWidgetAnnotationElement=function(_LinkAnnotationElemen){_inherits(PushButtonWidgetAnnotationElement,_LinkAnnotationElemen);var _super21=_createSuper(PushButtonWidgetAnnotationElement);function PushButtonWidgetAnnotationElement(){return _classCallCheck(this,PushButtonWidgetAnnotationElement),_super21.apply(this,arguments)}return _createClass(PushButtonWidgetAnnotationElement,[{key:"render",value:function(){var container=_get(_getPrototypeOf(PushButtonWidgetAnnotationElement.prototype),"render",this).call(this);return container.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(container.title=this.data.alternativeText),container}}]),PushButtonWidgetAnnotationElement}(LinkAnnotationElement),ChoiceWidgetAnnotationElement=function(_WidgetAnnotationElem4){_inherits(ChoiceWidgetAnnotationElement,_WidgetAnnotationElem4);var _super22=_createSuper(ChoiceWidgetAnnotationElement);function ChoiceWidgetAnnotationElement(parameters){return _classCallCheck(this,ChoiceWidgetAnnotationElement),_super22.call(this,parameters,{isRenderable:parameters.renderInteractiveForms})}return _createClass(ChoiceWidgetAnnotationElement,[{key:"render",value:function(){var _this39=this;this.container.className="choiceWidgetAnnotation";var storage=this.annotationStorage,id=this.data.id;storage.getOrCreateValue(id,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});var selectElement=document.createElement("select");selectElement.disabled=this.data.readOnly,selectElement.name=this.data.fieldName,selectElement.setAttribute("id",id),this.data.combo||(selectElement.size=this.data.options.length,this.data.multiSelect&&(selectElement.multiple=!0));var _step31,_iterator31=_createForOfIteratorHelper(this.data.options);try{for(_iterator31.s();!(_step31=_iterator31.n()).done;){var option=_step31.value,optionElement=document.createElement("option");optionElement.textContent=option.displayValue,optionElement.value=option.exportValue,this.data.fieldValue.includes(option.exportValue)&&optionElement.setAttribute("selected",!0),selectElement.appendChild(optionElement)}}catch(err){_iterator31.e(err)}finally{_iterator31.f()}function getValue(event){var options=event.target.options;return options[options.selectedIndex].value}return this.enableScripting&&this.hasJSActions?(selectElement.addEventListener("updatefromsandbox",(function(event){var detail=event.detail,actions={value:function(){var options=event.target.options,value=detail.value,i=options.indexOf(value);-1!==i&&(options.selectedIndex=i,storage.setValue(id,{value:value}))},focus:function(){setTimeout((function(){return event.target.focus({preventScroll:!1})}),0)},hidden:function(){event.target.style.visibility=detail.hidden?"hidden":"visible",storage.setValue(id,{hidden:detail.hidden})},editable:function(){event.target.disabled=!detail.editable}};Object.keys(detail).filter((function(name){return name in actions})).forEach((function(name){return actions[name]()}))})),selectElement.addEventListener("input",(function(event){var _this39$linkService$e,value=getValue(event);storage.setValue(id,{value:value}),null===(_this39$linkService$e=_this39.linkService.eventBus)||void 0===_this39$linkService$e||_this39$linkService$e.dispatch("dispatcheventinsandbox",{source:_this39,detail:{id:id,name:"Keystroke",changeEx:value,willCommit:!0,commitKey:1,keyDown:!1}})})),this._setEventListeners(selectElement,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(event){return event.target.checked}))):selectElement.addEventListener("input",(function(event){storage.setValue(id,{value:getValue(event)})})),this.container.appendChild(selectElement),this.container}}]),ChoiceWidgetAnnotationElement}(WidgetAnnotationElement),PopupAnnotationElement=function(_AnnotationElement4){_inherits(PopupAnnotationElement,_AnnotationElement4);var _super23=_createSuper(PopupAnnotationElement);function PopupAnnotationElement(parameters){_classCallCheck(this,PopupAnnotationElement);var isRenderable=!(!parameters.data.title&&!parameters.data.contents);return _super23.call(this,parameters,{isRenderable:isRenderable})}return _createClass(PopupAnnotationElement,[{key:"render",value:function(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;var selector='[data-annotation-id="'.concat(this.data.parentId,'"]'),parentElements=this.layer.querySelectorAll(selector);if(0===parentElements.length)return this.container;var popup=new PopupElement({container:this.container,trigger:Array.from(parentElements),color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),page=this.page,rect=_util.Util.normalizeRect([this.data.parentRect[0],page.view[3]-this.data.parentRect[1]+page.view[1],this.data.parentRect[2],page.view[3]-this.data.parentRect[3]+page.view[1]]),popupLeft=rect[0]+this.data.parentRect[2]-this.data.parentRect[0],popupTop=rect[1];return this.container.style.transformOrigin="".concat(-popupLeft,"px ").concat(-popupTop,"px"),this.container.style.left="".concat(popupLeft,"px"),this.container.style.top="".concat(popupTop,"px"),this.container.appendChild(popup.render()),this.container}}]),PopupAnnotationElement}(AnnotationElement),PopupElement=function(){function PopupElement(parameters){_classCallCheck(this,PopupElement),this.container=parameters.container,this.trigger=parameters.trigger,this.color=parameters.color,this.title=parameters.title,this.modificationDate=parameters.modificationDate,this.contents=parameters.contents,this.hideWrapper=parameters.hideWrapper||!1,this.pinned=!1}return _createClass(PopupElement,[{key:"render",value:function(){var _this40=this,wrapper=document.createElement("div");wrapper.className="popupWrapper",this.hideElement=this.hideWrapper?wrapper:this.container,this.hideElement.setAttribute("hidden",!0);var popup=document.createElement("div");popup.className="popup";var color=this.color;if(color){var r=.7*(255-color[0])+color[0],g=.7*(255-color[1])+color[1],b=.7*(255-color[2])+color[2];popup.style.backgroundColor=_util.Util.makeHexColor(0|r,0|g,0|b)}var title=document.createElement("h1");title.textContent=this.title,popup.appendChild(title);var dateObject=_display_utils.PDFDateString.toDateObject(this.modificationDate);if(dateObject){var modificationDate=document.createElement("span");modificationDate.textContent="{{date}}, {{time}}",modificationDate.dataset.l10nId="annotation_date_string",modificationDate.dataset.l10nArgs=JSON.stringify({date:dateObject.toLocaleDateString(),time:dateObject.toLocaleTimeString()}),popup.appendChild(modificationDate)}var contents=this._formatContents(this.contents);return popup.appendChild(contents),Array.isArray(this.trigger)||(this.trigger=[this.trigger]),this.trigger.forEach((function(element){element.addEventListener("click",_this40._toggle.bind(_this40)),element.addEventListener("mouseover",_this40._show.bind(_this40,!1)),element.addEventListener("mouseout",_this40._hide.bind(_this40,!1))})),popup.addEventListener("click",this._hide.bind(this,!0)),wrapper.appendChild(popup),wrapper}},{key:"_formatContents",value:function(contents){for(var p=document.createElement("p"),lines=contents.split(/(?:\r\n?|\n)/),i=0,ii=lines.length;i<ii;++i){var line=lines[i];p.appendChild(document.createTextNode(line)),i<ii-1&&p.appendChild(document.createElement("br"))}return p}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){var pin=arguments.length>0&&void 0!==arguments[0]&&arguments[0];pin&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}},{key:"_hide",value:function(){var unpin=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];unpin&&(this.pinned=!1),this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}]),PopupElement}(),FreeTextAnnotationElement=function(_AnnotationElement5){_inherits(FreeTextAnnotationElement,_AnnotationElement5);var _super24=_createSuper(FreeTextAnnotationElement);function FreeTextAnnotationElement(parameters){_classCallCheck(this,FreeTextAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);return _super24.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:!0})}return _createClass(FreeTextAnnotationElement,[{key:"render",value:function(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),FreeTextAnnotationElement}(AnnotationElement),LineAnnotationElement=function(_AnnotationElement6){_inherits(LineAnnotationElement,_AnnotationElement6);var _super25=_createSuper(LineAnnotationElement);function LineAnnotationElement(parameters){_classCallCheck(this,LineAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);return _super25.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:!0})}return _createClass(LineAnnotationElement,[{key:"render",value:function(){this.container.className="lineAnnotation";var data=this.data,width=data.rect[2]-data.rect[0],height=data.rect[3]-data.rect[1],svg=this.svgFactory.create(width,height),line=this.svgFactory.createElement("svg:line");return line.setAttribute("x1",data.rect[2]-data.lineCoordinates[0]),line.setAttribute("y1",data.rect[3]-data.lineCoordinates[1]),line.setAttribute("x2",data.rect[2]-data.lineCoordinates[2]),line.setAttribute("y2",data.rect[3]-data.lineCoordinates[3]),line.setAttribute("stroke-width",data.borderStyle.width||1),line.setAttribute("stroke","transparent"),svg.appendChild(line),this.container.append(svg),this._createPopup(line,data),this.container}}]),LineAnnotationElement}(AnnotationElement),SquareAnnotationElement=function(_AnnotationElement7){_inherits(SquareAnnotationElement,_AnnotationElement7);var _super26=_createSuper(SquareAnnotationElement);function SquareAnnotationElement(parameters){_classCallCheck(this,SquareAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);return _super26.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:!0})}return _createClass(SquareAnnotationElement,[{key:"render",value:function(){this.container.className="squareAnnotation";var data=this.data,width=data.rect[2]-data.rect[0],height=data.rect[3]-data.rect[1],svg=this.svgFactory.create(width,height),borderWidth=data.borderStyle.width,square=this.svgFactory.createElement("svg:rect");return square.setAttribute("x",borderWidth/2),square.setAttribute("y",borderWidth/2),square.setAttribute("width",width-borderWidth),square.setAttribute("height",height-borderWidth),square.setAttribute("stroke-width",borderWidth||1),square.setAttribute("stroke","transparent"),square.setAttribute("fill","none"),svg.appendChild(square),this.container.append(svg),this._createPopup(square,data),this.container}}]),SquareAnnotationElement}(AnnotationElement),CircleAnnotationElement=function(_AnnotationElement8){_inherits(CircleAnnotationElement,_AnnotationElement8);var _super27=_createSuper(CircleAnnotationElement);function CircleAnnotationElement(parameters){_classCallCheck(this,CircleAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);return _super27.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:!0})}return _createClass(CircleAnnotationElement,[{key:"render",value:function(){this.container.className="circleAnnotation";var data=this.data,width=data.rect[2]-data.rect[0],height=data.rect[3]-data.rect[1],svg=this.svgFactory.create(width,height),borderWidth=data.borderStyle.width,circle=this.svgFactory.createElement("svg:ellipse");return circle.setAttribute("cx",width/2),circle.setAttribute("cy",height/2),circle.setAttribute("rx",width/2-borderWidth/2),circle.setAttribute("ry",height/2-borderWidth/2),circle.setAttribute("stroke-width",borderWidth||1),circle.setAttribute("stroke","transparent"),circle.setAttribute("fill","none"),svg.appendChild(circle),this.container.append(svg),this._createPopup(circle,data),this.container}}]),CircleAnnotationElement}(AnnotationElement),PolylineAnnotationElement=function(_AnnotationElement9){_inherits(PolylineAnnotationElement,_AnnotationElement9);var _super28=_createSuper(PolylineAnnotationElement);function PolylineAnnotationElement(parameters){var _this41;_classCallCheck(this,PolylineAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);return(_this41=_super28.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:!0})).containerClassName="polylineAnnotation",_this41.svgElementName="svg:polyline",_this41}return _createClass(PolylineAnnotationElement,[{key:"render",value:function(){this.container.className=this.containerClassName;var _step32,data=this.data,width=data.rect[2]-data.rect[0],height=data.rect[3]-data.rect[1],svg=this.svgFactory.create(width,height),points=[],_iterator32=_createForOfIteratorHelper(data.vertices);try{for(_iterator32.s();!(_step32=_iterator32.n()).done;){var coordinate=_step32.value,x=coordinate.x-data.rect[0],y=data.rect[3]-coordinate.y;points.push(x+","+y)}}catch(err){_iterator32.e(err)}finally{_iterator32.f()}points=points.join(" ");var polyline=this.svgFactory.createElement(this.svgElementName);return polyline.setAttribute("points",points),polyline.setAttribute("stroke-width",data.borderStyle.width||1),polyline.setAttribute("stroke","transparent"),polyline.setAttribute("fill","none"),svg.appendChild(polyline),this.container.append(svg),this._createPopup(polyline,data),this.container}}]),PolylineAnnotationElement}(AnnotationElement),PolygonAnnotationElement=function(_PolylineAnnotationEl){_inherits(PolygonAnnotationElement,_PolylineAnnotationEl);var _super29=_createSuper(PolygonAnnotationElement);function PolygonAnnotationElement(parameters){var _this42;return _classCallCheck(this,PolygonAnnotationElement),(_this42=_super29.call(this,parameters)).containerClassName="polygonAnnotation",_this42.svgElementName="svg:polygon",_this42}return _createClass(PolygonAnnotationElement)}(PolylineAnnotationElement),CaretAnnotationElement=function(_AnnotationElement10){_inherits(CaretAnnotationElement,_AnnotationElement10);var _super30=_createSuper(CaretAnnotationElement);function CaretAnnotationElement(parameters){_classCallCheck(this,CaretAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);return _super30.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:!0})}return _createClass(CaretAnnotationElement,[{key:"render",value:function(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),CaretAnnotationElement}(AnnotationElement),InkAnnotationElement=function(_AnnotationElement11){_inherits(InkAnnotationElement,_AnnotationElement11);var _super31=_createSuper(InkAnnotationElement);function InkAnnotationElement(parameters){var _this43;_classCallCheck(this,InkAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);return(_this43=_super31.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:!0})).containerClassName="inkAnnotation",_this43.svgElementName="svg:polyline",_this43}return _createClass(InkAnnotationElement,[{key:"render",value:function(){this.container.className=this.containerClassName;var _step33,data=this.data,width=data.rect[2]-data.rect[0],height=data.rect[3]-data.rect[1],svg=this.svgFactory.create(width,height),_iterator33=_createForOfIteratorHelper(data.inkLists);try{for(_iterator33.s();!(_step33=_iterator33.n()).done;){var _step34,inkList=_step33.value,points=[],_iterator34=_createForOfIteratorHelper(inkList);try{for(_iterator34.s();!(_step34=_iterator34.n()).done;){var coordinate=_step34.value,x=coordinate.x-data.rect[0],y=data.rect[3]-coordinate.y;points.push("".concat(x,",").concat(y))}}catch(err){_iterator34.e(err)}finally{_iterator34.f()}points=points.join(" ");var polyline=this.svgFactory.createElement(this.svgElementName);polyline.setAttribute("points",points),polyline.setAttribute("stroke-width",data.borderStyle.width||1),polyline.setAttribute("stroke","transparent"),polyline.setAttribute("fill","none"),this._createPopup(polyline,data),svg.appendChild(polyline)}}catch(err){_iterator33.e(err)}finally{_iterator33.f()}return this.container.append(svg),this.container}}]),InkAnnotationElement}(AnnotationElement),HighlightAnnotationElement=function(_AnnotationElement12){_inherits(HighlightAnnotationElement,_AnnotationElement12);var _super32=_createSuper(HighlightAnnotationElement);function HighlightAnnotationElement(parameters){_classCallCheck(this,HighlightAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);return _super32.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:!0,createQuadrilaterals:!0})}return _createClass(HighlightAnnotationElement,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}]),HighlightAnnotationElement}(AnnotationElement),UnderlineAnnotationElement=function(_AnnotationElement13){_inherits(UnderlineAnnotationElement,_AnnotationElement13);var _super33=_createSuper(UnderlineAnnotationElement);function UnderlineAnnotationElement(parameters){_classCallCheck(this,UnderlineAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);return _super33.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:!0,createQuadrilaterals:!0})}return _createClass(UnderlineAnnotationElement,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}]),UnderlineAnnotationElement}(AnnotationElement),SquigglyAnnotationElement=function(_AnnotationElement14){_inherits(SquigglyAnnotationElement,_AnnotationElement14);var _super34=_createSuper(SquigglyAnnotationElement);function SquigglyAnnotationElement(parameters){_classCallCheck(this,SquigglyAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);return _super34.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:!0,createQuadrilaterals:!0})}return _createClass(SquigglyAnnotationElement,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}]),SquigglyAnnotationElement}(AnnotationElement),StrikeOutAnnotationElement=function(_AnnotationElement15){_inherits(StrikeOutAnnotationElement,_AnnotationElement15);var _super35=_createSuper(StrikeOutAnnotationElement);function StrikeOutAnnotationElement(parameters){_classCallCheck(this,StrikeOutAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);return _super35.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:!0,createQuadrilaterals:!0})}return _createClass(StrikeOutAnnotationElement,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}]),StrikeOutAnnotationElement}(AnnotationElement),StampAnnotationElement=function(_AnnotationElement16){_inherits(StampAnnotationElement,_AnnotationElement16);var _super36=_createSuper(StampAnnotationElement);function StampAnnotationElement(parameters){_classCallCheck(this,StampAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);return _super36.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:!0})}return _createClass(StampAnnotationElement,[{key:"render",value:function(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),StampAnnotationElement}(AnnotationElement),FileAttachmentAnnotationElement=function(_AnnotationElement17){_inherits(FileAttachmentAnnotationElement,_AnnotationElement17);var _super37=_createSuper(FileAttachmentAnnotationElement);function FileAttachmentAnnotationElement(parameters){var _this44$linkService$e,_this44;_classCallCheck(this,FileAttachmentAnnotationElement);var _this44$data$file=(_this44=_super37.call(this,parameters,{isRenderable:!0})).data.file,filename=_this44$data$file.filename,content=_this44$data$file.content;return _this44.filename=(0,_display_utils.getFilenameFromUrl)(filename),_this44.content=content,null===(_this44$linkService$e=_this44.linkService.eventBus)||void 0===_this44$linkService$e||_this44$linkService$e.dispatch("fileattachmentannotation",{source:_assertThisInitialized(_this44),id:(0,_util.stringToPDFString)(filename),filename:filename,content:content}),_this44}return _createClass(FileAttachmentAnnotationElement,[{key:"render",value:function(){this.container.className="fileAttachmentAnnotation";var trigger=document.createElement("div");return trigger.style.height=this.container.style.height,trigger.style.width=this.container.style.width,trigger.addEventListener("dblclick",this._download.bind(this)),this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(trigger,this.data),this.container.appendChild(trigger),this.container}},{key:"_download",value:function(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):(0,_util.warn)("Download cannot be started due to unavailable download manager")}}]),FileAttachmentAnnotationElement}(AnnotationElement),AnnotationLayer=function(){function AnnotationLayer(){_classCallCheck(this,AnnotationLayer)}return _createClass(AnnotationLayer,null,[{key:"render",value:function(parameters){var _step35,sortedAnnotations=[],popupAnnotations=[],_iterator35=_createForOfIteratorHelper(parameters.annotations);try{for(_iterator35.s();!(_step35=_iterator35.n()).done;){var _data3=_step35.value;_data3&&(_data3.annotationType!==_util.AnnotationType.POPUP?sortedAnnotations.push(_data3):popupAnnotations.push(_data3))}}catch(err){_iterator35.e(err)}finally{_iterator35.f()}popupAnnotations.length&&sortedAnnotations.push.apply(sortedAnnotations,popupAnnotations);for(var _i9=0,_sortedAnnotations=sortedAnnotations;_i9<_sortedAnnotations.length;_i9++){var data=_sortedAnnotations[_i9],element=AnnotationElementFactory.create({data:data,layer:parameters.div,page:parameters.page,viewport:parameters.viewport,linkService:parameters.linkService,downloadManager:parameters.downloadManager,imageResourcesPath:parameters.imageResourcesPath||"",renderInteractiveForms:"boolean"!=typeof parameters.renderInteractiveForms||parameters.renderInteractiveForms,svgFactory:new _display_utils.DOMSVGFactory,annotationStorage:parameters.annotationStorage||new _annotation_storage.AnnotationStorage,enableScripting:parameters.enableScripting,hasJSActions:parameters.hasJSActions,mouseState:parameters.mouseState||{isDown:!1}});if(element.isRenderable){var rendered=element.render();if(data.hidden&&(rendered.style.visibility="hidden"),Array.isArray(rendered)){var _step36,_iterator36=_createForOfIteratorHelper(rendered);try{for(_iterator36.s();!(_step36=_iterator36.n()).done;){var renderedElement=_step36.value;parameters.div.appendChild(renderedElement)}}catch(err){_iterator36.e(err)}finally{_iterator36.f()}}else element instanceof PopupAnnotationElement?parameters.div.prepend(rendered):parameters.div.appendChild(rendered)}}}},{key:"update",value:function(parameters){var _step37,transform="matrix(".concat(parameters.viewport.transform.join(","),")"),_iterator37=_createForOfIteratorHelper(parameters.annotations);try{for(_iterator37.s();!(_step37=_iterator37.n()).done;){var data=_step37.value,elements=parameters.div.querySelectorAll('[data-annotation-id="'.concat(data.id,'"]'));elements&&elements.forEach((function(element){element.style.transform=transform}))}}catch(err){_iterator37.e(err)}finally{_iterator37.f()}parameters.div.removeAttribute("hidden")}}]),AnnotationLayer}();exports.AnnotationLayer=AnnotationLayer},function(__unused_webpack_module,exports){function makeColorComp(n){return Math.floor(255*Math.max(0,Math.min(1,n))).toString(16).padStart(2,"0")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorConverters=void 0;var ColorConverters=function(){function ColorConverters(){_classCallCheck(this,ColorConverters)}return _createClass(ColorConverters,null,[{key:"CMYK_G",value:function(_ref37){var _ref38=_slicedToArray(_ref37,4),c=_ref38[0],y=_ref38[1],m=_ref38[2],k=_ref38[3];return["G",1-Math.min(1,.3*c+.59*m+.11*y+k)]}},{key:"G_CMYK",value:function(_ref39){return["CMYK",0,0,0,1-_slicedToArray(_ref39,1)[0]]}},{key:"G_RGB",value:function(_ref41){var g=_slicedToArray(_ref41,1)[0];return["RGB",g,g,g]}},{key:"G_HTML",value:function(_ref43){var G=makeColorComp(_slicedToArray(_ref43,1)[0]);return"#".concat(G).concat(G).concat(G)}},{key:"RGB_G",value:function(_ref45){var _ref46=_slicedToArray(_ref45,3);return["G",.3*_ref46[0]+.59*_ref46[1]+.11*_ref46[2]]}},{key:"RGB_HTML",value:function(_ref47){var _ref48=_slicedToArray(_ref47,3),r=_ref48[0],g=_ref48[1],b=_ref48[2],R=makeColorComp(r),G=makeColorComp(g),B=makeColorComp(b);return"#".concat(R).concat(G).concat(B)}},{key:"T_HTML",value:function(){return"#00000000"}},{key:"CMYK_RGB",value:function(_ref49){var _ref50=_slicedToArray(_ref49,4),c=_ref50[0],y=_ref50[1],m=_ref50[2],k=_ref50[3];return["RGB",1-Math.min(1,c+k),1-Math.min(1,m+k),1-Math.min(1,y+k)]}},{key:"CMYK_HTML",value:function(components){return this.RGB_HTML(this.CMYK_RGB(components))}},{key:"RGB_CMYK",value:function(_ref51){var _ref52=_slicedToArray(_ref51,3),c=1-_ref52[0],m=1-_ref52[1],y=1-_ref52[2];return["CMYK",c,m,y,Math.min(c,m,y)]}}]),ColorConverters}();exports.ColorConverters=ColorConverters},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderTextLayer=void 0;var _util=__w_pdfjs_require__(2),renderTextLayer=function(){var NonWhitespaceRegexp=/\S/;function appendText(task,geom,styles){var str,textDiv=document.createElement("span"),textDivProperties={angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(task._textDivs.push(textDiv),str=geom.str,!NonWhitespaceRegexp.test(str))return textDivProperties.isWhitespace=!0,void task._textDivProperties.set(textDiv,textDivProperties);var tx=_util.Util.transform(task._viewport.transform,geom.transform),angle=Math.atan2(tx[1],tx[0]),style=styles[geom.fontName];style.vertical&&(angle+=Math.PI/2);var left,top,fontHeight=Math.sqrt(tx[2]*tx[2]+tx[3]*tx[3]),fontAscent=fontHeight;style.ascent?fontAscent=style.ascent*fontAscent:style.descent&&(fontAscent=(1+style.descent)*fontAscent),0===angle?(left=tx[4],top=tx[5]-fontAscent):(left=tx[4]+fontAscent*Math.sin(angle),top=tx[5]-fontAscent*Math.cos(angle)),textDiv.style.left="".concat(left,"px"),textDiv.style.top="".concat(top,"px"),textDiv.style.fontSize="".concat(fontHeight,"px"),textDiv.style.fontFamily=style.fontFamily,textDiv.textContent=geom.str,task._fontInspectorEnabled&&(textDiv.dataset.fontName=geom.fontName),0!==angle&&(textDivProperties.angle=angle*(180/Math.PI));var shouldScaleText=!1;if(geom.str.length>1)shouldScaleText=!0;else if(geom.transform[0]!==geom.transform[3]){var absScaleX=Math.abs(geom.transform[0]),absScaleY=Math.abs(geom.transform[3]);absScaleX!==absScaleY&&Math.max(absScaleX,absScaleY)/Math.min(absScaleX,absScaleY)>1.5&&(shouldScaleText=!0)}if(shouldScaleText&&(style.vertical?textDivProperties.canvasWidth=geom.height*task._viewport.scale:textDivProperties.canvasWidth=geom.width*task._viewport.scale),task._textDivProperties.set(textDiv,textDivProperties),task._textContentStream&&task._layoutText(textDiv),task._enhanceTextSelection){var angleCos=1,angleSin=0;0!==angle&&(angleCos=Math.cos(angle),angleSin=Math.sin(angle));var m,b,divWidth=(style.vertical?geom.height:geom.width)*task._viewport.scale,divHeight=fontHeight;0!==angle?(m=[angleCos,angleSin,-angleSin,angleCos,left,top],b=_util.Util.getAxialAlignedBoundingBox([0,0,divWidth,divHeight],m)):b=[left,top,left+divWidth,top+divHeight],task._bounds.push({left:b[0],top:b[1],right:b[2],bottom:b[3],div:textDiv,size:[divWidth,divHeight],m:m})}}function render(task){if(!task._canceled){var textDivs=task._textDivs,capability=task._capability,textDivsLength=textDivs.length;if(textDivsLength>1e5)return task._renderingDone=!0,void capability.resolve();if(!task._textContentStream)for(var i=0;i<textDivsLength;i++)task._layoutText(textDivs[i]);task._renderingDone=!0,capability.resolve()}}function findPositiveMin(ts,offset,count){for(var result=0,i=0;i<count;i++){var t=ts[offset++];t>0&&(result=result?Math.min(t,result):t)}return result}function expand(task){for(var bounds=task._bounds,viewport=task._viewport,expanded=function(width,height,boxes){var bounds=boxes.map((function(box,i){return{x1:box.left,y1:box.top,x2:box.right,y2:box.bottom,index:i,x1New:void 0,x2New:void 0}}));expandBoundsLTR(width,bounds);var expanded=new Array(boxes.length);return bounds.forEach((function(b){var i=b.index;expanded[i]={left:b.x1New,top:0,right:b.x2New,bottom:0}})),boxes.map((function(box,i){var e=expanded[i],b=bounds[i];b.x1=box.top,b.y1=width-e.right,b.x2=box.bottom,b.y2=width-e.left,b.index=i,b.x1New=void 0,b.x2New=void 0})),expandBoundsLTR(height,bounds),bounds.forEach((function(b){var i=b.index;expanded[i].top=b.x1New,expanded[i].bottom=b.x2New})),expanded}(viewport.width,viewport.height,bounds),_loop2=function(i){var div=bounds[i].div,divProperties=task._textDivProperties.get(div);if(0===divProperties.angle)return divProperties.paddingLeft=bounds[i].left-expanded[i].left,divProperties.paddingTop=bounds[i].top-expanded[i].top,divProperties.paddingRight=expanded[i].right-bounds[i].right,divProperties.paddingBottom=expanded[i].bottom-bounds[i].bottom,task._textDivProperties.set(div,divProperties),"continue";var e=expanded[i],b=bounds[i],m=b.m,c=m[0],s=m[1],points=[[0,0],[0,b.size[1]],[b.size[0],0],b.size],ts=new Float64Array(64);points.forEach((function(p,j){var t=_util.Util.applyTransform(p,m);ts[j+0]=c&&(e.left-t[0])/c,ts[j+4]=s&&(e.top-t[1])/s,ts[j+8]=c&&(e.right-t[0])/c,ts[j+12]=s&&(e.bottom-t[1])/s,ts[j+16]=s&&(e.left-t[0])/-s,ts[j+20]=c&&(e.top-t[1])/c,ts[j+24]=s&&(e.right-t[0])/-s,ts[j+28]=c&&(e.bottom-t[1])/c,ts[j+32]=c&&(e.left-t[0])/-c,ts[j+36]=s&&(e.top-t[1])/-s,ts[j+40]=c&&(e.right-t[0])/-c,ts[j+44]=s&&(e.bottom-t[1])/-s,ts[j+48]=s&&(e.left-t[0])/s,ts[j+52]=c&&(e.top-t[1])/-c,ts[j+56]=s&&(e.right-t[0])/s,ts[j+60]=c&&(e.bottom-t[1])/-c}));var boxScale=1+Math.min(Math.abs(c),Math.abs(s));divProperties.paddingLeft=findPositiveMin(ts,32,16)/boxScale,divProperties.paddingTop=findPositiveMin(ts,48,16)/boxScale,divProperties.paddingRight=findPositiveMin(ts,0,16)/boxScale,divProperties.paddingBottom=findPositiveMin(ts,16,16)/boxScale,task._textDivProperties.set(div,divProperties)},i=0;i<expanded.length;i++)_loop2(i)}function expandBoundsLTR(width,bounds){bounds.sort((function(a,b){return a.x1-b.x1||a.index-b.index}));var horizon=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];bounds.forEach((function(boundary){for(var i=0;i<horizon.length&&horizon[i].end<=boundary.y1;)i++;for(var horizonPart,affectedBoundary,j=horizon.length-1;j>=0&&horizon[j].start>=boundary.y2;)j--;var q,k,maxXNew=-1/0;for(q=i;q<=j;q++){var xNew=void 0;(xNew=(affectedBoundary=(horizonPart=horizon[q]).boundary).x2>boundary.x1?affectedBoundary.index>boundary.index?affectedBoundary.x1New:boundary.x1:void 0===affectedBoundary.x2New?(affectedBoundary.x2+boundary.x1)/2:affectedBoundary.x2New)>maxXNew&&(maxXNew=xNew)}for(boundary.x1New=maxXNew,q=i;q<=j;q++)void 0===(affectedBoundary=(horizonPart=horizon[q]).boundary).x2New?affectedBoundary.x2>boundary.x1?affectedBoundary.index>boundary.index&&(affectedBoundary.x2New=affectedBoundary.x2):affectedBoundary.x2New=maxXNew:affectedBoundary.x2New>maxXNew&&(affectedBoundary.x2New=Math.max(maxXNew,affectedBoundary.x2));var changedHorizon=[],lastBoundary=null;for(q=i;q<=j;q++){var useBoundary=(affectedBoundary=(horizonPart=horizon[q]).boundary).x2>boundary.x2?affectedBoundary:boundary;lastBoundary===useBoundary?changedHorizon[changedHorizon.length-1].end=horizonPart.end:(changedHorizon.push({start:horizonPart.start,end:horizonPart.end,boundary:useBoundary}),lastBoundary=useBoundary)}for(horizon[i].start<boundary.y1&&(changedHorizon[0].start=boundary.y1,changedHorizon.unshift({start:horizon[i].start,end:boundary.y1,boundary:horizon[i].boundary})),boundary.y2<horizon[j].end&&(changedHorizon[changedHorizon.length-1].end=boundary.y2,changedHorizon.push({start:boundary.y2,end:horizon[j].end,boundary:horizon[j].boundary})),q=i;q<=j;q++)if(void 0===(affectedBoundary=(horizonPart=horizon[q]).boundary).x2New){var used=!1;for(k=i-1;!used&&k>=0&&horizon[k].start>=affectedBoundary.y1;k--)used=horizon[k].boundary===affectedBoundary;for(k=j+1;!used&&k<horizon.length&&horizon[k].end<=affectedBoundary.y2;k++)used=horizon[k].boundary===affectedBoundary;for(k=0;!used&&k<changedHorizon.length;k++)used=changedHorizon[k].boundary===affectedBoundary;used||(affectedBoundary.x2New=maxXNew)}Array.prototype.splice.apply(horizon,[i,j-i+1].concat(changedHorizon))})),horizon.forEach((function(horizonPart){var affectedBoundary=horizonPart.boundary;void 0===affectedBoundary.x2New&&(affectedBoundary.x2New=Math.max(width,affectedBoundary.x2))}))}function TextLayerRenderTask(_ref53){var _globalThis$FontInspe2,_this45=this,textContent=_ref53.textContent,textContentStream=_ref53.textContentStream,container=_ref53.container,viewport=_ref53.viewport,textDivs=_ref53.textDivs,textContentItemsStr=_ref53.textContentItemsStr,enhanceTextSelection=_ref53.enhanceTextSelection;this._textContent=textContent,this._textContentStream=textContentStream,this._container=container,this._document=container.ownerDocument,this._viewport=viewport,this._textDivs=textDivs||[],this._textContentItemsStr=textContentItemsStr||[],this._enhanceTextSelection=!!enhanceTextSelection,this._fontInspectorEnabled=!(null===(_globalThis$FontInspe2=globalThis.FontInspector)||void 0===_globalThis$FontInspe2||!_globalThis$FontInspe2.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,_util.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally((function(){_this45._layoutTextCtx&&(_this45._layoutTextCtx.canvas.width=0,_this45._layoutTextCtx.canvas.height=0,_this45._layoutTextCtx=null)})).catch((function(){}))}return TextLayerRenderTask.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new _util.AbortException("TextLayer task cancelled.")),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))},_processItems:function(items,styleCache){for(var i=0,len=items.length;i<len;i++)this._textContentItemsStr.push(items[i].str),appendText(this,items[i],styleCache)},_layoutText:function(textDiv){var textDivProperties=this._textDivProperties.get(textDiv);if(!textDivProperties.isWhitespace){var transform="";if(0!==textDivProperties.canvasWidth){var _textDiv$style=textDiv.style,fontSize=_textDiv$style.fontSize,fontFamily=_textDiv$style.fontFamily;fontSize===this._layoutTextLastFontSize&&fontFamily===this._layoutTextLastFontFamily||(this._layoutTextCtx.font="".concat(fontSize," ").concat(fontFamily),this._layoutTextLastFontSize=fontSize,this._layoutTextLastFontFamily=fontFamily);var width=this._layoutTextCtx.measureText(textDiv.textContent).width;width>0&&(textDivProperties.scale=textDivProperties.canvasWidth/width,transform="scaleX(".concat(textDivProperties.scale,")"))}0!==textDivProperties.angle&&(transform="rotate(".concat(textDivProperties.angle,"deg) ").concat(transform)),transform.length>0&&(this._enhanceTextSelection&&(textDivProperties.originalTransform=transform),textDiv.style.transform=transform),this._textDivProperties.set(textDiv,textDivProperties),this._container.appendChild(textDiv)}},_render:function(timeout){var _this46=this,capability=(0,_util.createPromiseCapability)(),styleCache=Object.create(null),canvas=this._document.createElement("canvas");if(canvas.mozOpaque=!0,this._layoutTextCtx=canvas.getContext("2d",{alpha:!1}),this._textContent){var textItems=this._textContent.items,textStyles=this._textContent.styles;this._processItems(textItems,textStyles),capability.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');this._reader=this._textContentStream.getReader(),function pump(){_this46._reader.read().then((function(_ref54){var value=_ref54.value;_ref54.done?capability.resolve():(Object.assign(styleCache,value.styles),_this46._processItems(value.items,styleCache),pump())}),capability.reject)}()}capability.promise.then((function(){styleCache=null,timeout?_this46._renderTimer=setTimeout((function(){render(_this46),_this46._renderTimer=null}),timeout):render(_this46)}),this._capability.reject)},expandTextDivs:function(expandDivs){if(this._enhanceTextSelection&&this._renderingDone){null!==this._bounds&&(expand(this),this._bounds=null);for(var transformBuf=[],paddingBuf=[],i=0,ii=this._textDivs.length;i<ii;i++){var div=this._textDivs[i],divProps=this._textDivProperties.get(div);divProps.isWhitespace||(expandDivs?(transformBuf.length=0,paddingBuf.length=0,divProps.originalTransform&&transformBuf.push(divProps.originalTransform),divProps.paddingTop>0?(paddingBuf.push("".concat(divProps.paddingTop,"px")),transformBuf.push("translateY(".concat(-divProps.paddingTop,"px)"))):paddingBuf.push(0),divProps.paddingRight>0?paddingBuf.push("".concat(divProps.paddingRight/divProps.scale,"px")):paddingBuf.push(0),divProps.paddingBottom>0?paddingBuf.push("".concat(divProps.paddingBottom,"px")):paddingBuf.push(0),divProps.paddingLeft>0?(paddingBuf.push("".concat(divProps.paddingLeft/divProps.scale,"px")),transformBuf.push("translateX(".concat(-divProps.paddingLeft/divProps.scale,"px)"))):paddingBuf.push(0),div.style.padding=paddingBuf.join(" "),transformBuf.length&&(div.style.transform=transformBuf.join(" "))):(div.style.padding=null,div.style.transform=divProps.originalTransform))}}}},function(renderParameters){var task=new TextLayerRenderTask({textContent:renderParameters.textContent,textContentStream:renderParameters.textContentStream,container:renderParameters.container,viewport:renderParameters.viewport,textDivs:renderParameters.textDivs,textContentItemsStr:renderParameters.textContentItemsStr,enhanceTextSelection:renderParameters.enhanceTextSelection});return task._render(renderParameters.timeout),task}}();exports.renderTextLayer=renderTextLayer},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.SVGGraphics=void 0;var _util=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(1),_is_node=__w_pdfjs_require__(4),SVGGraphics=function(){throw new Error("Not implemented: SVGGraphics")};exports.SVGGraphics=SVGGraphics;var pf=function(value){if(Number.isInteger(value))return value.toString();var s=value.toFixed(10),i=s.length-1;if("0"!==s[i])return s;do{i--}while("0"===s[i]);return s.substring(0,"."===s[i]?i:i+1)},pm=function(m){if(0===m[4]&&0===m[5]){if(0===m[1]&&0===m[2])return 1===m[0]&&1===m[3]?"":"scale(".concat(pf(m[0])," ").concat(pf(m[3]),")");if(m[0]===m[3]&&m[1]===-m[2]){var a=180*Math.acos(m[0])/Math.PI;return"rotate(".concat(pf(a),")")}}else if(1===m[0]&&0===m[1]&&0===m[2]&&1===m[3])return"translate(".concat(pf(m[4])," ").concat(pf(m[5]),")");return"matrix(".concat(pf(m[0])," ").concat(pf(m[1])," ").concat(pf(m[2])," ").concat(pf(m[3])," ").concat(pf(m[4])," ")+"".concat(pf(m[5]),")")},SVG_DEFAULTS={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],convertImgDataToPng=function(){for(var PNG_HEADER=new Uint8Array([137,80,78,71,13,10,26,10]),crcTable=new Int32Array(256),i=0;i<256;i++){for(var c=i,h=0;h<8;h++)c=1&c?3988292384^c>>1&2147483647:c>>1&2147483647;crcTable[i]=c}function writePngChunk(type,body,data,offset){var p=offset,len=body.length;data[p]=len>>24&255,data[p+1]=len>>16&255,data[p+2]=len>>8&255,data[p+3]=255&len,data[p+=4]=255&type.charCodeAt(0),data[p+1]=255&type.charCodeAt(1),data[p+2]=255&type.charCodeAt(2),data[p+3]=255&type.charCodeAt(3),p+=4,data.set(body,p);var crc=function(data,start,end){for(var crc=-1,_i10=start;_i10<end;_i10++){var a=255&(crc^data[_i10]);crc=crc>>>8^crcTable[a]}return-1^crc}(data,offset+4,p+=body.length);data[p]=crc>>24&255,data[p+1]=crc>>16&255,data[p+2]=crc>>8&255,data[p+3]=255&crc}function deflateSyncUncompressed(literals){var len=literals.length,deflateBlocks=Math.ceil(len/65535),idat=new Uint8Array(2+len+5*deflateBlocks+4),pi=0;idat[pi++]=120,idat[pi++]=156;for(var pos=0;len>65535;)idat[pi++]=0,idat[pi++]=255,idat[pi++]=255,idat[pi++]=0,idat[pi++]=0,idat.set(literals.subarray(pos,pos+65535),pi),pi+=65535,pos+=65535,len-=65535;idat[pi++]=1,idat[pi++]=255&len,idat[pi++]=len>>8&255,idat[pi++]=255&~len,idat[pi++]=(65535&~len)>>8&255,idat.set(literals.subarray(pos),pi),pi+=literals.length-pos;var adler=function(data,start,end){for(var a=1,b=0,_i11=start;_i11<end;++_i11)b=(b+(a=(a+(255&data[_i11]))%65521))%65521;return b<<16|a}(literals,0,literals.length);return idat[pi++]=adler>>24&255,idat[pi++]=adler>>16&255,idat[pi++]=adler>>8&255,idat[pi++]=255&adler,idat}function encode(imgData,kind,forceDataSchema,isMask){var bitDepth,colorType,lineSize,width=imgData.width,height=imgData.height,bytes=imgData.data;switch(kind){case _util.ImageKind.GRAYSCALE_1BPP:colorType=0,bitDepth=1,lineSize=width+7>>3;break;case _util.ImageKind.RGB_24BPP:colorType=2,bitDepth=8,lineSize=3*width;break;case _util.ImageKind.RGBA_32BPP:colorType=6,bitDepth=8,lineSize=4*width;break;default:throw new Error("invalid format")}for(var literals=new Uint8Array((1+lineSize)*height),offsetLiterals=0,offsetBytes=0,y=0;y<height;++y)literals[offsetLiterals++]=0,literals.set(bytes.subarray(offsetBytes,offsetBytes+lineSize),offsetLiterals),offsetBytes+=lineSize,offsetLiterals+=lineSize;if(kind===_util.ImageKind.GRAYSCALE_1BPP&&isMask){offsetLiterals=0;for(var _y=0;_y<height;_y++){offsetLiterals++;for(var _i12=0;_i12<lineSize;_i12++)literals[offsetLiterals++]^=255}}var ihdr=new Uint8Array([width>>24&255,width>>16&255,width>>8&255,255&width,height>>24&255,height>>16&255,height>>8&255,255&height,bitDepth,colorType,0,0,0]),idat=function(literals){if(!_is_node.isNodeJS)return deflateSyncUncompressed(literals);try{var input;input=parseInt(process.versions.node)>=8?literals:Buffer.from(literals);var output=require("zlib").deflateSync(input,{level:9});return output instanceof Uint8Array?output:new Uint8Array(output)}catch(e){(0,_util.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+e)}return deflateSyncUncompressed(literals)}(literals),pngLength=PNG_HEADER.length+36+ihdr.length+idat.length,data=new Uint8Array(pngLength),offset=0;return data.set(PNG_HEADER,offset),writePngChunk("IHDR",ihdr,data,offset+=PNG_HEADER.length),writePngChunk("IDATA",idat,data,offset+=12+ihdr.length),offset+=12+idat.length,writePngChunk("IEND",new Uint8Array(0),data,offset),(0,_util.createObjectURL)(data,"image/png",forceDataSchema)}return function(imgData,forceDataSchema,isMask){return encode(imgData,void 0===imgData.kind?_util.ImageKind.GRAYSCALE_1BPP:imgData.kind,forceDataSchema,isMask)}}(),SVGExtraState=function(){function SVGExtraState(){_classCallCheck(this,SVGExtraState),this.fontSizeScale=1,this.fontWeight=SVG_DEFAULTS.fontWeight,this.fontSize=0,this.textMatrix=_util.IDENTITY_MATRIX,this.fontMatrix=_util.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=_util.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=SVG_DEFAULTS.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return _createClass(SVGExtraState,[{key:"clone",value:function(){return Object.create(this)}},{key:"setCurrentPoint",value:function(x,y){this.x=x,this.y=y}}]),SVGExtraState}(),clipCount=0,maskCount=0,shadingCount=0;exports.SVGGraphics=SVGGraphics=function(){function SVGGraphics(commonObjs,objs){var forceDataSchema=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var op in _classCallCheck(this,SVGGraphics),this.svgFactory=new _display_utils.DOMSVGFactory,this.current=new SVGExtraState,this.transformMatrix=_util.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=commonObjs,this.objs=objs,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!forceDataSchema,this._operatorIdMapping=[],_util.OPS)this._operatorIdMapping[_util.OPS[op]]=op}return _createClass(SVGGraphics,[{key:"save",value:function(){this.transformStack.push(this.transformMatrix);var old=this.current;this.extraStack.push(old),this.current=old.clone()}},{key:"restore",value:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}},{key:"group",value:function(items){this.save(),this.executeOpTree(items),this.restore()}},{key:"loadDependencies",value:function(operatorList){for(var _this47=this,fnArray=operatorList.fnArray,argsArray=operatorList.argsArray,i=0,ii=fnArray.length;i<ii;i++)if(fnArray[i]===_util.OPS.dependency){var _step39,_iterator39=_createForOfIteratorHelper(argsArray[i]);try{var _loop3=function(){var obj=_step39.value,objsPool=obj.startsWith("g_")?_this47.commonObjs:_this47.objs,promise=new Promise((function(resolve){objsPool.get(obj,resolve)}));_this47.current.dependencies.push(promise)};for(_iterator39.s();!(_step39=_iterator39.n()).done;)_loop3()}catch(err){_iterator39.e(err)}finally{_iterator39.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function(a,b,c,d,e,f){var transformMatrix=[a,b,c,d,e,f];this.transformMatrix=_util.Util.transform(this.transformMatrix,transformMatrix),this.tgrp=null}},{key:"getSVG",value:function(operatorList,viewport){var _this48=this;this.viewport=viewport;var svgElement=this._initialize(viewport);return this.loadDependencies(operatorList).then((function(){return _this48.transformMatrix=_util.IDENTITY_MATRIX,_this48.executeOpTree(_this48.convertOpList(operatorList)),svgElement}))}},{key:"convertOpList",value:function(operatorList){for(var operatorIdMapping=this._operatorIdMapping,argsArray=operatorList.argsArray,fnArray=operatorList.fnArray,opList=[],i=0,ii=fnArray.length;i<ii;i++){var fnId=fnArray[i];opList.push({fnId:fnId,fn:operatorIdMapping[fnId],args:argsArray[i]})}return function(opList){var _step38,opTree=[],tmp=[],_iterator38=_createForOfIteratorHelper(opList);try{for(_iterator38.s();!(_step38=_iterator38.n()).done;){var opListElement=_step38.value;"save"!==opListElement.fn?"restore"===opListElement.fn?opTree=tmp.pop():opTree.push(opListElement):(opTree.push({fnId:92,fn:"group",items:[]}),tmp.push(opTree),opTree=opTree[opTree.length-1].items)}}catch(err){_iterator38.e(err)}finally{_iterator38.f()}return opTree}(opList)}},{key:"executeOpTree",value:function(opTree){var _step40,_iterator40=_createForOfIteratorHelper(opTree);try{for(_iterator40.s();!(_step40=_iterator40.n()).done;){var opTreeElement=_step40.value,fn=opTreeElement.fn,fnId=opTreeElement.fnId,args=opTreeElement.args;switch(0|fnId){case _util.OPS.beginText:this.beginText();break;case _util.OPS.dependency:break;case _util.OPS.setLeading:this.setLeading(args);break;case _util.OPS.setLeadingMoveText:this.setLeadingMoveText(args[0],args[1]);break;case _util.OPS.setFont:this.setFont(args);break;case _util.OPS.showText:case _util.OPS.showSpacedText:this.showText(args[0]);break;case _util.OPS.endText:this.endText();break;case _util.OPS.moveText:this.moveText(args[0],args[1]);break;case _util.OPS.setCharSpacing:this.setCharSpacing(args[0]);break;case _util.OPS.setWordSpacing:this.setWordSpacing(args[0]);break;case _util.OPS.setHScale:this.setHScale(args[0]);break;case _util.OPS.setTextMatrix:this.setTextMatrix(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util.OPS.setTextRise:this.setTextRise(args[0]);break;case _util.OPS.setTextRenderingMode:this.setTextRenderingMode(args[0]);break;case _util.OPS.setLineWidth:this.setLineWidth(args[0]);break;case _util.OPS.setLineJoin:this.setLineJoin(args[0]);break;case _util.OPS.setLineCap:this.setLineCap(args[0]);break;case _util.OPS.setMiterLimit:this.setMiterLimit(args[0]);break;case _util.OPS.setFillRGBColor:this.setFillRGBColor(args[0],args[1],args[2]);break;case _util.OPS.setStrokeRGBColor:this.setStrokeRGBColor(args[0],args[1],args[2]);break;case _util.OPS.setStrokeColorN:this.setStrokeColorN(args);break;case _util.OPS.setFillColorN:this.setFillColorN(args);break;case _util.OPS.shadingFill:this.shadingFill(args[0]);break;case _util.OPS.setDash:this.setDash(args[0],args[1]);break;case _util.OPS.setRenderingIntent:this.setRenderingIntent(args[0]);break;case _util.OPS.setFlatness:this.setFlatness(args[0]);break;case _util.OPS.setGState:this.setGState(args[0]);break;case _util.OPS.fill:this.fill();break;case _util.OPS.eoFill:this.eoFill();break;case _util.OPS.stroke:this.stroke();break;case _util.OPS.fillStroke:this.fillStroke();break;case _util.OPS.eoFillStroke:this.eoFillStroke();break;case _util.OPS.clip:this.clip("nonzero");break;case _util.OPS.eoClip:this.clip("evenodd");break;case _util.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case _util.OPS.paintImageXObject:this.paintImageXObject(args[0]);break;case _util.OPS.paintInlineImageXObject:this.paintInlineImageXObject(args[0]);break;case _util.OPS.paintImageMaskXObject:this.paintImageMaskXObject(args[0]);break;case _util.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(args[0],args[1]);break;case _util.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case _util.OPS.closePath:this.closePath();break;case _util.OPS.closeStroke:this.closeStroke();break;case _util.OPS.closeFillStroke:this.closeFillStroke();break;case _util.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case _util.OPS.nextLine:this.nextLine();break;case _util.OPS.transform:this.transform(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util.OPS.constructPath:this.constructPath(args[0],args[1]);break;case _util.OPS.endPath:this.endPath();break;case 92:this.group(opTreeElement.items);break;default:(0,_util.warn)("Unimplemented operator ".concat(fn))}}}catch(err){_iterator40.e(err)}finally{_iterator40.f()}}},{key:"setWordSpacing",value:function(wordSpacing){this.current.wordSpacing=wordSpacing}},{key:"setCharSpacing",value:function(charSpacing){this.current.charSpacing=charSpacing}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function(a,b,c,d,e,f){var current=this.current;current.textMatrix=current.lineMatrix=[a,b,c,d,e,f],current.textMatrixScale=Math.sqrt(a*a+b*b),current.x=current.lineX=0,current.y=current.lineY=0,current.xcoords=[],current.ycoords=[],current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size","".concat(pf(current.fontSize),"px")),current.tspan.setAttributeNS(null,"y",pf(-current.y)),current.txtElement=this.svgFactory.createElement("svg:text"),current.txtElement.appendChild(current.tspan)}},{key:"beginText",value:function(){var current=this.current;current.x=current.lineX=0,current.y=current.lineY=0,current.textMatrix=_util.IDENTITY_MATRIX,current.lineMatrix=_util.IDENTITY_MATRIX,current.textMatrixScale=1,current.tspan=this.svgFactory.createElement("svg:tspan"),current.txtElement=this.svgFactory.createElement("svg:text"),current.txtgrp=this.svgFactory.createElement("svg:g"),current.xcoords=[],current.ycoords=[]}},{key:"moveText",value:function(x,y){var current=this.current;current.x=current.lineX+=x,current.y=current.lineY+=y,current.xcoords=[],current.ycoords=[],current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size","".concat(pf(current.fontSize),"px")),current.tspan.setAttributeNS(null,"y",pf(-current.y))}},{key:"showText",value:function(glyphs){var current=this.current,font=current.font,fontSize=current.fontSize;if(0!==fontSize){var _step41,fontSizeScale=current.fontSizeScale,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,fontDirection=current.fontDirection,textHScale=current.textHScale*fontDirection,vertical=font.vertical,spacingDir=vertical?1:-1,defaultVMetrics=font.defaultVMetrics,widthAdvanceScale=fontSize*current.fontMatrix[0],x=0,_iterator41=_createForOfIteratorHelper(glyphs);try{for(_iterator41.s();!(_step41=_iterator41.n()).done;){var glyph=_step41.value;if(null!==glyph)if((0,_util.isNum)(glyph))x+=spacingDir*glyph*fontSize/1e3;else{var spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,character=glyph.fontChar,scaledX=void 0,scaledY=void 0,width=glyph.width;if(vertical){var vx=void 0,vmetric=glyph.vmetric||defaultVMetrics;vx=-(vx=glyph.vmetric?vmetric[1]:.5*width)*widthAdvanceScale;var vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width,scaledX=vx/fontSizeScale,scaledY=(x+vy)/fontSizeScale}else scaledX=x/fontSizeScale,scaledY=0;(glyph.isInFont||font.missingFile)&&(current.xcoords.push(current.x+scaledX),vertical&&current.ycoords.push(-current.y+scaledY),current.tspan.textContent+=character),x+=vertical?width*widthAdvanceScale-spacing*fontDirection:width*widthAdvanceScale+spacing*fontDirection}else x+=fontDirection*wordSpacing}}catch(err){_iterator41.e(err)}finally{_iterator41.f()}current.tspan.setAttributeNS(null,"x",current.xcoords.map(pf).join(" ")),vertical?current.tspan.setAttributeNS(null,"y",current.ycoords.map(pf).join(" ")):current.tspan.setAttributeNS(null,"y",pf(-current.y)),vertical?current.y-=x:current.x+=x*textHScale,current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size","".concat(pf(current.fontSize),"px")),current.fontStyle!==SVG_DEFAULTS.fontStyle&&current.tspan.setAttributeNS(null,"font-style",current.fontStyle),current.fontWeight!==SVG_DEFAULTS.fontWeight&&current.tspan.setAttributeNS(null,"font-weight",current.fontWeight);var fillStrokeMode=current.textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK;if(fillStrokeMode===_util.TextRenderingMode.FILL||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE?(current.fillColor!==SVG_DEFAULTS.fillColor&&current.tspan.setAttributeNS(null,"fill",current.fillColor),current.fillAlpha<1&&current.tspan.setAttributeNS(null,"fill-opacity",current.fillAlpha)):current.textRenderingMode===_util.TextRenderingMode.ADD_TO_PATH?current.tspan.setAttributeNS(null,"fill","transparent"):current.tspan.setAttributeNS(null,"fill","none"),fillStrokeMode===_util.TextRenderingMode.STROKE||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){var lineWidthScale=1/(current.textMatrixScale||1);this._setStrokeAttributes(current.tspan,lineWidthScale)}var textMatrix=current.textMatrix;0!==current.textRise&&((textMatrix=textMatrix.slice())[5]+=current.textRise),current.txtElement.setAttributeNS(null,"transform","".concat(pm(textMatrix)," scale(").concat(pf(textHScale),", -1)")),current.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),current.txtElement.appendChild(current.tspan),current.txtgrp.appendChild(current.txtElement),this._ensureTransformGroup().appendChild(current.txtElement)}}},{key:"setLeadingMoveText",value:function(x,y){this.setLeading(-y),this.moveText(x,y)}},{key:"addFontStyle",value:function(fontObj){if(!fontObj.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var url=(0,_util.createObjectURL)(fontObj.data,fontObj.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(fontObj.loadedName,'";')+" src: url(".concat(url,"); }\n")}},{key:"setFont",value:function(details){var current=this.current,fontObj=this.commonObjs.get(details[0]),size=details[1];current.font=fontObj,!this.embedFonts||fontObj.missingFile||this.embeddedFonts[fontObj.loadedName]||(this.addFontStyle(fontObj),this.embeddedFonts[fontObj.loadedName]=fontObj),current.fontMatrix=fontObj.fontMatrix||_util.FONT_IDENTITY_MATRIX;var bold="normal";fontObj.black?bold="900":fontObj.bold&&(bold="bold");var italic=fontObj.italic?"italic":"normal";size<0?(size=-size,current.fontDirection=-1):current.fontDirection=1,current.fontSize=size,current.fontFamily=fontObj.loadedName,current.fontWeight=bold,current.fontStyle=italic,current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"y",pf(-current.y)),current.xcoords=[],current.ycoords=[]}},{key:"endText",value:function(){var _current$txtElement,current=this.current;current.textRenderingMode&_util.TextRenderingMode.ADD_TO_PATH_FLAG&&null!==(_current$txtElement=current.txtElement)&&void 0!==_current$txtElement&&_current$txtElement.hasChildNodes()&&(current.element=current.txtElement,this.clip("nonzero"),this.endPath())}},{key:"setLineWidth",value:function(width){width>0&&(this.current.lineWidth=width)}},{key:"setLineCap",value:function(style){this.current.lineCap=LINE_CAP_STYLES[style]}},{key:"setLineJoin",value:function(style){this.current.lineJoin=LINE_JOIN_STYLES[style]}},{key:"setMiterLimit",value:function(limit){this.current.miterLimit=limit}},{key:"setStrokeAlpha",value:function(strokeAlpha){this.current.strokeAlpha=strokeAlpha}},{key:"setStrokeRGBColor",value:function(r,g,b){this.current.strokeColor=_util.Util.makeHexColor(r,g,b)}},{key:"setFillAlpha",value:function(fillAlpha){this.current.fillAlpha=fillAlpha}},{key:"setFillRGBColor",value:function(r,g,b){this.current.fillColor=_util.Util.makeHexColor(r,g,b),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}},{key:"setStrokeColorN",value:function(args){this.current.strokeColor=this._makeColorN_Pattern(args)}},{key:"setFillColorN",value:function(args){this.current.fillColor=this._makeColorN_Pattern(args)}},{key:"shadingFill",value:function(args){var width=this.viewport.width,height=this.viewport.height,inv=_util.Util.inverseTransform(this.transformMatrix),bl=_util.Util.applyTransform([0,0],inv),br=_util.Util.applyTransform([0,height],inv),ul=_util.Util.applyTransform([width,0],inv),ur=_util.Util.applyTransform([width,height],inv),x0=Math.min(bl[0],br[0],ul[0],ur[0]),y0=Math.min(bl[1],br[1],ul[1],ur[1]),x1=Math.max(bl[0],br[0],ul[0],ur[0]),y1=Math.max(bl[1],br[1],ul[1],ur[1]),rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x",x0),rect.setAttributeNS(null,"y",y0),rect.setAttributeNS(null,"width",x1-x0),rect.setAttributeNS(null,"height",y1-y0),rect.setAttributeNS(null,"fill",this._makeShadingPattern(args)),this.current.fillAlpha<1&&rect.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(rect)}},{key:"_makeColorN_Pattern",value:function(args){return"TilingPattern"===args[0]?this._makeTilingPattern(args):this._makeShadingPattern(args)}},{key:"_makeTilingPattern",value:function(args){var color=args[1],operatorList=args[2],matrix=args[3]||_util.IDENTITY_MATRIX,_args$=_slicedToArray(args[4],4),x0=_args$[0],y0=_args$[1],x1=_args$[2],y1=_args$[3],xstep=args[5],ystep=args[6],paintType=args[7],tilingId="shading".concat(shadingCount++),_util$Util$applyTrans2=_slicedToArray(_util.Util.applyTransform([x0,y0],matrix),2),tx0=_util$Util$applyTrans2[0],ty0=_util$Util$applyTrans2[1],_util$Util$applyTrans4=_slicedToArray(_util.Util.applyTransform([x1,y1],matrix),2),tx1=_util$Util$applyTrans4[0],ty1=_util$Util$applyTrans4[1],_util$Util$singularVa2=_slicedToArray(_util.Util.singularValueDecompose2dScale(matrix),2),txstep=xstep*_util$Util$singularVa2[0],tystep=ystep*_util$Util$singularVa2[1],tiling=this.svgFactory.createElement("svg:pattern");tiling.setAttributeNS(null,"id",tilingId),tiling.setAttributeNS(null,"patternUnits","userSpaceOnUse"),tiling.setAttributeNS(null,"width",txstep),tiling.setAttributeNS(null,"height",tystep),tiling.setAttributeNS(null,"x","".concat(tx0)),tiling.setAttributeNS(null,"y","".concat(ty0));var svg=this.svg,transformMatrix=this.transformMatrix,fillColor=this.current.fillColor,strokeColor=this.current.strokeColor,bbox=this.svgFactory.create(tx1-tx0,ty1-ty0);if(this.svg=bbox,this.transformMatrix=matrix,2===paintType){var _util$Util,cssColor=(_util$Util=_util.Util).makeHexColor.apply(_util$Util,_toConsumableArray(color));this.current.fillColor=cssColor,this.current.strokeColor=cssColor}return this.executeOpTree(this.convertOpList(operatorList)),this.svg=svg,this.transformMatrix=transformMatrix,this.current.fillColor=fillColor,this.current.strokeColor=strokeColor,tiling.appendChild(bbox.childNodes[0]),this.defs.appendChild(tiling),"url(#".concat(tilingId,")")}},{key:"_makeShadingPattern",value:function(args){switch(args[0]){case"RadialAxial":var gradient,shadingId="shading".concat(shadingCount++),colorStops=args[3];switch(args[1]){case"axial":var point0=args[4],point1=args[5];(gradient=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",shadingId),gradient.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),gradient.setAttributeNS(null,"x1",point0[0]),gradient.setAttributeNS(null,"y1",point0[1]),gradient.setAttributeNS(null,"x2",point1[0]),gradient.setAttributeNS(null,"y2",point1[1]);break;case"radial":var focalPoint=args[4],circlePoint=args[5],focalRadius=args[6],circleRadius=args[7];(gradient=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",shadingId),gradient.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),gradient.setAttributeNS(null,"cx",circlePoint[0]),gradient.setAttributeNS(null,"cy",circlePoint[1]),gradient.setAttributeNS(null,"r",circleRadius),gradient.setAttributeNS(null,"fx",focalPoint[0]),gradient.setAttributeNS(null,"fy",focalPoint[1]),gradient.setAttributeNS(null,"fr",focalRadius);break;default:throw new Error("Unknown RadialAxial type: ".concat(args[1]))}var _step42,_iterator42=_createForOfIteratorHelper(colorStops);try{for(_iterator42.s();!(_step42=_iterator42.n()).done;){var colorStop=_step42.value,stop=this.svgFactory.createElement("svg:stop");stop.setAttributeNS(null,"offset",colorStop[0]),stop.setAttributeNS(null,"stop-color",colorStop[1]),gradient.appendChild(stop)}}catch(err){_iterator42.e(err)}finally{_iterator42.f()}return this.defs.appendChild(gradient),"url(#".concat(shadingId,")");case"Mesh":return(0,_util.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(args[0]))}}},{key:"setDash",value:function(dashArray,dashPhase){this.current.dashArray=dashArray,this.current.dashPhase=dashPhase}},{key:"constructPath",value:function(ops,args){var _step43,current=this.current,x=current.x,y=current.y,d=[],j=0,_iterator43=_createForOfIteratorHelper(ops);try{for(_iterator43.s();!(_step43=_iterator43.n()).done;)switch(0|_step43.value){case _util.OPS.rectangle:x=args[j++],y=args[j++];var width=args[j++],height=args[j++],xw=x+width,yh=y+height;d.push("M",pf(x),pf(y),"L",pf(xw),pf(y),"L",pf(xw),pf(yh),"L",pf(x),pf(yh),"Z");break;case _util.OPS.moveTo:x=args[j++],y=args[j++],d.push("M",pf(x),pf(y));break;case _util.OPS.lineTo:x=args[j++],y=args[j++],d.push("L",pf(x),pf(y));break;case _util.OPS.curveTo:x=args[j+4],y=args[j+5],d.push("C",pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3]),pf(x),pf(y)),j+=6;break;case _util.OPS.curveTo2:d.push("C",pf(x),pf(y),pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3])),x=args[j+2],y=args[j+3],j+=4;break;case _util.OPS.curveTo3:x=args[j+2],y=args[j+3],d.push("C",pf(args[j]),pf(args[j+1]),pf(x),pf(y),pf(x),pf(y)),j+=4;break;case _util.OPS.closePath:d.push("Z")}}catch(err){_iterator43.e(err)}finally{_iterator43.f()}d=d.join(" "),current.path&&ops.length>0&&ops[0]!==_util.OPS.rectangle&&ops[0]!==_util.OPS.moveTo?d=current.path.getAttributeNS(null,"d")+d:(current.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(current.path)),current.path.setAttributeNS(null,"d",d),current.path.setAttributeNS(null,"fill","none"),current.element=current.path,current.setCurrentPoint(x,y)}},{key:"endPath",value:function(){var current=this.current;if(current.path=null,this.pendingClip)if(current.element){var clipId="clippath".concat(clipCount++),clipPath=this.svgFactory.createElement("svg:clipPath");clipPath.setAttributeNS(null,"id",clipId),clipPath.setAttributeNS(null,"transform",pm(this.transformMatrix));var clipElement=current.element.cloneNode(!0);"evenodd"===this.pendingClip?clipElement.setAttributeNS(null,"clip-rule","evenodd"):clipElement.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,clipPath.appendChild(clipElement),this.defs.appendChild(clipPath),current.activeClipUrl&&(current.clipGroup=null,this.extraStack.forEach((function(prev){prev.clipGroup=null})),clipPath.setAttributeNS(null,"clip-path",current.activeClipUrl)),current.activeClipUrl="url(#".concat(clipId,")"),this.tgrp=null}else this.pendingClip=null}},{key:"clip",value:function(type){this.pendingClip=type}},{key:"closePath",value:function(){var current=this.current;if(current.path){var d="".concat(current.path.getAttributeNS(null,"d"),"Z");current.path.setAttributeNS(null,"d",d)}}},{key:"setLeading",value:function(leading){this.current.leading=-leading}},{key:"setTextRise",value:function(textRise){this.current.textRise=textRise}},{key:"setTextRenderingMode",value:function(textRenderingMode){this.current.textRenderingMode=textRenderingMode}},{key:"setHScale",value:function(scale){this.current.textHScale=scale/100}},{key:"setRenderingIntent",value:function(intent){}},{key:"setFlatness",value:function(flatness){}},{key:"setGState",value:function(states){var _step44,_iterator44=_createForOfIteratorHelper(states);try{for(_iterator44.s();!(_step44=_iterator44.n()).done;){var _step44$value=_slicedToArray(_step44.value,2),key=_step44$value[0],value=_step44$value[1];switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value);break;case"CA":this.setStrokeAlpha(value);break;case"ca":this.setFillAlpha(value);break;default:(0,_util.warn)("Unimplemented graphic state operator ".concat(key))}}}catch(err){_iterator44.e(err)}finally{_iterator44.f()}}},{key:"fill",value:function(){var current=this.current;current.element&&(current.element.setAttributeNS(null,"fill",current.fillColor),current.element.setAttributeNS(null,"fill-opacity",current.fillAlpha),this.endPath())}},{key:"stroke",value:function(){var current=this.current;current.element&&(this._setStrokeAttributes(current.element),current.element.setAttributeNS(null,"fill","none"),this.endPath())}},{key:"_setStrokeAttributes",value:function(element){var lineWidthScale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,current=this.current,dashArray=current.dashArray;1!==lineWidthScale&&dashArray.length>0&&(dashArray=dashArray.map((function(value){return lineWidthScale*value}))),element.setAttributeNS(null,"stroke",current.strokeColor),element.setAttributeNS(null,"stroke-opacity",current.strokeAlpha),element.setAttributeNS(null,"stroke-miterlimit",pf(current.miterLimit)),element.setAttributeNS(null,"stroke-linecap",current.lineCap),element.setAttributeNS(null,"stroke-linejoin",current.lineJoin),element.setAttributeNS(null,"stroke-width",pf(lineWidthScale*current.lineWidth)+"px"),element.setAttributeNS(null,"stroke-dasharray",dashArray.map(pf).join(" ")),element.setAttributeNS(null,"stroke-dashoffset",pf(lineWidthScale*current.dashPhase)+"px")}},{key:"eoFill",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}},{key:"fillStroke",value:function(){this.stroke(),this.fill()}},{key:"eoFillStroke",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.closePath(),this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function(){var rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x","0"),rect.setAttributeNS(null,"y","0"),rect.setAttributeNS(null,"width","1px"),rect.setAttributeNS(null,"height","1px"),rect.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(rect)}},{key:"paintImageXObject",value:function(objId){var imgData=objId.startsWith("g_")?this.commonObjs.get(objId):this.objs.get(objId);imgData?this.paintInlineImageXObject(imgData):(0,_util.warn)("Dependent image with object ID ".concat(objId," is not ready yet"))}},{key:"paintInlineImageXObject",value:function(imgData,mask){var width=imgData.width,height=imgData.height,imgSrc=convertImgDataToPng(imgData,this.forceDataSchema,!!mask),cliprect=this.svgFactory.createElement("svg:rect");cliprect.setAttributeNS(null,"x","0"),cliprect.setAttributeNS(null,"y","0"),cliprect.setAttributeNS(null,"width",pf(width)),cliprect.setAttributeNS(null,"height",pf(height)),this.current.element=cliprect,this.clip("nonzero");var imgEl=this.svgFactory.createElement("svg:image");imgEl.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",imgSrc),imgEl.setAttributeNS(null,"x","0"),imgEl.setAttributeNS(null,"y",pf(-height)),imgEl.setAttributeNS(null,"width",pf(width)+"px"),imgEl.setAttributeNS(null,"height",pf(height)+"px"),imgEl.setAttributeNS(null,"transform","scale(".concat(pf(1/width)," ").concat(pf(-1/height),")")),mask?mask.appendChild(imgEl):this._ensureTransformGroup().appendChild(imgEl)}},{key:"paintImageMaskXObject",value:function(imgData){var current=this.current,width=imgData.width,height=imgData.height,fillColor=current.fillColor;current.maskId="mask".concat(maskCount++);var mask=this.svgFactory.createElement("svg:mask");mask.setAttributeNS(null,"id",current.maskId);var rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x","0"),rect.setAttributeNS(null,"y","0"),rect.setAttributeNS(null,"width",pf(width)),rect.setAttributeNS(null,"height",pf(height)),rect.setAttributeNS(null,"fill",fillColor),rect.setAttributeNS(null,"mask","url(#".concat(current.maskId,")")),this.defs.appendChild(mask),this._ensureTransformGroup().appendChild(rect),this.paintInlineImageXObject(imgData,mask)}},{key:"paintFormXObjectBegin",value:function(matrix,bbox){if(Array.isArray(matrix)&&6===matrix.length&&this.transform(matrix[0],matrix[1],matrix[2],matrix[3],matrix[4],matrix[5]),bbox){var width=bbox[2]-bbox[0],height=bbox[3]-bbox[1],cliprect=this.svgFactory.createElement("svg:rect");cliprect.setAttributeNS(null,"x",bbox[0]),cliprect.setAttributeNS(null,"y",bbox[1]),cliprect.setAttributeNS(null,"width",pf(width)),cliprect.setAttributeNS(null,"height",pf(height)),this.current.element=cliprect,this.clip("nonzero"),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){}},{key:"_initialize",value:function(viewport){var svg=this.svgFactory.create(viewport.width,viewport.height),definitions=this.svgFactory.createElement("svg:defs");svg.appendChild(definitions),this.defs=definitions;var rootGroup=this.svgFactory.createElement("svg:g");return rootGroup.setAttributeNS(null,"transform",pm(viewport.transform)),svg.appendChild(rootGroup),this.svg=rootGroup,svg}},{key:"_ensureClipGroup",value:function(){if(!this.current.clipGroup){var clipGroup=this.svgFactory.createElement("svg:g");clipGroup.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(clipGroup),this.current.clipGroup=clipGroup}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}]),SVGGraphics}()},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFNodeStream=void 0;var _util=__w_pdfjs_require__(2),_network_utils=__w_pdfjs_require__(24),fs=require("fs"),http=require("http"),https=require("https"),url=require("url"),fileUriRegex=/^file:\/\/\/[a-zA-Z]:\//,PDFNodeStream=function(){function PDFNodeStream(source){var sourceUrl,parsedUrl;_classCallCheck(this,PDFNodeStream),this.source=source,this.url=(sourceUrl=source.url,"file:"===(parsedUrl=url.parse(sourceUrl)).protocol||parsedUrl.host?parsedUrl:/^[a-z]:[/\\]/i.test(sourceUrl)?url.parse("file:///".concat(sourceUrl)):(parsedUrl.host||(parsedUrl.protocol="file:"),parsedUrl)),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&source.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return _createClass(PDFNodeStream,[{key:"_progressiveDataLength",get:function(){var _this$_fullRequestRea3,_this$_fullRequestRea4;return null!==(_this$_fullRequestRea3=null===(_this$_fullRequestRea4=this._fullRequestReader)||void 0===_this$_fullRequestRea4?void 0:_this$_fullRequestRea4._loaded)&&void 0!==_this$_fullRequestRea3?_this$_fullRequestRea3:0}},{key:"getFullReader",value:function(){return(0,_util.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this),this._fullRequestReader}},{key:"getRangeReader",value:function(start,end){if(end<=this._progressiveDataLength)return null;var rangeReader=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,start,end):new PDFNodeStreamRangeReader(this,start,end);return this._rangeRequestReaders.push(rangeReader),rangeReader}},{key:"cancelAllRequests",value:function(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason),this._rangeRequestReaders.slice(0).forEach((function(reader){reader.cancel(reason)}))}}]),PDFNodeStream}();exports.PDFNodeStream=PDFNodeStream;var BaseFullReader=function(){function BaseFullReader(stream){_classCallCheck(this,BaseFullReader),this._url=stream.url,this._done=!1,this._storedError=null,this.onProgress=null;var source=stream.source;this._contentLength=source.length,this._loaded=0,this._filename=null,this._disableRange=source.disableRange||!1,this._rangeChunkSize=source.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!source.disableStream,this._isRangeSupported=!source.disableRange,this._readableStream=null,this._readCapability=(0,_util.createPromiseCapability)(),this._headersCapability=(0,_util.createPromiseCapability)()}var _read3;return _createClass(BaseFullReader,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(_read3=_asyncToGenerator(regeneratorRuntime.mark((function _callee9(){var chunk,buffer;return regeneratorRuntime.wrap((function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return _context9.next=2,this._readCapability.promise;case 2:if(!this._done){_context9.next=4;break}return _context9.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){_context9.next=6;break}throw this._storedError;case 6:if(null!==(chunk=this._readableStream.read())){_context9.next=10;break}return this._readCapability=(0,_util.createPromiseCapability)(),_context9.abrupt("return",this.read());case 10:return this._loaded+=chunk.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),buffer=new Uint8Array(chunk).buffer,_context9.abrupt("return",{value:buffer,done:!1});case 14:case"end":return _context9.stop()}}),_callee9,this)}))),function(){return _read3.apply(this,arguments)})},{key:"cancel",value:function(reason){this._readableStream?this._readableStream.destroy(reason):this._error(reason)}},{key:"_error",value:function(reason){this._storedError=reason,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(readableStream){var _this49=this;this._readableStream=readableStream,readableStream.on("readable",(function(){_this49._readCapability.resolve()})),readableStream.on("end",(function(){readableStream.destroy(),_this49._done=!0,_this49._readCapability.resolve()})),readableStream.on("error",(function(reason){_this49._error(reason)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new _util.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}]),BaseFullReader}(),BaseRangeReader=function(){function BaseRangeReader(stream){_classCallCheck(this,BaseRangeReader),this._url=stream.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,_util.createPromiseCapability)();var source=stream.source;this._isStreamingSupported=!source.disableStream}var _read4;return _createClass(BaseRangeReader,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(_read4=_asyncToGenerator(regeneratorRuntime.mark((function _callee10(){var chunk,buffer;return regeneratorRuntime.wrap((function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return _context10.next=2,this._readCapability.promise;case 2:if(!this._done){_context10.next=4;break}return _context10.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){_context10.next=6;break}throw this._storedError;case 6:if(null!==(chunk=this._readableStream.read())){_context10.next=10;break}return this._readCapability=(0,_util.createPromiseCapability)(),_context10.abrupt("return",this.read());case 10:return this._loaded+=chunk.length,this.onProgress&&this.onProgress({loaded:this._loaded}),buffer=new Uint8Array(chunk).buffer,_context10.abrupt("return",{value:buffer,done:!1});case 14:case"end":return _context10.stop()}}),_callee10,this)}))),function(){return _read4.apply(this,arguments)})},{key:"cancel",value:function(reason){this._readableStream?this._readableStream.destroy(reason):this._error(reason)}},{key:"_error",value:function(reason){this._storedError=reason,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(readableStream){var _this50=this;this._readableStream=readableStream,readableStream.on("readable",(function(){_this50._readCapability.resolve()})),readableStream.on("end",(function(){readableStream.destroy(),_this50._done=!0,_this50._readCapability.resolve()})),readableStream.on("error",(function(reason){_this50._error(reason)})),this._storedError&&this._readableStream.destroy(this._storedError)}}]),BaseRangeReader}();function createRequestOptions(parsedUrl,headers){return{protocol:parsedUrl.protocol,auth:parsedUrl.auth,host:parsedUrl.hostname,port:parsedUrl.port,path:parsedUrl.path,method:"GET",headers:headers}}var PDFNodeStreamFullReader=function(_BaseFullReader){_inherits(PDFNodeStreamFullReader,_BaseFullReader);var _super38=_createSuper(PDFNodeStreamFullReader);function PDFNodeStreamFullReader(stream){var _this51;_classCallCheck(this,PDFNodeStreamFullReader);var handleResponse=function(response){if(404===response.statusCode){var error=new _util.MissingPDFException('Missing PDF "'.concat(_this51._url,'".'));return _this51._storedError=error,void _this51._headersCapability.reject(error)}_this51._headersCapability.resolve(),_this51._setReadableStream(response);var getResponseHeader=function(name){return _this51._readableStream.headers[name.toLowerCase()]},_ref55=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader:getResponseHeader,isHttp:stream.isHttp,rangeChunkSize:_this51._rangeChunkSize,disableRange:_this51._disableRange}),allowRangeRequests=_ref55.allowRangeRequests,suggestedLength=_ref55.suggestedLength;_this51._isRangeSupported=allowRangeRequests,_this51._contentLength=suggestedLength||_this51._contentLength,_this51._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader)};return(_this51=_super38.call(this,stream))._request=null,"http:"===_this51._url.protocol?_this51._request=http.request(createRequestOptions(_this51._url,stream.httpHeaders),handleResponse):_this51._request=https.request(createRequestOptions(_this51._url,stream.httpHeaders),handleResponse),_this51._request.on("error",(function(reason){_this51._storedError=reason,_this51._headersCapability.reject(reason)})),_this51._request.end(),_this51}return _createClass(PDFNodeStreamFullReader)}(BaseFullReader),PDFNodeStreamRangeReader=function(_BaseRangeReader){_inherits(PDFNodeStreamRangeReader,_BaseRangeReader);var _super39=_createSuper(PDFNodeStreamRangeReader);function PDFNodeStreamRangeReader(stream,start,end){var _this52;for(var property in _classCallCheck(this,PDFNodeStreamRangeReader),(_this52=_super39.call(this,stream))._httpHeaders={},stream.httpHeaders){var value=stream.httpHeaders[property];void 0!==value&&(_this52._httpHeaders[property]=value)}_this52._httpHeaders.Range="bytes=".concat(start,"-").concat(end-1);var handleResponse=function(response){if(404!==response.statusCode)_this52._setReadableStream(response);else{var error=new _util.MissingPDFException('Missing PDF "'.concat(_this52._url,'".'));_this52._storedError=error}};return _this52._request=null,"http:"===_this52._url.protocol?_this52._request=http.request(createRequestOptions(_this52._url,_this52._httpHeaders),handleResponse):_this52._request=https.request(createRequestOptions(_this52._url,_this52._httpHeaders),handleResponse),_this52._request.on("error",(function(reason){_this52._storedError=reason})),_this52._request.end(),_this52}return _createClass(PDFNodeStreamRangeReader)}(BaseRangeReader),PDFNodeStreamFsFullReader=function(_BaseFullReader2){_inherits(PDFNodeStreamFsFullReader,_BaseFullReader2);var _super40=_createSuper(PDFNodeStreamFsFullReader);function PDFNodeStreamFsFullReader(stream){var _this53;_classCallCheck(this,PDFNodeStreamFsFullReader),_this53=_super40.call(this,stream);var path=decodeURIComponent(_this53._url.path);return fileUriRegex.test(_this53._url.href)&&(path=path.replace(/^\//,"")),fs.lstat(path,(function(error,stat){if(error)return"ENOENT"===error.code&&(error=new _util.MissingPDFException('Missing PDF "'.concat(path,'".'))),_this53._storedError=error,void _this53._headersCapability.reject(error);_this53._contentLength=stat.size,_this53._setReadableStream(fs.createReadStream(path)),_this53._headersCapability.resolve()})),_this53}return _createClass(PDFNodeStreamFsFullReader)}(BaseFullReader),PDFNodeStreamFsRangeReader=function(_BaseRangeReader2){_inherits(PDFNodeStreamFsRangeReader,_BaseRangeReader2);var _super41=_createSuper(PDFNodeStreamFsRangeReader);function PDFNodeStreamFsRangeReader(stream,start,end){var _this54;_classCallCheck(this,PDFNodeStreamFsRangeReader),_this54=_super41.call(this,stream);var path=decodeURIComponent(_this54._url.path);return fileUriRegex.test(_this54._url.href)&&(path=path.replace(/^\//,"")),_this54._setReadableStream(fs.createReadStream(path,{start:start,end:end-1})),_this54}return _createClass(PDFNodeStreamFsRangeReader)}(BaseRangeReader)},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.createResponseStatusError=function(status,url){return 404===status||0===status&&url.startsWith("file:")?new _util.MissingPDFException('Missing PDF "'+url+'".'):new _util.UnexpectedResponseException("Unexpected server response ("+status+') while retrieving PDF "'+url+'".',status)},exports.extractFilenameFromHeader=function(getResponseHeader){var contentDisposition=getResponseHeader("Content-Disposition");if(contentDisposition){var filename=(0,_content_disposition.getFilenameFromContentDispositionHeader)(contentDisposition);if(filename.includes("%"))try{filename=decodeURIComponent(filename)}catch(ex){}if(/\.pdf$/i.test(filename))return filename}return null},exports.validateRangeRequestCapabilities=function(_ref56){var getResponseHeader=_ref56.getResponseHeader,isHttp=_ref56.isHttp,rangeChunkSize=_ref56.rangeChunkSize,disableRange=_ref56.disableRange;(0,_util.assert)(rangeChunkSize>0,"Range chunk size must be larger than zero");var returnValues={allowRangeRequests:!1,suggestedLength:void 0},length=parseInt(getResponseHeader("Content-Length"),10);return Number.isInteger(length)?(returnValues.suggestedLength=length,length<=2*rangeChunkSize||disableRange||!isHttp||"bytes"!==getResponseHeader("Accept-Ranges")||"identity"!==(getResponseHeader("Content-Encoding")||"identity")||(returnValues.allowRangeRequests=!0),returnValues):returnValues},exports.validateResponseStatus=function(status){return 200===status||206===status};var _util=__w_pdfjs_require__(2),_content_disposition=__w_pdfjs_require__(25)},function(__unused_webpack_module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFilenameFromContentDispositionHeader=function(contentDisposition){var needsEncodingFixup=!0,tmp=toParamRegExp("filename\\*","i").exec(contentDisposition);if(tmp){var filename=rfc2616unquote(tmp=tmp[1]);return fixupEncoding(filename=rfc2047decode(filename=rfc5987decode(filename=unescape(filename))))}if(tmp=function(contentDispositionStr){for(var match,matches=[],iter=toParamRegExp("filename\\*((?!0\\d)\\d+)(\\*?)","ig");null!==(match=iter.exec(contentDispositionStr));){var _match2=_slicedToArray(match,4),n=_match2[1],quot=_match2[2],part=_match2[3];if((n=parseInt(n,10))in matches){if(0===n)break}else matches[n]=[quot,part]}for(var parts=[],_n2=0;_n2<matches.length&&_n2 in matches;++_n2){var _matches$_n=_slicedToArray(matches[_n2],2),_quot=_matches$_n[0],_part=_matches$_n[1];_part=rfc2616unquote(_part),_quot&&(_part=unescape(_part),0===_n2&&(_part=rfc5987decode(_part))),parts.push(_part)}return parts.join("")}(contentDisposition))return fixupEncoding(rfc2047decode(tmp));if(tmp=toParamRegExp("filename","i").exec(contentDisposition)){var _filename2=rfc2616unquote(tmp=tmp[1]);return fixupEncoding(_filename2=rfc2047decode(_filename2))}function toParamRegExp(attributePattern,flags){return new RegExp("(?:^|;)\\s*"+attributePattern+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',flags)}function textdecode(encoding,value){if(encoding){if(!/^[\x00-\xFF]+$/.test(value))return value;try{var decoder=new TextDecoder(encoding,{fatal:!0}),bytes=Array.from(value,(function(ch){return 255&ch.charCodeAt(0)}));value=decoder.decode(new Uint8Array(bytes)),needsEncodingFixup=!1}catch(e){if(/^utf-?8$/i.test(encoding))try{value=decodeURIComponent(escape(value)),needsEncodingFixup=!1}catch(err){}}}return value}function fixupEncoding(value){return needsEncodingFixup&&/[\x80-\xff]/.test(value)&&(value=textdecode("utf-8",value),needsEncodingFixup&&(value=textdecode("iso-8859-1",value))),value}function rfc2616unquote(value){if(value.startsWith('"')){for(var parts=value.slice(1).split('\\"'),i=0;i<parts.length;++i){var quotindex=parts[i].indexOf('"');-1!==quotindex&&(parts[i]=parts[i].slice(0,quotindex),parts.length=i+1),parts[i]=parts[i].replace(/\\(.)/g,"$1")}value=parts.join('"')}return value}function rfc5987decode(extvalue){var encodingend=extvalue.indexOf("'");return-1===encodingend?extvalue:textdecode(extvalue.slice(0,encodingend),extvalue.slice(encodingend+1).replace(/^[^']*'/,""))}function rfc2047decode(value){return!value.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(value)?value:value.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(matches,charset,encoding,text){if("q"===encoding||"Q"===encoding)return textdecode(charset,text=(text=text.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(match,hex){return String.fromCharCode(parseInt(hex,16))})));try{text=atob(text)}catch(e){}return textdecode(charset,text)}))}return""}},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFNetworkStream=void 0;var _util=__w_pdfjs_require__(2),_network_utils=__w_pdfjs_require__(24),NetworkManager=function(){function NetworkManager(url,args){_classCallCheck(this,NetworkManager),this.url=url,args=args||{},this.isHttp=/^https?:/i.test(url),this.httpHeaders=this.isHttp&&args.httpHeaders||{},this.withCredentials=args.withCredentials||!1,this.getXhr=args.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}return _createClass(NetworkManager,[{key:"requestRange",value:function(begin,end,listeners){var args={begin:begin,end:end};for(var prop in listeners)args[prop]=listeners[prop];return this.request(args)}},{key:"requestFull",value:function(listeners){return this.request(listeners)}},{key:"request",value:function(args){var xhr=this.getXhr(),xhrId=this.currXhrId++,pendingRequest=this.pendingRequests[xhrId]={xhr:xhr};for(var property in xhr.open("GET",this.url),xhr.withCredentials=this.withCredentials,this.httpHeaders){var value=this.httpHeaders[property];void 0!==value&&xhr.setRequestHeader(property,value)}return this.isHttp&&"begin"in args&&"end"in args?(xhr.setRequestHeader("Range","bytes=".concat(args.begin,"-").concat(args.end-1)),pendingRequest.expectedStatus=206):pendingRequest.expectedStatus=200,xhr.responseType="arraybuffer",args.onError&&(xhr.onerror=function(evt){args.onError(xhr.status)}),xhr.onreadystatechange=this.onStateChange.bind(this,xhrId),xhr.onprogress=this.onProgress.bind(this,xhrId),pendingRequest.onHeadersReceived=args.onHeadersReceived,pendingRequest.onDone=args.onDone,pendingRequest.onError=args.onError,pendingRequest.onProgress=args.onProgress,xhr.send(null),xhrId}},{key:"onProgress",value:function(xhrId,evt){var pendingRequest=this.pendingRequests[xhrId];pendingRequest&&pendingRequest.onProgress&&pendingRequest.onProgress(evt)}},{key:"onStateChange",value:function(xhrId,evt){var pendingRequest=this.pendingRequests[xhrId];if(pendingRequest){var xhr=pendingRequest.xhr;if(xhr.readyState>=2&&pendingRequest.onHeadersReceived&&(pendingRequest.onHeadersReceived(),delete pendingRequest.onHeadersReceived),4===xhr.readyState&&xhrId in this.pendingRequests)if(delete this.pendingRequests[xhrId],0===xhr.status&&this.isHttp)pendingRequest.onError&&pendingRequest.onError(xhr.status);else{var xhrStatus=xhr.status||200;if(200===xhrStatus&&206===pendingRequest.expectedStatus||xhrStatus===pendingRequest.expectedStatus){var chunk=function(xhr){var data=xhr.response;return"string"!=typeof data?data:(0,_util.stringToBytes)(data).buffer}(xhr);if(206===xhrStatus){var rangeHeader=xhr.getResponseHeader("Content-Range"),matches=/bytes (\d+)-(\d+)\/(\d+)/.exec(rangeHeader);pendingRequest.onDone({begin:parseInt(matches[1],10),chunk:chunk})}else chunk?pendingRequest.onDone({begin:0,chunk:chunk}):pendingRequest.onError&&pendingRequest.onError(xhr.status)}else pendingRequest.onError&&pendingRequest.onError(xhr.status)}}}},{key:"getRequestXhr",value:function(xhrId){return this.pendingRequests[xhrId].xhr}},{key:"isPendingRequest",value:function(xhrId){return xhrId in this.pendingRequests}},{key:"abortRequest",value:function(xhrId){var xhr=this.pendingRequests[xhrId].xhr;delete this.pendingRequests[xhrId],xhr.abort()}}]),NetworkManager}(),PDFNetworkStream=function(){function PDFNetworkStream(source){_classCallCheck(this,PDFNetworkStream),this._source=source,this._manager=new NetworkManager(source.url,{httpHeaders:source.httpHeaders,withCredentials:source.withCredentials}),this._rangeChunkSize=source.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}return _createClass(PDFNetworkStream,[{key:"_onRangeRequestReaderClosed",value:function(reader){var i=this._rangeRequestReaders.indexOf(reader);i>=0&&this._rangeRequestReaders.splice(i,1)}},{key:"getFullReader",value:function(){return(0,_util.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(begin,end){var reader=new PDFNetworkStreamRangeRequestReader(this._manager,begin,end);return reader.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(reader),reader}},{key:"cancelAllRequests",value:function(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason),this._rangeRequestReaders.slice(0).forEach((function(reader){reader.cancel(reason)}))}}]),PDFNetworkStream}();exports.PDFNetworkStream=PDFNetworkStream;var PDFNetworkStreamFullRequestReader=function(){function PDFNetworkStreamFullRequestReader(manager,source){_classCallCheck(this,PDFNetworkStreamFullRequestReader),this._manager=manager;var args={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=source.url,this._fullRequestId=manager.requestFull(args),this._headersReceivedCapability=(0,_util.createPromiseCapability)(),this._disableRange=source.disableRange||!1,this._contentLength=source.length,this._rangeChunkSize=source.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}var _read5;return _createClass(PDFNetworkStreamFullRequestReader,[{key:"_onHeadersReceived",value:function(){var fullRequestXhrId=this._fullRequestId,fullRequestXhr=this._manager.getRequestXhr(fullRequestXhrId),getResponseHeader=function(name){return fullRequestXhr.getResponseHeader(name)},_ref57=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader:getResponseHeader,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),allowRangeRequests=_ref57.allowRangeRequests,suggestedLength=_ref57.suggestedLength;allowRangeRequests&&(this._isRangeSupported=!0),this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader),this._isRangeSupported&&this._manager.abortRequest(fullRequestXhrId),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function(args){args&&(this._requests.length>0?this._requests.shift().resolve({value:args.chunk,done:!1}):this._cachedChunks.push(args.chunk)),this._done=!0,this._cachedChunks.length>0||(this._requests.forEach((function(requestCapability){requestCapability.resolve({value:void 0,done:!0})})),this._requests=[])}},{key:"_onError",value:function(status){var url=this._url,exception=(0,_network_utils.createResponseStatusError)(status,url);this._storedError=exception,this._headersReceivedCapability.reject(exception),this._requests.forEach((function(requestCapability){requestCapability.reject(exception)})),this._requests=[],this._cachedChunks=[]}},{key:"_onProgress",value:function(data){this.onProgress&&this.onProgress({loaded:data.loaded,total:data.lengthComputable?data.total:this._contentLength})}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersReceivedCapability.promise}},{key:"read",value:(_read5=_asyncToGenerator(regeneratorRuntime.mark((function _callee11(){var chunk,requestCapability;return regeneratorRuntime.wrap((function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:if(!this._storedError){_context11.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){_context11.next=5;break}return chunk=this._cachedChunks.shift(),_context11.abrupt("return",{value:chunk,done:!1});case 5:if(!this._done){_context11.next=7;break}return _context11.abrupt("return",{value:void 0,done:!0});case 7:return requestCapability=(0,_util.createPromiseCapability)(),this._requests.push(requestCapability),_context11.abrupt("return",requestCapability.promise);case 10:case"end":return _context11.stop()}}),_callee11,this)}))),function(){return _read5.apply(this,arguments)})},{key:"cancel",value:function(reason){this._done=!0,this._headersReceivedCapability.reject(reason),this._requests.forEach((function(requestCapability){requestCapability.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}]),PDFNetworkStreamFullRequestReader}(),PDFNetworkStreamRangeRequestReader=function(){function PDFNetworkStreamRangeRequestReader(manager,begin,end){_classCallCheck(this,PDFNetworkStreamRangeRequestReader),this._manager=manager;var args={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=manager.requestRange(begin,end,args),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}var _read6;return _createClass(PDFNetworkStreamRangeRequestReader,[{key:"_close",value:function(){this.onClosed&&this.onClosed(this)}},{key:"_onDone",value:function(data){var chunk=data.chunk;this._requests.length>0?this._requests.shift().resolve({value:chunk,done:!1}):this._queuedChunk=chunk,this._done=!0,this._requests.forEach((function(requestCapability){requestCapability.resolve({value:void 0,done:!0})})),this._requests=[],this._close()}},{key:"_onProgress",value:function(evt){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:evt.loaded})}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(_read6=_asyncToGenerator(regeneratorRuntime.mark((function _callee12(){var chunk,requestCapability;return regeneratorRuntime.wrap((function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:if(null===this._queuedChunk){_context12.next=4;break}return chunk=this._queuedChunk,this._queuedChunk=null,_context12.abrupt("return",{value:chunk,done:!1});case 4:if(!this._done){_context12.next=6;break}return _context12.abrupt("return",{value:void 0,done:!0});case 6:return requestCapability=(0,_util.createPromiseCapability)(),this._requests.push(requestCapability),_context12.abrupt("return",requestCapability.promise);case 9:case"end":return _context12.stop()}}),_callee12,this)}))),function(){return _read6.apply(this,arguments)})},{key:"cancel",value:function(reason){this._done=!0,this._requests.forEach((function(requestCapability){requestCapability.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}]),PDFNetworkStreamRangeRequestReader}()},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFFetchStream=void 0;var _util=__w_pdfjs_require__(2),_network_utils=__w_pdfjs_require__(24);function createFetchOptions(headers,withCredentials,abortController){return{method:"GET",headers:headers,signal:null==abortController?void 0:abortController.signal,mode:"cors",credentials:withCredentials?"include":"same-origin",redirect:"follow"}}function createHeaders(httpHeaders){var headers=new Headers;for(var property in httpHeaders){var value=httpHeaders[property];void 0!==value&&headers.append(property,value)}return headers}var PDFFetchStream=function(){function PDFFetchStream(source){_classCallCheck(this,PDFFetchStream),this.source=source,this.isHttp=/^https?:/i.test(source.url),this.httpHeaders=this.isHttp&&source.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return _createClass(PDFFetchStream,[{key:"_progressiveDataLength",get:function(){var _this$_fullRequestRea5,_this$_fullRequestRea6;return null!==(_this$_fullRequestRea5=null===(_this$_fullRequestRea6=this._fullRequestReader)||void 0===_this$_fullRequestRea6?void 0:_this$_fullRequestRea6._loaded)&&void 0!==_this$_fullRequestRea5?_this$_fullRequestRea5:0}},{key:"getFullReader",value:function(){return(0,_util.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}},{key:"getRangeReader",value:function(begin,end){if(end<=this._progressiveDataLength)return null;var reader=new PDFFetchStreamRangeReader(this,begin,end);return this._rangeRequestReaders.push(reader),reader}},{key:"cancelAllRequests",value:function(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason),this._rangeRequestReaders.slice(0).forEach((function(reader){reader.cancel(reason)}))}}]),PDFFetchStream}();exports.PDFFetchStream=PDFFetchStream;var PDFFetchStreamReader=function(){function PDFFetchStreamReader(stream){var _this55=this;_classCallCheck(this,PDFFetchStreamReader),this._stream=stream,this._reader=null,this._loaded=0,this._filename=null;var source=stream.source;this._withCredentials=source.withCredentials||!1,this._contentLength=source.length,this._headersCapability=(0,_util.createPromiseCapability)(),this._disableRange=source.disableRange||!1,this._rangeChunkSize=source.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!source.disableStream,this._isRangeSupported=!source.disableRange,this._headers=createHeaders(this._stream.httpHeaders);var url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((function(response){if(!(0,_network_utils.validateResponseStatus)(response.status))throw(0,_network_utils.createResponseStatusError)(response.status,url);_this55._reader=response.body.getReader(),_this55._headersCapability.resolve();var getResponseHeader=function(name){return response.headers.get(name)},_ref58=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader:getResponseHeader,isHttp:_this55._stream.isHttp,rangeChunkSize:_this55._rangeChunkSize,disableRange:_this55._disableRange}),allowRangeRequests=_ref58.allowRangeRequests,suggestedLength=_ref58.suggestedLength;_this55._isRangeSupported=allowRangeRequests,_this55._contentLength=suggestedLength||_this55._contentLength,_this55._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader),!_this55._isStreamingSupported&&_this55._isRangeSupported&&_this55.cancel(new _util.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}var _read7;return _createClass(PDFFetchStreamReader,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(_read7=_asyncToGenerator(regeneratorRuntime.mark((function _callee13(){var _yield$this$_reader$r,value,done,buffer;return regeneratorRuntime.wrap((function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:return _context13.next=2,this._headersCapability.promise;case 2:return _context13.next=4,this._reader.read();case 4:if(_yield$this$_reader$r=_context13.sent,value=_yield$this$_reader$r.value,!(done=_yield$this$_reader$r.done)){_context13.next=9;break}return _context13.abrupt("return",{value:value,done:done});case 9:return this._loaded+=value.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),buffer=new Uint8Array(value).buffer,_context13.abrupt("return",{value:buffer,done:!1});case 13:case"end":return _context13.stop()}}),_callee13,this)}))),function(){return _read7.apply(this,arguments)})},{key:"cancel",value:function(reason){this._reader&&this._reader.cancel(reason),this._abortController&&this._abortController.abort()}}]),PDFFetchStreamReader}(),PDFFetchStreamRangeReader=function(){function PDFFetchStreamRangeReader(stream,begin,end){var _this56=this;_classCallCheck(this,PDFFetchStreamRangeReader),this._stream=stream,this._reader=null,this._loaded=0;var source=stream.source;this._withCredentials=source.withCredentials||!1,this._readCapability=(0,_util.createPromiseCapability)(),this._isStreamingSupported=!source.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=createHeaders(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(begin,"-").concat(end-1));var url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((function(response){if(!(0,_network_utils.validateResponseStatus)(response.status))throw(0,_network_utils.createResponseStatusError)(response.status,url);_this56._readCapability.resolve(),_this56._reader=response.body.getReader()})).catch((function(reason){if("AbortError"!==(null==reason?void 0:reason.name))throw reason})),this.onProgress=null}var _read8;return _createClass(PDFFetchStreamRangeReader,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(_read8=_asyncToGenerator(regeneratorRuntime.mark((function _callee14(){var _yield$this$_reader$r2,value,done,buffer;return regeneratorRuntime.wrap((function(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:return _context14.next=2,this._readCapability.promise;case 2:return _context14.next=4,this._reader.read();case 4:if(_yield$this$_reader$r2=_context14.sent,value=_yield$this$_reader$r2.value,!(done=_yield$this$_reader$r2.done)){_context14.next=9;break}return _context14.abrupt("return",{value:value,done:done});case 9:return this._loaded+=value.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),buffer=new Uint8Array(value).buffer,_context14.abrupt("return",{value:buffer,done:!1});case 13:case"end":return _context14.stop()}}),_callee14,this)}))),function(){return _read8.apply(this,arguments)})},{key:"cancel",value:function(reason){this._reader&&this._reader.cancel(reason),this._abortController&&this._abortController.abort()}}]),PDFFetchStreamRangeReader}()}],__webpack_module_cache__={};function __w_pdfjs_require__(moduleId){if(__webpack_module_cache__[moduleId])return __webpack_module_cache__[moduleId].exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__w_pdfjs_require__),module.exports}return __w_pdfjs_require__(0)}()},"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=factory():"function"==typeof define&&define.amd?define("report_reflectionexporter/pdf",[],factory):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?exports["pdfjs-dist/build/pdf"]=factory():root["pdfjs-dist/build/pdf"]=root.pdfjsLib=factory();

//# sourceMappingURL=pdf.min.js.map