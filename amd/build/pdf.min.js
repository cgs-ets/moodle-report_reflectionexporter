function _get(e,t,a){if("undefined"!=typeof Reflect&&Reflect.get){_get=Reflect.get}else{_get=function(e,t,a){var n=_superPropBase(e,t);if(!n)return;var r=Object.getOwnPropertyDescriptor(n,t);if(r.get){return r.get.call(a)}return r.value}}return _get(e,t,a||e)}function _superPropBase(e,t){while(!Object.prototype.hasOwnProperty.call(e,t)){e=_getPrototypeOf(e);if(null===e)break}return e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var s=e[Symbol.iterator](),i;!(n=(i=s.next()).done);n=!0){a.push(i.value);if(t&&a.length===t)break}}catch(e){r=!0;o=e}finally{try{if(!n&&null!=s["return"])s["return"]()}finally{if(r)throw o}}return a}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,a=function(){};return{s:a,n:function n(){if(t>=e.length)return{done:!0};return{done:!1,value:e[t++]}},e:function e(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r=!0,s=!1,d;return{s:function s(){n=e[Symbol.iterator]()},n:function n(){var e=n.next();r=e.done;return e},e:function e(e){s=!0;d=e},f:function f(){try{if(!r&&null!=n.return)n.return()}finally{if(s)throw d}}}}function _unsupportedIterableToArray(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if("Object"===a&&e.constructor)a=e.constructor.name;if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(e,t)}function _arrayLikeToArray(e,t){if(null==t||t>e.length)t=e.length;for(var a=0,n=Array(t);a<t;a++){n[a]=e[a]}return n}function asyncGeneratorStep(e,t,a,n,r,o,s){try{var i=e[o](s),d=i.value}catch(e){a(e);return}if(i.done){t(d)}else{Promise.resolve(d).then(n,r)}}function _asyncToGenerator(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var i=e.apply(t,a);function o(e){asyncGeneratorStep(i,n,r,o,s,"next",e)}function s(e){asyncGeneratorStep(i,n,r,o,s,"throw",e)}o(void 0)})}}function _inherits(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});if(t)_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){_setPrototypeOf=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return _setPrototypeOf(e,t)}function _createSuper(e){return function(){var t=_getPrototypeOf(e),a;if(_isNativeReflectConstruct()){var n=_getPrototypeOf(this).constructor;a=Reflect.construct(t,arguments,n)}else{a=t.apply(this,arguments)}return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t)){return t}return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return!0}catch(t){return!1}}function _getPrototypeOf(e){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return _getPrototypeOf(e)}function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(e,t){for(var a=0,n;a<t.length;a++){n=t[a];n.enumerable=n.enumerable||!1;n.configurable=!0;if("value"in n)n.writable=!0;Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){if(t)_defineProperties(e.prototype,t);if(a)_defineProperties(e,a);return e}function _typeof(e){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(e){return typeof e}}else{_typeof=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return _typeof(e)}(function(e,t){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module)))module.exports=t();else if("function"==typeof define&&define.amd)define ("report_reflectionexporter/pdf",[],t);else if("object"===("undefined"==typeof exports?"undefined":_typeof(exports)))exports["pdfjs-dist/build/pdf"]=t();else e["pdfjs-dist/build/pdf"]=e.pdfjsLib=t()})(this,function(){return function(){"use strict";var __webpack_modules__=[function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});Object.defineProperty(t,"addLinkAttributes",{enumerable:!0,get:function get(){return n.addLinkAttributes}});Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function get(){return n.getFilenameFromUrl}});Object.defineProperty(t,"LinkTarget",{enumerable:!0,get:function get(){return n.LinkTarget}});Object.defineProperty(t,"loadScript",{enumerable:!0,get:function get(){return n.loadScript}});Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function get(){return n.PDFDateString}});Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function get(){return n.RenderingCancelledException}});Object.defineProperty(t,"build",{enumerable:!0,get:function get(){return r.build}});Object.defineProperty(t,"getDocument",{enumerable:!0,get:function get(){return r.getDocument}});Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function get(){return r.LoopbackPort}});Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function get(){return r.PDFDataRangeTransport}});Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function get(){return r.PDFWorker}});Object.defineProperty(t,"version",{enumerable:!0,get:function get(){return r.version}});Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function get(){return o.CMapCompressionType}});Object.defineProperty(t,"createObjectURL",{enumerable:!0,get:function get(){return o.createObjectURL}});Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function get(){return o.createPromiseCapability}});Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function get(){return o.createValidAbsoluteUrl}});Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function get(){return o.InvalidPDFException}});Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function get(){return o.MissingPDFException}});Object.defineProperty(t,"OPS",{enumerable:!0,get:function get(){return o.OPS}});Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function get(){return o.PasswordResponses}});Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function get(){return o.PermissionFlag}});Object.defineProperty(t,"removeNullCharacters",{enumerable:!0,get:function get(){return o.removeNullCharacters}});Object.defineProperty(t,"shadow",{enumerable:!0,get:function get(){return o.shadow}});Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function get(){return o.UnexpectedResponseException}});Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function get(){return o.UNSUPPORTED_FEATURES}});Object.defineProperty(t,"Util",{enumerable:!0,get:function get(){return o.Util}});Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function get(){return o.VerbosityLevel}});Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function get(){return s.AnnotationLayer}});Object.defineProperty(t,"apiCompatibilityParams",{enumerable:!0,get:function get(){return i.apiCompatibilityParams}});Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function get(){return d.GlobalWorkerOptions}});Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function get(){return l.renderTextLayer}});Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function get(){return c.SVGGraphics}});var n=a(1),r=a(5),o=a(2),s=a(19),i=a(9),d=a(12),l=a(21),c=a(22);{var u=a(4),p=u.isNodeJS;if(p){var f=a(23).PDFNodeStream;(0,r.setPDFNetworkStreamFactory)(function(e){return new f(e)})}else{var g=a(26).PDFNetworkStream,m;if((0,n.isFetchSupported)()){m=a(27).PDFFetchStream}(0,r.setPDFNetworkStreamFactory)(function(e){if(m&&(0,n.isValidFetchUrl)(e.url)){return new m(e)}return new g(e)})}}},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.addLinkAttributes=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},a=t.url,n=t.target,r=t.rel,i=t.enabled,d=void 0===i?!0:i;(0,o.assert)(a&&"string"==typeof a,"addLinkAttributes: A valid \"url\" parameter must provided.");var l=(0,o.removeNullCharacters)(a);if(d){e.href=e.title=l}else{e.href="";e.title="Disabled: ".concat(l);e.onclick=function(){return!1}}var c="";switch(n){case m.NONE:break;case m.SELF:c="_self";break;case m.BLANK:c="_blank";break;case m.PARENT:c="_parent";break;case m.TOP:c="_top";break;}e.target=c;e.rel="string"==typeof r?r:s};t.deprecated=function(e){console.log("Deprecated API usage: "+e)};t.getFilenameFromUrl=function(e){var t=e.indexOf("#"),a=e.indexOf("?"),n=Math.min(0<t?t:e.length,0<a?a:e.length);return e.substring(e.lastIndexOf("/",n)+1,n)};t.isFetchSupported=n;t.isValidFetchUrl=r;t.loadScript=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!1;return new Promise(function(a,n){var r=document.createElement("script");r.src=e;r.onload=function(e){if(t){r.remove()}a(e)};r.onerror=function(){n(new Error("Cannot load script at: ".concat(r.src)))};(document.head||document.documentElement).appendChild(r)})};t.StatTimer=t.RenderingCancelledException=t.PDFDateString=t.PageViewport=t.LinkTarget=t.DOMSVGFactory=t.DOMCMapReaderFactory=t.DOMCanvasFactory=t.DEFAULT_LINK_REL=t.BaseCMapReaderFactory=t.BaseCanvasFactory=void 0;var o=a(2),s="noopener noreferrer nofollow";t.DEFAULT_LINK_REL=s;var i=function(){function e(){_classCallCheck(this,e);if(this.constructor===e){(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}}_createClass(e,[{key:"create",value:function create(){(0,o.unreachable)("Abstract method `create` called.")}},{key:"reset",value:function reset(e,t,a){if(!e.canvas){throw new Error("Canvas is not specified")}if(0>=t||0>=a){throw new Error("Invalid canvas size")}e.canvas.width=t;e.canvas.height=a}},{key:"destroy",value:function destroy(e){if(!e.canvas){throw new Error("Canvas is not specified")}e.canvas.width=0;e.canvas.height=0;e.canvas=null;e.context=null}}]);return e}();t.BaseCanvasFactory=i;var d=function(e){_inherits(t,e);var a=_createSuper(t);function t(){var e,n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},r=n.ownerDocument,o=void 0===r?globalThis.document:r;_classCallCheck(this,t);e=a.call(this);e._document=o;return e}_createClass(t,[{key:"create",value:function create(e,t){if(0>=e||0>=t){throw new Error("Invalid canvas size")}var a=this._document.createElement("canvas"),n=a.getContext("2d");a.width=e;a.height=t;return{canvas:a,context:n}}}]);return t}(i);t.DOMCanvasFactory=d;var l=function(){function e(t){var a=t.baseUrl,n=void 0===a?null:a,r=t.isCompressed,s=void 0===r?!1:r;_classCallCheck(this,e);if(this.constructor===e){(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory.")}this.baseUrl=n;this.isCompressed=s}_createClass(e,[{key:"fetch",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a=this,n,r,s;return regeneratorRuntime.wrap(function(e){while(1){switch(e.prev=e.next){case 0:n=t.name;if(this.baseUrl){e.next=3;break}throw new Error("The CMap \"baseUrl\" parameter must be specified, ensure that the \"cMapUrl\" and \"cMapPacked\" API parameters are provided.");case 3:if(n){e.next=5;break}throw new Error("CMap name must be specified.");case 5:r=this.baseUrl+n+(this.isCompressed?".bcmap":"");s=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return e.abrupt("return",this._fetchData(r,s).catch(function(){throw new Error("Unable to load ".concat(a.isCompressed?"binary ":"","CMap at: ").concat(r))}));case 8:case"end":return e.stop();}}},e,this)}));return function fetch(){return e.apply(this,arguments)}}()},{key:"_fetchData",value:function _fetchData(){(0,o.unreachable)("Abstract method `_fetchData` called.")}}]);return e}();t.BaseCMapReaderFactory=l;var c=function(e){_inherits(t,e);var a=_createSuper(t);function t(){_classCallCheck(this,t);return a.apply(this,arguments)}_createClass(t,[{key:"_fetchData",value:function _fetchData(e,t){var a=this;if(n()&&r(e,document.baseURI)){return fetch(e).then(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n){var r;return regeneratorRuntime.wrap(function(e){while(1){switch(e.prev=e.next){case 0:if(n.ok){e.next=2;break}throw new Error(n.statusText);case 2:if(!a.isCompressed){e.next=10;break}e.t0=Uint8Array;e.next=6;return n.arrayBuffer();case 6:e.t1=e.sent;r=new e.t0(e.t1);e.next=15;break;case 10:e.t2=(0,o.stringToBytes);e.next=13;return n.text();case 13:e.t3=e.sent;r=(0,e.t2)(e.t3);case 15:return e.abrupt("return",{cMapData:r,compressionType:t});case 16:case"end":return e.stop();}}},e)}));return function(){return e.apply(this,arguments)}}())}return new Promise(function(n,r){var s=new XMLHttpRequest;s.open("GET",e,!0);if(a.isCompressed){s.responseType="arraybuffer"}s.onreadystatechange=function(){if(s.readyState!==XMLHttpRequest.DONE){return}if(200===s.status||0===s.status){var e;if(a.isCompressed&&s.response){e=new Uint8Array(s.response)}else if(!a.isCompressed&&s.responseText){e=(0,o.stringToBytes)(s.responseText)}if(e){n({cMapData:e,compressionType:t});return}}r(new Error(s.statusText))};s.send(null)})}}]);return t}(l);t.DOMCMapReaderFactory=c;var u=function(){function e(){_classCallCheck(this,e)}_createClass(e,[{key:"create",value:function create(e,t){(0,o.assert)(0<e&&0<t,"Invalid SVG dimensions");var a=document.createElementNS("http://www.w3.org/2000/svg","svg:svg");a.setAttribute("version","1.1");a.setAttribute("width",e+"px");a.setAttribute("height",t+"px");a.setAttribute("preserveAspectRatio","none");a.setAttribute("viewBox","0 0 "+e+" "+t);return a}},{key:"createElement",value:function createElement(e){(0,o.assert)("string"==typeof e,"Invalid SVG element type");return document.createElementNS("http://www.w3.org/2000/svg",e)}}]);return e}();t.DOMSVGFactory=u;var p=function(){function e(t){var a=t.viewBox,n=t.scale,r=t.rotation,o=t.offsetX,s=void 0===o?0:o,i=t.offsetY,d=void 0===i?0:i,l=t.dontFlip,c=void 0===l?!1:l;_classCallCheck(this,e);this.viewBox=a;this.scale=n;this.rotation=r;this.offsetX=s;this.offsetY=d;var u=(a[2]+a[0])/2,p=(a[3]+a[1])/2,g,m,f,h;r=r%360;r=0>r?r+360:r;switch(r){case 180:g=-1;m=0;f=0;h=1;break;case 90:g=0;m=1;f=1;h=0;break;case 270:g=0;m=-1;f=-1;h=0;break;case 0:g=1;m=0;f=0;h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.");}if(c){f=-f;h=-h}var y,A,v,_;if(0===g){y=Math.abs(p-a[1])*n+s;A=Math.abs(u-a[0])*n+d;v=Math.abs(a[3]-a[1])*n;_=Math.abs(a[2]-a[0])*n}else{y=Math.abs(u-a[0])*n+s;A=Math.abs(p-a[1])*n+d;v=Math.abs(a[2]-a[0])*n;_=Math.abs(a[3]-a[1])*n}this.transform=[g*n,m*n,f*n,h*n,y-g*n*u-f*n*p,A-m*n*u-h*n*p];this.width=v;this.height=_}_createClass(e,[{key:"clone",value:function clone(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},a=t.scale,n=void 0===a?this.scale:a,r=t.rotation,o=void 0===r?this.rotation:r,s=t.offsetX,i=void 0===s?this.offsetX:s,d=t.offsetY,l=void 0===d?this.offsetY:d,c=t.dontFlip,u=void 0===c?!1:c;return new e({viewBox:this.viewBox.slice(),scale:n,rotation:o,offsetX:i,offsetY:l,dontFlip:u})}},{key:"convertToViewportPoint",value:function convertToViewportPoint(e,t){return o.Util.applyTransform([e,t],this.transform)}},{key:"convertToViewportRectangle",value:function convertToViewportRectangle(e){var t=o.Util.applyTransform([e[0],e[1]],this.transform),a=o.Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],a[0],a[1]]}},{key:"convertToPdfPoint",value:function convertToPdfPoint(e,t){return o.Util.applyInverseTransform([e,t],this.transform)}}]);return e}();t.PageViewport=p;var g=function(e){_inherits(t,e);var a=_createSuper(t);function t(e,n){var r;_classCallCheck(this,t);r=a.call(this,e);r.type=n;return r}return t}(o.BaseException);t.RenderingCancelledException=g;var m={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};t.LinkTarget=m;var f=function(){function e(){_classCallCheck(this,e);this.started=Object.create(null);this.times=[]}_createClass(e,[{key:"time",value:function time(e){if(e in this.started){(0,o.warn)("Timer is already running for ".concat(e))}this.started[e]=Date.now()}},{key:"timeEnd",value:function timeEnd(e){if(!(e in this.started)){(0,o.warn)("Timer has not been started for ".concat(e))}this.times.push({name:e,start:this.started[e],end:Date.now()});delete this.started[e]}},{key:"toString",value:function toString(){var e=[],t=0,a=_createForOfIteratorHelper(this.times),n;try{for(a.s();!(n=a.n()).done;){var r=n.value,o=r.name;if(o.length>t){t=o.length}}}catch(e){a.e(e)}finally{a.f()}var s=_createForOfIteratorHelper(this.times),i;try{for(s.s();!(i=s.n()).done;){var d=i.value,l=d.end-d.start;e.push("".concat(d.name.padEnd(t)," ").concat(l,"ms\n"))}}catch(e){s.e(e)}finally{s.f()}return e.join("")}}]);return e}();t.StatTimer=f;function n(){return"undefined"!=typeof fetch&&"undefined"!=typeof Response&&"body"in Response.prototype&&"undefined"!=typeof ReadableStream}function r(e,t){try{var a=t?new URL(e,t):new URL(e),n=a.protocol;return"http:"===n||"https:"===n}catch(e){return!1}}var h,y=function(){function e(){_classCallCheck(this,e)}_createClass(e,null,[{key:"toDateObject",value:function toDateObject(e){if(!e||!(0,o.isString)(e)){return null}if(!h){h=/^D:(\d{4})(\d{2})?(\d{2})?(\d{2})?(\d{2})?(\d{2})?([Z|+|-])?(\d{2})?'?(\d{2})?'?/}var t=h.exec(e);if(!t){return null}var a=parseInt(t[1],10),n=parseInt(t[2],10);n=1<=n&&12>=n?n-1:0;var r=parseInt(t[3],10);r=1<=r&&31>=r?r:1;var s=parseInt(t[4],10);s=0<=s&&23>=s?s:0;var i=parseInt(t[5],10);i=0<=i&&59>=i?i:0;var d=parseInt(t[6],10);d=0<=d&&59>=d?d:0;var l=t[7]||"Z",c=parseInt(t[8],10);c=0<=c&&23>=c?c:0;var u=parseInt(t[9],10)||0;u=0<=u&&59>=u?u:0;if("-"===l){s+=c;i+=u}else if("+"===l){s-=c;i-=u}return new Date(Date.UTC(a,n,r,s,i,d))}}]);return e}();t.PDFDateString=y},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.arrayByteLength=g;t.arraysToBytes=function(e){var t=e.length;if(1===t&&e[0]instanceof Uint8Array){return e[0]}for(var a=0,n=0;n<t;n++){a+=g(e[n])}for(var r=0,o=new Uint8Array(a),s=0,d;s<t;s++){d=e[s];if(!(d instanceof Uint8Array)){if("string"==typeof d){d=p(d)}else{d=new Uint8Array(d)}}var l=d.byteLength;o.set(d,r);r+=l}return o};t.assert=d;t.bytesToString=u;t.createPromiseCapability=function(){var e=Object.create(null),t=!1;Object.defineProperty(e,"settled",{get:function get(){return t}});e.promise=new Promise(function(a,n){e.resolve=function(e){t=!0;a(e)};e.reject=function(e){t=!0;n(e)}});return e};t.createValidAbsoluteUrl=function(e,t){if(!e){return null}try{var a=t?new URL(e,t):new URL(e);if(l(a)){return a}}catch(e){}return null};t.encodeToXmlString=function(e){for(var t=[],a=0,n=0,r=e.length,o;n<r;n++){o=e.codePointAt(n);if(32<=o&&126>=o){var s=M[o];if(s){if(a<n){t.push(e.substring(a,n))}t.push(s);a=n+1}}else{if(a<n){t.push(e.substring(a,n))}t.push("&#x".concat(o.toString(16).toUpperCase(),";"));if(55295<o&&(57344>o||65533<o)){n++}a=n+1}}if(0===t.length){return e}if(a<e.length){t.push(e.substring(a,e.length))}return t.join("")};t.escapeString=function(e){return e.replace(/([()\\\n\r])/g,function(e){if("\n"===e){return"\\n"}else if("\r"===e){return"\\r"}return"\\".concat(e)})};t.getModificationDate=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:new Date,t=[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")];return t.join("")};t.getVerbosityLevel=n;t.info=r;t.isArrayBuffer=h;t.isArrayEqual=function(e,t){if(e.length!==t.length){return!1}return e.every(function(e,a){return e===t[a]})};t.isAscii=function(e){return /^[\x00-\x7F]*$/.test(e)};t.isBool=function(e){return"boolean"==typeof e};t.isNum=function(e){return"number"==typeof e};t.isSameOrigin=function(e,t){var a;try{a=new URL(e);if(!a.origin||"null"===a.origin){return!1}}catch(t){return!1}var n=new URL(t,a);return a.origin===n.origin};t.isString=function(e){return"string"==typeof e};t.objectFromEntries=function(e){return Object.assign(Object.create(null),Object.fromEntries(e))};t.objectSize=function(e){return Object.keys(e).length};t.removeNullCharacters=function(e){if("string"!=typeof e){o("The argument for removeNullCharacters must be a string.");return e}return e.replace(R,"")};t.setVerbosityLevel=function(e){if(Number.isInteger(e)){A=e}};t.shadow=c;t.string32=function(e){return String.fromCharCode(255&e>>24,255&e>>16,255&e>>8,255&e)};t.stringToBytes=p;t.stringToPDFString=function(e){var t=e.length,a=[];if("\xFE"===e[0]&&"\xFF"===e[1]){for(var n=2;n<t;n+=2){a.push(String.fromCharCode(e.charCodeAt(n)<<8|e.charCodeAt(n+1)))}}else if("\xFF"===e[0]&&"\xFE"===e[1]){for(var r=2;r<t;r+=2){a.push(String.fromCharCode(e.charCodeAt(r+1)<<8|e.charCodeAt(r)))}}else{for(var o=0,s;o<t;++o){s=I[e.charCodeAt(o)];a.push(s?String.fromCharCode(s):e.charAt(o))}}return a.join("")};t.stringToUTF16BEString=function(e){for(var t=["\xFE\xFF"],a=0,n=e.length,r;a<n;a++){r=e.charCodeAt(a);t.push(String.fromCharCode(255&r>>8));t.push(String.fromCharCode(255&r))}return t.join("")};t.stringToUTF8String=function(e){return decodeURIComponent(escape(e))};t.unreachable=s;t.utf8StringToString=function(e){return unescape(encodeURIComponent(e))};t.warn=o;t.VerbosityLevel=t.Util=t.UNSUPPORTED_FEATURES=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.StreamType=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.IsLittleEndianCached=t.IsEvalSupportedCached=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FontType=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.createObjectURL=t.CMapCompressionType=t.BaseException=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0;a(3);t.IDENTITY_MATRIX=[1,0,0,1,0,0];t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};t.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReplyType={GROUP:"Group",REPLY:"R"};t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.PageActionEventType={O:"PageOpen",C:"PageClose"};t.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};t.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};var y={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=y;t.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent"};t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var A=y.WARNINGS;function n(){return A}function r(e){if(A>=y.INFOS){console.log("Info: ".concat(e))}}function o(e){if(A>=y.WARNINGS){console.log("Warning: ".concat(e))}}function s(e){throw new Error(e)}function d(e,t){if(!e){s(t)}}function l(e){if(!e){return!1}switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1;}}function c(e,t,a){Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!1});return a}var v=function(){function e(t){if(this.constructor===e){s("Cannot initialize BaseException.")}this.message=t;this.name=this.constructor.name}e.prototype=new Error;e.constructor=e;return e}();t.BaseException=v;var _=function(e){_inherits(t,e);var a=_createSuper(t);function t(e,n){var r;_classCallCheck(this,t);r=a.call(this,e);r.code=n;return r}return t}(v);t.PasswordException=_;var b=function(e){_inherits(t,e);var a=_createSuper(t);function t(e,n){var r;_classCallCheck(this,t);r=a.call(this,e);r.details=n;return r}return t}(v);t.UnknownErrorException=b;var S=function(e){_inherits(t,e);var a=_createSuper(t);function t(){_classCallCheck(this,t);return a.apply(this,arguments)}return t}(v);t.InvalidPDFException=S;var k=function(e){_inherits(t,e);var a=_createSuper(t);function t(){_classCallCheck(this,t);return a.apply(this,arguments)}return t}(v);t.MissingPDFException=k;var C=function(e){_inherits(t,e);var a=_createSuper(t);function t(e,n){var r;_classCallCheck(this,t);r=a.call(this,e);r.status=n;return r}return t}(v);t.UnexpectedResponseException=C;var x=function(e){_inherits(t,e);var a=_createSuper(t);function t(){_classCallCheck(this,t);return a.apply(this,arguments)}return t}(v);t.FormatError=x;var P=function(e){_inherits(t,e);var a=_createSuper(t);function t(){_classCallCheck(this,t);return a.apply(this,arguments)}return t}(v);t.AbortException=P;var R=/\x00/g;function u(e){d(null!==e&&"object"===_typeof(e)&&e.length!==void 0,"Invalid argument for bytesToString");var t=e.length,a=8192;if(t<a){return String.fromCharCode.apply(null,e)}for(var n=[],r=0;r<t;r+=a){var o=Math.min(r+a,t),s=e.subarray(r,o);n.push(String.fromCharCode.apply(null,s))}return n.join("")}function p(e){d("string"==typeof e,"Invalid argument for stringToBytes");for(var t=e.length,a=new Uint8Array(t),n=0;n<t;++n){a[n]=255&e.charCodeAt(n)}return a}function g(e){if(e.length!==void 0){return e.length}d(e.byteLength!==void 0,"arrayByteLength - invalid argument.");return e.byteLength}function m(){var e=new Uint8Array(4);e[0]=1;var t=new Uint32Array(e.buffer,0,1);return 1===t[0]}var T={get value(){return c(this,"value",m())}};t.IsLittleEndianCached=T;function f(){try{new Function("");return!0}catch(t){return!1}}var E={get value(){return c(this,"value",f())}};t.IsEvalSupportedCached=E;var F=_toConsumableArray(Array(256).keys()).map(function(e){return e.toString(16).padStart(2,"0")}),L=function(){function e(){_classCallCheck(this,e)}_createClass(e,null,[{key:"makeHexColor",value:function makeHexColor(e,t,a){return"#".concat(F[e]).concat(F[t]).concat(F[a])}},{key:"transform",value:function transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}},{key:"applyTransform",value:function applyTransform(e,t){var a=e[0]*t[0]+e[1]*t[2]+t[4],n=e[0]*t[1]+e[1]*t[3]+t[5];return[a,n]}},{key:"applyInverseTransform",value:function applyInverseTransform(e,t){var a=t[0]*t[3]-t[1]*t[2],n=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/a,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/a;return[n,r]}},{key:"getAxialAlignedBoundingBox",value:function getAxialAlignedBoundingBox(t,a){var n=e.applyTransform(t,a),r=e.applyTransform(t.slice(2,4),a),o=e.applyTransform([t[0],t[3]],a),s=e.applyTransform([t[2],t[1]],a);return[Math.min(n[0],r[0],o[0],s[0]),Math.min(n[1],r[1],o[1],s[1]),Math.max(n[0],r[0],o[0],s[0]),Math.max(n[1],r[1],o[1],s[1])]}},{key:"inverseTransform",value:function inverseTransform(e){var t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}},{key:"apply3dTransform",value:function apply3dTransform(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]}},{key:"singularValueDecompose2dScale",value:function singularValueDecompose2dScale(e){var t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],a=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],s=(n+o)/2,i=Math.sqrt((n+o)*(n+o)-4*(n*o-r*a))/2;return[Math.sqrt(s+i||1),Math.sqrt(s-i||1)]}},{key:"normalizeRect",value:function normalizeRect(e){var t=e.slice(0);if(e[0]>e[2]){t[0]=e[2];t[2]=e[0]}if(e[1]>e[3]){t[1]=e[3];t[3]=e[1]}return t}},{key:"intersect",value:function intersect(t,a){function n(e,t){return e-t}var r=[t[0],t[2],a[0],a[2]].sort(n),o=[t[1],t[3],a[1],a[3]].sort(n),s=[];t=e.normalizeRect(t);a=e.normalizeRect(a);if(r[0]===t[0]&&r[1]===a[0]||r[0]===a[0]&&r[1]===t[0]){s[0]=r[1];s[2]=r[2]}else{return null}if(o[0]===t[1]&&o[1]===a[1]||o[0]===a[1]&&o[1]===t[1]){s[1]=o[1];s[3]=o[2]}else{return null}return s}}]);return e}();t.Util=L;var I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function h(e){return"object"===_typeof(e)&&null!==e&&e.byteLength!==void 0}var N=function(){return function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!1;if(!a&&URL.createObjectURL){var p=new Blob([e],{type:t});return URL.createObjectURL(p)}for(var n="data:".concat(t,";base64,"),r=0,o=e.length;r<o;r+=3){var s=255&e[r],d=255&e[r+1],l=255&e[r+2],c=r+1<o?(15&d)<<2|l>>6:64,u=r+2<o?63&l:64;n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[s>>2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[(3&s)<<4|d>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[c]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[u]}return n}}();t.createObjectURL=N;var M={60:"&lt;",62:"&gt;",38:"&amp;",34:"&quot;",39:"&apos;"}},function(e,t,a){a(4)},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.isNodeJS=void 0;var a="object"===("undefined"==typeof process?"undefined":_typeof(process))&&"[object process]"==process+""&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type);t.isNodeJS=a},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0});exports.getDocument=getDocument;exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory;exports.version=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultCMapReaderFactory=exports.DefaultCanvasFactory=exports.build=void 0;var _util=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(6),_node_utils=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_api_compatibility=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(12),_is_node=__w_pdfjs_require__(4),_message_handler=__w_pdfjs_require__(13),_metadata=__w_pdfjs_require__(14),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_webgl=__w_pdfjs_require__(18),DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;var DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;var createPDFNetworkStream;function setPDFNetworkStreamFactory(e){createPDFNetworkStream=e}function getDocument(e){var t=new PDFDocumentLoadingTask,a;if("string"==typeof e){a={url:e}}else if((0,_util.isArrayBuffer)(e)){a={data:e}}else if(e instanceof PDFDataRangeTransport){a={range:e}}else{if("object"!==_typeof(e)){throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object")}if(!e.url&&!e.data&&!e.range){throw new Error("Invalid parameter object: need either .data, .range or .url")}a=e}var n=Object.create(null),r=null,o=null;for(var i in a){if("url"==i&&"undefined"!=typeof window){n[i]=new URL(a[i],window.location).href;continue}else if("range"===i){r=a[i];continue}else if("worker"===i){o=a[i];continue}else if("data"===i&&!(a[i]instanceof Uint8Array)){var d=a[i];if("string"==typeof d){n[i]=(0,_util.stringToBytes)(d)}else if("object"===_typeof(d)&&null!==d&&!isNaN(d.length)){n[i]=new Uint8Array(d)}else if((0,_util.isArrayBuffer)(d)){n[i]=new Uint8Array(d)}else{throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.")}continue}n[i]=a[i]}n.rangeChunkSize=n.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE;n.CMapReaderFactory=n.CMapReaderFactory||DefaultCMapReaderFactory;n.ignoreErrors=!0!==n.stopAtErrors;n.fontExtraProperties=!0===n.fontExtraProperties;n.pdfBug=!0===n.pdfBug;if(!Number.isInteger(n.maxImageSize)){n.maxImageSize=-1}if("boolean"!=typeof n.isEvalSupported){n.isEvalSupported=!0}if("boolean"!=typeof n.disableFontFace){n.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1}if("undefined"==typeof n.ownerDocument){n.ownerDocument=globalThis.document}if("boolean"!=typeof n.disableRange){n.disableRange=!1}if("boolean"!=typeof n.disableStream){n.disableStream=!1}if("boolean"!=typeof n.disableAutoFetch){n.disableAutoFetch=!1}(0,_util.setVerbosityLevel)(n.verbosity);if(!o){var l={verbosity:n.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};o=l.port?PDFWorker.fromPort(l):new PDFWorker(l);t._worker=o}var s=t.docId;o.promise.then(function(){if(t.destroyed){throw new Error("Loading aborted")}var e=_fetchDocument(o,n,r,s),a=new Promise(function(e){var t;if(r){t=new _transport_stream.PDFDataTransportStream({length:n.length,initialData:n.initialData,progressiveDone:n.progressiveDone,disableRange:n.disableRange,disableStream:n.disableStream},r)}else if(!n.data){t=createPDFNetworkStream({url:n.url,length:n.length,httpHeaders:n.httpHeaders,withCredentials:n.withCredentials,rangeChunkSize:n.rangeChunkSize,disableRange:n.disableRange,disableStream:n.disableStream})}e(t)});return Promise.all([e,a]).then(function(e){var a=_slicedToArray(e,2),r=a[0],i=a[1];if(t.destroyed){throw new Error("Loading aborted")}var d=new _message_handler.MessageHandler(s,r,o.port);d.postMessageTransfers=o.postMessageTransfers;var l=new WorkerTransport(d,t,i,n);t._transport=l;d.send("Ready",null)})}).catch(t._capability.reject);return t}function _fetchDocument(e,t,a,n){if(e.destroyed){return Promise.reject(new Error("Worker was destroyed"))}if(a){t.length=a.length;t.initialData=a.initialData;t.progressiveDone=a.progressiveDone}return e.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.7.570",source:{data:t.data,url:t.url,password:t.password,disableAutoFetch:t.disableAutoFetch,rangeChunkSize:t.rangeChunkSize,length:t.length},maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,postMessageTransfers:e.postMessageTransfers,docBaseUrl:t.docBaseUrl,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported,fontExtraProperties:t.fontExtraProperties}).then(function(t){if(e.destroyed){throw new Error("Worker was destroyed")}return t})}var PDFDocumentLoadingTask=function(){var e=0,t=function(){function t(){_classCallCheck(this,t);this._capability=(0,_util.createPromiseCapability)();this._transport=null;this._worker=null;this.docId="d"+e++;this.destroyed=!1;this.onPassword=null;this.onProgress=null;this.onUnsupportedFeature=null}_createClass(t,[{key:"destroy",value:function destroy(){var e=this;this.destroyed=!0;var t=!this._transport?Promise.resolve():this._transport.destroy();return t.then(function(){e._transport=null;if(e._worker){e._worker.destroy();e._worker=null}})}},{key:"promise",get:function get(){return this._capability.promise}}]);return t}();return t}(),PDFDataRangeTransport=function(){function e(t,a){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!1;_classCallCheck(this,e);this.length=t;this.initialData=a;this.progressiveDone=n;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._progressiveDoneListeners=[];this._readyCapability=(0,_util.createPromiseCapability)()}_createClass(e,[{key:"addRangeListener",value:function addRangeListener(e){this._rangeListeners.push(e)}},{key:"addProgressListener",value:function addProgressListener(e){this._progressListeners.push(e)}},{key:"addProgressiveReadListener",value:function addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}},{key:"addProgressiveDoneListener",value:function addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}},{key:"onDataRange",value:function onDataRange(e,t){var a=_createForOfIteratorHelper(this._rangeListeners),n;try{for(a.s();!(n=a.n()).done;){var r=n.value;r(e,t)}}catch(e){a.e(e)}finally{a.f()}}},{key:"onDataProgress",value:function onDataProgress(e,t){var a=this;this._readyCapability.promise.then(function(){var n=_createForOfIteratorHelper(a._progressListeners),r;try{for(n.s();!(r=n.n()).done;){var o=r.value;o(e,t)}}catch(e){n.e(e)}finally{n.f()}})}},{key:"onDataProgressiveRead",value:function onDataProgressiveRead(e){var t=this;this._readyCapability.promise.then(function(){var a=_createForOfIteratorHelper(t._progressiveReadListeners),n;try{for(a.s();!(n=a.n()).done;){var r=n.value;r(e)}}catch(e){a.e(e)}finally{a.f()}})}},{key:"onDataProgressiveDone",value:function onDataProgressiveDone(){var e=this;this._readyCapability.promise.then(function(){var t=_createForOfIteratorHelper(e._progressiveDoneListeners),a;try{for(t.s();!(a=t.n()).done;){var n=a.value;n()}}catch(e){t.e(e)}finally{t.f()}})}},{key:"transportReady",value:function transportReady(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function requestDataRange(){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function abort(){}}]);return e}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){function e(t,a){_classCallCheck(this,e);this._pdfInfo=t;this._transport=a}_createClass(e,[{key:"getPage",value:function getPage(e){return this._transport.getPage(e)}},{key:"getPageIndex",value:function getPageIndex(e){return this._transport.getPageIndex(e)}},{key:"getDestinations",value:function getDestinations(){return this._transport.getDestinations()}},{key:"getDestination",value:function getDestination(e){return this._transport.getDestination(e)}},{key:"getPageLabels",value:function getPageLabels(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function getPageLayout(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function getPageMode(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function getOpenAction(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function getAttachments(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function getJavaScript(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function getJSActions(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function getOutline(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function getPermissions(){return this._transport.getPermissions()}},{key:"getMetadata",value:function getMetadata(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function getMarkInfo(){return this._transport.getMarkInfo()}},{key:"getData",value:function getData(){return this._transport.getData()}},{key:"getDownloadInfo",value:function getDownloadInfo(){return this._transport.downloadInfoCapability.promise}},{key:"getStats",value:function getStats(){return this._transport.getStats()}},{key:"cleanup",value:function cleanup(){return this._transport.startCleanup()}},{key:"destroy",value:function destroy(){return this.loadingTask.destroy()}},{key:"saveDocument",value:function saveDocument(e){return this._transport.saveDocument(e)}},{key:"getFieldObjects",value:function getFieldObjects(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function hasJSActions(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},{key:"annotationStorage",get:function get(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}},{key:"numPages",get:function get(){return this._pdfInfo.numPages}},{key:"fingerprint",get:function get(){return this._pdfInfo.fingerprint}},{key:"loadingParams",get:function get(){return this._transport.loadingParams}},{key:"loadingTask",get:function get(){return this._transport.loadingTask}}]);return e}();exports.PDFDocumentProxy=PDFDocumentProxy;var PDFPageProxy=function(){function e(t,a,n,r){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:!1;_classCallCheck(this,e);this._pageIndex=t;this._pageInfo=a;this._ownerDocument=r;this._transport=n;this._stats=o?new _display_utils.StatTimer:null;this._pdfBug=o;this.commonObjs=n.commonObjs;this.objs=new PDFObjects;this.cleanupAfterRender=!1;this.pendingCleanup=!1;this._intentStates=new Map;this.destroyed=!1}_createClass(e,[{key:"getViewport",value:function getViewport(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},t=e.scale,a=e.rotation,n=void 0===a?this.rotate:a,r=e.offsetX,o=void 0===r?0:r,s=e.offsetY,i=void 0===s?0:s,d=e.dontFlip,l=void 0===d?!1:d;return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:n,offsetX:o,offsetY:i,dontFlip:l})}},{key:"getAnnotations",value:function getAnnotations(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},t=e.intent,a=void 0===t?null:t;if(!this.annotationsPromise||this.annotationsIntent!==a){this.annotationsPromise=this._transport.getAnnotations(this._pageIndex,a);this.annotationsIntent=a}return this.annotationsPromise}},{key:"getJSActions",value:function getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}},{key:"render",value:function render(e){var t=this,a=e.canvasContext,n=e.viewport,r=e.intent,o=void 0===r?"display":r,s=e.enableWebGL,i=void 0===s?!1:s,d=e.renderInteractiveForms,l=void 0===d?!1:d,c=e.transform,u=void 0===c?null:c,p=e.imageLayer,g=void 0===p?null:p,m=e.canvasFactory,f=void 0===m?null:m,h=e.background,y=void 0===h?null:h,A=e.annotationStorage,v=void 0===A?null:A,_=e.optionalContentConfigPromise,b=void 0===_?null:_;if(this._stats){this._stats.time("Overall")}var S="print"===o?"print":"display";this.pendingCleanup=!1;if(!b){b=this._transport.getOptionalContentConfig()}var k=this._intentStates.get(S);if(!k){k=Object.create(null);this._intentStates.set(S,k)}if(k.streamReaderCancelTimeout){clearTimeout(k.streamReaderCancelTimeout);k.streamReaderCancelTimeout=null}var C=f||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),x=new _webgl.WebGLContext({enable:i});if(!k.displayReadyCapability){k.displayReadyCapability=(0,_util.createPromiseCapability)();k.operatorList={fnArray:[],argsArray:[],lastChunk:!1};if(this._stats){this._stats.time("Page Request")}this._pumpOperatorList({pageIndex:this._pageIndex,intent:S,renderInteractiveForms:!0===l,annotationStorage:(null===v||void 0===v?void 0:v.getAll())||null})}var P=function(e){var a=k.renderTasks.indexOf(R);if(0<=a){k.renderTasks.splice(a,1)}if(t.cleanupAfterRender||"print"===S){t.pendingCleanup=!0}t._tryCleanup();if(e){R.capability.reject(e);t._abortOperatorList({intentState:k,reason:e})}else{R.capability.resolve()}if(t._stats){t._stats.timeEnd("Rendering");t._stats.timeEnd("Overall")}},R=new InternalRenderTask({callback:P,params:{canvasContext:a,viewport:n,transform:u,imageLayer:g,background:y},objs:this.objs,commonObjs:this.commonObjs,operatorList:k.operatorList,pageIndex:this._pageIndex,canvasFactory:C,webGLContext:x,useRequestAnimationFrame:"print"!=S,pdfBug:this._pdfBug});if(!k.renderTasks){k.renderTasks=[]}k.renderTasks.push(R);var T=R.task;Promise.all([k.displayReadyCapability.promise,b]).then(function(e){var a=_slicedToArray(e,2),n=a[0],r=a[1];if(t.pendingCleanup){P();return}if(t._stats){t._stats.time("Rendering")}R.initializeGraphics({transparency:n,optionalContentConfig:r});R.operatorListChanged()}).catch(P);return T}},{key:"getOperatorList",value:function getOperatorList(){function e(){if(t.operatorList.lastChunk){t.opListReadCapability.resolve(t.operatorList);var e=t.renderTasks.indexOf(a);if(0<=e){t.renderTasks.splice(e,1)}}}var t=this._intentStates.get("oplist");if(!t){t=Object.create(null);this._intentStates.set("oplist",t)}var a;if(!t.opListReadCapability){a=Object.create(null);a.operatorListChanged=e;t.opListReadCapability=(0,_util.createPromiseCapability)();t.renderTasks=[];t.renderTasks.push(a);t.operatorList={fnArray:[],argsArray:[],lastChunk:!1};if(this._stats){this._stats.time("Page Request")}this._pumpOperatorList({pageIndex:this._pageIndex,intent:"oplist"})}return t.opListReadCapability.promise}},{key:"streamTextContent",value:function streamTextContent(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},t=e.normalizeWhitespace,a=void 0===t?!1:t,n=e.disableCombineTextItems,r=void 0===n?!1:n;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:!0===a,combineTextItems:!0!==r},{highWaterMark:100,size:function size(e){return e.items.length}})}},{key:"getTextContent",value:function getTextContent(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},t=this.streamTextContent(e);return new Promise(function(e,a){function n(){r.read().then(function(t){var a,r=t.value,s=t.done;if(s){e(o);return}Object.assign(o.styles,r.styles);(a=o.items).push.apply(a,_toConsumableArray(r.items));n()},a)}var r=t.getReader(),o={items:[],styles:Object.create(null)};n()})}},{key:"_destroy",value:function _destroy(){this.destroyed=!0;this._transport.pageCache[this._pageIndex]=null;var e=[],t=_createForOfIteratorHelper(this._intentStates),a;try{for(t.s();!(a=t.n()).done;){var n=_slicedToArray(a.value,2),r=n[0],o=n[1];this._abortOperatorList({intentState:o,reason:new Error("Page was destroyed."),force:!0});if("oplist"===r){continue}var s=_createForOfIteratorHelper(o.renderTasks),i;try{for(s.s();!(i=s.n()).done;){var d=i.value;e.push(d.completed);d.cancel()}}catch(e){s.e(e)}finally{s.f()}}}catch(e){t.e(e)}finally{t.f()}this.objs.clear();this.annotationsPromise=null;this._jsActionsPromise=null;this.pendingCleanup=!1;return Promise.all(e)}},{key:"cleanup",value:function cleanup(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!1;this.pendingCleanup=!0;return this._tryCleanup(e)}},{key:"_tryCleanup",value:function _tryCleanup(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!1;if(!this.pendingCleanup){return!1}var t=_createForOfIteratorHelper(this._intentStates.values()),a;try{for(t.s();!(a=t.n()).done;){var n=a.value,r=n.renderTasks,o=n.operatorList;if(0!==r.length||!o.lastChunk){return!1}}}catch(e){t.e(e)}finally{t.f()}this._intentStates.clear();this.objs.clear();this.annotationsPromise=null;this._jsActionsPromise=null;if(e&&this._stats){this._stats=new _display_utils.StatTimer}this.pendingCleanup=!1;return!0}},{key:"_startRenderPage",value:function _startRenderPage(e,t){var a=this._intentStates.get(t);if(!a){return}if(this._stats){this._stats.timeEnd("Page Request")}if(a.displayReadyCapability){a.displayReadyCapability.resolve(e)}}},{key:"_renderPageChunk",value:function _renderPageChunk(e,t){for(var a=0,n=e.length;a<n;a++){t.operatorList.fnArray.push(e.fnArray[a]);t.operatorList.argsArray.push(e.argsArray[a])}t.operatorList.lastChunk=e.lastChunk;for(var r=0;r<t.renderTasks.length;r++){t.renderTasks[r].operatorListChanged()}if(e.lastChunk){this._tryCleanup()}}},{key:"_pumpOperatorList",value:function _pumpOperatorList(e){var t=this;(0,_util.assert)(e.intent,"PDFPageProxy._pumpOperatorList: Expected \"intent\" argument.");var a=this._transport.messageHandler.sendWithStream("GetOperatorList",e),n=a.getReader(),r=this._intentStates.get(e.intent);r.streamReader=n;var o=function(){n.read().then(function(e){var a=e.value,n=e.done;if(n){r.streamReader=null;return}if(t._transport.destroyed){return}t._renderPageChunk(a,r);o()},function(e){r.streamReader=null;if(t._transport.destroyed){return}if(r.operatorList){r.operatorList.lastChunk=!0;for(var a=0;a<r.renderTasks.length;a++){r.renderTasks[a].operatorListChanged()}t._tryCleanup()}if(r.displayReadyCapability){r.displayReadyCapability.reject(e)}else if(r.opListReadCapability){r.opListReadCapability.reject(e)}else{throw e}})};o()}},{key:"_abortOperatorList",value:function _abortOperatorList(e){var t=this,a=e.intentState,n=e.reason,r=e.force,o=void 0===r?!1:r;(0,_util.assert)(n instanceof Error||"object"===_typeof(n)&&null!==n,"PDFPageProxy._abortOperatorList: Expected \"reason\" argument.");if(!a.streamReader){return}if(!o){if(0!==a.renderTasks.length){return}if(n instanceof _display_utils.RenderingCancelledException){a.streamReaderCancelTimeout=setTimeout(function(){t._abortOperatorList({intentState:a,reason:n,force:!0});a.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}a.streamReader.cancel(new _util.AbortException(null===n||void 0===n?void 0:n.message));a.streamReader=null;if(this._transport.destroyed){return}var s=_createForOfIteratorHelper(this._intentStates),i;try{for(s.s();!(i=s.n()).done;){var d=_slicedToArray(i.value,2),l=d[0],c=d[1];if(c===a){this._intentStates.delete(l);break}}}catch(e){s.e(e)}finally{s.f()}this.cleanup()}},{key:"pageNumber",get:function get(){return this._pageIndex+1}},{key:"rotate",get:function get(){return this._pageInfo.rotate}},{key:"ref",get:function get(){return this._pageInfo.ref}},{key:"userUnit",get:function get(){return this._pageInfo.userUnit}},{key:"view",get:function get(){return this._pageInfo.view}},{key:"stats",get:function get(){return this._stats}}]);return e}();exports.PDFPageProxy=PDFPageProxy;var LoopbackPort=function(){function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0;_classCallCheck(this,e);this._listeners=[];this._defer=t;this._deferred=Promise.resolve(void 0)}_createClass(e,[{key:"postMessage",value:function postMessage(t,a){var r=this;function n(e){if("object"!==_typeof(e)||null===e){return e}if(o.has(e)){return o.get(e)}var t,r;if((t=e.buffer)&&(0,_util.isArrayBuffer)(t)){if(null===a||void 0===a?void 0:a.includes(t)){r=new e.constructor(t,e.byteOffset,e.byteLength)}else{r=new e.constructor(e)}o.set(e,r);return r}r=Array.isArray(e)?[]:{};o.set(e,r);for(var s in e){var i=void 0,d=e;while(!(i=Object.getOwnPropertyDescriptor(d,s))){d=Object.getPrototypeOf(d)}if("undefined"==typeof i.value){continue}if("function"==typeof i.value){if(e.hasOwnProperty&&e.hasOwnProperty(s)){throw new Error("LoopbackPort.postMessage - cannot clone: ".concat(e[s]))}continue}r[s]=n(i.value)}return r}if(!this._defer){this._listeners.forEach(function(e){e.call(r,{data:t})});return}var o=new WeakMap,s={data:n(t)};this._deferred.then(function(){r._listeners.forEach(function(e){e.call(r,s)})})}},{key:"addEventListener",value:function addEventListener(e,t){this._listeners.push(t)}},{key:"removeEventListener",value:function removeEventListener(e,t){var a=this._listeners.indexOf(t);this._listeners.splice(a,1)}},{key:"terminate",value:function terminate(){this._listeners.length=0}}]);return e}();exports.LoopbackPort=LoopbackPort;var PDFWorker=function(){var pdfWorkerPorts=new WeakMap,isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS&&"function"==typeof require){isWorkerDisabled=!0;fallbackWorkerSrc="./pdf.worker.js"}else if("object"===("undefined"==typeof document?"undefined":_typeof(document))&&"currentScript"in document){var _document$currentScri,pdfjsFilePath=null===(_document$currentScri=document.currentScript)||void 0===_document$currentScri?void 0:_document$currentScri.src;if(pdfjsFilePath){fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2")}}function _getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc){return _worker_options.GlobalWorkerOptions.workerSrc}if("undefined"!=typeof fallbackWorkerSrc){if(!_is_node.isNodeJS){(0,_display_utils.deprecated)("No \"GlobalWorkerOptions.workerSrc\" specified.")}return fallbackWorkerSrc}throw new Error("No \"GlobalWorkerOptions.workerSrc\" specified.")}function getMainThreadWorkerMessageHandler(){var e;try{var t;e=null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler}catch(e){}return e||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability){return fakeWorkerCapability.promise}fakeWorkerCapability=(0,_util.createPromiseCapability)();var loader=function(){var _ref20=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var mainWorkerMessageHandler,worker;return regeneratorRuntime.wrap(function(_context3){while(1){switch(_context3.prev=_context3.next){case 0:mainWorkerMessageHandler=getMainThreadWorkerMessageHandler();if(!mainWorkerMessageHandler){_context3.next=3;break}return _context3.abrupt("return",mainWorkerMessageHandler);case 3:if(!(_is_node.isNodeJS&&"function"==typeof require)){_context3.next=6;break}worker=eval("require")(_getWorkerSrc());return _context3.abrupt("return",worker.WorkerMessageHandler);case 6:_context3.next=8;return(0,_display_utils.loadScript)(_getWorkerSrc());case 8:return _context3.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context3.stop();}}},_callee3)}));return function(){return _ref20.apply(this,arguments)}}();loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject);return fakeWorkerCapability.promise}function createCDNWrapper(e){return URL.createObjectURL(new Blob(["importScripts('"+e+"');"]))}var PDFWorker=function(){function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},a=t.name,n=void 0===a?null:a,r=t.port,o=void 0===r?null:r,s=t.verbosity,i=void 0===s?(0,_util.getVerbosityLevel)():s;_classCallCheck(this,e);if(o&&pdfWorkerPorts.has(o)){throw new Error("Cannot use more than one PDFWorker per port")}this.name=n;this.destroyed=!1;this.postMessageTransfers=!0;this.verbosity=i;this._readyCapability=(0,_util.createPromiseCapability)();this._port=null;this._webWorker=null;this._messageHandler=null;if(o){pdfWorkerPorts.set(o,this);this._initializeFromPort(o);return}this._initialize()}_createClass(e,[{key:"_initializeFromPort",value:function _initializeFromPort(e){this._port=e;this._messageHandler=new _message_handler.MessageHandler("main","worker",e);this._messageHandler.on("ready",function(){});this._readyCapability.resolve()}},{key:"_initialize",value:function _initialize(){var t=this;if("undefined"!=typeof Worker&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){var s=_getWorkerSrc();try{if(!(0,_util.isSameOrigin)(window.location.href,s)){s=createCDNWrapper(new URL(s,window.location).href)}var a=new Worker(s),n=new _message_handler.MessageHandler("main","worker",a),r=function(){a.removeEventListener("error",o);n.destroy();a.terminate();if(t.destroyed){t._readyCapability.reject(new Error("Worker was destroyed"))}else{t._setupFakeWorker()}},o=function(){if(!t._webWorker){r()}};a.addEventListener("error",o);n.on("test",function(e){a.removeEventListener("error",o);if(t.destroyed){r();return}if(e){t._messageHandler=n;t._port=a;t._webWorker=a;if(!e.supportTransfers){t.postMessageTransfers=!1}t._readyCapability.resolve();n.send("configure",{verbosity:t.verbosity})}else{t._setupFakeWorker();n.destroy();a.terminate()}});n.on("ready",function(){a.removeEventListener("error",o);if(t.destroyed){r();return}try{i()}catch(a){t._setupFakeWorker()}});var i=function(){var e=new Uint8Array([t.postMessageTransfers?255:0]);try{n.send("test",e,[e.buffer])}catch(t){(0,_util.warn)("Cannot use postMessage transfers.");e[0]=0;n.send("test",e)}};i();return}catch(t){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function _setupFakeWorker(){var e=this;if(!isWorkerDisabled){(0,_util.warn)("Setting up fake worker.");isWorkerDisabled=!0}setupFakeWorkerGlobal().then(function(t){if(e.destroyed){e._readyCapability.reject(new Error("Worker was destroyed"));return}var a=new LoopbackPort;e._port=a;var n="fake"+nextFakeWorkerId++,r=new _message_handler.MessageHandler(n+"_worker",n,a);t.setup(r,a);var o=new _message_handler.MessageHandler(n,n+"_worker",a);e._messageHandler=o;e._readyCapability.resolve();o.send("configure",{verbosity:e.verbosity})}).catch(function(t){e._readyCapability.reject(new Error("Setting up fake worker failed: \"".concat(t.message,"\".")))})}},{key:"destroy",value:function destroy(){this.destroyed=!0;if(this._webWorker){this._webWorker.terminate();this._webWorker=null}pdfWorkerPorts.delete(this._port);this._port=null;if(this._messageHandler){this._messageHandler.destroy();this._messageHandler=null}}},{key:"promise",get:function get(){return this._readyCapability.promise}},{key:"port",get:function get(){return this._port}},{key:"messageHandler",get:function get(){return this._messageHandler}}],[{key:"fromPort",value:function fromPort(t){if(!t||!t.port){throw new Error("PDFWorker.fromPort - invalid method signature.")}if(pdfWorkerPorts.has(t.port)){return pdfWorkerPorts.get(t.port)}return new e(t)}},{key:"getWorkerSrc",value:function getWorkerSrc(){return _getWorkerSrc()}}]);return e}();return PDFWorker}();exports.PDFWorker=PDFWorker;var WorkerTransport=function(){function e(t,a,n,r){_classCallCheck(this,e);this.messageHandler=t;this.loadingTask=a;this.commonObjs=new PDFObjects;this.fontLoader=new _font_loader.FontLoader({docId:a.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:r.ownerDocument});this._params=r;this.CMapReaderFactory=new r.CMapReaderFactory({baseUrl:r.cMapUrl,isCompressed:r.cMapPacked});this.destroyed=!1;this.destroyCapability=null;this._passwordCapability=null;this._networkStream=n;this._fullReader=null;this._lastProgress=null;this.pageCache=[];this.pagePromises=[];this.downloadInfoCapability=(0,_util.createPromiseCapability)();this.setupMessageHandler()}_createClass(e,[{key:"destroy",value:function destroy(){var e=this;if(this.destroyCapability){return this.destroyCapability.promise}this.destroyed=!0;this.destroyCapability=(0,_util.createPromiseCapability)();if(this._passwordCapability){this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"))}var t=[];this.pageCache.forEach(function(e){if(e){t.push(e._destroy())}});this.pageCache.length=0;this.pagePromises.length=0;var a=this.messageHandler.sendWithPromise("Terminate",null);t.push(a);if(this.loadingTaskSettled){var n=this.loadingTask.promise.then(function(e){if(e.hasOwnProperty("annotationStorage")){e.annotationStorage.resetModified()}}).catch(function(){});t.push(n)}Promise.all(t).then(function(){e.commonObjs.clear();e.fontLoader.clear();e._hasJSActionsPromise=null;if(e._networkStream){e._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated."))}if(e.messageHandler){e.messageHandler.destroy();e.messageHandler=null}e.destroyCapability.resolve()},this.destroyCapability.reject);return this.destroyCapability.promise}},{key:"setupMessageHandler",value:function setupMessageHandler(){var e=this,t=this.messageHandler,a=this.loadingTask;t.on("GetReader",function(t,a){(0,_util.assert)(e._networkStream,"GetReader - no `IPDFStream` instance available.");e._fullReader=e._networkStream.getFullReader();e._fullReader.onProgress=function(t){e._lastProgress={loaded:t.loaded,total:t.total}};a.onPull=function(){e._fullReader.read().then(function(e){var t=e.value,n=e.done;if(n){a.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(t),"GetReader - expected an ArrayBuffer.");a.enqueue(new Uint8Array(t),1,[t])}).catch(function(e){a.error(e)})};a.onCancel=function(t){e._fullReader.cancel(t);a.ready.catch(function(t){if(e.destroyed){return}throw t})}});t.on("ReaderHeadersReady",function(){var t=(0,_util.createPromiseCapability)(),n=e._fullReader;n.headersReady.then(function(){if(!n.isStreamingSupported||!n.isRangeSupported){if(e._lastProgress&&a.onProgress){a.onProgress(e._lastProgress)}n.onProgress=function(e){if(a.onProgress){a.onProgress({loaded:e.loaded,total:e.total})}}}t.resolve({isStreamingSupported:n.isStreamingSupported,isRangeSupported:n.isRangeSupported,contentLength:n.contentLength})},t.reject);return t.promise});t.on("GetRangeReader",function(t,a){(0,_util.assert)(e._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var n=e._networkStream.getRangeReader(t.begin,t.end);if(!n){a.close();return}a.onPull=function(){n.read().then(function(e){var t=e.value,n=e.done;if(n){a.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(t),"GetRangeReader - expected an ArrayBuffer.");a.enqueue(new Uint8Array(t),1,[t])}).catch(function(e){a.error(e)})};a.onCancel=function(t){n.cancel(t);a.ready.catch(function(t){if(e.destroyed){return}throw t})}});t.on("GetDoc",function(t){var n=t.pdfInfo;e._numPages=n.numPages;a._capability.resolve(new PDFDocumentProxy(n,e))});t.on("DocException",function(e){var t;switch(e.name){case"PasswordException":t=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":t=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":t=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":t=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":t=new _util.UnknownErrorException(e.message,e.details);break;}if(!(t instanceof Error)){(0,_util.warn)("DocException - expected a valid Error.")}a._capability.reject(t)});t.on("PasswordRequest",function(t){e._passwordCapability=(0,_util.createPromiseCapability)();if(a.onPassword){var n=function(t){e._passwordCapability.resolve({password:t})};try{a.onPassword(n,t.code)}catch(t){e._passwordCapability.reject(t)}}else{e._passwordCapability.reject(new _util.PasswordException(t.message,t.code))}return e._passwordCapability.promise});t.on("DataLoaded",function(t){if(a.onProgress){a.onProgress({loaded:t.length,total:t.length})}e.downloadInfoCapability.resolve(t)});t.on("StartRenderPage",function(t){if(e.destroyed){return}var a=e.pageCache[t.pageIndex];a._startRenderPage(t.transparency,t.intent)});t.on("commonobj",function(a){var n;if(e.destroyed){return}var r=_slicedToArray(a,3),o=r[0],s=r[1],i=r[2];if(e.commonObjs.has(o)){return}switch(s){case"Font":var d=e._params;if("error"in i){var l=i.error;(0,_util.warn)("Error during font loading: ".concat(l));e.commonObjs.resolve(o,l);break}var c=null;if(d.pdfBug&&(null===(n=globalThis.FontInspector)||void 0===n?void 0:n.enabled)){c={registerFont:function registerFont(e,t){globalThis.FontInspector.fontAdded(e,t)}}}var u=new _font_loader.FontFaceObject(i,{isEvalSupported:d.isEvalSupported,disableFontFace:d.disableFontFace,ignoreErrors:d.ignoreErrors,onUnsupportedFeature:e._onUnsupportedFeature.bind(e),fontRegistry:c});e.fontLoader.bind(u).catch(function(){return t.sendWithPromise("FontFallback",{id:o})}).finally(function(){if(!d.fontExtraProperties&&u.data){u.data=null}e.commonObjs.resolve(o,u)});break;case"FontPath":case"Image":e.commonObjs.resolve(o,i);break;default:throw new Error("Got unknown common object type ".concat(s));}});t.on("obj",function(t){var a;if(e.destroyed){return}var n=_slicedToArray(t,4),r=n[0],o=n[1],s=n[2],i=n[3],d=e.pageCache[o];if(d.objs.has(r)){return}switch(s){case"Image":d.objs.resolve(r,i);if((null===i||void 0===i?void 0:null===(a=i.data)||void 0===a?void 0:a.length)>8e6){d.cleanupAfterRender=!0}break;default:throw new Error("Got unknown object type ".concat(s));}});t.on("DocProgress",function(t){if(e.destroyed){return}if(a.onProgress){a.onProgress({loaded:t.loaded,total:t.total})}});t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this));t.on("FetchBuiltInCMap",function(t,a){if(e.destroyed){a.error(new Error("Worker was destroyed"));return}var n=!1;a.onPull=function(){if(n){a.close();return}n=!0;e.CMapReaderFactory.fetch(t).then(function(e){a.enqueue(e,1,[e.cMapData.buffer])}).catch(function(e){a.error(e)})}})}},{key:"_onUnsupportedFeature",value:function _onUnsupportedFeature(e){var t=e.featureId;if(this.destroyed){return}if(this.loadingTask.onUnsupportedFeature){this.loadingTask.onUnsupportedFeature(t)}}},{key:"getData",value:function getData(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function getPage(e){var t=this;if(!Number.isInteger(e)||0>=e||e>this._numPages){return Promise.reject(new Error("Invalid page request"))}var a=e-1;if(a in this.pagePromises){return this.pagePromises[a]}var n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:a}).then(function(e){if(t.destroyed){throw new Error("Transport destroyed")}var n=new PDFPageProxy(a,e,t,t._params.ownerDocument,t._params.pdfBug);t.pageCache[a]=n;return n});this.pagePromises[a]=n;return n}},{key:"getPageIndex",value:function getPageIndex(e){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:e}).catch(function(e){return Promise.reject(new Error(e))})}},{key:"getAnnotations",value:function getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}},{key:"saveDocument",value:function saveDocument(e){var t,a;return this.messageHandler.sendWithPromise("SaveDocument",{numPages:this._numPages,annotationStorage:(null===e||void 0===e?void 0:e.getAll())||null,filename:null!==(t=null===(a=this._fullReader)||void 0===a?void 0:a.filename)&&void 0!==t?t:null}).finally(function(){if(e){e.resetModified()}})}},{key:"getFieldObjects",value:function getFieldObjects(){return this.messageHandler.sendWithPromise("GetFieldObjects",null)}},{key:"hasJSActions",value:function hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function getDestination(e){if("string"!=typeof e){return Promise.reject(new Error("Invalid destination request."))}return this.messageHandler.sendWithPromise("GetDestination",{id:e})}},{key:"getPageLabels",value:function getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}},{key:"getOutline",value:function getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(function(e){return new _optional_content_config.OptionalContentConfig(e)})}},{key:"getPermissions",value:function getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function getMetadata(){var e=this;return this.messageHandler.sendWithPromise("GetMetadata",null).then(function(t){var a,n,r,o;return{info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:null!==(a=null===(n=e._fullReader)||void 0===n?void 0:n.filename)&&void 0!==a?a:null,contentLength:null!==(r=null===(o=e._fullReader)||void 0===o?void 0:o.contentLength)&&void 0!==r?r:null}})}},{key:"getMarkInfo",value:function getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"getStats",value:function getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}},{key:"startCleanup",value:function startCleanup(){var e=this;return this.messageHandler.sendWithPromise("Cleanup",null).then(function(){for(var t=0,a=e.pageCache.length,n;t<a;t++){n=e.pageCache[t];if(n){var r=n.cleanup();if(!r){throw new Error("startCleanup: Page ".concat(t+1," is currently rendering."))}}}e.commonObjs.clear();e.fontLoader.clear();e._hasJSActionsPromise=null})}},{key:"loadingTaskSettled",get:function get(){return this.loadingTask._capability.settled}},{key:"loadingParams",get:function get(){var e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,disableFontFace:e.disableFontFace})}}]);return e}(),PDFObjects=function(){function e(){_classCallCheck(this,e);this._objs=Object.create(null)}_createClass(e,[{key:"_ensureObj",value:function _ensureObj(e){if(this._objs[e]){return this._objs[e]}return this._objs[e]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}},{key:"get",value:function get(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;if(t){this._ensureObj(e).capability.promise.then(t);return null}var a=this._objs[e];if(!a||!a.resolved){throw new Error("Requesting object that isn't resolved yet ".concat(e,"."))}return a.data}},{key:"has",value:function has(e){var t=this._objs[e];return(null===t||void 0===t?void 0:t.resolved)||!1}},{key:"resolve",value:function resolve(e,t){var a=this._ensureObj(e);a.resolved=!0;a.data=t;a.capability.resolve(t)}},{key:"clear",value:function clear(){this._objs=Object.create(null)}}]);return e}(),RenderTask=function(){function e(t){_classCallCheck(this,e);this._internalRenderTask=t;this.onContinue=null}_createClass(e,[{key:"cancel",value:function cancel(){this._internalRenderTask.cancel()}},{key:"promise",get:function get(){return this._internalRenderTask.capability.promise}}]);return e}(),InternalRenderTask=function(){var e=new WeakSet,t=function(){function t(e){var a=e.callback,n=e.params,r=e.objs,o=e.commonObjs,s=e.operatorList,i=e.pageIndex,d=e.canvasFactory,l=e.webGLContext,c=e.useRequestAnimationFrame,u=void 0===c?!1:c,p=e.pdfBug,g=void 0===p?!1:p;_classCallCheck(this,t);this.callback=a;this.params=n;this.objs=r;this.commonObjs=o;this.operatorListIdx=null;this.operatorList=s;this._pageIndex=i;this.canvasFactory=d;this.webGLContext=l;this._pdfBug=g;this.running=!1;this.graphicsReadyCallback=null;this.graphicsReady=!1;this._useRequestAnimationFrame=!0===u&&"undefined"!=typeof window;this.cancelled=!1;this.capability=(0,_util.createPromiseCapability)();this.task=new RenderTask(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this);this._canvas=n.canvasContext.canvas}_createClass(t,[{key:"initializeGraphics",value:function initializeGraphics(t){var a,n=t.transparency,r=void 0===n?!1:n,o=t.optionalContentConfig;if(this.cancelled){return}if(this._canvas){if(e.has(this._canvas)){throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.")}e.add(this._canvas)}if(this._pdfBug&&(null===(a=globalThis.StepperManager)||void 0===a?void 0:a.enabled)){this.stepper=globalThis.StepperManager.create(this._pageIndex);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint()}var s=this.params,i=s.canvasContext,d=s.viewport,l=s.transform,c=s.imageLayer,u=s.background;this.gfx=new _canvas.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,c,o);this.gfx.beginDrawing({transform:l,viewport:d,transparency:r,background:u});this.operatorListIdx=0;this.graphicsReady=!0;if(this.graphicsReadyCallback){this.graphicsReadyCallback()}}},{key:"cancel",value:function cancel(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null;this.running=!1;this.cancelled=!0;if(this.gfx){this.gfx.endDrawing()}if(this._canvas){e.delete(this._canvas)}this.callback(t||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas"))}},{key:"operatorListChanged",value:function operatorListChanged(){if(!this.graphicsReady){if(!this.graphicsReadyCallback){this.graphicsReadyCallback=this._continueBound}return}if(this.stepper){this.stepper.updateOperatorList(this.operatorList)}if(this.running){return}this._continue()}},{key:"_continue",value:function _continue(){this.running=!0;if(this.cancelled){return}if(this.task.onContinue){this.task.onContinue(this._scheduleNextBound)}else{this._scheduleNext()}}},{key:"_scheduleNext",value:function _scheduleNext(){var e=this;if(this._useRequestAnimationFrame){window.requestAnimationFrame(function(){e._nextBound().catch(e.cancel.bind(e))})}else{Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}}},{key:"_next",value:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1){switch(t.prev=t.next){case 0:if(!this.cancelled){t.next=2;break}return t.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=!1;if(this.operatorList.lastChunk){this.gfx.endDrawing();if(this._canvas){e.delete(this._canvas)}this.callback()}}case 4:case"end":return t.stop();}}},t,this)}));return function _next(){return t.apply(this,arguments)}}()},{key:"completed",get:function get(){return this.capability.promise.catch(function(){})}}]);return t}();return t}(),version="2.7.570";exports.version=version;var build="f2c7338b0";exports.build="f2c7338b0"},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.FontLoader=t.FontFaceObject=void 0;var n=a(2),r=function(){function e(t){var a=t.docId,r=t.onUnsupportedFeature,o=t.ownerDocument,s=void 0===o?globalThis.document:o;_classCallCheck(this,e);if(this.constructor===e){(0,n.unreachable)("Cannot initialize BaseFontLoader.")}this.docId=a;this._onUnsupportedFeature=r;this._document=s;this.nativeFontFaces=[];this.styleElement=null}_createClass(e,[{key:"addNativeFontFace",value:function addNativeFontFace(e){this.nativeFontFaces.push(e);this._document.fonts.add(e)}},{key:"insertRule",value:function insertRule(e){var t=this.styleElement;if(!t){t=this.styleElement=this._document.createElement("style");t.id="PDFJS_FONT_STYLE_TAG_".concat(this.docId);this._document.documentElement.getElementsByTagName("head")[0].appendChild(t)}var a=t.sheet;a.insertRule(e,a.cssRules.length)}},{key:"clear",value:function clear(){var e=this;this.nativeFontFaces.forEach(function(t){e._document.fonts.delete(t)});this.nativeFontFaces.length=0;if(this.styleElement){this.styleElement.remove();this.styleElement=null}}},{key:"bind",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a=this,r,o;return regeneratorRuntime.wrap(function(e){while(1){switch(e.prev=e.next){case 0:if(!(t.attached||t.missingFile)){e.next=2;break}return e.abrupt("return");case 2:t.attached=!0;if(!this.isFontLoadingAPISupported){e.next=19;break}r=t.createNativeFontFace();if(!r){e.next=18;break}this.addNativeFontFace(r);e.prev=7;e.next=10;return r.loaded;case 10:e.next=18;break;case 12:e.prev=12;e.t0=e["catch"](7);this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative});(0,n.warn)("Failed to load font '".concat(r.family,"': '").concat(e.t0,"'."));t.disableFontFace=!0;throw e.t0;case 18:return e.abrupt("return");case 19:o=t.createFontFaceRule();if(!o){e.next=26;break}this.insertRule(o);if(!this.isSyncFontLoadingSupported){e.next=24;break}return e.abrupt("return");case 24:e.next=26;return new Promise(function(e){var n=a._queueLoadingCallback(e);a._prepareFontLoadEvent([o],[t],n)});case 26:case"end":return e.stop();}}},e,this,[[7,12]])}));return function bind(){return e.apply(this,arguments)}}()},{key:"_queueLoadingCallback",value:function _queueLoadingCallback(){(0,n.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"_prepareFontLoadEvent",value:function _prepareFontLoadEvent(){(0,n.unreachable)("Abstract method `_prepareFontLoadEvent`.")}},{key:"isFontLoadingAPISupported",get:function get(){var e;return(0,n.shadow)(this,"isFontLoadingAPISupported",!!(null===(e=this._document)||void 0===e?void 0:e.fonts))}},{key:"isSyncFontLoadingSupported",get:function get(){(0,n.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function get(){(0,n.unreachable)("Abstract method `_loadTestFont`.")}}]);return e}(),o;t.FontLoader=o;{t.FontLoader=o=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){var n;_classCallCheck(this,t);n=a.call(this,e);n.loadingContext={requests:[],nextRequestId:0};n.loadTestFontId=0;return n}_createClass(t,[{key:"_queueLoadingCallback",value:function _queueLoadingCallback(e){var t=this.loadingContext,a={id:"pdfjs-font-loading-".concat(t.nextRequestId++),done:!1,complete:function(){(0,n.assert)(!a.done,"completeRequest() cannot be called twice.");a.done=!0;while(0<t.requests.length&&t.requests[0].done){var e=t.requests.shift();setTimeout(e.callback,0)}},callback:e};t.requests.push(a);return a}},{key:"_prepareFontLoadEvent",value:function _prepareFontLoadEvent(e,t,a){var d=this;function r(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function o(e,t,a,n){var r=e.substring(0,t),o=e.substring(t+a);return r+n+o}var l,c,u=this._document.createElement("canvas");u.width=1;u.height=1;var p=u.getContext("2d"),g=0;function s(e,t){g++;if(30<g){(0,n.warn)("Load test font never loaded.");t();return}p.font="30px "+e;p.fillText(".",0,20);var a=p.getImageData(0,0,1,1);if(0<a.data[3]){t();return}setTimeout(s.bind(null,e,t))}var m="lt".concat(Date.now()).concat(this.loadTestFontId++),f=this._loadTestFont;f=o(f,976,m.length,m);var h=1482184792,y=r(f,16);for(l=0,c=m.length-3;l<c;l+=4){y=0|y-h+r(m,l)}if(l<m.length){y=0|y-h+r(m+"XXX",l)}f=o(f,16,4,(0,n.string32)(y));var A="url(data:font/opentype;base64,".concat(btoa(f),");"),v="@font-face {font-family:\"".concat(m,"\";src:").concat(A,"}");this.insertRule(v);var _=[];for(l=0,c=t.length;l<c;l++){_.push(t[l].loadedName)}_.push(m);var b=this._document.createElement("div");b.style.visibility="hidden";b.style.width=b.style.height="10px";b.style.position="absolute";b.style.top=b.style.left="0px";for(l=0,c=_.length;l<c;++l){var S=this._document.createElement("span");S.textContent="Hi";S.style.fontFamily=_[l];b.appendChild(S)}this._document.body.appendChild(b);s(m,function(){d._document.body.removeChild(b);a.complete()})}},{key:"isSyncFontLoadingSupported",get:function get(){var e=!1;if("undefined"==typeof navigator){e=!0}else{var t=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);if(14<=(null===t||void 0===t?void 0:t[1])){e=!0}}return(0,n.shadow)(this,"isSyncFontLoadingSupported",e)}},{key:"_loadTestFont",get:function get(){return(0,n.shadow)(this,"_loadTestFont",function getLoadTestFont(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")}())}}]);return t}(r)}var s=function(){function e(t,a){var n=a.isEvalSupported,r=void 0===n?!0:n,o=a.disableFontFace,s=void 0===o?!1:o,d=a.ignoreErrors,l=void 0===d?!1:d,c=a.onUnsupportedFeature,u=void 0===c?null:c,p=a.fontRegistry,g=void 0===p?null:p;_classCallCheck(this,e);this.compiledGlyphs=Object.create(null);for(var m in t){this[m]=t[m]}this.isEvalSupported=!1!==r;this.disableFontFace=!0===s;this.ignoreErrors=!0===l;this._onUnsupportedFeature=u;this.fontRegistry=g}_createClass(e,[{key:"createNativeFontFace",value:function createNativeFontFace(){if(!this.data||this.disableFontFace){return null}var e=new FontFace(this.loadedName,this.data,{});if(this.fontRegistry){this.fontRegistry.registerFont(this)}return e}},{key:"createFontFaceRule",value:function createFontFaceRule(){if(!this.data||this.disableFontFace){return null}var e=(0,n.bytesToString)(new Uint8Array(this.data)),t="url(data:".concat(this.mimetype,";base64,").concat(btoa(e),");"),a="@font-face {font-family:\"".concat(this.loadedName,"\";src:").concat(t,"}");if(this.fontRegistry){this.fontRegistry.registerFont(this,t)}return a}},{key:"getPathGenerator",value:function getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0){return this.compiledGlyphs[t]}var a,r;try{a=e.get(this.loadedName+"_path_"+t)}catch(e){if(!this.ignoreErrors){throw e}if(this._onUnsupportedFeature){this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath})}(0,n.warn)("getPathGenerator - ignoring character: \"".concat(e,"\"."));return this.compiledGlyphs[t]=function(){}}if(this.isEvalSupported&&n.IsEvalSupportedCached.value){for(var o,s="",d=0,l=a.length;d<l;d++){r=a[d];if(r.args!==void 0){o=r.args.join(",")}else{o=""}s+="c."+r.cmd+"("+o+");\n"}return this.compiledGlyphs[t]=new Function("c","size",s)}return this.compiledGlyphs[t]=function(e,t){for(var n=0,o=a.length;n<o;n++){r=a[n];if("scale"===r.cmd){r.args=[t,-t]}e[r.cmd].apply(e,r.args)}}}}]);return e}();t.FontFaceObject=s},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.NodeCMapReaderFactory=t.NodeCanvasFactory=void 0;var n=a(1),r=a(4),o=a(2),s=function e(){_classCallCheck(this,e);(0,o.unreachable)("Not implemented: NodeCanvasFactory")};t.NodeCanvasFactory=s;var i=function e(){_classCallCheck(this,e);(0,o.unreachable)("Not implemented: NodeCMapReaderFactory")};t.NodeCMapReaderFactory=i;if(r.isNodeJS){t.NodeCanvasFactory=s=function(e){_inherits(t,e);var a=_createSuper(t);function t(){_classCallCheck(this,t);return a.apply(this,arguments)}_createClass(t,[{key:"create",value:function create(e,t){if(0>=e||0>=t){throw new Error("Invalid canvas size")}var a=require("canvas"),n=a.createCanvas(e,t);return{canvas:n,context:n.getContext("2d")}}}]);return t}(n.BaseCanvasFactory);t.NodeCMapReaderFactory=i=function(e){_inherits(t,e);var a=_createSuper(t);function t(){_classCallCheck(this,t);return a.apply(this,arguments)}_createClass(t,[{key:"_fetchData",value:function _fetchData(e,t){return new Promise(function(a,n){var r=require("fs");r.readFile(e,function(e,r){if(e||!r){n(new Error(e));return}a({cMapData:new Uint8Array(r),compressionType:t})})})}}]);return t}(n.BaseCMapReaderFactory)}},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.AnnotationStorage=void 0;var n=a(2),r=function(){function e(){_classCallCheck(this,e);this._storage=new Map;this._modified=!1;this.onSetModified=null;this.onResetModified=null}_createClass(e,[{key:"getOrCreateValue",value:function getOrCreateValue(e,t){if(this._storage.has(e)){return this._storage.get(e)}this._storage.set(e,t);return t}},{key:"setValue",value:function setValue(e,t){var a=this._storage.get(e),n=!1;if(a!==void 0){for(var r=0,o=Object.entries(t);r<o.length;r++){var s=_slicedToArray(o[r],2),i=s[0],d=s[1];if(a[i]!==d){n=!0;a[i]=d}}}else{this._storage.set(e,t);n=!0}if(n){this._setModified()}}},{key:"getAll",value:function getAll(){if(0===this._storage.size){return null}return(0,n.objectFromEntries)(this._storage)}},{key:"_setModified",value:function _setModified(){if(!this._modified){this._modified=!0;if("function"==typeof this.onSetModified){this.onSetModified()}}}},{key:"resetModified",value:function resetModified(){if(this._modified){this._modified=!1;if("function"==typeof this.onResetModified){this.onResetModified()}}}},{key:"size",get:function get(){return this._storage.size}}]);return e}();t.AnnotationStorage=r},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.apiCompatibilityParams=void 0;var n=a(4),r=Object.create(null);{(function(){if(n.isNodeJS){r.disableFontFace=!0}})()}var o=Object.freeze(r);t.apiCompatibilityParams=o},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.CanvasGraphics=void 0;var o=a(2),s=a(11),i=16,d=100,l=4096,c=1e3,u=16;function n(t){if(!t.mozCurrentTransform){t._originalSave=t.save;t._originalRestore=t.restore;t._originalRotate=t.rotate;t._originalScale=t.scale;t._originalTranslate=t.translate;t._originalTransform=t.transform;t._originalSetTransform=t.setTransform;t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0];t._transformStack=[];Object.defineProperty(t,"mozCurrentTransform",{get:function(){return this._transformMatrix}});Object.defineProperty(t,"mozCurrentTransformInverse",{get:function(){var t=this._transformMatrix,n=t[0],a=t[1],r=t[2],o=t[3],s=t[4],e=t[5],i=n*o-a*r,d=a*r-n*o;return[o/i,a/d,r/d,n/i,(o*s-r*e)/d,(a*s-n*e)/i]}});t.save=function(){var e=this._transformMatrix;this._transformStack.push(e);this._transformMatrix=e.slice(0,6);this._originalSave()};t.restore=function(){var e=this._transformStack.pop();if(e){this._transformMatrix=e;this._originalRestore()}};t.translate=function(e,t){var a=this._transformMatrix;a[4]=a[0]*e+a[2]*t+a[4];a[5]=a[1]*e+a[3]*t+a[5];this._originalTranslate(e,t)};t.scale=function(e,t){var a=this._transformMatrix;a[0]=a[0]*e;a[1]=a[1]*e;a[2]=a[2]*t;a[3]=a[3]*t;this._originalScale(e,t)};t.transform=function(n,a,r,o,s,e){var i=this._transformMatrix;this._transformMatrix=[i[0]*n+i[2]*a,i[1]*n+i[3]*a,i[0]*r+i[2]*o,i[1]*r+i[3]*o,i[0]*s+i[2]*e+i[4],i[1]*s+i[3]*e+i[5]];t._originalTransform(n,a,r,o,s,e)};t.setTransform=function(n,a,r,o,s,e){this._transformMatrix=[n,a,r,o,s,e];t._originalSetTransform(n,a,r,o,s,e)};t.rotate=function(e){var t=Math.cos(e),a=Math.sin(e),n=this._transformMatrix;this._transformMatrix=[n[0]*t+n[2]*a,n[1]*t+n[3]*a,n[0]*-a+n[2]*t,n[1]*-a+n[3]*t,n[4],n[5]];this._originalRotate(e)}}}var p=function(){function e(e){this.canvasFactory=e;this.cache=Object.create(null)}e.prototype={getCanvas:function(e,t,a,r){var o;if(this.cache[e]!==void 0){o=this.cache[e];this.canvasFactory.reset(o,t,a);o.context.setTransform(1,0,0,1,0,0)}else{o=this.canvasFactory.create(t,a);this.cache[e]=o}if(r){n(o.context)}return o},clear:function clear(){for(var e in this.cache){var t=this.cache[e];this.canvasFactory.destroy(t);delete this.cache[e]}}};return e}();function r(e){var t=e.width,a=e.height,n=t+1,r,o,s,d,l=new Uint8Array(n*(a+1)),c=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=-8&t+7,g=e.data,m=new Uint8Array(u*a),f=0;for(r=0,o=g.length;r<o;r++){var h=g[r],y=128;while(0<y){m[f++]=h&y?0:255;y>>=1}}var A=0;f=0;if(0!==m[f]){l[0]=1;++A}for(s=1;s<t;s++){if(m[f]!==m[f+1]){l[s]=m[f]?2:1;++A}f++}if(0!==m[f]){l[s]=2;++A}for(r=1;r<a;r++){f=r*u;d=r*n;if(m[f-u]!==m[f]){l[d]=m[f]?1:8;++A}var P=(m[f]?4:0)+(m[f-u]?8:0);for(s=1;s<t;s++){P=(P>>2)+(m[f+1]?4:0)+(m[f-u+1]?8:0);if(c[P]){l[d+s]=c[P];++A}f++}if(m[f-u]!==m[f]){l[d+s]=m[f]?2:4;++A}if(A>1000){return null}}f=u*(a-1);d=r*n;if(0!==m[f]){l[d]=8;++A}for(s=1;s<t;s++){if(m[f]!==m[f+1]){l[d+s]=m[f]?4:8;++A}f++}if(0!==m[f]){l[d+s]=4;++A}if(A>1000){return null}var v=new Int32Array([0,n,-1,0,-n,0,0,0,1]),_=[];for(r=0;A&&r<=a;r++){var b=r*n,S=b+t;while(b<S&&!l[b]){b++}if(b===S){continue}var k=[b%n,r],C=b,x=l[b];do{var R=v[x];do{b+=R}while(!l[b]);var T=l[b];if(5!==T&&10!==T){x=T;l[b]=0}else{x=T&51*x>>4;l[b]&=x>>2|x<<2}k.push(b%n);k.push(0|b/n);if(!l[b]){--A}}while(C!==b);_.push(k);--r}return function drawOutline(e){e.save();e.scale(1/t,-1/a);e.translate(0,-a);e.beginPath();for(var n=0,r=_.length,s;n<r;n++){s=_[n];e.moveTo(s[0],s[1]);for(var o=2,i=s.length;o<i;o+=2){e.lineTo(s[o],s[o+1])}}e.fill();e.beginPath();e.restore()}}var g=function(){function e(){this.alphaIsShape=!1;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=o.IDENTITY_MATRIX;this.textMatrixScale=1;this.fontMatrix=o.FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRenderingMode=o.TextRenderingMode.FILL;this.textRise=0;this.fillColor="#000000";this.strokeColor="#000000";this.patternFill=!1;this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.activeSMask=null;this.resumeSMaskCtx=null;this.transferMaps=null}e.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(e,t){this.x=e;this.y=t}};return e}(),m=function(){var b=10;function e(e,t,a,r,o,s,i){this.ctx=e;this.current=new g;this.stateStack=[];this.pendingClip=null;this.pendingEOFill=!1;this.res=null;this.xobjs=null;this.commonObjs=t;this.objs=a;this.canvasFactory=r;this.webGLContext=o;this.imageLayer=s;this.groupStack=[];this.processingType3=null;this.baseTransform=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.contentVisible=!0;this.markedContentStack=[];this.optionalContentConfig=i;this.cachedCanvases=new p(this.canvasFactory);if(e){n(e)}this._cachedGetSinglePixelWidth=null}function t(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if("undefined"!=typeof ImageData&&t instanceof ImageData){e.putImageData(t,0,0);return}var n=t.height,r=t.width,s=n%u,d=(n-s)/u,l=0===s?d:d+1,c=e.createImageData(r,u),p=0,g,m=t.data,f=c.data,h,y,A,v,_,b,S,C;if(a){switch(a.length){case 1:_=a[0];b=a[0];S=a[0];C=a[0];break;case 4:_=a[0];b=a[1];S=a[2];C=a[3];break;}}if(t.kind===o.ImageKind.GRAYSCALE_1BPP){var x=m.byteLength,P=new Uint32Array(f.buffer,0,f.byteLength>>2),R=P.length,T=4294967295,E=o.IsLittleEndianCached.value?4278190080:255;if(C){if(255===C[0]&&0===C[255]){var F=[E,T];T=F[0];E=F[1]}}for(h=0;h<l;h++){A=h<d?u:s;g=0;for(y=0;y<A;y++){var L=x-p,I=0,N=L>r+7>>3?r:8*L-7,M=0,D=0;for(;I<(-8&N);I+=8){D=m[p++];P[g++]=128&D?T:E;P[g++]=64&D?T:E;P[g++]=32&D?T:E;P[g++]=16&D?T:E;P[g++]=8&D?T:E;P[g++]=4&D?T:E;P[g++]=2&D?T:E;P[g++]=1&D?T:E}for(;I<N;I++){if(0===M){D=m[p++];M=128}P[g++]=D&M?T:E;M>>=1}}while(g<R){P[g++]=0}e.putImageData(c,0,h*u)}}else if(t.kind===o.ImageKind.RGBA_32BPP){var O=!!(_||b||S);y=0;v=4*(r*u);for(h=0;h<d;h++){f.set(m.subarray(p,p+v));p+=v;if(O){for(var w=0;w<v;w+=4){if(_){f[w+0]=_[f[w+0]]}if(b){f[w+1]=b[f[w+1]]}if(S){f[w+2]=S[f[w+2]]}}}e.putImageData(c,0,y);y+=u}if(h<l){v=4*(r*s);f.set(m.subarray(p,p+v));if(O){for(var U=0;U<v;U+=4){if(_){f[U+0]=_[f[U+0]]}if(b){f[U+1]=b[f[U+1]]}if(S){f[U+2]=S[f[U+2]]}}}e.putImageData(c,0,y)}}else if(t.kind===o.ImageKind.RGB_24BPP){var B=!!(_||b||S);A=u;v=r*A;for(h=0;h<l;h++){if(h>=d){A=s;v=r*A}g=0;for(y=v;y--;){f[g++]=m[p++];f[g++]=m[p++];f[g++]=m[p++];f[g++]=255}if(B){for(var G=0;G<g;G+=4){if(_){f[G+0]=_[f[G+0]]}if(b){f[G+1]=b[f[G+1]]}if(S){f[G+2]=S[f[G+2]]}}}e.putImageData(c,0,h*u)}}else{throw new Error("bad image kind: ".concat(t.kind))}}function a(e,t){for(var a=t.height,n=t.width,r=a%u,o=(a-r)/u,s=0===r?o:o+1,d=e.createImageData(n,u),l=0,c=t.data,p=d.data,g=0;g<s;g++){for(var m=g<o?u:r,f=3,h=0;h<m;h++){for(var y=void 0,A=0,v=0;v<n;v++){if(!A){y=c[l++];A=128}p[f]=y&A?0:255;f+=4;A>>=1}}e.putImageData(d,0,g*u)}}function m(e,t){for(var a=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],n=0,r=a.length,o;n<r;n++){o=a[n];if(e[o]!==void 0){t[o]=e[o]}}if(e.setLineDash!==void 0){t.setLineDash(e.getLineDash());t.lineDashOffset=e.lineDashOffset}}function f(e){e.strokeStyle="#000000";e.fillStyle="#000000";e.fillRule="nonzero";e.globalAlpha=1;e.lineWidth=1;e.lineCap="butt";e.lineJoin="miter";e.miterLimit=10;e.globalCompositeOperation="source-over";e.font="10px sans-serif";if(e.setLineDash!==void 0){e.setLineDash([]);e.lineDashOffset=0}}function h(e,t,a,n){for(var r=e.length,o=3,s;o<r;o+=4){s=e[o];if(0===s){e[o-3]=t;e[o-2]=a;e[o-1]=n}else if(255>s){var d=255-s;e[o-3]=e[o-3]*s+t*d>>8;e[o-2]=e[o-2]*s+a*d>>8;e[o-1]=e[o-1]*s+n*d>>8}}}function y(e,t,a){for(var n=e.length,r=3,o;r<n;r+=4){o=a?a[e[r]]:e[r];t[r]=0|t[r]*o*(1/255)}}function A(e,t,a){for(var n=e.length,r=3,o;r<n;r+=4){o=77*e[r-3]+152*e[r-2]+28*e[r-1];t[r]=a?t[r]*a[o>>8]>>8:t[r]*o>>16}}function v(e,t,a,n,r,o,s){var i=!!o,d=i?o[0]:0,l=i?o[1]:0,c=i?o[2]:0,u;if("Luminosity"===r){u=A}else{u=y}for(var p=Math.min(n,Math.ceil(1048576/a)),g=0;g<n;g+=p){var m=Math.min(p,n-g),f=e.getImageData(0,g,a,m),v=t.getImageData(0,g,a,m);if(i){h(f.data,d,l,c)}u(f.data,v.data,s);e.putImageData(v,0,g)}}function _(e,t,a,n){var r=t.canvas,o=t.context;e.setTransform(t.scaleX,0,0,t.scaleY,t.offsetX,t.offsetY);var s=t.backdrop||null;if(!t.transferMap&&n.isEnabled){var i=n.composeSMask({layer:a.canvas,mask:r,properties:{subtype:t.subtype,backdrop:s}});e.setTransform(1,0,0,1,0,0);e.drawImage(i,t.offsetX,t.offsetY);return}v(o,a,r.width,r.height,t.subtype,s,t.transferMap);e.drawImage(r,0,0)}var S=["butt","round","square"],k=["miter","round","bevel"],C={},x={};e.prototype={beginDrawing:function beginDrawing(e){var t=e.transform,a=e.viewport,n=e.transparency,r=void 0===n?!1:n,o=e.background,s=void 0===o?null:o,i=this.ctx.canvas.width,d=this.ctx.canvas.height;this.ctx.save();this.ctx.fillStyle=s||"rgb(255, 255, 255)";this.ctx.fillRect(0,0,i,d);this.ctx.restore();if(r){var l=this.cachedCanvases.getCanvas("transparent",i,d,!0);this.compositeCtx=this.ctx;this.transparentCanvas=l.canvas;this.ctx=l.context;this.ctx.save();this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save();f(this.ctx);if(t){this.ctx.transform.apply(this.ctx,t)}this.ctx.transform.apply(this.ctx,a.transform);this.baseTransform=this.ctx.mozCurrentTransform.slice();this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]);if(this.imageLayer){this.imageLayer.beginLayout()}},executeOperatorList:function(e,t,a,n){var r=e.argsArray,s=e.fnArray,d=t||0,l=r.length;if(l===d){return d}var c=l-d>b&&"function"==typeof a,u=c?Date.now()+15:0,p=0,g=this.commonObjs,m=this.objs,f;while(!0){if(n!==void 0&&d===n.nextBreakPoint){n.breakIt(d,a);return d}f=s[d];if(f!==o.OPS.dependency){this[f].apply(this,r[d])}else{var h=_createForOfIteratorHelper(r[d]),y;try{for(h.s();!(y=h.n()).done;){var A=y.value,v=A.startsWith("g_")?g:m;if(!v.has(A)){v.get(A,a);return d}}}catch(e){h.e(e)}finally{h.f()}}d++;if(d===l){return d}if(c&&++p>b){if(Date.now()>u){a();return d}p=0}}},endDrawing:function(){while(this.stateStack.length||null!==this.current.activeSMask){this.restore()}this.ctx.restore();if(this.transparentCanvas){this.ctx=this.compositeCtx;this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.drawImage(this.transparentCanvas,0,0);this.ctx.restore();this.transparentCanvas=null}this.cachedCanvases.clear();this.webGLContext.clear();if(this.imageLayer){this.imageLayer.endLayout()}},setLineWidth:function(e){this.current.lineWidth=e;this.ctx.lineWidth=e},setLineCap:function(e){this.ctx.lineCap=S[e]},setLineJoin:function(e){this.ctx.lineJoin=k[e]},setMiterLimit:function(e){this.ctx.miterLimit=e},setDash:function(e,t){var a=this.ctx;if(a.setLineDash!==void 0){a.setLineDash(e);a.lineDashOffset=t}},setRenderingIntent:function setRenderingIntent(){},setFlatness:function setFlatness(){},setGState:function(e){for(var r=0,o=e.length;r<o;r++){var t=e[r],a=t[0],n=t[1];switch(a){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=t[1];break;case"ca":this.current.fillAlpha=t[1];this.ctx.globalAlpha=t[1];break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":if(this.current.activeSMask){if(0<this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask){this.suspendSMaskGroup()}else{this.endSMaskGroup()}}this.current.activeSMask=n?this.tempSMask:null;if(this.current.activeSMask){this.beginSMaskGroup()}this.tempSMask=null;break;case"TR":this.current.transferMaps=n;}}},beginSMaskGroup:function(){var e=this.current.activeSMask,t=e.canvas.width,a=e.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,t,a,!0),o=this.ctx,s=o.mozCurrentTransform;this.ctx.save();var i=r.context;i.scale(1/e.scaleX,1/e.scaleY);i.translate(-e.offsetX,-e.offsetY);i.transform.apply(i,s);e.startTransformInverse=i.mozCurrentTransformInverse;m(o,i);this.ctx=i;this.setGState([["BM","source-over"],["ca",1],["CA",1]]);this.groupStack.push(o);this.groupLevel++},suspendSMaskGroup:function(){var e=this.ctx;this.groupLevel--;this.ctx=this.groupStack.pop();_(this.ctx,this.current.activeSMask,e,this.webGLContext);this.ctx.restore();this.ctx.save();m(e,this.ctx);this.current.resumeSMaskCtx=e;var t=o.Util.transform(this.current.activeSMask.startTransformInverse,e.mozCurrentTransform);this.ctx.transform.apply(this.ctx,t);e.save();e.setTransform(1,0,0,1,0,0);e.clearRect(0,0,e.canvas.width,e.canvas.height);e.restore()},resumeSMaskGroup:function(){var e=this.current.resumeSMaskCtx,t=this.ctx;this.ctx=e;this.groupStack.push(t);this.groupLevel++},endSMaskGroup:function(){var e=this.ctx;this.groupLevel--;this.ctx=this.groupStack.pop();_(this.ctx,this.current.activeSMask,e,this.webGLContext);this.ctx.restore();m(e,this.ctx);var t=o.Util.transform(this.current.activeSMask.startTransformInverse,e.mozCurrentTransform);this.ctx.transform.apply(this.ctx,t)},save:function(){this.ctx.save();var e=this.current;this.stateStack.push(e);this.current=e.clone();this.current.resumeSMaskCtx=null},restore:function(){if(this.current.resumeSMaskCtx){this.resumeSMaskGroup()}if(null!==this.current.activeSMask&&(0===this.stateStack.length||this.stateStack[this.stateStack.length-1].activeSMask!==this.current.activeSMask)){this.endSMaskGroup()}if(0!==this.stateStack.length){this.current=this.stateStack.pop();this.ctx.restore();this.pendingClip=null;this._cachedGetSinglePixelWidth=null}else{this.current.activeSMask=null}},transform:function(t,a,n,r,o,e){this.ctx.transform(t,a,n,r,o,e);this._cachedGetSinglePixelWidth=null},constructPath:function(e,t){for(var a=this.ctx,n=this.current,r=n.x,s=n.y,d=0,l=0,c=e.length;d<c;d++){switch(0|e[d]){case o.OPS.rectangle:r=t[l++];s=t[l++];var u=t[l++],p=t[l++],g=r+u,m=s+p;a.moveTo(r,s);if(0===u||0===p){a.lineTo(g,m)}else{a.lineTo(g,s);a.lineTo(g,m);a.lineTo(r,m)}a.closePath();break;case o.OPS.moveTo:r=t[l++];s=t[l++];a.moveTo(r,s);break;case o.OPS.lineTo:r=t[l++];s=t[l++];a.lineTo(r,s);break;case o.OPS.curveTo:r=t[l+4];s=t[l+5];a.bezierCurveTo(t[l],t[l+1],t[l+2],t[l+3],r,s);l+=6;break;case o.OPS.curveTo2:a.bezierCurveTo(r,s,t[l],t[l+1],t[l+2],t[l+3]);r=t[l+2];s=t[l+3];l+=4;break;case o.OPS.curveTo3:r=t[l+2];s=t[l+3];a.bezierCurveTo(t[l],t[l+1],r,s,r,s);l+=4;break;case o.OPS.closePath:a.closePath();break;}}n.setCurrentPoint(r,s)},closePath:function(){this.ctx.closePath()},stroke:function(e){e="undefined"!=typeof e?e:!0;var t=this.ctx,a=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha;if(this.contentVisible){if("object"===_typeof(a)&&(null===a||void 0===a?void 0:a.getPattern)){t.save();var n=t.mozCurrentTransform,r=o.Util.singularValueDecompose2dScale(n)[0];t.strokeStyle=a.getPattern(t,this);var s=this.getSinglePixelWidth(),i=this.current.lineWidth*r;if(0>s&&-s>=i){t.resetTransform();t.lineWidth=Math.round(this._combinedScaleFactor)}else{t.lineWidth=Math.max(s,i)}t.stroke();t.restore()}else{var d=this.getSinglePixelWidth();if(0>d&&-d>=this.current.lineWidth){t.save();t.resetTransform();t.lineWidth=Math.round(this._combinedScaleFactor);t.stroke();t.restore()}else{t.lineWidth=Math.max(d,this.current.lineWidth);t.stroke()}}}if(e){this.consumePath()}t.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath();this.stroke()},fill:function(e){e="undefined"!=typeof e?e:!0;var t=this.ctx,a=this.current.fillColor,n=this.current.patternFill,r=!1;if(n){t.save();if(this.baseTransform){t.setTransform.apply(t,this.baseTransform)}t.fillStyle=a.getPattern(t,this);r=!0}if(this.contentVisible){if(this.pendingEOFill){t.fill("evenodd");this.pendingEOFill=!1}else{t.fill()}}if(r){t.restore()}if(e){this.consumePath()}},eoFill:function(){this.pendingEOFill=!0;this.fill()},fillStroke:function(){this.fill(!1);this.stroke(!1);this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0;this.fillStroke()},closeFillStroke:function(){this.closePath();this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0;this.closePath();this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=C},eoClip:function(){this.pendingClip=x},beginText:function(){this.current.textMatrix=o.IDENTITY_MATRIX;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0},endText:function(){var e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save();t.beginPath();for(var a=0,n;a<e.length;a++){n=e[a];t.setTransform.apply(t,n.transform);t.translate(n.x,n.y);n.addToPath(t,n.fontSize)}t.restore();t.clip();t.beginPath();delete this.pendingTextPaths},setCharSpacing:function(e){this.current.charSpacing=e},setWordSpacing:function(e){this.current.wordSpacing=e},setHScale:function(e){this.current.textHScale=e/100},setLeading:function(e){this.current.leading=-e},setFont:function(e,t){var a=this.commonObjs.get(e),n=this.current;if(!a){throw new Error("Can't find font for ".concat(e))}n.fontMatrix=a.fontMatrix||o.FONT_IDENTITY_MATRIX;if(0===n.fontMatrix[0]||0===n.fontMatrix[3]){(0,o.warn)("Invalid font matrix for font "+e)}if(0>t){t=-t;n.fontDirection=-1}else{n.fontDirection=1}this.current.font=a;this.current.fontSize=t;if(a.isType3Font){return}var r=a.loadedName||"sans-serif",s="normal";if(a.black){s="900"}else if(a.bold){s="bold"}var l=a.italic?"italic":"normal",c="\"".concat(r,"\", ").concat(a.fallbackName),u=t;if(t<i){u=i}else if(t>d){u=d}this.current.fontSizeScale=t/u;this.ctx.font="".concat(l," ").concat(s," ").concat(u,"px ").concat(c)},setTextRenderingMode:function(e){this.current.textRenderingMode=e},setTextRise:function(e){this.current.textRise=e},moveText:function(e,t){this.current.x=this.current.lineX+=e;this.current.y=this.current.lineY+=t},setLeadingMoveText:function(e,t){this.setLeading(-t);this.moveText(e,t)},setTextMatrix:function(t,a,n,r,o,e){this.current.textMatrix=[t,a,n,r,o,e];this.current.textMatrixScale=Math.sqrt(t*t+a*a);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar:function paintChar(e,t,a,n,r){var s=this.ctx,i=this.current,d=i.font,l=i.textRenderingMode,c=i.fontSize/i.fontSizeScale,u=l&o.TextRenderingMode.FILL_STROKE_MASK,p=!!(l&o.TextRenderingMode.ADD_TO_PATH_FLAG),g=i.patternFill&&!d.missingFile,m;if(d.disableFontFace||p||g){m=d.getPathGenerator(this.commonObjs,e)}if(d.disableFontFace||g){s.save();s.translate(t,a);s.beginPath();m(s,c);if(n){s.setTransform.apply(s,n)}if(u===o.TextRenderingMode.FILL||u===o.TextRenderingMode.FILL_STROKE){s.fill()}if(u===o.TextRenderingMode.STROKE||u===o.TextRenderingMode.FILL_STROKE){if(r){s.resetTransform();s.lineWidth=Math.round(this._combinedScaleFactor)}s.stroke()}s.restore()}else{if(u===o.TextRenderingMode.FILL||u===o.TextRenderingMode.FILL_STROKE){s.fillText(e,t,a)}if(u===o.TextRenderingMode.STROKE||u===o.TextRenderingMode.FILL_STROKE){if(r){s.save();s.moveTo(t,a);s.resetTransform();s.lineWidth=Math.round(this._combinedScaleFactor);s.strokeText(e,0,0);s.restore()}else{s.strokeText(e,t,a)}}}if(p){var f=this.pendingTextPaths||(this.pendingTextPaths=[]);f.push({transform:s.mozCurrentTransform,x:t,y:a,fontSize:c,addToPath:m})}},get isFontSubpixelAAEnabled(){var e=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10),t=e.context;t.scale(1.5,1);t.fillText("I",0,10);for(var a=t.getImageData(0,0,10,10).data,n=!1,r=3;r<a.length;r+=4){if(0<a[r]&&255>a[r]){n=!0;break}}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",n)},showText:function(e){var t=this.current,a=t.font;if(a.isType3Font){return this.showType3Text(e)}var n=t.fontSize;if(0===n){return}var r=this.ctx,s=t.fontSizeScale,d=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,p=e.length,g=a.vertical,m=g?1:-1,f=a.defaultVMetrics,h=n*t.fontMatrix[0],y=t.textRenderingMode===o.TextRenderingMode.FILL&&!a.disableFontFace&&!t.patternFill;r.save();var A;if(t.patternFill){r.save();var w=t.fillColor.getPattern(r,this);A=r.mozCurrentTransform;r.restore();r.fillStyle=w}r.transform.apply(r,t.textMatrix);r.translate(t.x,t.y+t.textRise);if(0<c){r.scale(u,-1)}else{r.scale(u,1)}var v=t.lineWidth,_=!1,b=t.textMatrixScale;if(0===b||0===v){var U=t.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(U===o.TextRenderingMode.STROKE||U===o.TextRenderingMode.FILL_STROKE){this._cachedGetSinglePixelWidth=null;v=this.getSinglePixelWidth();_=0>v}}else{v/=b}if(1!==s){r.scale(s,s);v/=s}r.lineWidth=v;var S=0,k;for(k=0;k<p;++k){var j=e[k];if((0,o.isNum)(j)){S+=m*j*n/1e3;continue}var C=!1,P=(j.isSpace?l:0)+d,R=j.fontChar,T=j.accent,E=void 0,F=void 0,L=j.width;if(g){var I=j.vmetric||f,N=-(j.vmetric?I[1]:.5*L)*h,M=I[2]*h;L=I?-I[0]:L;E=N/s;F=(S+M)/s}else{E=S/s;F=0}if(a.remeasure&&0<L){var B=1e3*r.measureText(R).width/n*s;if(L<B&&this.isFontSubpixelAAEnabled){var G=L/B;C=!0;r.save();r.scale(G,1);E/=G}else if(L!==B){E+=(L-B)/2e3*n/s}}if(this.contentVisible&&(j.isInFont||a.missingFile)){if(y&&!T){r.fillText(R,E,F)}else{this.paintChar(R,E,F,A,_);if(T){var D=E+n*T.offset.x/s,O=F-n*T.offset.y/s;this.paintChar(T.fontChar,D,O,A,_)}}}var q=void 0;if(g){q=L*h-P*c}else{q=L*h+P*c}S+=q;if(C){r.restore()}}if(g){t.y-=S}else{t.x+=S*u}r.restore()},showType3Text:function(e){var t=this.ctx,a=this.current,n=a.font,r=a.fontSize,s=a.fontDirection,d=n.vertical?1:-1,l=a.charSpacing,c=a.wordSpacing,u=a.textHScale*s,p=a.fontMatrix||o.FONT_IDENTITY_MATRIX,g=e.length,m=a.textRenderingMode===o.TextRenderingMode.INVISIBLE,f,h,y,A;if(m||0===r){return}this._cachedGetSinglePixelWidth=null;t.save();t.transform.apply(t,a.textMatrix);t.translate(a.x,a.y);t.scale(u,s);for(f=0;f<g;++f){h=e[f];if((0,o.isNum)(h)){A=d*h*r/1e3;this.ctx.translate(A,0);a.x+=A*u;continue}var v=(h.isSpace?c:0)+l,_=n.charProcOperatorList[h.operatorListId];if(!_){(0,o.warn)("Type3 character \"".concat(h.operatorListId,"\" is not available."));continue}if(this.contentVisible){this.processingType3=h;this.save();t.scale(r,r);t.transform.apply(t,p);this.executeOperatorList(_);this.restore()}var b=o.Util.applyTransform([h.width,0],p);y=b[0]*r+v;t.translate(y,0);a.x+=y*u}t.restore();this.processingType3=null},setCharWidth:function(){},setCharWidthAndBounds:function(e,t,a,n,r,o){this.ctx.rect(a,n,r-a,o-n);this.clip();this.endPath()},getColorN_Pattern:function(t){var a=this,n;if("TilingPattern"===t[0]){var r=t[1],o=this.baseTransform||this.ctx.mozCurrentTransform.slice(),i={createCanvasGraphics:function createCanvasGraphics(t){return new e(t,a.commonObjs,a.objs,a.canvasFactory,a.webGLContext)}};n=new s.TilingPattern(t,r,this.ctx,i,o)}else{n=(0,s.getShadingPatternFromIR)(t)}return n},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=!0},setStrokeRGBColor:function(e,t,a){var n=o.Util.makeHexColor(e,t,a);this.ctx.strokeStyle=n;this.current.strokeColor=n},setFillRGBColor:function(e,t,a){var n=o.Util.makeHexColor(e,t,a);this.ctx.fillStyle=n;this.current.fillColor=n;this.current.patternFill=!1},shadingFill:function(e){if(!this.contentVisible){return}var t=this.ctx;this.save();var a=(0,s.getShadingPatternFromIR)(e);t.fillStyle=a.getPattern(t,this,!0);var n=t.mozCurrentTransformInverse;if(n){var r=t.canvas,i=r.width,d=r.height,l=o.Util.applyTransform([0,0],n),c=o.Util.applyTransform([0,d],n),u=o.Util.applyTransform([i,0],n),p=o.Util.applyTransform([i,d],n),g=Math.min(l[0],c[0],u[0],p[0]),m=Math.min(l[1],c[1],u[1],p[1]),f=Math.max(l[0],c[0],u[0],p[0]),h=Math.max(l[1],c[1],u[1],p[1]);this.ctx.fillRect(g,m,f-g,h-m)}else{this.ctx.fillRect(-1e10,-1e10,2e10,2e10)}this.restore()},beginInlineImage:function(){(0,o.unreachable)("Should not call beginInlineImage")},beginImageData:function(){(0,o.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function(e,t){if(!this.contentVisible){return}this.save();this.baseTransformStack.push(this.baseTransform);if(Array.isArray(e)&&6===e.length){this.transform.apply(this,e)}this.baseTransform=this.ctx.mozCurrentTransform;if(t){var a=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],a,n);this.clip();this.endPath()}},paintFormXObjectEnd:function(){if(!this.contentVisible){return}this.restore();this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(e){if(!this.contentVisible){return}this.save();var t=this.ctx;if(!e.isolated){(0,o.info)("TODO: Support non-isolated groups.")}if(e.knockout){(0,o.warn)("Knockout groups not supported.")}var a=t.mozCurrentTransform;if(e.matrix){t.transform.apply(t,e.matrix)}if(!e.bbox){throw new Error("Bounding box is required.")}var n=o.Util.getAxialAlignedBoundingBox(e.bbox,t.mozCurrentTransform),r=[0,0,t.canvas.width,t.canvas.height];n=o.Util.intersect(n,r)||[0,0,0,0];var s=Math.floor(n[0]),i=Math.floor(n[1]),d=Math.max(Math.ceil(n[2])-s,1),c=Math.max(Math.ceil(n[3])-i,1),u=1,p=1;if(d>l){u=d/l;d=l}if(c>l){p=c/l;c=l}var g="groupAt"+this.groupLevel;if(e.smask){g+="_smask_"+this.smaskCounter++%2}var f=this.cachedCanvases.getCanvas(g,d,c,!0),h=f.context;h.scale(1/u,1/p);h.translate(-s,-i);h.transform.apply(h,a);if(e.smask){this.smaskStack.push({canvas:f.canvas,context:h,offsetX:s,offsetY:i,scaleX:u,scaleY:p,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null})}else{t.setTransform(1,0,0,1,0,0);t.translate(s,i);t.scale(u,p)}m(t,h);this.ctx=h;this.setGState([["BM","source-over"],["ca",1],["CA",1]]);this.groupStack.push(t);this.groupLevel++;this.current.activeSMask=null},endGroup:function(e){if(!this.contentVisible){return}this.groupLevel--;var t=this.ctx;this.ctx=this.groupStack.pop();if(this.ctx.imageSmoothingEnabled!==void 0){this.ctx.imageSmoothingEnabled=!1}else{this.ctx.mozImageSmoothingEnabled=!1}if(e.smask){this.tempSMask=this.smaskStack.pop()}else{this.ctx.drawImage(t.canvas,0,0)}this.restore()},beginAnnotations:function(){this.save();if(this.baseTransform){this.ctx.setTransform.apply(this.ctx,this.baseTransform)}},endAnnotations:function(){this.restore()},beginAnnotation:function(e,t,a){this.save();f(this.ctx);this.current=new g;if(Array.isArray(e)&&4===e.length){var n=e[2]-e[0],r=e[3]-e[1];this.ctx.rect(e[0],e[1],n,r);this.clip();this.endPath()}this.transform.apply(this,t);this.transform.apply(this,a)},endAnnotation:function(){this.restore()},paintImageMaskXObject:function(e){if(!this.contentVisible){return}var t=this.ctx,n=e.width,o=e.height,s=this.current.fillColor,i=this.current.patternFill,d=this.processingType3;if(!0&&d&&d.compiled===void 0){if(n<=c&&o<=c){d.compiled=r({data:e.data,width:n,height:o})}else{d.compiled=null}}if(null===d||void 0===d?void 0:d.compiled){d.compiled(t);return}var l=this.cachedCanvases.getCanvas("maskCanvas",n,o),u=l.context;u.save();a(u,e);u.globalCompositeOperation="source-in";u.fillStyle=i?s.getPattern(u,this):s;u.fillRect(0,0,n,o);u.restore();this.paintInlineImageXObject(l.canvas)},paintImageMaskXObjectRepeat:function paintImageMaskXObjectRepeat(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:0,o=4<arguments.length?arguments[4]:void 0,s=5<arguments.length?arguments[5]:void 0;if(!this.contentVisible){return}var d=e.width,l=e.height,c=this.current.fillColor,u=this.current.patternFill,p=this.cachedCanvases.getCanvas("maskCanvas",d,l),g=p.context;g.save();a(g,e);g.globalCompositeOperation="source-in";g.fillStyle=u?c.getPattern(g,this):c;g.fillRect(0,0,d,l);g.restore();for(var m=this.ctx,f=0,h=s.length;f<h;f+=2){m.save();m.transform(t,n,r,o,s[f],s[f+1]);m.scale(1,-1);m.drawImage(p.canvas,0,0,d,l,0,-1,1,1);m.restore()}},paintImageMaskXObjectGroup:function(e){if(!this.contentVisible){return}for(var t=this.ctx,n=this.current.fillColor,r=this.current.patternFill,o=0,s=e.length;o<s;o++){var d=e[o],l=d.width,c=d.height,u=this.cachedCanvases.getCanvas("maskCanvas",l,c),p=u.context;p.save();a(p,d);p.globalCompositeOperation="source-in";p.fillStyle=r?n.getPattern(p,this):n;p.fillRect(0,0,l,c);p.restore();t.save();t.transform.apply(t,d.transform);t.scale(1,-1);t.drawImage(u.canvas,0,0,l,c,0,-1,1,1);t.restore()}},paintImageXObject:function(e){if(!this.contentVisible){return}var t=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);if(!t){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)},paintImageXObjectRepeat:function(e,t,a,n){if(!this.contentVisible){return}var r=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);if(!r){(0,o.warn)("Dependent image isn't ready yet");return}for(var s=r.width,d=r.height,l=[],c=0,u=n.length;c<u;c+=2){l.push({transform:[t,0,0,a,n[c],n[c+1]],x:0,y:0,w:s,h:d})}this.paintInlineImageXObjectGroup(r,l)},paintInlineImageXObject:function(e){if(!this.contentVisible){return}var n=e.width,r=e.height,o=this.ctx;this.save();o.scale(1/n,-1/r);var s=o.mozCurrentTransformInverse,i=s[0],a=s[1],l=Math.max(Math.sqrt(i*i+a*a),1),u=s[2],c=s[3],d=Math.max(Math.sqrt(u*u+c*c),1),p,g,m;if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data){p=e}else{g=this.cachedCanvases.getCanvas("inlineImage",n,r);m=g.context;t(m,e,this.current.transferMaps);p=g.canvas}var f=n,h=r,y="prescale1";while(2<l&&1<f||2<d&&1<h){var A=f,v=h;if(2<l&&1<f){A=Math.ceil(f/2);l/=f/A}if(2<d&&1<h){v=Math.ceil(h/2);d/=h/v}g=this.cachedCanvases.getCanvas(y,A,v);m=g.context;m.clearRect(0,0,A,v);m.drawImage(p,0,0,f,h,0,0,A,v);p=g.canvas;f=A;h=v;y="prescale1"===y?"prescale2":"prescale1"}o.drawImage(p,0,0,f,h,0,-r,n,r);if(this.imageLayer){var _=this.getCanvasPosition(0,-r);this.imageLayer.appendImage({imgData:e,left:_[0],top:_[1],width:n/s[0],height:r/s[3]})}this.restore()},paintInlineImageXObjectGroup:function(e,a){if(!this.contentVisible){return}var n=this.ctx,r=e.width,o=e.height,s=this.cachedCanvases.getCanvas("inlineImage",r,o),d=s.context;t(d,e,this.current.transferMaps);for(var l=0,i=a.length,c;l<i;l++){c=a[l];n.save();n.transform.apply(n,c.transform);n.scale(1,-1);n.drawImage(s.canvas,c.x,c.y,c.w,c.h,0,-1,1,1);if(this.imageLayer){var u=this.getCanvasPosition(c.x,c.y);this.imageLayer.appendImage({imgData:e,left:u[0],top:u[1],width:r,height:o})}n.restore()}},paintSolidColorImageMask:function(){if(!this.contentVisible){return}this.ctx.fillRect(0,0,1,1)},markPoint:function(){},markPointProps:function(){},beginMarkedContent:function(){this.markedContentStack.push({visible:!0})},beginMarkedContentProps:function(e,t){if("OC"===e){this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)})}else{this.markedContentStack.push({visible:!0})}this.contentVisible=this.isContentVisible()},endMarkedContent:function(){this.markedContentStack.pop();this.contentVisible=this.isContentVisible()},beginCompat:function(){},endCompat:function(){},consumePath:function(){var e=this.ctx;if(this.pendingClip){if(this.pendingClip===x){e.clip("evenodd")}else{e.clip()}this.pendingClip=null}e.beginPath()},getSinglePixelWidth:function getSinglePixelWidth(){if(null===this._cachedGetSinglePixelWidth){var e=this.ctx.mozCurrentTransform,t=Math.abs(e[0]*e[3]-e[2]*e[1]),a=Math.pow(e[0],2)+Math.pow(e[2],2),n=Math.pow(e[1],2)+Math.pow(e[3],2),r=Math.sqrt(Math.max(a,n))/t;if(a!==n&&1<this._combinedScaleFactor*r){this._cachedGetSinglePixelWidth=-(this._combinedScaleFactor*r)}else if(t>Number.EPSILON){this._cachedGetSinglePixelWidth=1.0000001*r}else{this._cachedGetSinglePixelWidth=1}}return this._cachedGetSinglePixelWidth},getCanvasPosition:function(e,t){var a=this.ctx.mozCurrentTransform;return[a[0]*e+a[2]*t+a[4],a[1]*e+a[3]*t+a[5]]},isContentVisible:function(){for(var e=this.markedContentStack.length-1;0<=e;e--){if(!this.markedContentStack[e].visible){return!1}}return!0}};for(var P in o.OPS){e.prototype[o.OPS[P]]=e.prototype[P]}return e}();t.CanvasGraphics=m},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.getShadingPatternFromIR=function(e){var t=o[e[0]];if(!t){throw new Error("Unknown IR type: ".concat(e[0]))}return t.fromIR(e)};t.TilingPattern=void 0;var r=a(2),o={};function n(e,t){if(!t||"undefined"==typeof Path2D){return}var a=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],a,n);e.clip(r)}o.RadialAxial={fromIR:function(e){var t=e[1],a=e[2],r=e[3],o=e[4],s=e[5],i=e[6],d=e[7];return{getPattern:function(e){n(e,a);var l;if("axial"===t){l=e.createLinearGradient(o[0],o[1],s[0],s[1])}else if("radial"===t){l=e.createRadialGradient(o[0],o[1],i,s[0],s[1],d)}for(var u=0,i=r.length,p;u<i;++u){p=r[u];l.addColorStop(p[0],p[1])}return l}}}};var s=function(){function e(e,t,a,n,r,o,s,i){var d=t.coords,l=t.colors,c=e.data,u=4*e.width,p;if(d[a+1]>d[n+1]){p=a;a=n;n=p;p=o;o=s;s=p}if(d[n+1]>d[r+1]){p=n;n=r;r=p;p=s;s=i;i=p}if(d[a+1]>d[n+1]){p=a;a=n;n=p;p=o;o=s;s=p}var g=(d[a]+t.offsetX)*t.scaleX,m=(d[a+1]+t.offsetY)*t.scaleY,f=(d[n]+t.offsetX)*t.scaleX,h=(d[n+1]+t.offsetY)*t.scaleY,A=(d[r]+t.offsetX)*t.scaleX,v=(d[r+1]+t.offsetY)*t.scaleY;if(m>=v){return}for(var _=l[o],b=l[o+1],S=l[o+2],C=l[s],P=l[s+1],R=l[s+2],T=l[i],E=l[i+1],F=l[i+2],L=Math.round(m),I=Math.round(v),N,M,D,O,w,U,B,G,q=L;q<=I;q++){if(q<h){var X=void 0;if(q<m){X=0}else if(m===h){X=1}else{X=(m-q)/(m-h)}N=g-(g-f)*X;M=_-(_-C)*X;D=b-(b-P)*X;O=S-(S-R)*X}else{var Y=void 0;if(q>v){Y=1}else if(h===v){Y=0}else{Y=(h-q)/(h-v)}N=f-(f-A)*Y;M=C-(C-T)*Y;D=P-(P-E)*Y;O=R-(R-F)*Y}var K=void 0;if(q<m){K=0}else if(q>v){K=1}else{K=(m-q)/(m-v)}w=g-(g-A)*K;U=_-(_-T)*K;B=b-(b-E)*K;G=S-(S-F)*K;for(var W=Math.round(Math.min(N,w)),H=Math.round(Math.max(N,w)),V=u*q+4*W,z=W;z<=H;z++){K=(N-z)/(N-w);if(0>K){K=0}else if(1<K){K=1}c[V++]=0|M-(M-U)*K;c[V++]=0|D-(D-B)*K;c[V++]=0|O-(O-G)*K;c[V++]=255}}}function t(t,a,n){var r=a.coords,o=a.colors,s,d;switch(a.type){case"lattice":var l=a.verticesPerRow,c=Math.floor(r.length/l)-1;for(s=0;s<c;s++){for(var u=s*l,p=0;p<l-1;p++,u++){e(t,n,r[u],r[u+1],r[u+l],o[u],o[u+1],o[u+l]);e(t,n,r[u+l+1],r[u+1],r[u+l],o[u+l+1],o[u+1],o[u+l])}}break;case"triangles":for(s=0,d=r.length;s<d;s+=3){e(t,n,r[s],r[s+1],r[s+2],o[s],o[s+1],o[s+2])}break;default:throw new Error("illegal figure");}}return function(e,a,n,r,o,s,d,l){var c=1.1,u=3e3,p=2,g=Math.floor(e[0]),m=Math.floor(e[1]),f=Math.ceil(e[2])-g,h=Math.ceil(e[3])-m,y=Math.min(Math.ceil(Math.abs(f*a[0]*c)),u),A=Math.min(Math.ceil(Math.abs(h*a[1]*c)),u),v=f/y,_=h/A,b={coords:n,colors:r,offsetX:-g,offsetY:-m,scaleX:1/v,scaleY:1/_},S=y+2*p,k=A+2*p,C,x,P,R;if(l.isEnabled){C=l.drawFigures({width:y,height:A,backgroundColor:s,figures:o,context:b});x=d.getCanvas("mesh",S,k,!1);x.context.drawImage(C,p,p);C=x.canvas}else{x=d.getCanvas("mesh",S,k,!1);var T=x.context,E=T.createImageData(y,A);if(s){var F=E.data;for(P=0,R=F.length;P<R;P+=4){F[P]=s[0];F[P+1]=s[1];F[P+2]=s[2];F[P+3]=255}}for(P=0;P<o.length;P++){t(E,o[P],b)}T.putImageData(E,p,p);C=x.canvas}return{canvas:C,offsetX:g-p*v,offsetY:m-p*_,scaleX:v,scaleY:_}}}();o.Mesh={fromIR:function(e){var t=e[2],a=e[3],o=e[4],i=e[5],d=e[6],l=e[7],c=e[8];return{getPattern:function(e,u,p){n(e,l);var g;if(p){g=r.Util.singularValueDecompose2dScale(e.mozCurrentTransform)}else{g=r.Util.singularValueDecompose2dScale(u.baseTransform);if(d){var f=r.Util.singularValueDecompose2dScale(d);g=[g[0]*f[0],g[1]*f[1]]}}var m=s(i,g,t,a,o,p?null:c,u.cachedCanvases,u.webGLContext);if(!p){e.setTransform.apply(e,u.baseTransform);if(d){e.transform.apply(e,d)}}e.translate(m.offsetX,m.offsetY);e.scale(m.scaleX,m.scaleY);return e.createPattern(m.canvas,"no-repeat")}}}};o.Dummy={fromIR:function(){return{getPattern:function(){return"hotpink"}}}};var i=function(){var t={COLORED:1,UNCOLORED:2};function e(e,t,a,n,r){this.operatorList=e[2];this.matrix=e[3]||[1,0,0,1,0,0];this.bbox=e[4];this.xstep=e[5];this.ystep=e[6];this.paintType=e[7];this.tilingType=e[8];this.color=t;this.canvasGraphicsFactory=n;this.baseTransform=r;this.ctx=a}e.prototype={createPatternCanvas:function(e){var t=this.operatorList,a=this.bbox,n=this.xstep,o=this.ystep,s=this.paintType,i=this.tilingType,d=this.color,l=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+i);var c=a[0],u=a[1],p=a[2],g=a[3],m=r.Util.singularValueDecompose2dScale(this.matrix),f=r.Util.singularValueDecompose2dScale(this.baseTransform),h=[m[0]*f[0],m[1]*f[1]],y=this.getSizeAndScale(n,this.ctx.canvas.width,h[0]),A=this.getSizeAndScale(o,this.ctx.canvas.height,h[1]),v=e.cachedCanvases.getCanvas("pattern",y.size,A.size,!0),_=v.context,b=l.createCanvasGraphics(_);b.groupLevel=e.groupLevel;this.setFillAndStrokeStyleToContext(b,s,d);b.transform(y.scale,0,0,A.scale,0,0);b.transform(1,0,0,1,-c,-u);this.clipBbox(b,a,c,u,p,g);b.executeOperatorList(t);this.ctx.transform(1,0,0,1,c,u);this.ctx.scale(1/y.scale,1/A.scale);return v.canvas},getSizeAndScale:function(e,t,a){e=Math.abs(e);var n=Math.max(3e3,t),r=Math.ceil(e*a);if(r>=n){r=n}else{a=r/e}return{scale:a,size:r}},clipBbox:function(e,t,a,n,r,o){if(Array.isArray(t)&&4===t.length){e.ctx.rect(a,n,r-a,o-n);e.clip();e.endPath()}},setFillAndStrokeStyleToContext:function(e,a,n){var o=e.ctx,s=e.current;switch(a){case t.COLORED:var i=this.ctx;o.fillStyle=i.fillStyle;o.strokeStyle=i.strokeStyle;s.fillColor=i.fillStyle;s.strokeColor=i.strokeStyle;break;case t.UNCOLORED:var d=r.Util.makeHexColor(n[0],n[1],n[2]);o.fillStyle=d;o.strokeStyle=d;s.fillColor=d;s.strokeColor=d;break;default:throw new r.FormatError("Unsupported paint type: ".concat(a));}},getPattern:function(e,t){e=this.ctx;e.setTransform.apply(e,this.baseTransform);e.transform.apply(e,this.matrix);var a=this.createPatternCanvas(t);return e.createPattern(a,"repeat")}};return e}();t.TilingPattern=i},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.GlobalWorkerOptions=void 0;var a=Object.create(null);t.GlobalWorkerOptions=a;a.workerPort=a.workerPort===void 0?null:a.workerPort;a.workerSrc=a.workerSrc===void 0?"":a.workerSrc},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.MessageHandler=void 0;var r=a(2),o={UNKNOWN:0,DATA:1,ERROR:2},s={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function n(e){if("object"!==_typeof(e)||null===e){return e}switch(e.name){case"AbortException":return new r.AbortException(e.message);case"MissingPDFException":return new r.MissingPDFException(e.message);case"UnexpectedResponseException":return new r.UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new r.UnknownErrorException(e.message,e.details);default:return new r.UnknownErrorException(e.message,e.toString());}}var i=function(){function e(t,a,r){var s=this;_classCallCheck(this,e);this.sourceName=t;this.targetName=a;this.comObj=r;this.callbackId=1;this.streamId=1;this.postMessageTransfers=!0;this.streamSinks=Object.create(null);this.streamControllers=Object.create(null);this.callbackCapabilities=Object.create(null);this.actionHandler=Object.create(null);this._onComObjOnMessage=function(e){var t=e.data;if(t.targetName!==s.sourceName){return}if(t.stream){s._processStreamMessage(t);return}if(t.callback){var a=t.callbackId,i=s.callbackCapabilities[a];if(!i){throw new Error("Cannot resolve callback ".concat(a))}delete s.callbackCapabilities[a];if(t.callback===o.DATA){i.resolve(t.data)}else if(t.callback===o.ERROR){i.reject(n(t.reason))}else{throw new Error("Unexpected callback case")}return}var d=s.actionHandler[t.action];if(!d){throw new Error("Unknown action from worker: ".concat(t.action))}if(t.callbackId){var l=s.sourceName,c=t.sourceName;new Promise(function(e){e(d(t.data))}).then(function(e){r.postMessage({sourceName:l,targetName:c,callback:o.DATA,callbackId:t.callbackId,data:e})},function(e){r.postMessage({sourceName:l,targetName:c,callback:o.ERROR,callbackId:t.callbackId,reason:n(e)})});return}if(t.streamId){s._createStreamSink(t);return}d(t.data)};r.addEventListener("message",this._onComObjOnMessage)}_createClass(e,[{key:"on",value:function on(e,t){var a=this.actionHandler;if(a[e]){throw new Error("There is already an actionName called \"".concat(e,"\""))}a[e]=t}},{key:"send",value:function send(e,t,a){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},a)}},{key:"sendWithPromise",value:function sendWithPromise(e,t,a){var n=this.callbackId++,o=(0,r.createPromiseCapability)();this.callbackCapabilities[n]=o;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:n,data:t},a)}catch(e){o.reject(e)}return o.promise}},{key:"sendWithStream",value:function sendWithStream(e,t,a,o){var i=this,d=this.streamId++,l=this.sourceName,c=this.targetName,u=this.comObj;return new ReadableStream({start:function start(a){var n=(0,r.createPromiseCapability)();i.streamControllers[d]={controller:a,startCall:n,pullCall:null,cancelCall:null,isClosed:!1};i._postMessage({sourceName:l,targetName:c,action:e,streamId:d,data:t,desiredSize:a.desiredSize},o);return n.promise},pull:function pull(e){var t=(0,r.createPromiseCapability)();i.streamControllers[d].pullCall=t;u.postMessage({sourceName:l,targetName:c,stream:s.PULL,streamId:d,desiredSize:e.desiredSize});return t.promise},cancel:function cancel(e){(0,r.assert)(e instanceof Error,"cancel must have a valid reason");var t=(0,r.createPromiseCapability)();i.streamControllers[d].cancelCall=t;i.streamControllers[d].isClosed=!0;u.postMessage({sourceName:l,targetName:c,stream:s.CANCEL,streamId:d,reason:n(e)});return t.promise}},a)}},{key:"_createStreamSink",value:function _createStreamSink(e){var t=this,a=this.actionHandler[e.action],o=e.streamId,i=this.sourceName,d=e.sourceName,l=this.comObj,c={enqueue:function enqueue(e){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,n=2<arguments.length?arguments[2]:void 0;if(this.isCancelled){return}var l=this.desiredSize;this.desiredSize-=a;if(0<l&&0>=this.desiredSize){this.sinkCapability=(0,r.createPromiseCapability)();this.ready=this.sinkCapability.promise}t._postMessage({sourceName:i,targetName:d,stream:s.ENQUEUE,streamId:o,chunk:e},n)},close:function close(){if(this.isCancelled){return}this.isCancelled=!0;l.postMessage({sourceName:i,targetName:d,stream:s.CLOSE,streamId:o});delete t.streamSinks[o]},error:function error(e){(0,r.assert)(e instanceof Error,"error must have a valid reason");if(this.isCancelled){return}this.isCancelled=!0;l.postMessage({sourceName:i,targetName:d,stream:s.ERROR,streamId:o,reason:n(e)})},sinkCapability:(0,r.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve();c.ready=c.sinkCapability.promise;this.streamSinks[o]=c;new Promise(function(t){t(a(e.data,c))}).then(function(){l.postMessage({sourceName:i,targetName:d,stream:s.START_COMPLETE,streamId:o,success:!0})},function(e){l.postMessage({sourceName:i,targetName:d,stream:s.START_COMPLETE,streamId:o,reason:n(e)})})}},{key:"_processStreamMessage",value:function _processStreamMessage(e){var t=e.streamId,a=this.sourceName,o=e.sourceName,i=this.comObj;switch(e.stream){case s.START_COMPLETE:if(e.success){this.streamControllers[t].startCall.resolve()}else{this.streamControllers[t].startCall.reject(n(e.reason))}break;case s.PULL_COMPLETE:if(e.success){this.streamControllers[t].pullCall.resolve()}else{this.streamControllers[t].pullCall.reject(n(e.reason))}break;case s.PULL:if(!this.streamSinks[t]){i.postMessage({sourceName:a,targetName:o,stream:s.PULL_COMPLETE,streamId:t,success:!0});break}if(0>=this.streamSinks[t].desiredSize&&0<e.desiredSize){this.streamSinks[t].sinkCapability.resolve()}this.streamSinks[t].desiredSize=e.desiredSize;var d=this.streamSinks[e.streamId].onPull;new Promise(function(e){e(d&&d())}).then(function(){i.postMessage({sourceName:a,targetName:o,stream:s.PULL_COMPLETE,streamId:t,success:!0})},function(e){i.postMessage({sourceName:a,targetName:o,stream:s.PULL_COMPLETE,streamId:t,reason:n(e)})});break;case s.ENQUEUE:(0,r.assert)(this.streamControllers[t],"enqueue should have stream controller");if(this.streamControllers[t].isClosed){break}this.streamControllers[t].controller.enqueue(e.chunk);break;case s.CLOSE:(0,r.assert)(this.streamControllers[t],"close should have stream controller");if(this.streamControllers[t].isClosed){break}this.streamControllers[t].isClosed=!0;this.streamControllers[t].controller.close();this._deleteStreamController(t);break;case s.ERROR:(0,r.assert)(this.streamControllers[t],"error should have stream controller");this.streamControllers[t].controller.error(n(e.reason));this._deleteStreamController(t);break;case s.CANCEL_COMPLETE:if(e.success){this.streamControllers[t].cancelCall.resolve()}else{this.streamControllers[t].cancelCall.reject(n(e.reason))}this._deleteStreamController(t);break;case s.CANCEL:if(!this.streamSinks[t]){break}var l=this.streamSinks[e.streamId].onCancel;new Promise(function(t){t(l&&l(n(e.reason)))}).then(function(){i.postMessage({sourceName:a,targetName:o,stream:s.CANCEL_COMPLETE,streamId:t,success:!0})},function(e){i.postMessage({sourceName:a,targetName:o,stream:s.CANCEL_COMPLETE,streamId:t,reason:n(e)})});this.streamSinks[t].sinkCapability.reject(n(e.reason));this.streamSinks[t].isCancelled=!0;delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case");}}},{key:"_deleteStreamController",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1){switch(e.prev=e.next){case 0:e.next=2;return Promise.allSettled([this.streamControllers[t].startCall,this.streamControllers[t].pullCall,this.streamControllers[t].cancelCall].map(function(e){return e&&e.promise}));case 2:delete this.streamControllers[t];case 3:case"end":return e.stop();}}},e,this)}));return function _deleteStreamController(){return e.apply(this,arguments)}}()},{key:"_postMessage",value:function _postMessage(e,t){if(t&&this.postMessageTransfers){this.comObj.postMessage(e,t)}else{this.comObj.postMessage(e)}}},{key:"destroy",value:function destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]);return e}();t.MessageHandler=i},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.Metadata=void 0;var n=a(2),r=a(15),o=function(){function e(t){_classCallCheck(this,e);(0,n.assert)("string"==typeof t,"Metadata: input is not a string");t=this._repair(t);var a=new r.SimpleXMLParser({lowerCaseName:!0}),o=a.parseFromString(t);this._metadataMap=new Map;if(o){this._parse(o)}this._data=t}_createClass(e,[{key:"_repair",value:function _repair(e){return e.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,function(e,t){for(var a=t.replace(/\\([0-3])([0-7])([0-7])/g,function(e,t,a,n){return String.fromCharCode(64*t+8*a+1*n)}).replace(/&(amp|apos|gt|lt|quot);/g,function(e,t){switch(t){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return"\"";}throw new Error("_repair: ".concat(t," isn't defined."))}),n="",r=0,o=a.length,s;r<o;r+=2){s=256*a.charCodeAt(r)+a.charCodeAt(r+1);if(32<=s&&127>s&&60!==s&&62!==s&&38!==s){n+=String.fromCharCode(s)}else{n+="&#x"+(65536+s).toString(16).substring(1)+";"}}return">"+n})}},{key:"_getSequence",value:function _getSequence(e){var t=e.nodeName;if("rdf:bag"!==t&&"rdf:seq"!==t&&"rdf:alt"!==t){return null}return e.childNodes.filter(function(e){return"rdf:li"===e.nodeName})}},{key:"_getCreators",value:function _getCreators(e){if("dc:creator"!==e.nodeName){return!1}if(!e.hasChildNodes()){return!0}var t=e.childNodes[0],a=this._getSequence(t)||[];this._metadataMap.set(e.nodeName,a.map(function(e){return e.textContent.trim()}));return!0}},{key:"_parse",value:function _parse(e){var t=e.documentElement;if("rdf:rdf"!==t.nodeName){t=t.firstChild;while(t&&"rdf:rdf"!==t.nodeName){t=t.nextSibling}}if(!t||"rdf:rdf"!==t.nodeName||!t.hasChildNodes()){return}var a=_createForOfIteratorHelper(t.childNodes),n;try{for(a.s();!(n=a.n()).done;){var d=n.value;if("rdf:description"!==d.nodeName){continue}var r=_createForOfIteratorHelper(d.childNodes),o;try{for(r.s();!(o=r.n()).done;){var s=o.value,i=s.nodeName;if("#text"===i){continue}if(this._getCreators(s)){continue}this._metadataMap.set(i,s.textContent.trim())}}catch(e){r.e(e)}finally{r.f()}}}catch(e){a.e(e)}finally{a.f()}}},{key:"getRaw",value:function getRaw(){return this._data}},{key:"get",value:function get(e){var t;return null!==(t=this._metadataMap.get(e))&&void 0!==t?t:null}},{key:"getAll",value:function getAll(){return(0,n.objectFromEntries)(this._metadataMap)}},{key:"has",value:function has(e){return this._metadataMap.has(e)}}]);return e}();t.Metadata=o},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.SimpleXMLParser=t.SimpleDOMNode=void 0;var o=a(2),s={NoError:0,EndOfDocument:-1,UnterminatedCdat:-2,UnterminatedXmlDeclaration:-3,UnterminatedDoctypeDeclaration:-4,UnterminatedComment:-5,MalformedElement:-6,OutOfMemory:-7,UnterminatedAttributeValue:-8,UnterminatedElement:-9,ElementNeverBegun:-10};function n(e,t){var a=e[t];return" "===a||"\n"===a||"\r"===a||"\t"===a}function r(e){for(var t=0,a=e.length;t<a;t++){if(!n(e,t)){return!1}}return!0}var i=function(){function e(){_classCallCheck(this,e)}_createClass(e,[{key:"_resolveEntities",value:function _resolveEntities(e){var t=this;return e.replace(/&([^;]+);/g,function(e,a){if("#x"===a.substring(0,2)){return String.fromCodePoint(parseInt(a.substring(2),16))}else if("#"===a.substring(0,1)){return String.fromCodePoint(parseInt(a.substring(1),10))}switch(a){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return"\"";}return t.onResolveEntity(a)})}},{key:"_parseContent",value:function _parseContent(e,t){var r=[],o=t;function a(){while(o<e.length&&n(e,o)){++o}}while(o<e.length&&!n(e,o)&&">"!==e[o]&&"/"!==e[o]){++o}var s=e.substring(t,o);a();while(o<e.length&&">"!==e[o]&&"/"!==e[o]&&"?"!==e[o]){a();var i="",d="";while(o<e.length&&!n(e,o)&&"="!==e[o]){i+=e[o];++o}a();if("="!==e[o]){return null}++o;a();var l=e[o];if("\""!==l&&"'"!==l){return null}var c=e.indexOf(l,++o);if(0>c){return null}d=e.substring(o,c);r.push({name:i,value:this._resolveEntities(d)});o=c+1;a()}return{name:s,attributes:r,parsed:o-t}}},{key:"_parseProcessingInstruction",value:function _parseProcessingInstruction(e,t){var r=t;function a(){while(r<e.length&&n(e,r)){++r}}while(r<e.length&&!n(e,r)&&">"!==e[r]&&"/"!==e[r]){++r}var o=e.substring(t,r);a();var s=r;while(r<e.length&&("?"!==e[r]||">"!==e[r+1])){++r}var i=e.substring(s,r);return{name:o,value:i,parsed:r-t}}},{key:"parseXml",value:function parseXml(e){var t=0;while(t<e.length){var a=e[t],n=t;if("<"===a){++n;var r=e[n],o=void 0;switch(r){case"/":++n;o=e.indexOf(">",n);if(0>o){this.onError(s.UnterminatedElement);return}this.onEndElement(e.substring(n,o));n=o+1;break;case"?":++n;var c=this._parseProcessingInstruction(e,n);if("?>"!==e.substring(n+c.parsed,n+c.parsed+2)){this.onError(s.UnterminatedXmlDeclaration);return}this.onPi(c.name,c.value);n+=c.parsed+2;break;case"!":if("--"===e.substring(n+1,n+3)){o=e.indexOf("-->",n+3);if(0>o){this.onError(s.UnterminatedComment);return}this.onComment(e.substring(n+3,o));n=o+3}else if("[CDATA["===e.substring(n+1,n+8)){o=e.indexOf("]]>",n+8);if(0>o){this.onError(s.UnterminatedCdat);return}this.onCdata(e.substring(n+8,o));n=o+3}else if("DOCTYPE"===e.substring(n+1,n+8)){var d=e.indexOf("[",n+8),l=!1;o=e.indexOf(">",n+8);if(0>o){this.onError(s.UnterminatedDoctypeDeclaration);return}if(0<d&&o>d){o=e.indexOf("]>",n+8);if(0>o){this.onError(s.UnterminatedDoctypeDeclaration);return}l=!0}var u=e.substring(n+8,o+(l?1:0));this.onDoctype(u);n=o+(l?2:1)}else{this.onError(s.MalformedElement);return}break;default:var p=this._parseContent(e,n);if(null===p){this.onError(s.MalformedElement);return}var g=!1;if("/>"===e.substring(n+p.parsed,n+p.parsed+2)){g=!0}else if(">"!==e.substring(n+p.parsed,n+p.parsed+1)){this.onError(s.UnterminatedElement);return}this.onBeginElement(p.name,p.attributes,g);n+=p.parsed+(g?2:1);break;}}else{while(n<e.length&&"<"!==e[n]){n++}var m=e.substring(t,n);this.onText(this._resolveEntities(m))}t=n}}},{key:"onResolveEntity",value:function onResolveEntity(e){return"&".concat(e,";")}},{key:"onPi",value:function onPi(){}},{key:"onComment",value:function onComment(){}},{key:"onCdata",value:function onCdata(){}},{key:"onDoctype",value:function onDoctype(){}},{key:"onText",value:function onText(){}},{key:"onBeginElement",value:function onBeginElement(){}},{key:"onEndElement",value:function onEndElement(){}},{key:"onError",value:function onError(){}}]);return e}(),d=function(){function e(t,a){_classCallCheck(this,e);this.nodeName=t;this.nodeValue=a;Object.defineProperty(this,"parentNode",{value:null,writable:!0})}_createClass(e,[{key:"hasChildNodes",value:function hasChildNodes(){return this.childNodes&&0<this.childNodes.length}},{key:"searchNode",value:function searchNode(e,t){if(t>=e.length){return this}var a=e[t],n=[],r=this;while(!0){if(a.name===r.nodeName){if(0===a.pos){var h=r.searchNode(e,t+1);if(null!==h){return h}}else if(0===n.length){return null}else{var o=n.pop(),s=_slicedToArray(o,1),i=s[0],d=0,l=_createForOfIteratorHelper(i.childNodes),c;try{for(l.s();!(c=l.n()).done;){var y=c.value;if(a.name===y.nodeName){if(d===a.pos){return y.searchNode(e,t+1)}d++}}}catch(e){l.e(e)}finally{l.f()}return r.searchNode(e,t+1)}}if(r.childNodes&&0!==r.childNodes.length){n.push([r,0]);r=r.childNodes[0]}else if(0===n.length){return null}else{while(0!==n.length){var u=n.pop(),p=_slicedToArray(u,2),g=p[0],m=p[1],f=m+1;if(f<g.childNodes.length){n.push([g,f]);r=g.childNodes[f];break}}if(0===n.length){return null}}}}},{key:"dump",value:function dump(e){if("#text"===this.nodeName){e.push((0,o.encodeToXmlString)(this.nodeValue));return}e.push("<".concat(this.nodeName));if(this.attributes){var t=_createForOfIteratorHelper(this.attributes),a;try{for(t.s();!(a=t.n()).done;){var s=a.value;e.push(" ".concat(s.name,"=\"").concat((0,o.encodeToXmlString)(s.value),"\""))}}catch(e){t.e(e)}finally{t.f()}}if(this.hasChildNodes()){e.push(">");var n=_createForOfIteratorHelper(this.childNodes),r;try{for(n.s();!(r=n.n()).done;){var i=r.value;i.dump(e)}}catch(e){n.e(e)}finally{n.f()}e.push("</".concat(this.nodeName,">"))}else if(this.nodeValue){e.push(">".concat((0,o.encodeToXmlString)(this.nodeValue),"</").concat(this.nodeName,">"))}else{e.push("/>")}}},{key:"firstChild",get:function get(){return this.childNodes&&this.childNodes[0]}},{key:"nextSibling",get:function get(){var e=this.parentNode.childNodes;if(!e){return}var t=e.indexOf(this);if(-1===t){return}return e[t+1]}},{key:"textContent",get:function get(){if(!this.childNodes){return this.nodeValue||""}return this.childNodes.map(function(e){return e.textContent}).join("")}}]);return e}();t.SimpleDOMNode=d;var l=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){var n,r=e.hasAttributes,o=void 0===r?!1:r,i=e.lowerCaseName,d=void 0===i?!1:i;_classCallCheck(this,t);n=a.call(this);n._currentFragment=null;n._stack=null;n._errorCode=s.NoError;n._hasAttributes=o;n._lowerCaseName=d;return n}_createClass(t,[{key:"parseFromString",value:function parseFromString(e){this._currentFragment=[];this._stack=[];this._errorCode=s.NoError;this.parseXml(e);if(this._errorCode!==s.NoError){return}var t=_slicedToArray(this._currentFragment,1),a=t[0];if(!a){return}return{documentElement:a}}},{key:"onResolveEntity",value:function onResolveEntity(e){switch(e){case"apos":return"'";}return _get(_getPrototypeOf(t.prototype),"onResolveEntity",this).call(this,e)}},{key:"onText",value:function onText(e){if(r(e)){return}var t=new d("#text",e);this._currentFragment.push(t)}},{key:"onCdata",value:function onCdata(e){var t=new d("#text",e);this._currentFragment.push(t)}},{key:"onBeginElement",value:function onBeginElement(e,t,a){if(this._lowerCaseName){e=e.toLowerCase()}var n=new d(e);n.childNodes=[];if(this._hasAttributes){n.attributes=t}this._currentFragment.push(n);if(a){return}this._stack.push(this._currentFragment);this._currentFragment=n.childNodes}},{key:"onEndElement",value:function onEndElement(){this._currentFragment=this._stack.pop()||[];var e=this._currentFragment[this._currentFragment.length-1];if(!e){return}for(var t=0,a=e.childNodes.length;t<a;t++){e.childNodes[t].parentNode=e}}},{key:"onError",value:function onError(e){this._errorCode=e}}]);return t}(i);t.SimpleXMLParser=l},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.OptionalContentConfig=void 0;var n=a(2),r=function e(t,a){_classCallCheck(this,e);this.visible=!0;this.name=t;this.intent=a},o=function(){function e(t){_classCallCheck(this,e);this.name=null;this.creator=null;this._order=null;this._groups=new Map;if(null===t){return}this.name=t.name;this.creator=t.creator;this._order=t.order;var a=_createForOfIteratorHelper(t.groups),n;try{for(a.s();!(n=a.n()).done;){var u=n.value;this._groups.set(u.id,new r(u.name,u.intent))}}catch(e){a.e(e)}finally{a.f()}if("OFF"===t.baseState){var o=_createForOfIteratorHelper(this._groups),s;try{for(o.s();!(s=o.n()).done;){var p=s.value;p.visible=!1}}catch(e){o.e(e)}finally{o.f()}}var i=_createForOfIteratorHelper(t.on),d;try{for(i.s();!(d=i.n()).done;){var g=d.value;this._groups.get(g).visible=!0}}catch(e){i.e(e)}finally{i.f()}var l=_createForOfIteratorHelper(t.off),c;try{for(l.s();!(c=l.n()).done;){var m=c.value;this._groups.get(m).visible=!1}}catch(e){l.e(e)}finally{l.f()}}_createClass(e,[{key:"isVisible",value:function isVisible(e){if("OCG"===e.type){if(!this._groups.has(e.id)){(0,n.warn)("Optional content group not found: ".concat(e.id));return!0}return this._groups.get(e.id).visible}else if("OCMD"===e.type){if(e.expression){(0,n.warn)("Visibility expression not supported yet.")}if(!e.policy||"AnyOn"===e.policy){var t=_createForOfIteratorHelper(e.ids),a;try{for(t.s();!(a=t.n()).done;){var c=a.value;if(!this._groups.has(c)){(0,n.warn)("Optional content group not found: ".concat(c));return!0}if(this._groups.get(c).visible){return!0}}}catch(e){t.e(e)}finally{t.f()}return!1}else if("AllOn"===e.policy){var r=_createForOfIteratorHelper(e.ids),o;try{for(r.s();!(o=r.n()).done;){var u=o.value;if(!this._groups.has(u)){(0,n.warn)("Optional content group not found: ".concat(u));return!0}if(!this._groups.get(u).visible){return!1}}}catch(e){r.e(e)}finally{r.f()}return!0}else if("AnyOff"===e.policy){var s=_createForOfIteratorHelper(e.ids),i;try{for(s.s();!(i=s.n()).done;){var p=i.value;if(!this._groups.has(p)){(0,n.warn)("Optional content group not found: ".concat(p));return!0}if(!this._groups.get(p).visible){return!0}}}catch(e){s.e(e)}finally{s.f()}return!1}else if("AllOff"===e.policy){var d=_createForOfIteratorHelper(e.ids),l;try{for(d.s();!(l=d.n()).done;){var g=l.value;if(!this._groups.has(g)){(0,n.warn)("Optional content group not found: ".concat(g));return!0}if(this._groups.get(g).visible){return!1}}}catch(e){d.e(e)}finally{d.f()}return!0}(0,n.warn)("Unknown optional content policy ".concat(e.policy,"."));return!0}(0,n.warn)("Unknown group type ".concat(e.type,"."));return!0}},{key:"setVisibility",value:function setVisibility(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!0;if(!this._groups.has(e)){(0,n.warn)("Optional content group not found: ".concat(e));return}this._groups.get(e).visible=!!t}},{key:"getOrder",value:function getOrder(){if(!this._groups.size){return null}if(this._order){return this._order.slice()}return Array.from(this._groups.keys())}},{key:"getGroups",value:function getGroups(){if(!this._groups.size){return null}return(0,n.objectFromEntries)(this._groups)}},{key:"getGroup",value:function getGroup(e){return this._groups.get(e)||null}}]);return e}();t.OptionalContentConfig=o},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.PDFDataTransportStream=void 0;var n=a(2),r=function(){function e(t,a){var r=this;_classCallCheck(this,e);(0,n.assert)(a,"PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.");this._queuedChunks=[];this._progressiveDone=t.progressiveDone||!1;var o=t.initialData;if(0<(null===o||void 0===o?void 0:o.length)){var s=new Uint8Array(o).buffer;this._queuedChunks.push(s)}this._pdfDataRangeTransport=a;this._isStreamingSupported=!t.disableStream;this._isRangeSupported=!t.disableRange;this._contentLength=t.length;this._fullRequestReader=null;this._rangeReaders=[];this._pdfDataRangeTransport.addRangeListener(function(e,t){r._onReceiveData({begin:e,chunk:t})});this._pdfDataRangeTransport.addProgressListener(function(e,t){r._onProgress({loaded:e,total:t})});this._pdfDataRangeTransport.addProgressiveReadListener(function(e){r._onReceiveData({chunk:e})});this._pdfDataRangeTransport.addProgressiveDoneListener(function(){r._onProgressiveDone()});this._pdfDataRangeTransport.transportReady()}_createClass(e,[{key:"_onReceiveData",value:function _onReceiveData(e){var t=new Uint8Array(e.chunk).buffer;if(e.begin===void 0){if(this._fullRequestReader){this._fullRequestReader._enqueue(t)}else{this._queuedChunks.push(t)}}else{var a=this._rangeReaders.some(function(a){if(a._begin!==e.begin){return!1}a._enqueue(t);return!0});(0,n.assert)(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_onProgress",value:function _onProgress(e){if(e.total===void 0){var t=this._rangeReaders[0];if(null===t||void 0===t?void 0:t.onProgress){t.onProgress({loaded:e.loaded})}}else{var a=this._fullRequestReader;if(null===a||void 0===a?void 0:a.onProgress){a.onProgress({loaded:e.loaded,total:e.total})}}}},{key:"_onProgressiveDone",value:function _onProgressiveDone(){if(this._fullRequestReader){this._fullRequestReader.progressiveDone()}this._progressiveDone=!0}},{key:"_removeRangeReader",value:function _removeRangeReader(e){var t=this._rangeReaders.indexOf(e);if(0<=t){this._rangeReaders.splice(t,1)}}},{key:"getFullReader",value:function getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var e=this._queuedChunks;this._queuedChunks=null;return new o(this,e,this._progressiveDone)}},{key:"getRangeReader",value:function getRangeReader(e,t){if(t<=this._progressiveDataLength){return null}var a=new s(this,e,t);this._pdfDataRangeTransport.requestDataRange(e,t);this._rangeReaders.push(a);return a}},{key:"cancelAllRequests",value:function cancelAllRequests(e){if(this._fullRequestReader){this._fullRequestReader.cancel(e)}var t=this._rangeReaders.slice(0);t.forEach(function(t){t.cancel(e)});this._pdfDataRangeTransport.abort()}},{key:"_progressiveDataLength",get:function get(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}}]);return e}();t.PDFDataTransportStream=r;var o=function(){function e(t,a){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!1;_classCallCheck(this,e);this._stream=t;this._done=n||!1;this._filename=null;this._queuedChunks=a||[];this._loaded=0;var r=_createForOfIteratorHelper(this._queuedChunks),o;try{for(r.s();!(o=r.n()).done;){var s=o.value;this._loaded+=s.byteLength}}catch(e){r.e(e)}finally{r.f()}this._requests=[];this._headersReady=Promise.resolve();t._fullRequestReader=this;this.onProgress=null}_createClass(e,[{key:"_enqueue",value:function _enqueue(e){if(this._done){return}if(0<this._requests.length){var t=this._requests.shift();t.resolve({value:e,done:!1})}else{this._queuedChunks.push(e)}this._loaded+=e.byteLength}},{key:"read",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1){switch(e.prev=e.next){case 0:if(!(0<this._queuedChunks.length)){e.next=3;break}t=this._queuedChunks.shift();return e.abrupt("return",{value:t,done:!1});case 3:if(!this._done){e.next=5;break}return e.abrupt("return",{value:void 0,done:!0});case 5:a=(0,n.createPromiseCapability)();this._requests.push(a);return e.abrupt("return",a.promise);case 8:case"end":return e.stop();}}},e,this)}));return function read(){return e.apply(this,arguments)}}()},{key:"cancel",value:function cancel(){this._done=!0;this._requests.forEach(function(e){e.resolve({value:void 0,done:!0})});this._requests=[]}},{key:"progressiveDone",value:function progressiveDone(){if(this._done){return}this._done=!0}},{key:"headersReady",get:function get(){return this._headersReady}},{key:"filename",get:function get(){return this._filename}},{key:"isRangeSupported",get:function get(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function get(){return this._stream._contentLength}}]);return e}(),s=function(){function e(t,a,n){_classCallCheck(this,e);this._stream=t;this._begin=a;this._end=n;this._queuedChunk=null;this._requests=[];this._done=!1;this.onProgress=null}_createClass(e,[{key:"_enqueue",value:function _enqueue(e){if(this._done){return}if(0===this._requests.length){this._queuedChunk=e}else{var t=this._requests.shift();t.resolve({value:e,done:!1});this._requests.forEach(function(e){e.resolve({value:void 0,done:!0})});this._requests=[]}this._done=!0;this._stream._removeRangeReader(this)}},{key:"read",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1){switch(e.prev=e.next){case 0:if(!this._queuedChunk){e.next=4;break}t=this._queuedChunk;this._queuedChunk=null;return e.abrupt("return",{value:t,done:!1});case 4:if(!this._done){e.next=6;break}return e.abrupt("return",{value:void 0,done:!0});case 6:a=(0,n.createPromiseCapability)();this._requests.push(a);return e.abrupt("return",a.promise);case 9:case"end":return e.stop();}}},e,this)}));return function read(){return e.apply(this,arguments)}}()},{key:"cancel",value:function cancel(){this._done=!0;this._requests.forEach(function(e){e.resolve({value:void 0,done:!0})});this._requests=[];this._stream._removeRangeReader(this)}},{key:"isStreamingSupported",get:function get(){return!1}}]);return e}()},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.WebGLContext=void 0;var n=a(2),r=function(){function e(t){var a=t.enable,n=void 0===a?!1:a;_classCallCheck(this,e);this._enabled=!0===n}_createClass(e,[{key:"composeSMask",value:function composeSMask(e){var t=e.layer,a=e.mask,n=e.properties;return o.composeSMask(t,a,n)}},{key:"drawFigures",value:function drawFigures(e){var t=e.width,a=e.height,n=e.backgroundColor,r=e.figures,s=e.context;return o.drawFigures(t,a,n,r,s)}},{key:"clear",value:function clear(){o.cleanup()}},{key:"isEnabled",get:function get(){var e=this._enabled;if(e){e=o.tryInitGL()}return(0,n.shadow)(this,"isEnabled",e)}}]);return e}();t.WebGLContext=r;var o=function(){function e(e,t,a){var n=e.createShader(a);e.shaderSource(n,t);e.compileShader(n);var r=e.getShaderParameter(n,e.COMPILE_STATUS);if(!r){var o=e.getShaderInfoLog(n);throw new Error("Error during shader compilation: "+o)}return n}function t(t,a){return e(t,a,t.VERTEX_SHADER)}function a(t,a){return e(t,a,t.FRAGMENT_SHADER)}function n(e,t){for(var a=e.createProgram(),n=0,r=t.length;n<r;++n){e.attachShader(a,t[n])}e.linkProgram(a);var o=e.getProgramParameter(a,e.LINK_STATUS);if(!o){var s=e.getProgramInfoLog(a);throw new Error("Error during program linking: "+s)}return a}function r(e,t,a){e.activeTexture(a);var n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);return n}var c,u;function o(){if(c){return}u=document.createElement("canvas");c=u.getContext("webgl",{premultipliedalpha:!1})}var p=null;function s(){o();var e=u;u=null;var r=c;c=null;var s=t(r,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             "),i=a(r,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             "),d=n(r,[s,i]);r.useProgram(d);var l={gl:r,canvas:e,resolutionLocation:r.getUniformLocation(d,"u_resolution"),positionLocation:r.getAttribLocation(d,"a_position"),backdropLocation:r.getUniformLocation(d,"u_backdrop"),subtypeLocation:r.getUniformLocation(d,"u_subtype")},g=r.getAttribLocation(d,"a_texCoord"),m=r.getUniformLocation(d,"u_image"),f=r.getUniformLocation(d,"u_mask"),h=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,h);r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),r.STATIC_DRAW);r.enableVertexAttribArray(g);r.vertexAttribPointer(g,2,r.FLOAT,!1,0,0);r.uniform1i(m,0);r.uniform1i(f,1);p=l}function i(e,t,a){var n=e.width,o=e.height;if(!p){s()}var i=p,d=i.canvas,l=i.gl;d.width=n;d.height=o;l.viewport(0,0,l.drawingBufferWidth,l.drawingBufferHeight);l.uniform2f(i.resolutionLocation,n,o);if(a.backdrop){l.uniform4f(i.resolutionLocation,a.backdrop[0],a.backdrop[1],a.backdrop[2],1)}else{l.uniform4f(i.resolutionLocation,0,0,0,0)}l.uniform1i(i.subtypeLocation,"Luminosity"===a.subtype?1:0);var c=r(l,e,l.TEXTURE0),u=r(l,t,l.TEXTURE1),g=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,g);l.bufferData(l.ARRAY_BUFFER,new Float32Array([0,0,n,0,0,o,0,o,n,0,n,o]),l.STATIC_DRAW);l.enableVertexAttribArray(i.positionLocation);l.vertexAttribPointer(i.positionLocation,2,l.FLOAT,!1,0,0);l.clearColor(0,0,0,0);l.enable(l.BLEND);l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA);l.clear(l.COLOR_BUFFER_BIT);l.drawArrays(l.TRIANGLES,0,6);l.flush();l.deleteTexture(c);l.deleteTexture(u);l.deleteBuffer(g);return d}var g=null;function d(){o();var e=u;u=null;var r=c;c=null;var s=t(r,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             "),i=a(r,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             "),d=n(r,[s,i]);r.useProgram(d);var l={gl:r,canvas:e,resolutionLocation:r.getUniformLocation(d,"u_resolution"),scaleLocation:r.getUniformLocation(d,"u_scale"),offsetLocation:r.getUniformLocation(d,"u_offset"),positionLocation:r.getAttribLocation(d,"a_position"),colorLocation:r.getAttribLocation(d,"a_color")};g=l}function l(e,t,a,n,r){if(!g){d()}var o=g,s=o.canvas,l=o.gl;s.width=e;s.height=t;l.viewport(0,0,l.drawingBufferWidth,l.drawingBufferHeight);l.uniform2f(o.resolutionLocation,e,t);for(var c=0,u=0,p=n.length;u<p;u++){switch(n[u].type){case"lattice":var T=0|n[u].coords.length/n[u].verticesPerRow;c+=6*((T-1)*(n[u].verticesPerRow-1));break;case"triangles":c+=n[u].coords.length;break;}}for(var m=new Float32Array(2*c),f=new Uint8Array(3*c),h=r.coords,y=r.colors,A=0,v=0,_=0,b=n.length;_<b;_++){var E=n[_],F=E.coords,L=E.colors;switch(E.type){case"lattice":for(var S=E.verticesPerRow,k=0|F.length/S,C=1,x;C<k;C++){x=C*S+1;for(var I=1;I<S;I++,x++){m[A]=h[F[x-S-1]];m[A+1]=h[F[x-S-1]+1];m[A+2]=h[F[x-S]];m[A+3]=h[F[x-S]+1];m[A+4]=h[F[x-1]];m[A+5]=h[F[x-1]+1];f[v]=y[L[x-S-1]];f[v+1]=y[L[x-S-1]+1];f[v+2]=y[L[x-S-1]+2];f[v+3]=y[L[x-S]];f[v+4]=y[L[x-S]+1];f[v+5]=y[L[x-S]+2];f[v+6]=y[L[x-1]];f[v+7]=y[L[x-1]+1];f[v+8]=y[L[x-1]+2];m[A+6]=m[A+2];m[A+7]=m[A+3];m[A+8]=m[A+4];m[A+9]=m[A+5];m[A+10]=h[F[x]];m[A+11]=h[F[x]+1];f[v+9]=f[v+3];f[v+10]=f[v+4];f[v+11]=f[v+5];f[v+12]=f[v+6];f[v+13]=f[v+7];f[v+14]=f[v+8];f[v+15]=y[L[x]];f[v+16]=y[L[x]+1];f[v+17]=y[L[x]+2];A+=12;v+=18}}break;case"triangles":for(var N=0,M=F.length;N<M;N++){m[A]=h[F[N]];m[A+1]=h[F[N]+1];f[v]=y[L[N]];f[v+1]=y[L[N]+1];f[v+2]=y[L[N]+2];A+=2;v+=3}break;}}if(a){l.clearColor(a[0]/255,a[1]/255,a[2]/255,1)}else{l.clearColor(0,0,0,0)}l.clear(l.COLOR_BUFFER_BIT);var P=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,P);l.bufferData(l.ARRAY_BUFFER,m,l.STATIC_DRAW);l.enableVertexAttribArray(o.positionLocation);l.vertexAttribPointer(o.positionLocation,2,l.FLOAT,!1,0,0);var R=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,R);l.bufferData(l.ARRAY_BUFFER,f,l.STATIC_DRAW);l.enableVertexAttribArray(o.colorLocation);l.vertexAttribPointer(o.colorLocation,3,l.UNSIGNED_BYTE,!1,0,0);l.uniform2f(o.scaleLocation,r.scaleX,r.scaleY);l.uniform2f(o.offsetLocation,r.offsetX,r.offsetY);l.drawArrays(l.TRIANGLES,0,c);l.flush();l.deleteBuffer(P);l.deleteBuffer(R);return s}return{tryInitGL:function tryInitGL(){try{o();return!!c}catch(e){}return!1},composeSMask:i,drawFigures:l,cleanup:function cleanup(){var e,t;if(null===(e=p)||void 0===e?void 0:e.canvas){p.canvas.width=0;p.canvas.height=0}if(null===(t=g)||void 0===t?void 0:t.canvas){g.canvas.width=0;g.canvas.height=0}p=null;g=null}}}()},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.AnnotationLayer=void 0;var n=a(1),o=a(2),s=a(8),i=a(20),d=function(){function e(){_classCallCheck(this,e)}_createClass(e,null,[{key:"create",value:function create(e){var t=e.data.annotationType;switch(t){case o.AnnotationType.LINK:return new c(e);case o.AnnotationType.TEXT:return new u(e);case o.AnnotationType.WIDGET:var a=e.data.fieldType;switch(a){case"Tx":return new g(e);case"Btn":if(e.data.radioButton){return new f(e)}else if(e.data.checkBox){return new m(e)}return new h(e);case"Ch":return new y(e);}return new p(e);case o.AnnotationType.POPUP:return new A(e);case o.AnnotationType.FREETEXT:return new _(e);case o.AnnotationType.LINE:return new b(e);case o.AnnotationType.SQUARE:return new S(e);case o.AnnotationType.CIRCLE:return new k(e);case o.AnnotationType.POLYLINE:return new C(e);case o.AnnotationType.CARET:return new P(e);case o.AnnotationType.INK:return new R(e);case o.AnnotationType.POLYGON:return new x(e);case o.AnnotationType.HIGHLIGHT:return new T(e);case o.AnnotationType.UNDERLINE:return new E(e);case o.AnnotationType.SQUIGGLY:return new F(e);case o.AnnotationType.STRIKEOUT:return new L(e);case o.AnnotationType.STAMP:return new I(e);case o.AnnotationType.FILEATTACHMENT:return new N(e);default:return new l(e);}}}]);return e}(),l=function(){function e(t){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n=a.isRenderable,r=void 0===n?!1:n,o=a.ignoreBorder,s=void 0===o?!1:o,i=a.createQuadrilaterals,d=void 0===i?!1:i;_classCallCheck(this,e);this.isRenderable=r;this.data=t.data;this.layer=t.layer;this.page=t.page;this.viewport=t.viewport;this.linkService=t.linkService;this.downloadManager=t.downloadManager;this.imageResourcesPath=t.imageResourcesPath;this.renderInteractiveForms=t.renderInteractiveForms;this.svgFactory=t.svgFactory;this.annotationStorage=t.annotationStorage;this.enableScripting=t.enableScripting;this.hasJSActions=t.hasJSActions;this._mouseState=t.mouseState;if(r){this.container=this._createContainer(s)}if(d){this.quadrilaterals=this._createQuadrilaterals(s)}}_createClass(e,[{key:"_createContainer",value:function _createContainer(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!1,t=this.data,a=this.page,n=this.viewport,r=document.createElement("section"),s=t.rect[2]-t.rect[0],i=t.rect[3]-t.rect[1];r.setAttribute("data-annotation-id",t.id);var d=o.Util.normalizeRect([t.rect[0],a.view[3]-t.rect[1]+a.view[1],t.rect[2],a.view[3]-t.rect[3]+a.view[1]]);r.style.transform="matrix(".concat(n.transform.join(","),")");r.style.transformOrigin="".concat(-d[0],"px ").concat(-d[1],"px");if(!e&&0<t.borderStyle.width){r.style.borderWidth="".concat(t.borderStyle.width,"px");if(t.borderStyle.style!==o.AnnotationBorderStyleType.UNDERLINE){s=s-2*t.borderStyle.width;i=i-2*t.borderStyle.width}var l=t.borderStyle.horizontalCornerRadius,c=t.borderStyle.verticalCornerRadius;if(0<l||0<c){var u="".concat(l,"px / ").concat(c,"px");r.style.borderRadius=u}switch(t.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:r.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:r.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:r.style.borderBottomStyle="solid";break;default:break;}if(t.color){r.style.borderColor=o.Util.makeHexColor(0|t.color[0],0|t.color[1],0|t.color[2])}else{r.style.borderWidth=0}}r.style.left="".concat(d[0],"px");r.style.top="".concat(d[1],"px");r.style.width="".concat(s,"px");r.style.height="".concat(i,"px");return r}},{key:"_createQuadrilaterals",value:function _createQuadrilaterals(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!1;if(!this.data.quadPoints){return null}var t=[],a=this.data.rect,n=_createForOfIteratorHelper(this.data.quadPoints),r;try{for(n.s();!(r=n.n()).done;){var o=r.value;this.data.rect=[o[2].x,o[2].y,o[1].x,o[1].y];t.push(this._createContainer(e))}}catch(e){n.e(e)}finally{n.f()}this.data.rect=a;return t}},{key:"_createPopup",value:function _createPopup(e,t){var a=this.container;if(this.quadrilaterals){e=e||this.quadrilaterals;a=this.quadrilaterals[0]}if(!e){e=document.createElement("div");e.style.height=a.style.height;e.style.width=a.style.width;a.appendChild(e)}var n=new v({container:a,trigger:e,color:t.color,title:t.title,modificationDate:t.modificationDate,contents:t.contents,hideWrapper:!0}),r=n.render();r.style.left=a.style.width;a.appendChild(r)}},{key:"_renderQuadrilaterals",value:function _renderQuadrilaterals(e){this.quadrilaterals.forEach(function(t){t.className=e});return this.quadrilaterals}},{key:"render",value:function render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}}]);return e}(),c=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){_classCallCheck(this,t);var n=!!(e.data.url||e.data.dest||e.data.action||e.data.isTooltipOnly||e.data.actions&&(e.data.actions.Action||e.data.actions["Mouse Up"]||e.data.actions["Mouse Down"]));return a.call(this,e,{isRenderable:n,createQuadrilaterals:!0})}_createClass(t,[{key:"render",value:function render(){var e=this.data,t=this.linkService,a=document.createElement("a");if(e.url){(0,n.addLinkAttributes)(a,{url:e.url,target:e.newWindow?n.LinkTarget.BLANK:t.externalLinkTarget,rel:t.externalLinkRel,enabled:t.externalLinkEnabled})}else if(e.action){this._bindNamedAction(a,e.action)}else if(e.dest){this._bindLink(a,e.dest)}else if(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions){this._bindJSAction(a,e)}else{this._bindLink(a,"")}if(this.quadrilaterals){return this._renderQuadrilaterals("linkAnnotation").map(function(e,t){var n=0===t?a:a.cloneNode();e.appendChild(n);return e})}this.container.className="linkAnnotation";this.container.appendChild(a);return this.container}},{key:"_bindLink",value:function _bindLink(e,t){var a=this;e.href=this.linkService.getDestinationHash(t);e.onclick=function(){if(t){a.linkService.goToDestination(t)}return!1};if(t||""===t){e.className="internalLink"}}},{key:"_bindNamedAction",value:function _bindNamedAction(e,t){var a=this;e.href=this.linkService.getAnchorUrl("");e.onclick=function(){a.linkService.executeNamedAction(t);return!1};e.className="internalLink"}},{key:"_bindJSAction",value:function _bindJSAction(e,t){var a=this;e.href=this.linkService.getAnchorUrl("");for(var n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),r=function(){var r=s[o],i=n.get(r);if(!i){return"continue"}e[i]=function(){var e;null===(e=a.linkService.eventBus)||void 0===e?void 0:e.dispatch("dispatcheventinsandbox",{source:a,detail:{id:t.id,name:r}});return!1}},o=0,s=Object.keys(t.actions),i;o<s.length;o++){i=r();if("continue"===i)continue}e.className="internalLink"}}]);return t}(l),u=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){_classCallCheck(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return a.call(this,e,{isRenderable:n})}_createClass(t,[{key:"render",value:function render(){this.container.className="textAnnotation";var e=document.createElement("img");e.style.height=this.container.style.height;e.style.width=this.container.style.width;e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg";e.alt="[{{type}} Annotation]";e.dataset.l10nId="text_annotation_type";e.dataset.l10nArgs=JSON.stringify({type:this.data.name});if(!this.data.hasPopup){this._createPopup(e,this.data)}this.container.appendChild(e);return this.container}}]);return t}(l),p=function(e){_inherits(t,e);var a=_createSuper(t);function t(){_classCallCheck(this,t);return a.apply(this,arguments)}_createClass(t,[{key:"render",value:function render(){if(this.data.alternativeText){this.container.title=this.data.alternativeText}return this.container}},{key:"_getKeyModifier",value:function _getKeyModifier(e){return navigator.platform.includes("Win")&&e.ctrlKey||navigator.platform.includes("Mac")&&e.metaKey}},{key:"_setEventListener",value:function _setEventListener(e,t,a,n){var r=this;if(t.includes("mouse")){e.addEventListener(t,function(e){var t;null===(t=r.linkService.eventBus)||void 0===t?void 0:t.dispatch("dispatcheventinsandbox",{source:r,detail:{id:r.data.id,name:a,value:n(e),shift:e.shiftKey,modifier:r._getKeyModifier(e)}})})}else{e.addEventListener(t,function(e){var t;null===(t=r.linkService.eventBus)||void 0===t?void 0:t.dispatch("dispatcheventinsandbox",{source:r,detail:{id:r.data.id,name:a,value:e.target.checked}})})}}},{key:"_setEventListeners",value:function _setEventListeners(e,t,a){var n=_createForOfIteratorHelper(t),r;try{for(n.s();!(r=n.n()).done;){var o,s=_slicedToArray(r.value,2),i=s[0],d=s[1];if("Action"===d||(null===(o=this.data.actions)||void 0===o?void 0:o[d])){this._setEventListener(e,i,d,a)}}}catch(e){n.e(e)}finally{n.f()}}}]);return t}(l),g=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){_classCallCheck(this,t);var n=e.renderInteractiveForms||!e.data.hasAppearance&&!!e.data.fieldValue;return a.call(this,e,{isRenderable:n})}_createClass(t,[{key:"render",value:function render(){var e=this,t=this.annotationStorage,a=this.data.id;this.container.className="textWidgetAnnotation";var n=null;if(this.renderInteractiveForms){var r=t.getOrCreateValue(a,{value:this.data.fieldValue}).value,o={userValue:null,formattedValue:null,beforeInputSelectionRange:null,beforeInputValue:null};if(this.data.multiLine){n=document.createElement("textarea");n.textContent=r}else{n=document.createElement("input");n.type="text";n.setAttribute("value",r)}o.userValue=r;n.setAttribute("id",a);n.addEventListener("input",function(e){t.setValue(a,{value:e.target.value})});var l=function(e){if(o.formattedValue){e.target.value=o.formattedValue}e.target.setSelectionRange(0,0);o.beforeInputSelectionRange=null};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",function(e){if(o.userValue){e.target.value=o.userValue}});n.addEventListener("updatefromsandbox",function(e){var n=e.detail,r={value:function value(){o.userValue=n.value||"";t.setValue(a,{value:o.userValue.toString()});if(!o.formattedValue){e.target.value=o.userValue}},valueAsString:function valueAsString(){o.formattedValue=n.valueAsString||"";if(e.target!==document.activeElement){e.target.value=o.formattedValue}t.setValue(a,{formattedValue:o.formattedValue})},focus:function focus(){setTimeout(function(){return e.target.focus({preventScroll:!1})},0)},userName:function userName(){e.target.title=n.userName},hidden:function hidden(){e.target.style.visibility=n.hidden?"hidden":"visible";t.setValue(a,{hidden:n.hidden})},editable:function editable(){e.target.disabled=!n.editable},selRange:function selRange(){var t=_slicedToArray(n.selRange,2),a=t[0],r=t[1];if(0<=a&&r<e.target.value.length){e.target.setSelectionRange(a,r)}},strokeColor:function strokeColor(){var t=n.strokeColor;e.target.style.color=i.ColorConverters["".concat(t[0],"_HTML")](t.slice(1))}};Object.keys(n).filter(function(e){return e in r}).forEach(function(e){return r[e]()})});if(this.data.actions){n.addEventListener("keydown",function(t){var n;o.beforeInputValue=t.target.value;var r=-1;if("Escape"===t.key){r=0}else if("Enter"===t.key){r=2}else if("Tab"===t.key){r=3}if(-1==r){return}o.userValue=t.target.value;null===(n=e.linkService.eventBus)||void 0===n?void 0:n.dispatch("dispatcheventinsandbox",{source:e,detail:{id:a,name:"Keystroke",value:t.target.value,willCommit:!0,commitKey:r,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}})});var c=l;l=null;n.addEventListener("blur",function(t){if(e._mouseState.isDown){var n;o.userValue=t.target.value;null===(n=e.linkService.eventBus)||void 0===n?void 0:n.dispatch("dispatcheventinsandbox",{source:e,detail:{id:a,name:"Keystroke",value:t.target.value,willCommit:!0,commitKey:1,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}})}c(t)});n.addEventListener("mousedown",function(e){o.beforeInputValue=e.target.value;o.beforeInputSelectionRange=null});n.addEventListener("keyup",function(e){if(e.target.selectionStart===e.target.selectionEnd){o.beforeInputSelectionRange=null}});n.addEventListener("select",function(e){o.beforeInputSelectionRange=[e.target.selectionStart,e.target.selectionEnd]});if("Keystroke"in this.data.actions){n.addEventListener("input",function(t){var n,r=-1,s=-1;if(o.beforeInputSelectionRange){var i=_slicedToArray(o.beforeInputSelectionRange,2);r=i[0];s=i[1]}null===(n=e.linkService.eventBus)||void 0===n?void 0:n.dispatch("dispatcheventinsandbox",{source:e,detail:{id:a,name:"Keystroke",value:o.beforeInputValue,change:t.data,willCommit:!1,selStart:r,selEnd:s}})})}this._setEventListeners(n,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(e){return e.target.value})}}if(l){n.addEventListener("blur",l)}n.disabled=this.data.readOnly;n.name=this.data.fieldName;if(null!==this.data.maxLen){n.maxLength=this.data.maxLen}if(this.data.comb){var s=this.data.rect[2]-this.data.rect[0],d=s/this.data.maxLen;n.classList.add("comb");n.style.letterSpacing="calc(".concat(d,"px - 1ch)")}}else{n=document.createElement("div");n.textContent=this.data.fieldValue;n.style.verticalAlign="middle";n.style.display="table-cell"}this._setTextStyle(n);this.container.appendChild(n);return this.container}},{key:"_setTextStyle",value:function _setTextStyle(e){var t=this.data.defaultAppearanceData,a=t.fontSize,n=t.fontColor,r=e.style;if(a){r.fontSize="".concat(a,"px")}r.color=o.Util.makeHexColor(n[0],n[1],n[2]);if(null!==this.data.textAlignment){r.textAlign=["left","center","right"][this.data.textAlignment]}}}]);return t}(p),m=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){_classCallCheck(this,t);return a.call(this,e,{isRenderable:e.renderInteractiveForms})}_createClass(t,[{key:"render",value:function render(){var e=this.annotationStorage,t=this.data,a=t.id,n=e.getOrCreateValue(a,{value:t.fieldValue&&"Off"!==t.fieldValue}).value;this.container.className="buttonWidgetAnnotation checkBox";var r=document.createElement("input");r.disabled=t.readOnly;r.type="checkbox";r.name=this.data.fieldName;if(n){r.setAttribute("checked",!0)}r.setAttribute("id",a);r.addEventListener("change",function(t){var n=t.target.name,r=_createForOfIteratorHelper(document.getElementsByName(n)),o;try{for(r.s();!(o=r.n()).done;){var s=o.value;if(s!==t.target){s.checked=!1;e.setValue(s.parentNode.getAttribute("data-annotation-id"),{value:!1})}}}catch(e){r.e(e)}finally{r.f()}e.setValue(a,{value:t.target.checked})});if(this.enableScripting&&this.hasJSActions){r.addEventListener("updatefromsandbox",function(t){var n=t.detail,r={value:function(){t.target.checked="Off"!==n.value;e.setValue(a,{value:t.target.checked})},focus:function focus(){setTimeout(function(){return t.target.focus({preventScroll:!1})},0)},hidden:function hidden(){t.target.style.visibility=n.hidden?"hidden":"visible";e.setValue(a,{hidden:n.hidden})},editable:function editable(){t.target.disabled=!n.editable}};Object.keys(n).filter(function(e){return e in r}).forEach(function(e){return r[e]()})});this._setEventListeners(r,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(e){return e.target.checked})}this.container.appendChild(r);return this.container}}]);return t}(p),f=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){_classCallCheck(this,t);return a.call(this,e,{isRenderable:e.renderInteractiveForms})}_createClass(t,[{key:"render",value:function render(){this.container.className="buttonWidgetAnnotation radioButton";var e=this.annotationStorage,t=this.data,a=t.id,n=e.getOrCreateValue(a,{value:t.fieldValue===t.buttonValue}).value,r=document.createElement("input");r.disabled=t.readOnly;r.type="radio";r.name=t.fieldName;if(n){r.setAttribute("checked",!0)}r.setAttribute("pdfButtonValue",t.buttonValue);r.setAttribute("id",a);r.addEventListener("change",function(t){var n=t.target,r=_createForOfIteratorHelper(document.getElementsByName(n.name)),o;try{for(r.s();!(o=r.n()).done;){var s=o.value;if(s!==n){e.setValue(s.getAttribute("id"),{value:!1})}}}catch(e){r.e(e)}finally{r.f()}e.setValue(a,{value:n.checked})});if(this.enableScripting&&this.hasJSActions){r.addEventListener("updatefromsandbox",function(t){var n=t.detail,r={value:function(){var a=n.value,r=_createForOfIteratorHelper(document.getElementsByName(t.target.name)),o;try{for(r.s();!(o=r.n()).done;){var s=o.value,i=s.getAttribute("id");if(a===s.getAttribute("pdfButtonValue")){s.setAttribute("checked",!0);e.setValue(i,{value:!0})}else{e.setValue(i,{value:!1})}}}catch(e){r.e(e)}finally{r.f()}},focus:function focus(){setTimeout(function(){return t.target.focus({preventScroll:!1})},0)},hidden:function hidden(){t.target.style.visibility=n.hidden?"hidden":"visible";e.setValue(a,{hidden:n.hidden})},editable:function editable(){t.target.disabled=!n.editable}};Object.keys(n).filter(function(e){return e in r}).forEach(function(e){return r[e]()})});this._setEventListeners(r,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(e){return e.target.checked})}this.container.appendChild(r);return this.container}}]);return t}(p),h=function(e){_inherits(t,e);var a=_createSuper(t);function t(){_classCallCheck(this,t);return a.apply(this,arguments)}_createClass(t,[{key:"render",value:function render(){var e=_get(_getPrototypeOf(t.prototype),"render",this).call(this);e.className="buttonWidgetAnnotation pushButton";if(this.data.alternativeText){e.title=this.data.alternativeText}return e}}]);return t}(c),y=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){_classCallCheck(this,t);return a.call(this,e,{isRenderable:e.renderInteractiveForms})}_createClass(t,[{key:"render",value:function render(){var t=this;this.container.className="choiceWidgetAnnotation";var a=this.annotationStorage,n=this.data.id;a.getOrCreateValue(n,{value:0<this.data.fieldValue.length?this.data.fieldValue[0]:void 0});var r=document.createElement("select");r.disabled=this.data.readOnly;r.name=this.data.fieldName;r.setAttribute("id",n);if(!this.data.combo){r.size=this.data.options.length;if(this.data.multiSelect){r.multiple=!0}}var o=_createForOfIteratorHelper(this.data.options),s;try{for(o.s();!(s=o.n()).done;){var i=s.value,d=document.createElement("option");d.textContent=i.displayValue;d.value=i.exportValue;if(this.data.fieldValue.includes(i.exportValue)){d.setAttribute("selected",!0)}r.appendChild(d)}}catch(e){o.e(e)}finally{o.f()}function e(e){var t=e.target.options;return t[t.selectedIndex].value}if(this.enableScripting&&this.hasJSActions){r.addEventListener("updatefromsandbox",function(e){var t=e.detail,r={value:function(){var r=e.target.options,o=t.value,s=r.indexOf(o);if(-1!==s){r.selectedIndex=s;a.setValue(n,{value:o})}},focus:function focus(){setTimeout(function(){return e.target.focus({preventScroll:!1})},0)},hidden:function hidden(){e.target.style.visibility=t.hidden?"hidden":"visible";a.setValue(n,{hidden:t.hidden})},editable:function editable(){e.target.disabled=!t.editable}};Object.keys(t).filter(function(e){return e in r}).forEach(function(e){return r[e]()})});r.addEventListener("input",function(r){var o,s=e(r);a.setValue(n,{value:s});null===(o=t.linkService.eventBus)||void 0===o?void 0:o.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",changeEx:s,willCommit:!0,commitKey:1,keyDown:!1}})});this._setEventListeners(r,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(e){return e.target.checked})}else{r.addEventListener("input",function(t){a.setValue(n,{value:e(t)})})}this.container.appendChild(r);return this.container}}]);return t}(p),A=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){_classCallCheck(this,t);var n=!!(e.data.title||e.data.contents);return a.call(this,e,{isRenderable:n})}_createClass(t,[{key:"render",value:function render(){this.container.className="popupAnnotation";if(["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType)){return this.container}var e="[data-annotation-id=\"".concat(this.data.parentId,"\"]"),t=this.layer.querySelectorAll(e);if(0===t.length){return this.container}var a=new v({container:this.container,trigger:Array.from(t),color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),n=this.page,r=o.Util.normalizeRect([this.data.parentRect[0],n.view[3]-this.data.parentRect[1]+n.view[1],this.data.parentRect[2],n.view[3]-this.data.parentRect[3]+n.view[1]]),s=r[0]+this.data.parentRect[2]-this.data.parentRect[0],i=r[1];this.container.style.transformOrigin="".concat(-s,"px ").concat(-i,"px");this.container.style.left="".concat(s,"px");this.container.style.top="".concat(i,"px");this.container.appendChild(a.render());return this.container}}]);return t}(l),v=function(){function e(t){_classCallCheck(this,e);this.container=t.container;this.trigger=t.trigger;this.color=t.color;this.title=t.title;this.modificationDate=t.modificationDate;this.contents=t.contents;this.hideWrapper=t.hideWrapper||!1;this.pinned=!1}_createClass(e,[{key:"render",value:function render(){var e=this,t=.7,a=document.createElement("div");a.className="popupWrapper";this.hideElement=this.hideWrapper?a:this.container;this.hideElement.setAttribute("hidden",!0);var s=document.createElement("div");s.className="popup";var i=this.color;if(i){var d=t*(255-i[0])+i[0],r=t*(255-i[1])+i[1],l=t*(255-i[2])+i[2];s.style.backgroundColor=o.Util.makeHexColor(0|d,0|r,0|l)}var c=document.createElement("h1");c.textContent=this.title;s.appendChild(c);var u=n.PDFDateString.toDateObject(this.modificationDate);if(u){var g=document.createElement("span");g.textContent="{{date}}, {{time}}";g.dataset.l10nId="annotation_date_string";g.dataset.l10nArgs=JSON.stringify({date:u.toLocaleDateString(),time:u.toLocaleTimeString()});s.appendChild(g)}var p=this._formatContents(this.contents);s.appendChild(p);if(!Array.isArray(this.trigger)){this.trigger=[this.trigger]}this.trigger.forEach(function(t){t.addEventListener("click",e._toggle.bind(e));t.addEventListener("mouseover",e._show.bind(e,!1));t.addEventListener("mouseout",e._hide.bind(e,!1))});s.addEventListener("click",this._hide.bind(this,!0));a.appendChild(s);return a}},{key:"_formatContents",value:function _formatContents(e){for(var t=document.createElement("p"),a=e.split(/(?:\r\n?|\n)/),n=0,r=a.length,o;n<r;++n){o=a[n];t.appendChild(document.createTextNode(o));if(n<r-1){t.appendChild(document.createElement("br"))}}return t}},{key:"_toggle",value:function _toggle(){if(this.pinned){this._hide(!0)}else{this._show(!0)}}},{key:"_show",value:function _show(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!1;if(e){this.pinned=!0}if(this.hideElement.hasAttribute("hidden")){this.hideElement.removeAttribute("hidden");this.container.style.zIndex+=1}}},{key:"_hide",value:function _hide(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0;if(e){this.pinned=!1}if(!this.hideElement.hasAttribute("hidden")&&!this.pinned){this.hideElement.setAttribute("hidden",!0);this.container.style.zIndex-=1}}}]);return e}(),_=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){_classCallCheck(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return a.call(this,e,{isRenderable:n,ignoreBorder:!0})}_createClass(t,[{key:"render",value:function render(){this.container.className="freeTextAnnotation";if(!this.data.hasPopup){this._createPopup(null,this.data)}return this.container}}]);return t}(l),b=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){_classCallCheck(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return a.call(this,e,{isRenderable:n,ignoreBorder:!0})}_createClass(t,[{key:"render",value:function render(){this.container.className="lineAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],a=e.rect[3]-e.rect[1],n=this.svgFactory.create(t,a),r=this.svgFactory.createElement("svg:line");r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]);r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]);r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]);r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]);r.setAttribute("stroke-width",e.borderStyle.width||1);r.setAttribute("stroke","transparent");n.appendChild(r);this.container.append(n);this._createPopup(r,e);return this.container}}]);return t}(l),S=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){_classCallCheck(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return a.call(this,e,{isRenderable:n,ignoreBorder:!0})}_createClass(t,[{key:"render",value:function render(){this.container.className="squareAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],a=e.rect[3]-e.rect[1],n=this.svgFactory.create(t,a),r=e.borderStyle.width,o=this.svgFactory.createElement("svg:rect");o.setAttribute("x",r/2);o.setAttribute("y",r/2);o.setAttribute("width",t-r);o.setAttribute("height",a-r);o.setAttribute("stroke-width",r||1);o.setAttribute("stroke","transparent");o.setAttribute("fill","none");n.appendChild(o);this.container.append(n);this._createPopup(o,e);return this.container}}]);return t}(l),k=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){_classCallCheck(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return a.call(this,e,{isRenderable:n,ignoreBorder:!0})}_createClass(t,[{key:"render",value:function render(){this.container.className="circleAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],a=e.rect[3]-e.rect[1],n=this.svgFactory.create(t,a),r=e.borderStyle.width,o=this.svgFactory.createElement("svg:ellipse");o.setAttribute("cx",t/2);o.setAttribute("cy",a/2);o.setAttribute("rx",t/2-r/2);o.setAttribute("ry",a/2-r/2);o.setAttribute("stroke-width",r||1);o.setAttribute("stroke","transparent");o.setAttribute("fill","none");n.appendChild(o);this.container.append(n);this._createPopup(o,e);return this.container}}]);return t}(l),C=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){var n;_classCallCheck(this,t);var r=!!(e.data.hasPopup||e.data.title||e.data.contents);n=a.call(this,e,{isRenderable:r,ignoreBorder:!0});n.containerClassName="polylineAnnotation";n.svgElementName="svg:polyline";return n}_createClass(t,[{key:"render",value:function render(){this.container.className=this.containerClassName;var e=this.data,t=e.rect[2]-e.rect[0],a=e.rect[3]-e.rect[1],n=this.svgFactory.create(t,a),r=[],o=_createForOfIteratorHelper(e.vertices),s;try{for(o.s();!(s=o.n()).done;){var i=s.value,d=i.x-e.rect[0],l=e.rect[3]-i.y;r.push(d+","+l)}}catch(e){o.e(e)}finally{o.f()}r=r.join(" ");var c=this.svgFactory.createElement(this.svgElementName);c.setAttribute("points",r);c.setAttribute("stroke-width",e.borderStyle.width||1);c.setAttribute("stroke","transparent");c.setAttribute("fill","none");n.appendChild(c);this.container.append(n);this._createPopup(c,e);return this.container}}]);return t}(l),x=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){var n;_classCallCheck(this,t);n=a.call(this,e);n.containerClassName="polygonAnnotation";n.svgElementName="svg:polygon";return n}return t}(C),P=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){_classCallCheck(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return a.call(this,e,{isRenderable:n,ignoreBorder:!0})}_createClass(t,[{key:"render",value:function render(){this.container.className="caretAnnotation";if(!this.data.hasPopup){this._createPopup(null,this.data)}return this.container}}]);return t}(l),R=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){var n;_classCallCheck(this,t);var r=!!(e.data.hasPopup||e.data.title||e.data.contents);n=a.call(this,e,{isRenderable:r,ignoreBorder:!0});n.containerClassName="inkAnnotation";n.svgElementName="svg:polyline";return n}_createClass(t,[{key:"render",value:function render(){this.container.className=this.containerClassName;var e=this.data,t=e.rect[2]-e.rect[0],a=e.rect[3]-e.rect[1],n=this.svgFactory.create(t,a),r=_createForOfIteratorHelper(e.inkLists),o;try{for(r.s();!(o=r.n()).done;){var s=o.value,i=[],d=_createForOfIteratorHelper(s),l;try{for(d.s();!(l=d.n()).done;){var c=l.value,u=c.x-e.rect[0],p=e.rect[3]-c.y;i.push("".concat(u,",").concat(p))}}catch(e){d.e(e)}finally{d.f()}i=i.join(" ");var g=this.svgFactory.createElement(this.svgElementName);g.setAttribute("points",i);g.setAttribute("stroke-width",e.borderStyle.width||1);g.setAttribute("stroke","transparent");g.setAttribute("fill","none");this._createPopup(g,e);n.appendChild(g)}}catch(e){r.e(e)}finally{r.f()}this.container.append(n);return this.container}}]);return t}(l),T=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){_classCallCheck(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return a.call(this,e,{isRenderable:n,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(t,[{key:"render",value:function render(){if(!this.data.hasPopup){this._createPopup(null,this.data)}if(this.quadrilaterals){return this._renderQuadrilaterals("highlightAnnotation")}this.container.className="highlightAnnotation";return this.container}}]);return t}(l),E=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){_classCallCheck(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return a.call(this,e,{isRenderable:n,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(t,[{key:"render",value:function render(){if(!this.data.hasPopup){this._createPopup(null,this.data)}if(this.quadrilaterals){return this._renderQuadrilaterals("underlineAnnotation")}this.container.className="underlineAnnotation";return this.container}}]);return t}(l),F=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){_classCallCheck(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return a.call(this,e,{isRenderable:n,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(t,[{key:"render",value:function render(){if(!this.data.hasPopup){this._createPopup(null,this.data)}if(this.quadrilaterals){return this._renderQuadrilaterals("squigglyAnnotation")}this.container.className="squigglyAnnotation";return this.container}}]);return t}(l),L=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){_classCallCheck(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return a.call(this,e,{isRenderable:n,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(t,[{key:"render",value:function render(){if(!this.data.hasPopup){this._createPopup(null,this.data)}if(this.quadrilaterals){return this._renderQuadrilaterals("strikeoutAnnotation")}this.container.className="strikeoutAnnotation";return this.container}}]);return t}(l),I=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){_classCallCheck(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return a.call(this,e,{isRenderable:n,ignoreBorder:!0})}_createClass(t,[{key:"render",value:function render(){this.container.className="stampAnnotation";if(!this.data.hasPopup){this._createPopup(null,this.data)}return this.container}}]);return t}(l),N=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){var r,s;_classCallCheck(this,t);s=a.call(this,e,{isRenderable:!0});var i=s.data.file,d=i.filename,l=i.content;s.filename=(0,n.getFilenameFromUrl)(d);s.content=l;null===(r=s.linkService.eventBus)||void 0===r?void 0:r.dispatch("fileattachmentannotation",{source:_assertThisInitialized(s),id:(0,o.stringToPDFString)(d),filename:d,content:l});return s}_createClass(t,[{key:"render",value:function render(){this.container.className="fileAttachmentAnnotation";var e=document.createElement("div");e.style.height=this.container.style.height;e.style.width=this.container.style.width;e.addEventListener("dblclick",this._download.bind(this));if(!this.data.hasPopup&&(this.data.title||this.data.contents)){this._createPopup(e,this.data)}this.container.appendChild(e);return this.container}},{key:"_download",value:function _download(){if(!this.downloadManager){(0,o.warn)("Download cannot be started due to unavailable download manager");return}this.downloadManager.downloadData(this.content,this.filename,"")}}]);return t}(l),M=function(){function e(){_classCallCheck(this,e)}_createClass(e,null,[{key:"render",value:function render(e){var t=[],a=[],r=_createForOfIteratorHelper(e.annotations),i;try{for(r.s();!(i=r.n()).done;){var f=i.value;if(!f){continue}if(f.annotationType===o.AnnotationType.POPUP){a.push(f);continue}t.push(f)}}catch(e){r.e(e)}finally{r.f()}if(a.length){t.push.apply(t,a)}for(var l=0,c=t;l<c.length;l++){var u=c[l],p=d.create({data:u,layer:e.div,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderInteractiveForms:"boolean"==typeof e.renderInteractiveForms?e.renderInteractiveForms:!0,svgFactory:new n.DOMSVGFactory,annotationStorage:e.annotationStorage||new s.AnnotationStorage,enableScripting:e.enableScripting,hasJSActions:e.hasJSActions,mouseState:e.mouseState||{isDown:!1}});if(p.isRenderable){var h=p.render();if(u.hidden){h.style.visibility="hidden"}if(Array.isArray(h)){var g=_createForOfIteratorHelper(h),m;try{for(g.s();!(m=g.n()).done;){var y=m.value;e.div.appendChild(y)}}catch(e){g.e(e)}finally{g.f()}}else{if(p instanceof A){e.div.prepend(h)}else{e.div.appendChild(h)}}}}}},{key:"update",value:function update(e){var t="matrix(".concat(e.viewport.transform.join(","),")"),a=_createForOfIteratorHelper(e.annotations),n;try{for(a.s();!(n=a.n()).done;){var r=n.value,o=e.div.querySelectorAll("[data-annotation-id=\"".concat(r.id,"\"]"));if(o){o.forEach(function(e){e.style.transform=t})}}}catch(e){a.e(e)}finally{a.f()}e.div.removeAttribute("hidden")}}]);return e}();t.AnnotationLayer=M},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.ColorConverters=void 0;function a(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}var n=function(){function e(){_classCallCheck(this,e)}_createClass(e,null,[{key:"CMYK_G",value:function CMYK_G(e){var t=_slicedToArray(e,4),a=t[0],n=t[1],r=t[2],o=t[3];return["G",1-Math.min(1,.3*a+.59*r+.11*n+o)]}},{key:"G_CMYK",value:function G_CMYK(e){var t=_slicedToArray(e,1),a=t[0];return["CMYK",0,0,0,1-a]}},{key:"G_RGB",value:function G_RGB(e){var t=_slicedToArray(e,1),a=t[0];return["RGB",a,a,a]}},{key:"G_HTML",value:function G_HTML(e){var t=_slicedToArray(e,1),n=t[0],r=a(n);return"#".concat(r).concat(r).concat(r)}},{key:"RGB_G",value:function RGB_G(e){var t=_slicedToArray(e,3),a=t[0],n=t[1],r=t[2];return["G",.3*a+.59*n+.11*r]}},{key:"RGB_HTML",value:function RGB_HTML(e){var t=_slicedToArray(e,3),n=t[0],r=t[1],o=t[2],s=a(n),i=a(r),d=a(o);return"#".concat(s).concat(i).concat(d)}},{key:"T_HTML",value:function T_HTML(){return"#00000000"}},{key:"CMYK_RGB",value:function CMYK_RGB(e){var t=_slicedToArray(e,4),a=t[0],n=t[1],r=t[2],o=t[3];return["RGB",1-Math.min(1,a+o),1-Math.min(1,r+o),1-Math.min(1,n+o)]}},{key:"CMYK_HTML",value:function CMYK_HTML(e){return this.RGB_HTML(this.CMYK_RGB(e))}},{key:"RGB_CMYK",value:function RGB_CMYK(e){var t=_slicedToArray(e,3),a=t[0],n=t[1],r=t[2],o=1-a,s=1-n,i=1-r,d=Math.min(o,s,i);return["CMYK",o,s,i,d]}}]);return e}();t.ColorConverters=n},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.renderTextLayer=void 0;var n=a(2),r=function(){function e(e){return!/\S/.test(e)}function t(t,a,r){var o=document.createElement("span"),s={angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};t._textDivs.push(o);if(e(a.str)){s.isWhitespace=!0;t._textDivProperties.set(o,s);return}var i=n.Util.transform(t._viewport.transform,a.transform),d=Math.atan2(i[1],i[0]),l=r[a.fontName];if(l.vertical){d+=Math.PI/2}var c=Math.sqrt(i[2]*i[2]+i[3]*i[3]),u=c;if(l.ascent){u=l.ascent*u}else if(l.descent){u=(1+l.descent)*u}var p,g;if(0===d){p=i[4];g=i[5]-u}else{p=i[4]+u*Math.sin(d);g=i[5]-u*Math.cos(d)}o.style.left="".concat(p,"px");o.style.top="".concat(g,"px");o.style.fontSize="".concat(c,"px");o.style.fontFamily=l.fontFamily;o.textContent=a.str;if(t._fontInspectorEnabled){o.dataset.fontName=a.fontName}if(0!==d){s.angle=d*(180/Math.PI)}var f=!1;if(1<a.str.length){f=!0}else if(a.transform[0]!==a.transform[3]){var _=Math.abs(a.transform[0]),S=Math.abs(a.transform[3]);if(_!==S&&1.5<Math.max(_,S)/Math.min(_,S)){f=!0}}if(f){if(l.vertical){s.canvasWidth=a.height*t._viewport.scale}else{s.canvasWidth=a.width*t._viewport.scale}}t._textDivProperties.set(o,s);if(t._textContentStream){t._layoutText(o)}if(t._enhanceTextSelection){var k=1,C=0;if(0!==d){k=Math.cos(d);C=Math.sin(d)}var h=(l.vertical?a.height:a.width)*t._viewport.scale,y=c,A,v;if(0!==d){A=[k,C,-C,k,p,g];v=n.Util.getAxialAlignedBoundingBox([0,0,h,y],A)}else{v=[p,g,p+h,g+y]}t._bounds.push({left:v[0],top:v[1],right:v[2],bottom:v[3],div:o,size:[h,y],m:A})}}function a(e){if(e._canceled){return}var t=e._textDivs,a=e._capability,n=t.length;if(n>100000){e._renderingDone=!0;a.resolve();return}if(!e._textContentStream){for(var r=0;r<n;r++){e._layoutText(t[r])}}e._renderingDone=!0;a.resolve()}function r(e,a,n){for(var r=0,o=0,s;o<n;o++){s=e[a++];if(0<s){r=r?Math.min(s,r):s}}return r}function o(t){for(var a=t._bounds,o=t._viewport,d=s(o.width,o.height,a),l=function(o){var i=a[o].div,l=t._textDivProperties.get(i);if(0===l.angle){l.paddingLeft=a[o].left-d[o].left;l.paddingTop=a[o].top-d[o].top;l.paddingRight=d[o].right-a[o].right;l.paddingBottom=d[o].bottom-a[o].bottom;t._textDivProperties.set(i,l);return"continue"}var u=d[o],e=a[o],g=e.m,m=g[0],c=g[1],s=[[0,0],[0,e.size[1]],[e.size[0],0],e.size],f=new Float64Array(64);s.forEach(function(e,a){var r=n.Util.applyTransform(e,g);f[a+0]=m&&(u.left-r[0])/m;f[a+4]=c&&(u.top-r[1])/c;f[a+8]=m&&(u.right-r[0])/m;f[a+12]=c&&(u.bottom-r[1])/c;f[a+16]=c&&(u.left-r[0])/-c;f[a+20]=m&&(u.top-r[1])/m;f[a+24]=c&&(u.right-r[0])/-c;f[a+28]=m&&(u.bottom-r[1])/m;f[a+32]=m&&(u.left-r[0])/-m;f[a+36]=c&&(u.top-r[1])/-c;f[a+40]=m&&(u.right-r[0])/-m;f[a+44]=c&&(u.bottom-r[1])/-c;f[a+48]=c&&(u.left-r[0])/c;f[a+52]=m&&(u.top-r[1])/-m;f[a+56]=c&&(u.right-r[0])/c;f[a+60]=m&&(u.bottom-r[1])/-m});var p=1+Math.min(Math.abs(m),Math.abs(c));l.paddingLeft=r(f,32,16)/p;l.paddingTop=r(f,48,16)/p;l.paddingRight=r(f,0,16)/p;l.paddingBottom=r(f,16,16)/p;t._textDivProperties.set(i,l)},c=0,e;c<d.length;c++){e=l(c);if("continue"===e)continue}}function s(t,a,n){var r=n.map(function(e,t){return{x1:e.left,y1:e.top,x2:e.right,y2:e.bottom,index:t,x1New:void 0,x2New:void 0}});i(t,r);var o=Array(n.length);r.forEach(function(e){var t=e.index;o[t]={left:e.x1New,top:0,right:e.x2New,bottom:0}});n.map(function(a,n){var s=o[n],e=r[n];e.x1=a.top;e.y1=t-s.right;e.x2=a.bottom;e.y2=t-s.left;e.index=n;e.x1New=void 0;e.x2New=void 0});i(a,r);r.forEach(function(e){var t=e.index;o[t].top=e.x1New;o[t].bottom=e.x2New});return o}function i(e,t){t.sort(function(e,t){return e.x1-t.x1||e.index-t.index});var a={x1:-Infinity,y1:-Infinity,x2:0,y2:1/0,index:-1,x1New:0,x2New:0},n=[{start:-Infinity,end:1/0,boundary:a}];t.forEach(function(e){var t=0;while(t<n.length&&n[t].end<=e.y1){t++}var a=n.length-1;while(0<=a&&n[a].start>=e.y2){a--}var r,o,s,d,l=-Infinity;for(s=t;s<=a;s++){r=n[s];o=r.boundary;var p=void 0;if(o.x2>e.x1){p=o.index>e.index?o.x1New:e.x1}else if(o.x2New===void 0){p=(o.x2+e.x1)/2}else{p=o.x2New}if(p>l){l=p}}e.x1New=l;for(s=t;s<=a;s++){r=n[s];o=r.boundary;if(o.x2New===void 0){if(o.x2>e.x1){if(o.index>e.index){o.x2New=o.x2}}else{o.x2New=l}}else if(o.x2New>l){o.x2New=Math.max(l,o.x2)}}var c=[],u=null;for(s=t;s<=a;s++){r=n[s];o=r.boundary;var g=o.x2>e.x2?o:e;if(u===g){c[c.length-1].end=r.end}else{c.push({start:r.start,end:r.end,boundary:g});u=g}}if(n[t].start<e.y1){c[0].start=e.y1;c.unshift({start:n[t].start,end:e.y1,boundary:n[t].boundary})}if(e.y2<n[a].end){c[c.length-1].end=e.y2;c.push({start:e.y2,end:n[a].end,boundary:n[a].boundary})}for(s=t;s<=a;s++){r=n[s];o=r.boundary;if(o.x2New!==void 0){continue}var m=!1;for(d=t-1;!m&&0<=d&&n[d].start>=o.y1;d--){m=n[d].boundary===o}for(d=a+1;!m&&d<n.length&&n[d].end<=o.y2;d++){m=n[d].boundary===o}for(d=0;!m&&d<c.length;d++){m=c[d].boundary===o}if(!m){o.x2New=l}}Array.prototype.splice.apply(n,[t,a-t+1].concat(c))});n.forEach(function(t){var a=t.boundary;if(a.x2New===void 0){a.x2New=Math.max(e,a.x2)}})}function d(e){var t,a=this,r=e.textContent,o=e.textContentStream,s=e.container,i=e.viewport,d=e.textDivs,l=e.textContentItemsStr,c=e.enhanceTextSelection;this._textContent=r;this._textContentStream=o;this._container=s;this._document=s.ownerDocument;this._viewport=i;this._textDivs=d||[];this._textContentItemsStr=l||[];this._enhanceTextSelection=!!c;this._fontInspectorEnabled=!!(null===(t=globalThis.FontInspector)||void 0===t?void 0:t.enabled);this._reader=null;this._layoutTextLastFontSize=null;this._layoutTextLastFontFamily=null;this._layoutTextCtx=null;this._textDivProperties=new WeakMap;this._renderingDone=!1;this._canceled=!1;this._capability=(0,n.createPromiseCapability)();this._renderTimer=null;this._bounds=[];this._capability.promise.finally(function(){if(a._layoutTextCtx){a._layoutTextCtx.canvas.width=0;a._layoutTextCtx.canvas.height=0;a._layoutTextCtx=null}}).catch(function(){})}d.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0;if(this._reader){this._reader.cancel(new n.AbortException("TextLayer task cancelled."));this._reader=null}if(null!==this._renderTimer){clearTimeout(this._renderTimer);this._renderTimer=null}this._capability.reject(new Error("TextLayer task cancelled."))},_processItems:function _processItems(e,a){for(var n=0,r=e.length;n<r;n++){this._textContentItemsStr.push(e[n].str);t(this,e[n],a)}},_layoutText:function _layoutText(e){var t=this._textDivProperties.get(e);if(t.isWhitespace){return}var a="";if(0!==t.canvasWidth){var n=e.style,r=n.fontSize,o=n.fontFamily;if(r!==this._layoutTextLastFontSize||o!==this._layoutTextLastFontFamily){this._layoutTextCtx.font="".concat(r," ").concat(o);this._layoutTextLastFontSize=r;this._layoutTextLastFontFamily=o}var s=this._layoutTextCtx.measureText(e.textContent),i=s.width;if(0<i){t.scale=t.canvasWidth/i;a="scaleX(".concat(t.scale,")")}}if(0!==t.angle){a="rotate(".concat(t.angle,"deg) ").concat(a)}if(0<a.length){if(this._enhanceTextSelection){t.originalTransform=a}e.style.transform=a}this._textDivProperties.set(e,t);this._container.appendChild(e)},_render:function(e){var t=this,r=(0,n.createPromiseCapability)(),o=Object.create(null),s=this._document.createElement("canvas");s.mozOpaque=!0;this._layoutTextCtx=s.getContext("2d",{alpha:!1});if(this._textContent){var i=this._textContent.items,d=this._textContent.styles;this._processItems(i,d);r.resolve()}else if(this._textContentStream){var l=function(){t._reader.read().then(function(e){var a=e.value,n=e.done;if(n){r.resolve();return}Object.assign(o,a.styles);t._processItems(a.items,o);l()},r.reject)};this._reader=this._textContentStream.getReader();l()}else{throw new Error("Neither \"textContent\" nor \"textContentStream\" parameters specified.")}r.promise.then(function(){o=null;if(!e){a(t)}else{t._renderTimer=setTimeout(function(){a(t);t._renderTimer=null},e)}},this._capability.reject)},expandTextDivs:function(e){if(!this._enhanceTextSelection||!this._renderingDone){return}if(null!==this._bounds){o(this);this._bounds=null}for(var t=[],a=[],n=0,r=this._textDivs.length;n<r;n++){var s=this._textDivs[n],d=this._textDivProperties.get(s);if(d.isWhitespace){continue}if(e){t.length=0;a.length=0;if(d.originalTransform){t.push(d.originalTransform)}if(0<d.paddingTop){a.push("".concat(d.paddingTop,"px"));t.push("translateY(".concat(-d.paddingTop,"px)"))}else{a.push(0)}if(0<d.paddingRight){a.push("".concat(d.paddingRight/d.scale,"px"))}else{a.push(0)}if(0<d.paddingBottom){a.push("".concat(d.paddingBottom,"px"))}else{a.push(0)}if(0<d.paddingLeft){a.push("".concat(d.paddingLeft/d.scale,"px"));t.push("translateX(".concat(-d.paddingLeft/d.scale,"px)"))}else{a.push(0)}s.style.padding=a.join(" ");if(t.length){s.style.transform=t.join(" ")}}else{s.style.padding=null;s.style.transform=d.originalTransform}}}};return function(e){var t=new d({textContent:e.textContent,textContentStream:e.textContentStream,container:e.container,viewport:e.viewport,textDivs:e.textDivs,textContentItemsStr:e.textContentItemsStr,enhanceTextSelection:e.enhanceTextSelection});t._render(e.timeout);return t}}();t.renderTextLayer=r},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.SVGGraphics=void 0;var n=a(2),r=a(1),o=a(4),s=function(){throw new Error("Not implemented: SVGGraphics")};t.SVGGraphics=s;{var d=function(e){var t=[],a=[],n=_createForOfIteratorHelper(e),r;try{for(n.s();!(r=n.n()).done;){var o=r.value;if("save"===o.fn){t.push({fnId:92,fn:"group",items:[]});a.push(t);t=t[t.length-1].items;continue}if("restore"===o.fn){t=a.pop()}else{t.push(o)}}}catch(e){n.e(e)}finally{n.f()}return t},l=function(e){if(Number.isInteger(e)){return e.toString()}var t=e.toFixed(10),a=t.length-1;if("0"!==t[a]){return t}do{a--}while("0"===t[a]);return t.substring(0,"."===t[a]?a:a+1)},i=function(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2]){if(1===e[0]&&1===e[3]){return""}return"scale(".concat(l(e[0])," ").concat(l(e[3]),")")}if(e[0]===e[3]&&e[1]===-e[2]){var t=180*Math.acos(e[0])/Math.PI;return"rotate(".concat(l(t),")")}}else{if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]){return"translate(".concat(l(e[4])," ").concat(l(e[5]),")")}}return"matrix(".concat(l(e[0])," ").concat(l(e[1])," ").concat(l(e[2])," ").concat(l(e[3])," ").concat(l(e[4])," ")+"".concat(l(e[5]),")")},c={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},u=["butt","round","square"],p=["miter","round","bevel"],g=function(){for(var l=new Uint8Array([137,80,78,71,13,10,26,10]),u=12,p=new Int32Array(256),g=0,m;256>g;g++){m=g;for(var f=0;8>f;f++){if(1&m){m=3988292384^2147483647&m>>1}else{m=2147483647&m>>1}}p[g]=m}function e(e,t,n){for(var r=-1,o=t;o<n;o++){var s=255&(r^e[o]),a=p[s];r=r>>>8^a}return-1^r}function t(t,a,n,r){var o=r,s=a.length;n[o]=255&s>>24;n[o+1]=255&s>>16;n[o+2]=255&s>>8;n[o+3]=255&s;o+=4;n[o]=255&t.charCodeAt(0);n[o+1]=255&t.charCodeAt(1);n[o+2]=255&t.charCodeAt(2);n[o+3]=255&t.charCodeAt(3);o+=4;n.set(a,o);o+=a.length;var i=e(n,r+4,o);n[o]=255&i>>24;n[o+1]=255&i>>16;n[o+2]=255&i>>8;n[o+3]=255&i}function a(e,t,n){for(var r=1,o=0,s=t;s<n;++s){r=(r+(255&e[s]))%65521;o=(o+r)%65521}return o<<16|r}function r(e){if(!o.isNodeJS){return s(e)}try{var t;if(8<=parseInt(process.versions.node)){t=e}else{t=Buffer.from(e)}var a=require("zlib").deflateSync(t,{level:9});return a instanceof Uint8Array?a:new Uint8Array(a)}catch(t){(0,n.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return s(e)}function s(e){var t=e.length,n=65535,r=Math.ceil(t/n),o=new Uint8Array(2+t+5*r+4),s=0;o[s++]=120;o[s++]=156;var i=0;while(t>n){o[s++]=0;o[s++]=255;o[s++]=255;o[s++]=0;o[s++]=0;o.set(e.subarray(i,i+n),s);s+=n;i+=n;t-=n}o[s++]=1;o[s++]=255&t;o[s++]=255&t>>8;o[s++]=255&(65535&~t);o[s++]=255&(65535&~t)>>8;o.set(e.subarray(i),s);s+=e.length-i;var d=a(e,0,e.length);o[s++]=255&d>>24;o[s++]=255&d>>16;o[s++]=255&d>>8;o[s++]=255&d;return o}function d(e,a,o,s){var i=e.width,d=e.height,c,p,g,m=e.data;switch(a){case n.ImageKind.GRAYSCALE_1BPP:p=0;c=1;g=i+7>>3;break;case n.ImageKind.RGB_24BPP:p=2;c=8;g=3*i;break;case n.ImageKind.RGBA_32BPP:p=6;c=8;g=4*i;break;default:throw new Error("invalid format");}for(var f=new Uint8Array((1+g)*d),h=0,A=0,v=0;v<d;++v){f[h++]=0;f.set(m.subarray(A,A+g),h);A+=g;h+=g}if(a===n.ImageKind.GRAYSCALE_1BPP&&s){h=0;for(var x=0;x<d;x++){h++;for(var P=0;P<g;P++){f[h++]^=255}}}var _=new Uint8Array([255&i>>24,255&i>>16,255&i>>8,255&i,255&d>>24,255&d>>16,255&d>>8,255&d,c,p,0,0,0]),b=r(f),S=l.length+3*u+_.length+b.length,k=new Uint8Array(S),C=0;k.set(l,C);C+=l.length;t("IHDR",_,k,C);C+=u+_.length;t("IDATA",b,k,C);C+=u+b.length;t("IEND",new Uint8Array(0),k,C);return(0,n.createObjectURL)(k,"image/png",o)}return function(e,t,a){var r=e.kind===void 0?n.ImageKind.GRAYSCALE_1BPP:e.kind;return d(e,r,t,a)}}(),m=function(){function e(){_classCallCheck(this,e);this.fontSizeScale=1;this.fontWeight=c.fontWeight;this.fontSize=0;this.textMatrix=n.IDENTITY_MATRIX;this.fontMatrix=n.FONT_IDENTITY_MATRIX;this.leading=0;this.textRenderingMode=n.TextRenderingMode.FILL;this.textMatrixScale=1;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRise=0;this.fillColor=c.fillColor;this.strokeColor="#000000";this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.lineJoin="";this.lineCap="";this.miterLimit=0;this.dashArray=[];this.dashPhase=0;this.dependencies=[];this.activeClipUrl=null;this.clipGroup=null;this.maskId=""}_createClass(e,[{key:"clone",value:function clone(){return Object.create(this)}},{key:"setCurrentPoint",value:function setCurrentPoint(e,t){this.x=e;this.y=t}}]);return e}(),f=0,h=0,y=0;t.SVGGraphics=s=function(){function e(t,a){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!1;_classCallCheck(this,e);this.svgFactory=new r.DOMSVGFactory;this.current=new m;this.transformMatrix=n.IDENTITY_MATRIX;this.transformStack=[];this.extraStack=[];this.commonObjs=t;this.objs=a;this.pendingClip=null;this.pendingEOFill=!1;this.embedFonts=!1;this.embeddedFonts=Object.create(null);this.cssStyle=null;this.forceDataSchema=!!o;this._operatorIdMapping=[];for(var s in n.OPS){this._operatorIdMapping[n.OPS[s]]=s}}_createClass(e,[{key:"save",value:function save(){this.transformStack.push(this.transformMatrix);var e=this.current;this.extraStack.push(e);this.current=e.clone()}},{key:"restore",value:function restore(){this.transformMatrix=this.transformStack.pop();this.current=this.extraStack.pop();this.pendingClip=null;this.tgrp=null}},{key:"group",value:function group(e){this.save();this.executeOpTree(e);this.restore()}},{key:"loadDependencies",value:function loadDependencies(e){for(var t=this,a=e.fnArray,r=e.argsArray,o=0,s=a.length;o<s;o++){if(a[o]!==n.OPS.dependency){continue}var d=_createForOfIteratorHelper(r[o]),l;try{var c=function(){var e=l.value,a=e.startsWith("g_")?t.commonObjs:t.objs,n=new Promise(function(t){a.get(e,t)});t.current.dependencies.push(n)};for(d.s();!(l=d.n()).done;){c()}}catch(e){d.e(e)}finally{d.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function transform(t,a,r,o,s,e){this.transformMatrix=n.Util.transform(this.transformMatrix,[t,a,r,o,s,e]);this.tgrp=null}},{key:"getSVG",value:function getSVG(e,t){var a=this;this.viewport=t;var r=this._initialize(t);return this.loadDependencies(e).then(function(){a.transformMatrix=n.IDENTITY_MATRIX;a.executeOpTree(a.convertOpList(e));return r})}},{key:"convertOpList",value:function convertOpList(e){for(var t=this._operatorIdMapping,a=e.argsArray,n=e.fnArray,r=[],o=0,s=n.length,l;o<s;o++){l=n[o];r.push({fnId:l,fn:t[l],args:a[o]})}return d(r)}},{key:"executeOpTree",value:function executeOpTree(e){var t=_createForOfIteratorHelper(e),a;try{for(t.s();!(a=t.n()).done;){var r=a.value,o=r.fn,s=r.fnId,i=r.args;switch(0|s){case n.OPS.beginText:this.beginText();break;case n.OPS.dependency:break;case n.OPS.setLeading:this.setLeading(i);break;case n.OPS.setLeadingMoveText:this.setLeadingMoveText(i[0],i[1]);break;case n.OPS.setFont:this.setFont(i);break;case n.OPS.showText:this.showText(i[0]);break;case n.OPS.showSpacedText:this.showText(i[0]);break;case n.OPS.endText:this.endText();break;case n.OPS.moveText:this.moveText(i[0],i[1]);break;case n.OPS.setCharSpacing:this.setCharSpacing(i[0]);break;case n.OPS.setWordSpacing:this.setWordSpacing(i[0]);break;case n.OPS.setHScale:this.setHScale(i[0]);break;case n.OPS.setTextMatrix:this.setTextMatrix(i[0],i[1],i[2],i[3],i[4],i[5]);break;case n.OPS.setTextRise:this.setTextRise(i[0]);break;case n.OPS.setTextRenderingMode:this.setTextRenderingMode(i[0]);break;case n.OPS.setLineWidth:this.setLineWidth(i[0]);break;case n.OPS.setLineJoin:this.setLineJoin(i[0]);break;case n.OPS.setLineCap:this.setLineCap(i[0]);break;case n.OPS.setMiterLimit:this.setMiterLimit(i[0]);break;case n.OPS.setFillRGBColor:this.setFillRGBColor(i[0],i[1],i[2]);break;case n.OPS.setStrokeRGBColor:this.setStrokeRGBColor(i[0],i[1],i[2]);break;case n.OPS.setStrokeColorN:this.setStrokeColorN(i);break;case n.OPS.setFillColorN:this.setFillColorN(i);break;case n.OPS.shadingFill:this.shadingFill(i[0]);break;case n.OPS.setDash:this.setDash(i[0],i[1]);break;case n.OPS.setRenderingIntent:this.setRenderingIntent(i[0]);break;case n.OPS.setFlatness:this.setFlatness(i[0]);break;case n.OPS.setGState:this.setGState(i[0]);break;case n.OPS.fill:this.fill();break;case n.OPS.eoFill:this.eoFill();break;case n.OPS.stroke:this.stroke();break;case n.OPS.fillStroke:this.fillStroke();break;case n.OPS.eoFillStroke:this.eoFillStroke();break;case n.OPS.clip:this.clip("nonzero");break;case n.OPS.eoClip:this.clip("evenodd");break;case n.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case n.OPS.paintImageXObject:this.paintImageXObject(i[0]);break;case n.OPS.paintInlineImageXObject:this.paintInlineImageXObject(i[0]);break;case n.OPS.paintImageMaskXObject:this.paintImageMaskXObject(i[0]);break;case n.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(i[0],i[1]);break;case n.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case n.OPS.closePath:this.closePath();break;case n.OPS.closeStroke:this.closeStroke();break;case n.OPS.closeFillStroke:this.closeFillStroke();break;case n.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case n.OPS.nextLine:this.nextLine();break;case n.OPS.transform:this.transform(i[0],i[1],i[2],i[3],i[4],i[5]);break;case n.OPS.constructPath:this.constructPath(i[0],i[1]);break;case n.OPS.endPath:this.endPath();break;case 92:this.group(r.items);break;default:(0,n.warn)("Unimplemented operator ".concat(o));break;}}}catch(e){t.e(e)}finally{t.f()}}},{key:"setWordSpacing",value:function setWordSpacing(e){this.current.wordSpacing=e}},{key:"setCharSpacing",value:function setCharSpacing(e){this.current.charSpacing=e}},{key:"nextLine",value:function nextLine(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function setTextMatrix(t,a,n,r,o,e){var s=this.current;s.textMatrix=s.lineMatrix=[t,a,n,r,o,e];s.textMatrixScale=Math.sqrt(t*t+a*a);s.x=s.lineX=0;s.y=s.lineY=0;s.xcoords=[];s.ycoords=[];s.tspan=this.svgFactory.createElement("svg:tspan");s.tspan.setAttributeNS(null,"font-family",s.fontFamily);s.tspan.setAttributeNS(null,"font-size","".concat(l(s.fontSize),"px"));s.tspan.setAttributeNS(null,"y",l(-s.y));s.txtElement=this.svgFactory.createElement("svg:text");s.txtElement.appendChild(s.tspan)}},{key:"beginText",value:function beginText(){var e=this.current;e.x=e.lineX=0;e.y=e.lineY=0;e.textMatrix=n.IDENTITY_MATRIX;e.lineMatrix=n.IDENTITY_MATRIX;e.textMatrixScale=1;e.tspan=this.svgFactory.createElement("svg:tspan");e.txtElement=this.svgFactory.createElement("svg:text");e.txtgrp=this.svgFactory.createElement("svg:g");e.xcoords=[];e.ycoords=[]}},{key:"moveText",value:function moveText(e,t){var a=this.current;a.x=a.lineX+=e;a.y=a.lineY+=t;a.xcoords=[];a.ycoords=[];a.tspan=this.svgFactory.createElement("svg:tspan");a.tspan.setAttributeNS(null,"font-family",a.fontFamily);a.tspan.setAttributeNS(null,"font-size","".concat(l(a.fontSize),"px"));a.tspan.setAttributeNS(null,"y",l(-a.y))}},{key:"showText",value:function showText(e){var t=this.current,a=t.font,r=t.fontSize;if(0===r){return}var o=t.fontSizeScale,s=t.charSpacing,d=t.wordSpacing,u=t.fontDirection,p=t.textHScale*u,g=a.vertical,m=g?1:-1,f=a.defaultVMetrics,h=r*t.fontMatrix[0],y=0,A=_createForOfIteratorHelper(e),v;try{for(A.s();!(v=A.n()).done;){var F=v.value;if(null===F){y+=u*d;continue}else if((0,n.isNum)(F)){y+=m*F*r/1e3;continue}var _=(F.isSpace?d:0)+s,b=F.fontChar,S=void 0,k=void 0,C=F.width;if(g){var P=void 0,R=F.vmetric||f;P=F.vmetric?R[1]:.5*C;P=-P*h;var L=R[2]*h;C=R?-R[0]:C;S=P/o;k=(y+L)/o}else{S=y/o;k=0}if(F.isInFont||a.missingFile){t.xcoords.push(t.x+S);if(g){t.ycoords.push(-t.y+k)}t.tspan.textContent+=b}var I=void 0;if(g){I=C*h-_*u}else{I=C*h+_*u}y+=I}}catch(e){A.e(e)}finally{A.f()}t.tspan.setAttributeNS(null,"x",t.xcoords.map(l).join(" "));if(g){t.tspan.setAttributeNS(null,"y",t.ycoords.map(l).join(" "))}else{t.tspan.setAttributeNS(null,"y",l(-t.y))}if(g){t.y-=y}else{t.x+=y*p}t.tspan.setAttributeNS(null,"font-family",t.fontFamily);t.tspan.setAttributeNS(null,"font-size","".concat(l(t.fontSize),"px"));if(t.fontStyle!==c.fontStyle){t.tspan.setAttributeNS(null,"font-style",t.fontStyle)}if(t.fontWeight!==c.fontWeight){t.tspan.setAttributeNS(null,"font-weight",t.fontWeight)}var T=t.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;if(T===n.TextRenderingMode.FILL||T===n.TextRenderingMode.FILL_STROKE){if(t.fillColor!==c.fillColor){t.tspan.setAttributeNS(null,"fill",t.fillColor)}if(1>t.fillAlpha){t.tspan.setAttributeNS(null,"fill-opacity",t.fillAlpha)}}else if(t.textRenderingMode===n.TextRenderingMode.ADD_TO_PATH){t.tspan.setAttributeNS(null,"fill","transparent")}else{t.tspan.setAttributeNS(null,"fill","none")}if(T===n.TextRenderingMode.STROKE||T===n.TextRenderingMode.FILL_STROKE){var N=1/(t.textMatrixScale||1);this._setStrokeAttributes(t.tspan,N)}var E=t.textMatrix;if(0!==t.textRise){E=E.slice();E[5]+=t.textRise}t.txtElement.setAttributeNS(null,"transform","".concat(i(E)," scale(").concat(l(p),", -1)"));t.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve");t.txtElement.appendChild(t.tspan);t.txtgrp.appendChild(t.txtElement);this._ensureTransformGroup().appendChild(t.txtElement)}},{key:"setLeadingMoveText",value:function setLeadingMoveText(e,t){this.setLeading(-t);this.moveText(e,t)}},{key:"addFontStyle",value:function addFontStyle(e){if(!e.data){throw new Error("addFontStyle: No font data available, ensure that the \"fontExtraProperties\" API parameter is set.")}if(!this.cssStyle){this.cssStyle=this.svgFactory.createElement("svg:style");this.cssStyle.setAttributeNS(null,"type","text/css");this.defs.appendChild(this.cssStyle)}var t=(0,n.createObjectURL)(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+="@font-face { font-family: \"".concat(e.loadedName,"\";")+" src: url(".concat(t,"); }\n")}},{key:"setFont",value:function setFont(e){var t=this.current,a=this.commonObjs.get(e[0]),r=e[1];t.font=a;if(this.embedFonts&&!a.missingFile&&!this.embeddedFonts[a.loadedName]){this.addFontStyle(a);this.embeddedFonts[a.loadedName]=a}t.fontMatrix=a.fontMatrix||n.FONT_IDENTITY_MATRIX;var o="normal";if(a.black){o="900"}else if(a.bold){o="bold"}var s=a.italic?"italic":"normal";if(0>r){r=-r;t.fontDirection=-1}else{t.fontDirection=1}t.fontSize=r;t.fontFamily=a.loadedName;t.fontWeight=o;t.fontStyle=s;t.tspan=this.svgFactory.createElement("svg:tspan");t.tspan.setAttributeNS(null,"y",l(-t.y));t.xcoords=[];t.ycoords=[]}},{key:"endText",value:function endText(){var e,t=this.current;if(t.textRenderingMode&n.TextRenderingMode.ADD_TO_PATH_FLAG&&(null===(e=t.txtElement)||void 0===e?void 0:e.hasChildNodes())){t.element=t.txtElement;this.clip("nonzero");this.endPath()}}},{key:"setLineWidth",value:function setLineWidth(e){if(0<e){this.current.lineWidth=e}}},{key:"setLineCap",value:function setLineCap(e){this.current.lineCap=u[e]}},{key:"setLineJoin",value:function setLineJoin(e){this.current.lineJoin=p[e]}},{key:"setMiterLimit",value:function setMiterLimit(e){this.current.miterLimit=e}},{key:"setStrokeAlpha",value:function setStrokeAlpha(e){this.current.strokeAlpha=e}},{key:"setStrokeRGBColor",value:function setStrokeRGBColor(e,t,a){this.current.strokeColor=n.Util.makeHexColor(e,t,a)}},{key:"setFillAlpha",value:function setFillAlpha(e){this.current.fillAlpha=e}},{key:"setFillRGBColor",value:function setFillRGBColor(e,t,a){this.current.fillColor=n.Util.makeHexColor(e,t,a);this.current.tspan=this.svgFactory.createElement("svg:tspan");this.current.xcoords=[];this.current.ycoords=[]}},{key:"setStrokeColorN",value:function setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}},{key:"setFillColorN",value:function setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}},{key:"shadingFill",value:function shadingFill(e){var t=this.viewport.width,a=this.viewport.height,r=n.Util.inverseTransform(this.transformMatrix),o=n.Util.applyTransform([0,0],r),s=n.Util.applyTransform([0,a],r),i=n.Util.applyTransform([t,0],r),d=n.Util.applyTransform([t,a],r),l=Math.min(o[0],s[0],i[0],d[0]),c=Math.min(o[1],s[1],i[1],d[1]),u=Math.max(o[0],s[0],i[0],d[0]),p=Math.max(o[1],s[1],i[1],d[1]),g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x",l);g.setAttributeNS(null,"y",c);g.setAttributeNS(null,"width",u-l);g.setAttributeNS(null,"height",p-c);g.setAttributeNS(null,"fill",this._makeShadingPattern(e));if(1>this.current.fillAlpha){g.setAttributeNS(null,"fill-opacity",this.current.fillAlpha)}this._ensureTransformGroup().appendChild(g)}},{key:"_makeColorN_Pattern",value:function _makeColorN_Pattern(e){if("TilingPattern"===e[0]){return this._makeTilingPattern(e)}return this._makeShadingPattern(e)}},{key:"_makeTilingPattern",value:function _makeTilingPattern(e){var t=e[1],a=e[2],r=e[3]||n.IDENTITY_MATRIX,o=_slicedToArray(e[4],4),s=o[0],i=o[1],d=o[2],l=o[3],c=e[5],u=e[6],p=e[7],g="shading".concat(y++),m=n.Util.applyTransform([s,i],r),f=_slicedToArray(m,2),h=f[0],A=f[1],v=n.Util.applyTransform([d,l],r),_=_slicedToArray(v,2),b=_[0],S=_[1],k=n.Util.singularValueDecompose2dScale(r),C=_slicedToArray(k,2),x=C[0],P=C[1],R=this.svgFactory.createElement("svg:pattern");R.setAttributeNS(null,"id",g);R.setAttributeNS(null,"patternUnits","userSpaceOnUse");R.setAttributeNS(null,"width",c*x);R.setAttributeNS(null,"height",u*P);R.setAttributeNS(null,"x","".concat(h));R.setAttributeNS(null,"y","".concat(A));var T=this.svg,E=this.transformMatrix,F=this.current.fillColor,L=this.current.strokeColor,I=this.svgFactory.create(b-h,S-A);this.svg=I;this.transformMatrix=r;if(2===p){var N,M=(N=n.Util).makeHexColor.apply(N,_toConsumableArray(t));this.current.fillColor=M;this.current.strokeColor=M}this.executeOpTree(this.convertOpList(a));this.svg=T;this.transformMatrix=E;this.current.fillColor=F;this.current.strokeColor=L;R.appendChild(I.childNodes[0]);this.defs.appendChild(R);return"url(#".concat(g,")")}},{key:"_makeShadingPattern",value:function _makeShadingPattern(e){switch(e[0]){case"RadialAxial":var t="shading".concat(y++),a=e[3],r;switch(e[1]){case"axial":var o=e[4],s=e[5];r=this.svgFactory.createElement("svg:linearGradient");r.setAttributeNS(null,"id",t);r.setAttributeNS(null,"gradientUnits","userSpaceOnUse");r.setAttributeNS(null,"x1",o[0]);r.setAttributeNS(null,"y1",o[1]);r.setAttributeNS(null,"x2",s[0]);r.setAttributeNS(null,"y2",s[1]);break;case"radial":var i=e[4],d=e[5],l=e[6],c=e[7];r=this.svgFactory.createElement("svg:radialGradient");r.setAttributeNS(null,"id",t);r.setAttributeNS(null,"gradientUnits","userSpaceOnUse");r.setAttributeNS(null,"cx",d[0]);r.setAttributeNS(null,"cy",d[1]);r.setAttributeNS(null,"r",c);r.setAttributeNS(null,"fx",i[0]);r.setAttributeNS(null,"fy",i[1]);r.setAttributeNS(null,"fr",l);break;default:throw new Error("Unknown RadialAxial type: ".concat(e[1]));}var u=_createForOfIteratorHelper(a),p;try{for(u.s();!(p=u.n()).done;){var g=p.value,m=this.svgFactory.createElement("svg:stop");m.setAttributeNS(null,"offset",g[0]);m.setAttributeNS(null,"stop-color",g[1]);r.appendChild(m)}}catch(e){u.e(e)}finally{u.f()}this.defs.appendChild(r);return"url(#".concat(t,")");case"Mesh":(0,n.warn)("Unimplemented pattern Mesh");return null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(e[0]));}}},{key:"setDash",value:function setDash(e,t){this.current.dashArray=e;this.current.dashPhase=t}},{key:"constructPath",value:function constructPath(e,t){var a=this.current,r=a.x,o=a.y,s=[],i=0,c=_createForOfIteratorHelper(e),u;try{for(c.s();!(u=c.n()).done;){var h=u.value;switch(0|h){case n.OPS.rectangle:r=t[i++];o=t[i++];var p=t[i++],g=t[i++],m=r+p,f=o+g;s.push("M",l(r),l(o),"L",l(m),l(o),"L",l(m),l(f),"L",l(r),l(f),"Z");break;case n.OPS.moveTo:r=t[i++];o=t[i++];s.push("M",l(r),l(o));break;case n.OPS.lineTo:r=t[i++];o=t[i++];s.push("L",l(r),l(o));break;case n.OPS.curveTo:r=t[i+4];o=t[i+5];s.push("C",l(t[i]),l(t[i+1]),l(t[i+2]),l(t[i+3]),l(r),l(o));i+=6;break;case n.OPS.curveTo2:s.push("C",l(r),l(o),l(t[i]),l(t[i+1]),l(t[i+2]),l(t[i+3]));r=t[i+2];o=t[i+3];i+=4;break;case n.OPS.curveTo3:r=t[i+2];o=t[i+3];s.push("C",l(t[i]),l(t[i+1]),l(r),l(o),l(r),l(o));i+=4;break;case n.OPS.closePath:s.push("Z");break;}}}catch(e){c.e(e)}finally{c.f()}s=s.join(" ");if(a.path&&0<e.length&&e[0]!==n.OPS.rectangle&&e[0]!==n.OPS.moveTo){s=a.path.getAttributeNS(null,"d")+s}else{a.path=this.svgFactory.createElement("svg:path");this._ensureTransformGroup().appendChild(a.path)}a.path.setAttributeNS(null,"d",s);a.path.setAttributeNS(null,"fill","none");a.element=a.path;a.setCurrentPoint(r,o)}},{key:"endPath",value:function endPath(){var e=this.current;e.path=null;if(!this.pendingClip){return}if(!e.element){this.pendingClip=null;return}var t="clippath".concat(f++),a=this.svgFactory.createElement("svg:clipPath");a.setAttributeNS(null,"id",t);a.setAttributeNS(null,"transform",i(this.transformMatrix));var n=e.element.cloneNode(!0);if("evenodd"===this.pendingClip){n.setAttributeNS(null,"clip-rule","evenodd")}else{n.setAttributeNS(null,"clip-rule","nonzero")}this.pendingClip=null;a.appendChild(n);this.defs.appendChild(a);if(e.activeClipUrl){e.clipGroup=null;this.extraStack.forEach(function(e){e.clipGroup=null});a.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl="url(#".concat(t,")");this.tgrp=null}},{key:"clip",value:function clip(e){this.pendingClip=e}},{key:"closePath",value:function closePath(){var e=this.current;if(e.path){var t="".concat(e.path.getAttributeNS(null,"d"),"Z");e.path.setAttributeNS(null,"d",t)}}},{key:"setLeading",value:function setLeading(e){this.current.leading=-e}},{key:"setTextRise",value:function setTextRise(e){this.current.textRise=e}},{key:"setTextRenderingMode",value:function setTextRenderingMode(e){this.current.textRenderingMode=e}},{key:"setHScale",value:function setHScale(e){this.current.textHScale=e/100}},{key:"setRenderingIntent",value:function setRenderingIntent(){}},{key:"setFlatness",value:function setFlatness(){}},{key:"setGState",value:function setGState(e){var t=_createForOfIteratorHelper(e),a;try{for(t.s();!(a=t.n()).done;){var r=_slicedToArray(a.value,2),o=r[0],s=r[1];switch(o){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s);break;case"CA":this.setStrokeAlpha(s);break;case"ca":this.setFillAlpha(s);break;default:(0,n.warn)("Unimplemented graphic state operator ".concat(o));break;}}}catch(e){t.e(e)}finally{t.f()}}},{key:"fill",value:function fill(){var e=this.current;if(e.element){e.element.setAttributeNS(null,"fill",e.fillColor);e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha);this.endPath()}}},{key:"stroke",value:function stroke(){var e=this.current;if(e.element){this._setStrokeAttributes(e.element);e.element.setAttributeNS(null,"fill","none");this.endPath()}}},{key:"_setStrokeAttributes",value:function _setStrokeAttributes(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,a=this.current,n=a.dashArray;if(1!==t&&0<n.length){n=n.map(function(e){return t*e})}e.setAttributeNS(null,"stroke",a.strokeColor);e.setAttributeNS(null,"stroke-opacity",a.strokeAlpha);e.setAttributeNS(null,"stroke-miterlimit",l(a.miterLimit));e.setAttributeNS(null,"stroke-linecap",a.lineCap);e.setAttributeNS(null,"stroke-linejoin",a.lineJoin);e.setAttributeNS(null,"stroke-width",l(t*a.lineWidth)+"px");e.setAttributeNS(null,"stroke-dasharray",n.map(l).join(" "));e.setAttributeNS(null,"stroke-dashoffset",l(t*a.dashPhase)+"px")}},{key:"eoFill",value:function eoFill(){if(this.current.element){this.current.element.setAttributeNS(null,"fill-rule","evenodd")}this.fill()}},{key:"fillStroke",value:function fillStroke(){this.stroke();this.fill()}},{key:"eoFillStroke",value:function eoFillStroke(){if(this.current.element){this.current.element.setAttributeNS(null,"fill-rule","evenodd")}this.fillStroke()}},{key:"closeStroke",value:function closeStroke(){this.closePath();this.stroke()}},{key:"closeFillStroke",value:function closeFillStroke(){this.closePath();this.fillStroke()}},{key:"closeEOFillStroke",value:function closeEOFillStroke(){this.closePath();this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function paintSolidColorImageMask(){var e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0");e.setAttributeNS(null,"y","0");e.setAttributeNS(null,"width","1px");e.setAttributeNS(null,"height","1px");e.setAttributeNS(null,"fill",this.current.fillColor);this._ensureTransformGroup().appendChild(e)}},{key:"paintImageXObject",value:function paintImageXObject(e){var t=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);if(!t){(0,n.warn)("Dependent image with object ID ".concat(e," is not ready yet"));return}this.paintInlineImageXObject(t)}},{key:"paintInlineImageXObject",value:function paintInlineImageXObject(e,t){var a=e.width,n=e.height,r=g(e,this.forceDataSchema,!!t),o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0");o.setAttributeNS(null,"y","0");o.setAttributeNS(null,"width",l(a));o.setAttributeNS(null,"height",l(n));this.current.element=o;this.clip("nonzero");var s=this.svgFactory.createElement("svg:image");s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);s.setAttributeNS(null,"x","0");s.setAttributeNS(null,"y",l(-n));s.setAttributeNS(null,"width",l(a)+"px");s.setAttributeNS(null,"height",l(n)+"px");s.setAttributeNS(null,"transform","scale(".concat(l(1/a)," ").concat(l(-1/n),")"));if(t){t.appendChild(s)}else{this._ensureTransformGroup().appendChild(s)}}},{key:"paintImageMaskXObject",value:function paintImageMaskXObject(e){var t=this.current,a=e.width,n=e.height,r=t.fillColor;t.maskId="mask".concat(h++);var o=this.svgFactory.createElement("svg:mask");o.setAttributeNS(null,"id",t.maskId);var s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0");s.setAttributeNS(null,"y","0");s.setAttributeNS(null,"width",l(a));s.setAttributeNS(null,"height",l(n));s.setAttributeNS(null,"fill",r);s.setAttributeNS(null,"mask","url(#".concat(t.maskId,")"));this.defs.appendChild(o);this._ensureTransformGroup().appendChild(s);this.paintInlineImageXObject(e,o)}},{key:"paintFormXObjectBegin",value:function paintFormXObjectBegin(e,t){if(Array.isArray(e)&&6===e.length){this.transform(e[0],e[1],e[2],e[3],e[4],e[5])}if(t){var a=t[2]-t[0],n=t[3]-t[1],r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x",t[0]);r.setAttributeNS(null,"y",t[1]);r.setAttributeNS(null,"width",l(a));r.setAttributeNS(null,"height",l(n));this.current.element=r;this.clip("nonzero");this.endPath()}}},{key:"paintFormXObjectEnd",value:function paintFormXObjectEnd(){}},{key:"_initialize",value:function _initialize(e){var t=this.svgFactory.create(e.width,e.height),a=this.svgFactory.createElement("svg:defs");t.appendChild(a);this.defs=a;var n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"transform",i(e.transform));t.appendChild(n);this.svg=n;return t}},{key:"_ensureClipGroup",value:function _ensureClipGroup(){if(!this.current.clipGroup){var e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl);this.svg.appendChild(e);this.current.clipGroup=e}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function _ensureTransformGroup(){if(!this.tgrp){this.tgrp=this.svgFactory.createElement("svg:g");this.tgrp.setAttributeNS(null,"transform",i(this.transformMatrix));if(this.current.activeClipUrl){this._ensureClipGroup().appendChild(this.tgrp)}else{this.svg.appendChild(this.tgrp)}}return this.tgrp}}]);return e}()}},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.PDFNodeStream=void 0;var o=a(2),s=a(24);var i=require("fs"),d=require("http"),l=require("https"),c=require("url"),u=/^file:\/\/\/[a-zA-Z]:\//;function n(e){var t=c.parse(e);if("file:"===t.protocol||t.host){return t}if(/^[a-z]:[/\\]/i.test(e)){return c.parse("file:///".concat(e))}if(!t.host){t.protocol="file:"}return t}var p=function(){function e(t){_classCallCheck(this,e);this.source=t;this.url=n(t.url);this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol;this.isFsUrl="file:"===this.url.protocol;this.httpHeaders=this.isHttp&&t.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}_createClass(e,[{key:"getFullReader",value:function getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once.");this._fullRequestReader=this.isFsUrl?new y(this):new f(this);return this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(e,t){if(t<=this._progressiveDataLength){return null}var a=this.isFsUrl?new A(this,e,t):new h(this,e,t);this._rangeRequestReaders.push(a);return a}},{key:"cancelAllRequests",value:function cancelAllRequests(e){if(this._fullRequestReader){this._fullRequestReader.cancel(e)}var t=this._rangeRequestReaders.slice(0);t.forEach(function(t){t.cancel(e)})}},{key:"_progressiveDataLength",get:function get(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}}]);return e}();t.PDFNodeStream=p;var g=function(){function e(t){_classCallCheck(this,e);this._url=t.url;this._done=!1;this._storedError=null;this.onProgress=null;var a=t.source;this._contentLength=a.length;this._loaded=0;this._filename=null;this._disableRange=a.disableRange||!1;this._rangeChunkSize=a.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=!0}this._isStreamingSupported=!a.disableStream;this._isRangeSupported=!a.disableRange;this._readableStream=null;this._readCapability=(0,o.createPromiseCapability)();this._headersCapability=(0,o.createPromiseCapability)()}_createClass(e,[{key:"read",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1){switch(e.prev=e.next){case 0:e.next=2;return this._readCapability.promise;case 2:if(!this._done){e.next=4;break}return e.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){e.next=6;break}throw this._storedError;case 6:t=this._readableStream.read();if(!(null===t)){e.next=10;break}this._readCapability=(0,o.createPromiseCapability)();return e.abrupt("return",this.read());case 10:this._loaded+=t.length;if(this.onProgress){this.onProgress({loaded:this._loaded,total:this._contentLength})}a=new Uint8Array(t).buffer;return e.abrupt("return",{value:a,done:!1});case 14:case"end":return e.stop();}}},e,this)}));return function read(){return e.apply(this,arguments)}}()},{key:"cancel",value:function cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}},{key:"_error",value:function _error(e){this._storedError=e;this._readCapability.resolve()}},{key:"_setReadableStream",value:function _setReadableStream(e){var t=this;this._readableStream=e;e.on("readable",function(){t._readCapability.resolve()});e.on("end",function(){e.destroy();t._done=!0;t._readCapability.resolve()});e.on("error",function(e){t._error(e)});if(!this._isStreamingSupported&&this._isRangeSupported){this._error(new o.AbortException("streaming is disabled"))}if(this._storedError){this._readableStream.destroy(this._storedError)}}},{key:"headersReady",get:function get(){return this._headersCapability.promise}},{key:"filename",get:function get(){return this._filename}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}}]);return e}(),m=function(){function e(t){_classCallCheck(this,e);this._url=t.url;this._done=!1;this._storedError=null;this.onProgress=null;this._loaded=0;this._readableStream=null;this._readCapability=(0,o.createPromiseCapability)();var a=t.source;this._isStreamingSupported=!a.disableStream}_createClass(e,[{key:"read",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1){switch(e.prev=e.next){case 0:e.next=2;return this._readCapability.promise;case 2:if(!this._done){e.next=4;break}return e.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){e.next=6;break}throw this._storedError;case 6:t=this._readableStream.read();if(!(null===t)){e.next=10;break}this._readCapability=(0,o.createPromiseCapability)();return e.abrupt("return",this.read());case 10:this._loaded+=t.length;if(this.onProgress){this.onProgress({loaded:this._loaded})}a=new Uint8Array(t).buffer;return e.abrupt("return",{value:a,done:!1});case 14:case"end":return e.stop();}}},e,this)}));return function read(){return e.apply(this,arguments)}}()},{key:"cancel",value:function cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}},{key:"_error",value:function _error(e){this._storedError=e;this._readCapability.resolve()}},{key:"_setReadableStream",value:function _setReadableStream(e){var t=this;this._readableStream=e;e.on("readable",function(){t._readCapability.resolve()});e.on("end",function(){e.destroy();t._done=!0;t._readCapability.resolve()});e.on("error",function(e){t._error(e)});if(this._storedError){this._readableStream.destroy(this._storedError)}}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}}]);return e}();function r(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}var f=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){var n;_classCallCheck(this,t);n=a.call(this,e);var i=function(t){if(404===t.statusCode){var l=new o.MissingPDFException("Missing PDF \"".concat(n._url,"\"."));n._storedError=l;n._headersCapability.reject(l);return}n._headersCapability.resolve();n._setReadableStream(t);var a=function(e){return n._readableStream.headers[e.toLowerCase()]},r=(0,s.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:e.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),i=r.allowRangeRequests,d=r.suggestedLength;n._isRangeSupported=i;n._contentLength=d||n._contentLength;n._filename=(0,s.extractFilenameFromHeader)(a)};n._request=null;if("http:"===n._url.protocol){n._request=d.request(r(n._url,e.httpHeaders),i)}else{n._request=l.request(r(n._url,e.httpHeaders),i)}n._request.on("error",function(e){n._storedError=e;n._headersCapability.reject(e)});n._request.end();return n}return t}(g),h=function(e){_inherits(t,e);var a=_createSuper(t);function t(e,n,s){var i;_classCallCheck(this,t);i=a.call(this,e);i._httpHeaders={};for(var u in e.httpHeaders){var p=e.httpHeaders[u];if("undefined"==typeof p){continue}i._httpHeaders[u]=p}i._httpHeaders.Range="bytes=".concat(n,"-").concat(s-1);var c=function(e){if(404===e.statusCode){var t=new o.MissingPDFException("Missing PDF \"".concat(i._url,"\"."));i._storedError=t;return}i._setReadableStream(e)};i._request=null;if("http:"===i._url.protocol){i._request=d.request(r(i._url,i._httpHeaders),c)}else{i._request=l.request(r(i._url,i._httpHeaders),c)}i._request.on("error",function(e){i._storedError=e});i._request.end();return i}return t}(m),y=function(e){_inherits(t,e);var a=_createSuper(t);function t(e){var n;_classCallCheck(this,t);n=a.call(this,e);var r=decodeURIComponent(n._url.path);if(u.test(n._url.href)){r=r.replace(/^\//,"")}i.lstat(r,function(e,t){if(e){if("ENOENT"===e.code){e=new o.MissingPDFException("Missing PDF \"".concat(r,"\"."))}n._storedError=e;n._headersCapability.reject(e);return}n._contentLength=t.size;n._setReadableStream(i.createReadStream(r));n._headersCapability.resolve()});return n}return t}(g),A=function(e){_inherits(t,e);var a=_createSuper(t);function t(e,n,r){var o;_classCallCheck(this,t);o=a.call(this,e);var s=decodeURIComponent(o._url.path);if(u.test(o._url.href)){s=s.replace(/^\//,"")}o._setReadableStream(i.createReadStream(s,{start:n,end:r-1}));return o}return t}(m)},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.createResponseStatusError=function(e,t){if(404===e||0===e&&t.startsWith("file:")){return new n.MissingPDFException("Missing PDF \""+t+"\".")}return new n.UnexpectedResponseException("Unexpected server response ("+e+") while retrieving PDF \""+t+"\".",e)};t.extractFilenameFromHeader=function(e){var t=e("Content-Disposition");if(t){var a=(0,r.getFilenameFromContentDispositionHeader)(t);if(a.includes("%")){try{a=decodeURIComponent(a)}catch(e){}}if(/\.pdf$/i.test(a)){return a}}return null};t.validateRangeRequestCapabilities=function(e){var t=e.getResponseHeader,a=e.isHttp,r=e.rangeChunkSize,o=e.disableRange;(0,n.assert)(0<r,"Range chunk size must be larger than zero");var s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(t("Content-Length"),10);if(!Number.isInteger(i)){return s}s.suggestedLength=i;if(i<=2*r){return s}if(o||!a){return s}if("bytes"!==t("Accept-Ranges")){return s}var d=t("Content-Encoding")||"identity";if("identity"!==d){return s}s.allowRangeRequests=!0;return s};t.validateResponseStatus=function(e){return 200===e||206===e};var n=a(2),r=a(25)},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.getFilenameFromContentDispositionHeader=function(e){var d=!0,l=t("filename\\*","i").exec(e);if(l){l=l[1];var c=o(l);c=unescape(c);c=s(c);c=i(c);return n(c)}l=r(e);if(l){var u=i(l);return n(u)}l=t("filename","i").exec(e);if(l){l=l[1];var p=o(l);p=i(p);return n(p)}function t(e,t){return new RegExp("(?:^|;)\\s*"+e+"\\s*=\\s*([^\";\\s][^;\\s]*|\"(?:[^\"\\\\]|\\\\\"?)+\"?)",t)}function a(t,a){if(t){if(!/^[\x00-\xFF]+$/.test(a)){return a}try{var n=new TextDecoder(t,{fatal:!0}),r=Array.from(a,function(e){return 255&e.charCodeAt(0)});a=n.decode(new Uint8Array(r));d=!1}catch(n){if(/^utf-?8$/i.test(t)){try{a=decodeURIComponent(escape(a));d=!1}catch(e){}}}}return a}function n(e){if(d&&/[\x80-\xff]/.test(e)){e=a("utf-8",e);if(d){e=a("iso-8859-1",e)}}return e}function r(e){var a=[],r,i=t("filename\\*((?!0\\d)\\d+)(\\*?)","ig");while(null!==(r=i.exec(e))){var d=r,l=_slicedToArray(d,4),c=l[1],u=l[2],p=l[3];c=parseInt(c,10);if(c in a){if(0===c){break}continue}a[c]=[u,p]}for(var g=[],m=0;m<a.length;++m){if(!(m in a)){break}var f=_slicedToArray(a[m],2),h=f[0],y=f[1];y=o(y);if(h){y=unescape(y);if(0===m){y=s(y)}}g.push(y)}return g.join("")}function o(e){if(e.startsWith("\"")){for(var t=e.slice(1).split("\\\""),a=0,n;a<t.length;++a){n=t[a].indexOf("\"");if(-1!==n){t[a]=t[a].slice(0,n);t.length=a+1}t[a]=t[a].replace(/\\(.)/g,"$1")}e=t.join("\"")}return e}function s(e){var t=e.indexOf("'");if(-1===t){return e}var n=e.slice(0,t),r=e.slice(t+1),o=r.replace(/^[^']*'/,"");return a(n,o)}function i(e){if(!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)){return e}return e.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,n,r){if("q"===n||"Q"===n){r=r.replace(/_/g," ");r=r.replace(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))});return a(t,r)}try{r=atob(r)}catch(t){}return a(t,r)})}return""}},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.PDFNetworkStream=void 0;var r=a(2),o=a(24);var s=206;function n(e){var t=e.response;if("string"!=typeof t){return t}var a=(0,r.stringToBytes)(t);return a.buffer}var i=function(){function e(t,a){_classCallCheck(this,e);this.url=t;a=a||{};this.isHttp=/^https?:/i.test(t);this.httpHeaders=this.isHttp&&a.httpHeaders||{};this.withCredentials=a.withCredentials||!1;this.getXhr=a.getXhr||function(){return new XMLHttpRequest};this.currXhrId=0;this.pendingRequests=Object.create(null)}_createClass(e,[{key:"requestRange",value:function requestRange(e,t,a){var n={begin:e,end:t};for(var r in a){n[r]=a[r]}return this.request(n)}},{key:"requestFull",value:function requestFull(e){return this.request(e)}},{key:"request",value:function request(e){var t=this.getXhr(),a=this.currXhrId++,n=this.pendingRequests[a]={xhr:t};t.open("GET",this.url);t.withCredentials=this.withCredentials;for(var r in this.httpHeaders){var o=this.httpHeaders[r];if("undefined"==typeof o){continue}t.setRequestHeader(r,o)}if(this.isHttp&&"begin"in e&&"end"in e){t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1));n.expectedStatus=s}else{n.expectedStatus=200}t.responseType="arraybuffer";if(e.onError){t.onerror=function(){e.onError(t.status)}}t.onreadystatechange=this.onStateChange.bind(this,a);t.onprogress=this.onProgress.bind(this,a);n.onHeadersReceived=e.onHeadersReceived;n.onDone=e.onDone;n.onError=e.onError;n.onProgress=e.onProgress;t.send(null);return a}},{key:"onProgress",value:function onProgress(e,t){var a=this.pendingRequests[e];if(!a){return}if(a.onProgress){a.onProgress(t)}}},{key:"onStateChange",value:function onStateChange(e){var t=this.pendingRequests[e];if(!t){return}var a=t.xhr;if(2<=a.readyState&&t.onHeadersReceived){t.onHeadersReceived();delete t.onHeadersReceived}if(4!==a.readyState){return}if(!(e in this.pendingRequests)){return}delete this.pendingRequests[e];if(0===a.status&&this.isHttp){if(t.onError){t.onError(a.status)}return}var r=a.status||200,o=r===200&&t.expectedStatus===s;if(!o&&r!==t.expectedStatus){if(t.onError){t.onError(a.status)}return}var i=n(a);if(r===s){var d=a.getResponseHeader("Content-Range"),l=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);t.onDone({begin:parseInt(l[1],10),chunk:i})}else if(i){t.onDone({begin:0,chunk:i})}else if(t.onError){t.onError(a.status)}}},{key:"getRequestXhr",value:function getRequestXhr(e){return this.pendingRequests[e].xhr}},{key:"isPendingRequest",value:function isPendingRequest(e){return e in this.pendingRequests}},{key:"abortRequest",value:function abortRequest(e){var t=this.pendingRequests[e].xhr;delete this.pendingRequests[e];t.abort()}}]);return e}(),d=function(){function e(t){_classCallCheck(this,e);this._source=t;this._manager=new i(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials});this._rangeChunkSize=t.rangeChunkSize;this._fullRequestReader=null;this._rangeRequestReaders=[]}_createClass(e,[{key:"_onRangeRequestReaderClosed",value:function _onRangeRequestReaderClosed(e){var t=this._rangeRequestReaders.indexOf(e);if(0<=t){this._rangeRequestReaders.splice(t,1)}}},{key:"getFullReader",value:function getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once.");this._fullRequestReader=new l(this._manager,this._source);return this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(e,t){var a=new c(this._manager,e,t);a.onClosed=this._onRangeRequestReaderClosed.bind(this);this._rangeRequestReaders.push(a);return a}},{key:"cancelAllRequests",value:function cancelAllRequests(e){if(this._fullRequestReader){this._fullRequestReader.cancel(e)}var t=this._rangeRequestReaders.slice(0);t.forEach(function(t){t.cancel(e)})}}]);return e}();t.PDFNetworkStream=d;var l=function(){function e(t,a){_classCallCheck(this,e);this._manager=t;var n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=a.url;this._fullRequestId=t.requestFull(n);this._headersReceivedCapability=(0,r.createPromiseCapability)();this._disableRange=a.disableRange||!1;this._contentLength=a.length;this._rangeChunkSize=a.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=!0}this._isStreamingSupported=!1;this._isRangeSupported=!1;this._cachedChunks=[];this._requests=[];this._done=!1;this._storedError=void 0;this._filename=null;this.onProgress=null}_createClass(e,[{key:"_onHeadersReceived",value:function _onHeadersReceived(){var e=this._fullRequestId,t=this._manager.getRequestXhr(e),a=function(e){return t.getResponseHeader(e)},n=(0,o.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),r=n.allowRangeRequests,s=n.suggestedLength;if(r){this._isRangeSupported=!0}this._contentLength=s||this._contentLength;this._filename=(0,o.extractFilenameFromHeader)(a);if(this._isRangeSupported){this._manager.abortRequest(e)}this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function _onDone(e){if(e){if(0<this._requests.length){var t=this._requests.shift();t.resolve({value:e.chunk,done:!1})}else{this._cachedChunks.push(e.chunk)}}this._done=!0;if(0<this._cachedChunks.length){return}this._requests.forEach(function(e){e.resolve({value:void 0,done:!0})});this._requests=[]}},{key:"_onError",value:function _onError(e){var t=this._url,a=(0,o.createResponseStatusError)(e,t);this._storedError=a;this._headersReceivedCapability.reject(a);this._requests.forEach(function(e){e.reject(a)});this._requests=[];this._cachedChunks=[]}},{key:"_onProgress",value:function _onProgress(e){if(this.onProgress){this.onProgress({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}}},{key:"read",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1){switch(e.prev=e.next){case 0:if(!this._storedError){e.next=2;break}throw this._storedError;case 2:if(!(0<this._cachedChunks.length)){e.next=5;break}t=this._cachedChunks.shift();return e.abrupt("return",{value:t,done:!1});case 5:if(!this._done){e.next=7;break}return e.abrupt("return",{value:void 0,done:!0});case 7:a=(0,r.createPromiseCapability)();this._requests.push(a);return e.abrupt("return",a.promise);case 10:case"end":return e.stop();}}},e,this)}));return function read(){return e.apply(this,arguments)}}()},{key:"cancel",value:function cancel(e){this._done=!0;this._headersReceivedCapability.reject(e);this._requests.forEach(function(e){e.resolve({value:void 0,done:!0})});this._requests=[];if(this._manager.isPendingRequest(this._fullRequestId)){this._manager.abortRequest(this._fullRequestId)}this._fullRequestReader=null}},{key:"filename",get:function get(){return this._filename}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"headersReady",get:function get(){return this._headersReceivedCapability.promise}}]);return e}(),c=function(){function e(t,a,n){_classCallCheck(this,e);this._manager=t;var r={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=t.requestRange(a,n,r);this._requests=[];this._queuedChunk=null;this._done=!1;this.onProgress=null;this.onClosed=null}_createClass(e,[{key:"_close",value:function _close(){if(this.onClosed){this.onClosed(this)}}},{key:"_onDone",value:function _onDone(e){var t=e.chunk;if(0<this._requests.length){var a=this._requests.shift();a.resolve({value:t,done:!1})}else{this._queuedChunk=t}this._done=!0;this._requests.forEach(function(e){e.resolve({value:void 0,done:!0})});this._requests=[];this._close()}},{key:"_onProgress",value:function _onProgress(e){if(!this.isStreamingSupported&&this.onProgress){this.onProgress({loaded:e.loaded})}}},{key:"read",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1){switch(e.prev=e.next){case 0:if(!(null!==this._queuedChunk)){e.next=4;break}t=this._queuedChunk;this._queuedChunk=null;return e.abrupt("return",{value:t,done:!1});case 4:if(!this._done){e.next=6;break}return e.abrupt("return",{value:void 0,done:!0});case 6:a=(0,r.createPromiseCapability)();this._requests.push(a);return e.abrupt("return",a.promise);case 9:case"end":return e.stop();}}},e,this)}));return function read(){return e.apply(this,arguments)}}()},{key:"cancel",value:function cancel(){this._done=!0;this._requests.forEach(function(e){e.resolve({value:void 0,done:!0})});this._requests=[];if(this._manager.isPendingRequest(this._requestId)){this._manager.abortRequest(this._requestId)}this._close()}},{key:"isStreamingSupported",get:function get(){return!1}}]);return e}()},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.PDFFetchStream=void 0;var o=a(2),s=a(24);function n(e,t,a){return{method:"GET",headers:e,signal:null===a||void 0===a?void 0:a.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function r(e){var t=new Headers;for(var a in e){var n=e[a];if("undefined"==typeof n){continue}t.append(a,n)}return t}var i=function(){function e(t){_classCallCheck(this,e);this.source=t;this.isHttp=/^https?:/i.test(t.url);this.httpHeaders=this.isHttp&&t.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}_createClass(e,[{key:"getFullReader",value:function getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once.");this._fullRequestReader=new d(this);return this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(e,t){if(t<=this._progressiveDataLength){return null}var a=new l(this,e,t);this._rangeRequestReaders.push(a);return a}},{key:"cancelAllRequests",value:function cancelAllRequests(e){if(this._fullRequestReader){this._fullRequestReader.cancel(e)}var t=this._rangeRequestReaders.slice(0);t.forEach(function(t){t.cancel(e)})}},{key:"_progressiveDataLength",get:function get(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}}]);return e}();t.PDFFetchStream=i;var d=function(){function e(t){var a=this;_classCallCheck(this,e);this._stream=t;this._reader=null;this._loaded=0;this._filename=null;var i=t.source;this._withCredentials=i.withCredentials||!1;this._contentLength=i.length;this._headersCapability=(0,o.createPromiseCapability)();this._disableRange=i.disableRange||!1;this._rangeChunkSize=i.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=!0}if("undefined"!=typeof AbortController){this._abortController=new AbortController}this._isStreamingSupported=!i.disableStream;this._isRangeSupported=!i.disableRange;this._headers=r(this._stream.httpHeaders);var d=i.url;fetch(d,n(this._headers,this._withCredentials,this._abortController)).then(function(e){if(!(0,s.validateResponseStatus)(e.status)){throw(0,s.createResponseStatusError)(e.status,d)}a._reader=e.body.getReader();a._headersCapability.resolve();var t=function(t){return e.headers.get(t)},n=(0,s.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:a._stream.isHttp,rangeChunkSize:a._rangeChunkSize,disableRange:a._disableRange}),r=n.allowRangeRequests,i=n.suggestedLength;a._isRangeSupported=r;a._contentLength=i||a._contentLength;a._filename=(0,s.extractFilenameFromHeader)(t);if(!a._isStreamingSupported&&a._isRangeSupported){a.cancel(new o.AbortException("Streaming is disabled."))}}).catch(this._headersCapability.reject);this.onProgress=null}_createClass(e,[{key:"read",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,n,r;return regeneratorRuntime.wrap(function(e){while(1){switch(e.prev=e.next){case 0:e.next=2;return this._headersCapability.promise;case 2:e.next=4;return this._reader.read();case 4:t=e.sent;a=t.value;n=t.done;if(!n){e.next=9;break}return e.abrupt("return",{value:a,done:n});case 9:this._loaded+=a.byteLength;if(this.onProgress){this.onProgress({loaded:this._loaded,total:this._contentLength})}r=new Uint8Array(a).buffer;return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop();}}},e,this)}));return function read(){return e.apply(this,arguments)}}()},{key:"cancel",value:function cancel(e){if(this._reader){this._reader.cancel(e)}if(this._abortController){this._abortController.abort()}}},{key:"headersReady",get:function get(){return this._headersCapability.promise}},{key:"filename",get:function get(){return this._filename}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}}]);return e}(),l=function(){function e(t,a,i){var d=this;_classCallCheck(this,e);this._stream=t;this._reader=null;this._loaded=0;var l=t.source;this._withCredentials=l.withCredentials||!1;this._readCapability=(0,o.createPromiseCapability)();this._isStreamingSupported=!l.disableStream;if("undefined"!=typeof AbortController){this._abortController=new AbortController}this._headers=r(this._stream.httpHeaders);this._headers.append("Range","bytes=".concat(a,"-").concat(i-1));var c=l.url;fetch(c,n(this._headers,this._withCredentials,this._abortController)).then(function(e){if(!(0,s.validateResponseStatus)(e.status)){throw(0,s.createResponseStatusError)(e.status,c)}d._readCapability.resolve();d._reader=e.body.getReader()}).catch(function(e){if("AbortError"===(null===e||void 0===e?void 0:e.name)){return}throw e});this.onProgress=null}_createClass(e,[{key:"read",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,n,r;return regeneratorRuntime.wrap(function(e){while(1){switch(e.prev=e.next){case 0:e.next=2;return this._readCapability.promise;case 2:e.next=4;return this._reader.read();case 4:t=e.sent;a=t.value;n=t.done;if(!n){e.next=9;break}return e.abrupt("return",{value:a,done:n});case 9:this._loaded+=a.byteLength;if(this.onProgress){this.onProgress({loaded:this._loaded})}r=new Uint8Array(a).buffer;return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop();}}},e,this)}));return function read(){return e.apply(this,arguments)}}()},{key:"cancel",value:function cancel(e){if(this._reader){this._reader.cancel(e)}if(this._abortController){this._abortController.abort()}}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}}]);return e}()}],__webpack_module_cache__={};function __w_pdfjs_require__(e){if(__webpack_module_cache__[e]){return __webpack_module_cache__[e].exports}var t=__webpack_module_cache__[e]={exports:{}};__webpack_modules__[e](t,t.exports,__w_pdfjs_require__);return t.exports}return __w_pdfjs_require__(0)}()});
//# sourceMappingURL=pdf.min.js.map
