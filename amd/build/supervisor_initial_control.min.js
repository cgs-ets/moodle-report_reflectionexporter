define ("report_reflectionexporter/supervisor_initial_control",["jquery"],function(a){'use strict';function b(a){var b=this;b.data=a}b.prototype.main=function(){var a=this;a.initListeners()};b.prototype.initListeners=function(){var b=this;document.getElementById("id_coursegroups").addEventListener("change",function(c){a(c.target).find("option:selected").each(function(a,c){var d=c.value,e=document.querySelectorAll("[id^= id_teacher_".concat(d,"]"))[0],f="fitem_".concat(e.getAttribute("id")),g=document.getElementById(f);f=f.split("_");f=f[f.length-1];g.classList.remove("teacher-initial-field-hide");var h={groupid:d,teacherid:f,delete:0};b.updateTeacherSelectionJSON(h)});a("#id_coursegroups option:not(:selected)").each(function(a,c){var d=c.value,e=document.querySelectorAll("[id^= id_teacher_".concat(d,"]"))[0],f="fitem_".concat(e.getAttribute("id")),g=document.getElementById(f);f=f.split("_");f=f[f.length-1];g.classList.add("teacher-initial-field-hide");var h={groupid:d,teacherid:f,delete:1};b.updateTeacherSelectionJSON(h)})}.bind(b));var c=document.querySelectorAll("[id^= id_teacher_]");a(c).each(function(a,c){c.addEventListener("change",function(a){var c=a.target.getAttribute("id");c=c.split("_");c=c[c.length-1];console.log(a.target.value);var d={id:c,si:a.target.value};b.updateTeacherInitial(d)})}).bind(b)};b.prototype.updateTeacherSelectionJSON=function(a){var b=JSON.parse(document.getElementById("id_groupselectionjsonaux").value),c=JSON.parse(document.getElementById("id_groupselectionjson").value);if(1==a.delete){c=c.filter(function(b){if(b.groupid!=a.groupid)return b},a);document.getElementById("id_groupselectionjson").value=JSON.stringify(c)}else{if(c.find(function(b){return b.groupid==a.groupid})==void 0){b=b.filter(function(b){if(b.groupid==a.groupid)return b},a);c.push(b[0])}document.getElementById("id_groupselectionjson").value=JSON.stringify(c)}};b.prototype.updateTeacherInitial=function(a){console.log(a);var b=JSON.parse(document.getElementById("id_groupselectionjsonaux").value),c=JSON.parse(document.getElementById("id_groupselectionjson").value);c.forEach(function(b){if(b.id==a.id){b.si=a.si}},a);b.forEach(function(b){if(b.id==a.id){b.si=a.si}},a);document.getElementById("id_groupselectionjson").value=JSON.stringify(c);document.getElementById("id_groupselectionjsonaux").value=JSON.stringify(b)};return{init:function(a){var c=new b(a);c.main()}}});
//# sourceMappingURL=supervisor_initial_control.min.js.map
