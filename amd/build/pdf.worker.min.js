function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e3){didErr=!0,err=_e3},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var root,factory;root=window,factory=function(){return function(){var __webpack_modules__=[function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"WorkerMessageHandler",{enumerable:!0,get:function(){return _worker.WorkerMessageHandler}});var _worker=__w_pdfjs_require__(1)},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.WorkerTask=exports.WorkerMessageHandler=void 0;var _util=__w_pdfjs_require__(2),_primitives=__w_pdfjs_require__(5),_pdf_manager=__w_pdfjs_require__(6),_writer=__w_pdfjs_require__(46),_is_node=__w_pdfjs_require__(4),_message_handler=__w_pdfjs_require__(48),_worker_stream=__w_pdfjs_require__(49),_core_utils=__w_pdfjs_require__(8),WorkerTask=function(){function WorkerTask(name){_classCallCheck(this,WorkerTask),this.name=name,this.terminated=!1,this._capability=(0,_util.createPromiseCapability)()}return _createClass(WorkerTask,[{key:"finished",get:function(){return this._capability.promise}},{key:"finish",value:function(){this._capability.resolve()}},{key:"terminate",value:function(){this.terminated=!0}},{key:"ensureNotTerminated",value:function(){if(this.terminated)throw new Error("Worker task was terminated")}}]),WorkerTask}();exports.WorkerTask=WorkerTask;var maybePort,WorkerMessageHandler=function(){function WorkerMessageHandler(){_classCallCheck(this,WorkerMessageHandler)}return _createClass(WorkerMessageHandler,null,[{key:"setup",value:function(handler,port){var testMessageProcessed=!1;handler.on("test",(function(data){if(!testMessageProcessed)if(testMessageProcessed=!0,data instanceof Uint8Array){var supportTransfers=255===data[0];handler.postMessageTransfers=supportTransfers,handler.send("test",{supportTransfers:supportTransfers})}else handler.send("test",null)})),handler.on("configure",(function(data){(0,_util.setVerbosityLevel)(data.verbosity)})),handler.on("GetDocRequest",(function(data){return WorkerMessageHandler.createDocumentHandler(data,port)}))}},{key:"createDocumentHandler",value:function(docParams,port){var pdfManager,terminated=!1,cancelXHRs=null,WorkerTasks=[],verbosity=(0,_util.getVerbosityLevel)(),apiVersion=docParams.apiVersion;if("2.7.570"!==apiVersion)throw new Error('The API version "'.concat(apiVersion,'" does not match ')+'the Worker version "'.concat("2.7.570",'".'));var enumerableProperties=[];for(var property in[])enumerableProperties.push(property);if(enumerableProperties.length)throw new Error("The `Array.prototype` contains unexpected enumerable properties: "+enumerableProperties.join(", ")+"; thus breaking e.g. `for...in` iteration of `Array`s.");if("undefined"==typeof ReadableStream)throw new Error("The browser/environment lacks native support for critical functionality used by the PDF.js library (e.g. `ReadableStream`); please use an `es5`-build instead.");var docId=docParams.docId,docBaseUrl=docParams.docBaseUrl,workerHandlerName=docParams.docId+"_worker",handler=new _message_handler.MessageHandler(workerHandlerName,docId,port);function ensureNotTerminated(){if(terminated)throw new Error("Worker was terminated")}function startWorkerTask(task){WorkerTasks.push(task)}function finishWorkerTask(task){task.finish();var i=WorkerTasks.indexOf(task);WorkerTasks.splice(i,1)}function loadDocument(_x){return _loadDocument.apply(this,arguments)}function _loadDocument(){return(_loadDocument=_asyncToGenerator(regeneratorRuntime.mark((function _callee(recoveryMode){var _yield$Promise$all,_yield$Promise$all2,numPages,fingerprint;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,pdfManager.ensureDoc("checkHeader");case 2:return _context.next=4,pdfManager.ensureDoc("parseStartXRef");case 4:return _context.next=6,pdfManager.ensureDoc("parse",[recoveryMode]);case 6:if(recoveryMode){_context.next=9;break}return _context.next=9,pdfManager.ensureDoc("checkFirstPage");case 9:return _context.next=11,Promise.all([pdfManager.ensureDoc("numPages"),pdfManager.ensureDoc("fingerprint")]);case 11:return _yield$Promise$all=_context.sent,_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2),numPages=_yield$Promise$all2[0],fingerprint=_yield$Promise$all2[1],_context.abrupt("return",{numPages:numPages,fingerprint:fingerprint});case 16:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function getPdfManager(data,evaluatorOptions){var newPdfManager,pdfManagerCapability=(0,_util.createPromiseCapability)(),source=data.source;if(source.data){try{newPdfManager=new _pdf_manager.LocalPdfManager(docId,source.data,source.password,evaluatorOptions,docBaseUrl),pdfManagerCapability.resolve(newPdfManager)}catch(ex){pdfManagerCapability.reject(ex)}return pdfManagerCapability.promise}var pdfStream,cachedChunks=[];try{pdfStream=new _worker_stream.PDFWorkerStream(handler)}catch(ex){return pdfManagerCapability.reject(ex),pdfManagerCapability.promise}var fullRequest=pdfStream.getFullReader();fullRequest.headersReady.then((function(){if(fullRequest.isRangeSupported){var disableAutoFetch=source.disableAutoFetch||fullRequest.isStreamingSupported;newPdfManager=new _pdf_manager.NetworkPdfManager(docId,pdfStream,{msgHandler:handler,password:source.password,length:fullRequest.contentLength,disableAutoFetch:disableAutoFetch,rangeChunkSize:source.rangeChunkSize},evaluatorOptions,docBaseUrl);for(var i=0;i<cachedChunks.length;i++)newPdfManager.sendProgressiveData(cachedChunks[i]);cachedChunks=[],pdfManagerCapability.resolve(newPdfManager),cancelXHRs=null}})).catch((function(reason){pdfManagerCapability.reject(reason),cancelXHRs=null}));var loaded=0;return new Promise((function(resolve,reject){fullRequest.read().then((function readChunk(_ref){var value=_ref.value,done=_ref.done;try{if(ensureNotTerminated(),done)return newPdfManager||function(){var pdfFile=(0,_util.arraysToBytes)(cachedChunks);source.length&&pdfFile.length!==source.length&&(0,_util.warn)("reported HTTP length is different from actual");try{newPdfManager=new _pdf_manager.LocalPdfManager(docId,pdfFile,source.password,evaluatorOptions,docBaseUrl),pdfManagerCapability.resolve(newPdfManager)}catch(ex){pdfManagerCapability.reject(ex)}cachedChunks=[]}(),void(cancelXHRs=null);loaded+=(0,_util.arrayByteLength)(value),fullRequest.isStreamingSupported||handler.send("DocProgress",{loaded:loaded,total:Math.max(loaded,fullRequest.contentLength||0)}),newPdfManager?newPdfManager.sendProgressiveData(value):cachedChunks.push(value),fullRequest.read().then(readChunk,reject)}catch(e){reject(e)}}),reject)})).catch((function(e){pdfManagerCapability.reject(e),cancelXHRs=null})),cancelXHRs=function(reason){pdfStream.cancelAllRequests(reason)},pdfManagerCapability.promise}return handler.postMessageTransfers=docParams.postMessageTransfers,handler.on("GetPage",(function(data){return pdfManager.getPage(data.pageIndex).then((function(page){return Promise.all([pdfManager.ensure(page,"rotate"),pdfManager.ensure(page,"ref"),pdfManager.ensure(page,"userUnit"),pdfManager.ensure(page,"view")]).then((function(_ref3){var _ref4=_slicedToArray(_ref3,4);return{rotate:_ref4[0],ref:_ref4[1],userUnit:_ref4[2],view:_ref4[3]}}))}))})),handler.on("GetPageIndex",(function(_ref5){var ref=_ref5.ref,pageRef=_primitives.Ref.get(ref.num,ref.gen);return pdfManager.ensureCatalog("getPageIndex",[pageRef])})),handler.on("GetDestinations",(function(data){return pdfManager.ensureCatalog("destinations")})),handler.on("GetDestination",(function(data){return pdfManager.ensureCatalog("getDestination",[data.id])})),handler.on("GetPageLabels",(function(data){return pdfManager.ensureCatalog("pageLabels")})),handler.on("GetPageLayout",(function(data){return pdfManager.ensureCatalog("pageLayout")})),handler.on("GetPageMode",(function(data){return pdfManager.ensureCatalog("pageMode")})),handler.on("GetViewerPreferences",(function(data){return pdfManager.ensureCatalog("viewerPreferences")})),handler.on("GetOpenAction",(function(data){return pdfManager.ensureCatalog("openAction")})),handler.on("GetAttachments",(function(data){return pdfManager.ensureCatalog("attachments")})),handler.on("GetJavaScript",(function(data){return pdfManager.ensureCatalog("javaScript")})),handler.on("GetDocJSActions",(function(data){return pdfManager.ensureCatalog("jsActions")})),handler.on("GetPageJSActions",(function(_ref6){var pageIndex=_ref6.pageIndex;return pdfManager.getPage(pageIndex).then((function(page){return page.jsActions}))})),handler.on("GetOutline",(function(data){return pdfManager.ensureCatalog("documentOutline")})),handler.on("GetOptionalContentConfig",(function(data){return pdfManager.ensureCatalog("optionalContentConfig")})),handler.on("GetPermissions",(function(data){return pdfManager.ensureCatalog("permissions")})),handler.on("GetMetadata",(function(data){return Promise.all([pdfManager.ensureDoc("documentInfo"),pdfManager.ensureCatalog("metadata")])})),handler.on("GetMarkInfo",(function(data){return pdfManager.ensureCatalog("markInfo")})),handler.on("GetData",(function(data){return pdfManager.requestLoadedStream(),pdfManager.onLoadedStream().then((function(stream){return stream.bytes}))})),handler.on("GetStats",(function(data){return pdfManager.ensureXRef("stats")})),handler.on("GetAnnotations",(function(_ref7){var pageIndex=_ref7.pageIndex,intent=_ref7.intent;return pdfManager.getPage(pageIndex).then((function(page){return page.getAnnotationsData(intent)}))})),handler.on("GetFieldObjects",(function(data){return pdfManager.ensureDoc("fieldObjects")})),handler.on("HasJSActions",(function(data){return pdfManager.ensureDoc("hasJSActions")})),handler.on("GetCalculationOrderIds",(function(data){return pdfManager.ensureDoc("calculationOrderIds")})),handler.on("SaveDocument",(function(_ref8){var numPages=_ref8.numPages,annotationStorage=_ref8.annotationStorage,filename=_ref8.filename;pdfManager.requestLoadedStream();for(var promises=[pdfManager.onLoadedStream(),pdfManager.ensureCatalog("acroForm"),pdfManager.ensureDoc("xref"),pdfManager.ensureDoc("startXRef")],_loop=function(pageIndex){promises.push(pdfManager.getPage(pageIndex).then((function(page){var task=new WorkerTask("Save: page ".concat(pageIndex));return startWorkerTask(task),page.save(handler,task,annotationStorage).finally((function(){finishWorkerTask(task)}))})))},pageIndex=0;pageIndex<numPages;pageIndex++)_loop(pageIndex);return Promise.all(promises).then((function(_ref9){var arr,_step,_ref10=_arrayWithHoles(arr=_ref9)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableRest(),stream=_ref10[0],acroForm=_ref10[1],xref=_ref10[2],startXRef=_ref10[3],newRefs=[],_iterator=_createForOfIteratorHelper(_ref10.slice(4));try{for(_iterator.s();!(_step=_iterator.n()).done;)newRefs=_step.value.filter((function(x){return null!==x})).reduce((function(a,b){return a.concat(b)}),newRefs)}catch(err){_iterator.e(err)}finally{_iterator.f()}if(0===newRefs.length)return stream.bytes;var xfa=acroForm instanceof _primitives.Dict&&acroForm.get("XFA")||[],xfaDatasets=null;if(Array.isArray(xfa))for(var i=0,ii=xfa.length;i<ii;i+=2)"datasets"===xfa[i]&&(xfaDatasets=xfa[i+1]);else(0,_util.warn)("Unsupported XFA type.");var newXrefInfo=Object.create(null);if(xref.trailer){var infoObj=Object.create(null),xrefInfo=xref.trailer.get("Info")||null;xrefInfo instanceof _primitives.Dict&&xrefInfo.forEach((function(key,value){(0,_util.isString)(key)&&(0,_util.isString)(value)&&(infoObj[key]=(0,_util.stringToPDFString)(value))})),newXrefInfo={rootRef:xref.trailer.getRaw("Root")||null,encrypt:xref.trailer.getRaw("Encrypt")||null,newRef:xref.getNewRef(),infoRef:xref.trailer.getRaw("Info")||null,info:infoObj,fileIds:xref.trailer.getRaw("ID")||null,startXRef:startXRef,filename:filename}}return xref.resetNewRef(),(0,_writer.incrementalUpdate)({originalData:stream.bytes,xrefInfo:newXrefInfo,newRefs:newRefs,xref:xref,datasetsRef:xfaDatasets})}))})),handler.on("GetOperatorList",(function(data,sink){var pageIndex=data.pageIndex;pdfManager.getPage(pageIndex).then((function(page){var task=new WorkerTask("GetOperatorList: page ".concat(pageIndex));startWorkerTask(task);var start=verbosity>=_util.VerbosityLevel.INFOS?Date.now():0;page.getOperatorList({handler:handler,sink:sink,task:task,intent:data.intent,renderInteractiveForms:data.renderInteractiveForms,annotationStorage:data.annotationStorage}).then((function(operatorListInfo){finishWorkerTask(task),start&&(0,_util.info)("page=".concat(pageIndex+1," - getOperatorList: time=")+"".concat(Date.now()-start,"ms, len=").concat(operatorListInfo.length)),sink.close()}),(function(reason){finishWorkerTask(task),task.terminated||(handler.send("UnsupportedFeature",{featureId:_util.UNSUPPORTED_FEATURES.errorOperatorList}),sink.error(reason))}))}))})),handler.on("GetTextContent",(function(data,sink){var pageIndex=data.pageIndex;sink.onPull=function(desiredSize){},sink.onCancel=function(reason){},pdfManager.getPage(pageIndex).then((function(page){var task=new WorkerTask("GetTextContent: page "+pageIndex);startWorkerTask(task);var start=verbosity>=_util.VerbosityLevel.INFOS?Date.now():0;page.extractTextContent({handler:handler,task:task,sink:sink,normalizeWhitespace:data.normalizeWhitespace,combineTextItems:data.combineTextItems}).then((function(){finishWorkerTask(task),start&&(0,_util.info)("page=".concat(pageIndex+1," - getTextContent: time=")+"".concat(Date.now()-start,"ms")),sink.close()}),(function(reason){finishWorkerTask(task),task.terminated||sink.error(reason)}))}))})),handler.on("FontFallback",(function(data){return pdfManager.fontFallback(data.id,handler)})),handler.on("Cleanup",(function(data){return pdfManager.cleanup(!0)})),handler.on("Terminate",(function(data){terminated=!0;var waitOn=[];if(pdfManager){pdfManager.terminate(new _util.AbortException("Worker was terminated."));var cleanupPromise=pdfManager.cleanup();waitOn.push(cleanupPromise),pdfManager=null}else(0,_primitives.clearPrimitiveCaches)();return cancelXHRs&&cancelXHRs(new _util.AbortException("Worker was terminated.")),WorkerTasks.forEach((function(task){waitOn.push(task.finished),task.terminate()})),Promise.all(waitOn).then((function(){handler.destroy(),handler=null}))})),handler.on("Ready",(function(data){!function(data){function onSuccess(doc){ensureNotTerminated(),handler.send("GetDoc",{pdfInfo:doc})}function onFailure(ex){if(ensureNotTerminated(),ex instanceof _util.PasswordException){var task=new WorkerTask("PasswordException: response ".concat(ex.code));startWorkerTask(task),handler.sendWithPromise("PasswordRequest",ex).then((function(_ref2){var password=_ref2.password;finishWorkerTask(task),pdfManager.updatePassword(password),pdfManagerReady()})).catch((function(){finishWorkerTask(task),handler.send("DocException",ex)}))}else ex instanceof _util.InvalidPDFException||ex instanceof _util.MissingPDFException||ex instanceof _util.UnexpectedResponseException||ex instanceof _util.UnknownErrorException?handler.send("DocException",ex):handler.send("DocException",new _util.UnknownErrorException(ex.message,ex.toString()))}function pdfManagerReady(){ensureNotTerminated(),loadDocument(!1).then(onSuccess,(function(reason){ensureNotTerminated(),reason instanceof _core_utils.XRefParseException?(pdfManager.requestLoadedStream(),pdfManager.onLoadedStream().then((function(){ensureNotTerminated(),loadDocument(!0).then(onSuccess,onFailure)}))):onFailure(reason)}))}ensureNotTerminated(),getPdfManager(data,{maxImageSize:data.maxImageSize,disableFontFace:data.disableFontFace,ignoreErrors:data.ignoreErrors,isEvalSupported:data.isEvalSupported,fontExtraProperties:data.fontExtraProperties}).then((function(newPdfManager){if(terminated)throw newPdfManager.terminate(new _util.AbortException("Worker was terminated.")),new Error("Worker was terminated");(pdfManager=newPdfManager).onLoadedStream().then((function(stream){handler.send("DataLoaded",{length:stream.bytes.byteLength})}))})).then(pdfManagerReady,onFailure)}(docParams),docParams=null})),workerHandlerName}},{key:"initializeFromPort",value:function(port){var handler=new _message_handler.MessageHandler("worker","main",port);WorkerMessageHandler.setup(handler,port),handler.send("ready",null)}}]),WorkerMessageHandler}();exports.WorkerMessageHandler=WorkerMessageHandler,"undefined"==typeof window&&!_is_node.isNodeJS&&"undefined"!=typeof self&&"function"==typeof(maybePort=self).postMessage&&"onmessage"in maybePort&&WorkerMessageHandler.initializeFromPort(self)},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.arrayByteLength=arrayByteLength,exports.arraysToBytes=function(arr){var length=arr.length;if(1===length&&arr[0]instanceof Uint8Array)return arr[0];for(var resultLength=0,i=0;i<length;i++)resultLength+=arrayByteLength(arr[i]);for(var pos=0,data=new Uint8Array(resultLength),_i2=0;_i2<length;_i2++){var item=arr[_i2];item instanceof Uint8Array||(item="string"==typeof item?stringToBytes(item):new Uint8Array(item));var itemLength=item.byteLength;data.set(item,pos),pos+=itemLength}return data},exports.assert=assert,exports.bytesToString=function(bytes){assert(null!==bytes&&"object"===_typeof(bytes)&&void 0!==bytes.length,"Invalid argument for bytesToString");var length=bytes.length;if(length<8192)return String.fromCharCode.apply(null,bytes);for(var strBuf=[],i=0;i<length;i+=8192){var chunkEnd=Math.min(i+8192,length),chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk))}return strBuf.join("")},exports.createPromiseCapability=function(){var capability=Object.create(null),isSettled=!1;return Object.defineProperty(capability,"settled",{get:function(){return isSettled}}),capability.promise=new Promise((function(resolve,reject){capability.resolve=function(data){isSettled=!0,resolve(data)},capability.reject=function(reason){isSettled=!0,reject(reason)}})),capability},exports.createValidAbsoluteUrl=function(url,baseUrl){if(!url)return null;try{var absoluteUrl=baseUrl?new URL(url,baseUrl):new URL(url);if(function(url){if(!url)return!1;switch(url.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(absoluteUrl))return absoluteUrl}catch(ex){}return null},exports.encodeToXmlString=function(str){for(var buffer=[],start=0,i=0,ii=str.length;i<ii;i++){var char=str.codePointAt(i);if(32<=char&&char<=126){var entity=XMLEntities[char];entity&&(start<i&&buffer.push(str.substring(start,i)),buffer.push(entity),start=i+1)}else start<i&&buffer.push(str.substring(start,i)),buffer.push("&#x".concat(char.toString(16).toUpperCase(),";")),char>55295&&(char<57344||char>65533)&&i++,start=i+1}return 0===buffer.length?str:(start<str.length&&buffer.push(str.substring(start,str.length)),buffer.join(""))},exports.escapeString=function(str){return str.replace(/([()\\\n\r])/g,(function(match){return"\n"===match?"\\n":"\r"===match?"\\r":"\\".concat(match)}))},exports.getModificationDate=function(){var date=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,buffer=[date.getUTCFullYear().toString(),(date.getUTCMonth()+1).toString().padStart(2,"0"),date.getUTCDate().toString().padStart(2,"0"),date.getUTCHours().toString().padStart(2,"0"),date.getUTCMinutes().toString().padStart(2,"0"),date.getUTCSeconds().toString().padStart(2,"0")];return buffer.join("")},exports.getVerbosityLevel=function(){return verbosity},exports.info=function(msg){verbosity>=VerbosityLevel.INFOS&&console.log("Info: ".concat(msg))},exports.isArrayBuffer=function(v){return"object"===_typeof(v)&&null!==v&&void 0!==v.byteLength},exports.isArrayEqual=function(arr1,arr2){return arr1.length===arr2.length&&arr1.every((function(element,index){return element===arr2[index]}))},exports.isAscii=function(str){return/^[\x00-\x7F]*$/.test(str)},exports.isBool=function(v){return"boolean"==typeof v},exports.isNum=function(v){return"number"==typeof v},exports.isSameOrigin=function(baseUrl,otherUrl){var base;try{if(!(base=new URL(baseUrl)).origin||"null"===base.origin)return!1}catch(e){return!1}var other=new URL(otherUrl,base);return base.origin===other.origin},exports.isString=function(v){return"string"==typeof v},exports.objectFromEntries=function(iterable){return Object.assign(Object.create(null),Object.fromEntries(iterable))},exports.objectSize=function(obj){return Object.keys(obj).length},exports.removeNullCharacters=function(str){return"string"!=typeof str?(warn("The argument for removeNullCharacters must be a string."),str):str.replace(NullCharactersRegExp,"")},exports.setVerbosityLevel=function(level){Number.isInteger(level)&&(verbosity=level)},exports.shadow=shadow,exports.string32=function(value){return String.fromCharCode(value>>24&255,value>>16&255,value>>8&255,255&value)},exports.stringToBytes=stringToBytes,exports.stringToPDFString=function(str){var length=str.length,strBuf=[];if("þ"===str[0]&&"ÿ"===str[1])for(var i=2;i<length;i+=2)strBuf.push(String.fromCharCode(str.charCodeAt(i)<<8|str.charCodeAt(i+1)));else if("ÿ"===str[0]&&"þ"===str[1])for(var _i3=2;_i3<length;_i3+=2)strBuf.push(String.fromCharCode(str.charCodeAt(_i3+1)<<8|str.charCodeAt(_i3)));else for(var _i4=0;_i4<length;++_i4){var code=PDFStringTranslateTable[str.charCodeAt(_i4)];strBuf.push(code?String.fromCharCode(code):str.charAt(_i4))}return strBuf.join("")},exports.stringToUTF16BEString=function(str){for(var buf=["þÿ"],i=0,ii=str.length;i<ii;i++){var char=str.charCodeAt(i);buf.push(String.fromCharCode(char>>8&255)),buf.push(String.fromCharCode(255&char))}return buf.join("")},exports.stringToUTF8String=function(str){return decodeURIComponent(escape(str))},exports.unreachable=unreachable,exports.utf8StringToString=function(str){return unescape(encodeURIComponent(str))},exports.warn=warn,exports.VerbosityLevel=exports.Util=exports.UNSUPPORTED_FEATURES=exports.UnknownErrorException=exports.UnexpectedResponseException=exports.TextRenderingMode=exports.StreamType=exports.PermissionFlag=exports.PasswordResponses=exports.PasswordException=exports.PageActionEventType=exports.OPS=exports.MissingPDFException=exports.IsLittleEndianCached=exports.IsEvalSupportedCached=exports.InvalidPDFException=exports.ImageKind=exports.IDENTITY_MATRIX=exports.FormatError=exports.FontType=exports.FONT_IDENTITY_MATRIX=exports.DocumentActionEventType=exports.createObjectURL=exports.CMapCompressionType=exports.BaseException=exports.AnnotationType=exports.AnnotationStateModelType=exports.AnnotationReviewState=exports.AnnotationReplyType=exports.AnnotationMarkedState=exports.AnnotationFlag=exports.AnnotationFieldFlag=exports.AnnotationBorderStyleType=exports.AnnotationActionEventType=exports.AbortException=void 0,__w_pdfjs_require__(3),exports.IDENTITY_MATRIX=[1,0,0,1,0,0],exports.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],exports.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},exports.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},exports.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},exports.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},exports.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},exports.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},exports.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},exports.AnnotationReplyType={GROUP:"Group",REPLY:"R"},exports.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},exports.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},exports.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},exports.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},exports.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},exports.PageActionEventType={O:"PageOpen",C:"PageClose"},exports.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},exports.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};var VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5};exports.VerbosityLevel=VerbosityLevel,exports.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},exports.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},exports.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent"},exports.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var verbosity=VerbosityLevel.WARNINGS;function warn(msg){verbosity>=VerbosityLevel.WARNINGS&&console.log("Warning: ".concat(msg))}function unreachable(msg){throw new Error(msg)}function assert(cond,msg){cond||unreachable(msg)}function shadow(obj,prop,value){return Object.defineProperty(obj,prop,{value:value,enumerable:!0,configurable:!0,writable:!1}),value}var BaseException=function(){function BaseException(message){this.constructor===BaseException&&unreachable("Cannot initialize BaseException."),this.message=message,this.name=this.constructor.name}return BaseException.prototype=new Error,BaseException.constructor=BaseException,BaseException}();exports.BaseException=BaseException;var PasswordException=function(_BaseException){_inherits(PasswordException,_BaseException);var _super=_createSuper(PasswordException);function PasswordException(msg,code){var _this;return _classCallCheck(this,PasswordException),(_this=_super.call(this,msg)).code=code,_this}return _createClass(PasswordException)}(BaseException);exports.PasswordException=PasswordException;var UnknownErrorException=function(_BaseException2){_inherits(UnknownErrorException,_BaseException2);var _super2=_createSuper(UnknownErrorException);function UnknownErrorException(msg,details){var _this2;return _classCallCheck(this,UnknownErrorException),(_this2=_super2.call(this,msg)).details=details,_this2}return _createClass(UnknownErrorException)}(BaseException);exports.UnknownErrorException=UnknownErrorException;var InvalidPDFException=function(_BaseException3){_inherits(InvalidPDFException,_BaseException3);var _super3=_createSuper(InvalidPDFException);function InvalidPDFException(){return _classCallCheck(this,InvalidPDFException),_super3.apply(this,arguments)}return _createClass(InvalidPDFException)}(BaseException);exports.InvalidPDFException=InvalidPDFException;var MissingPDFException=function(_BaseException4){_inherits(MissingPDFException,_BaseException4);var _super4=_createSuper(MissingPDFException);function MissingPDFException(){return _classCallCheck(this,MissingPDFException),_super4.apply(this,arguments)}return _createClass(MissingPDFException)}(BaseException);exports.MissingPDFException=MissingPDFException;var UnexpectedResponseException=function(_BaseException5){_inherits(UnexpectedResponseException,_BaseException5);var _super5=_createSuper(UnexpectedResponseException);function UnexpectedResponseException(msg,status){var _this3;return _classCallCheck(this,UnexpectedResponseException),(_this3=_super5.call(this,msg)).status=status,_this3}return _createClass(UnexpectedResponseException)}(BaseException);exports.UnexpectedResponseException=UnexpectedResponseException;var FormatError=function(_BaseException6){_inherits(FormatError,_BaseException6);var _super6=_createSuper(FormatError);function FormatError(){return _classCallCheck(this,FormatError),_super6.apply(this,arguments)}return _createClass(FormatError)}(BaseException);exports.FormatError=FormatError;var AbortException=function(_BaseException7){_inherits(AbortException,_BaseException7);var _super7=_createSuper(AbortException);function AbortException(){return _classCallCheck(this,AbortException),_super7.apply(this,arguments)}return _createClass(AbortException)}(BaseException);exports.AbortException=AbortException;var NullCharactersRegExp=/\x00/g;function stringToBytes(str){assert("string"==typeof str,"Invalid argument for stringToBytes");for(var length=str.length,bytes=new Uint8Array(length),i=0;i<length;++i)bytes[i]=255&str.charCodeAt(i);return bytes}function arrayByteLength(arr){return void 0!==arr.length?arr.length:(assert(void 0!==arr.byteLength,"arrayByteLength - invalid argument."),arr.byteLength)}var IsLittleEndianCached={get value(){return shadow(this,"value",((buffer8=new Uint8Array(4))[0]=1,1===new Uint32Array(buffer8.buffer,0,1)[0]));var buffer8}};exports.IsLittleEndianCached=IsLittleEndianCached;var IsEvalSupportedCached={get value(){return shadow(this,"value",function(){try{return new Function(""),!0}catch(e){return!1}}())}};exports.IsEvalSupportedCached=IsEvalSupportedCached;var hexNumbers=_toConsumableArray(Array(256).keys()).map((function(n){return n.toString(16).padStart(2,"0")})),Util=function(){function Util(){_classCallCheck(this,Util)}return _createClass(Util,null,[{key:"makeHexColor",value:function(r,g,b){return"#".concat(hexNumbers[r]).concat(hexNumbers[g]).concat(hexNumbers[b])}},{key:"transform",value:function(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]]}},{key:"applyTransform",value:function(p,m){return[p[0]*m[0]+p[1]*m[2]+m[4],p[0]*m[1]+p[1]*m[3]+m[5]]}},{key:"applyInverseTransform",value:function(p,m){var d=m[0]*m[3]-m[1]*m[2];return[(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d,(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d]}},{key:"getAxialAlignedBoundingBox",value:function(r,m){var p1=Util.applyTransform(r,m),p2=Util.applyTransform(r.slice(2,4),m),p3=Util.applyTransform([r[0],r[3]],m),p4=Util.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])]}},{key:"inverseTransform",value:function(m){var d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d]}},{key:"apply3dTransform",value:function(m,v){return[m[0]*v[0]+m[1]*v[1]+m[2]*v[2],m[3]*v[0]+m[4]*v[1]+m[5]*v[2],m[6]*v[0]+m[7]*v[1]+m[8]*v[2]]}},{key:"singularValueDecompose2dScale",value:function(m){var transpose=[m[0],m[2],m[1],m[3]],a=m[0]*transpose[0]+m[1]*transpose[2],b=m[0]*transpose[1]+m[1]*transpose[3],c=m[2]*transpose[0]+m[3]*transpose[2],d=m[2]*transpose[1]+m[3]*transpose[3],first=(a+d)/2,second=Math.sqrt((a+d)*(a+d)-4*(a*d-c*b))/2,sx=first+second||1,sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)]}},{key:"normalizeRect",value:function(rect){var r=rect.slice(0);return rect[0]>rect[2]&&(r[0]=rect[2],r[2]=rect[0]),rect[1]>rect[3]&&(r[1]=rect[3],r[3]=rect[1]),r}},{key:"intersect",value:function(rect1,rect2){function compare(a,b){return a-b}var orderedX=[rect1[0],rect1[2],rect2[0],rect2[2]].sort(compare),orderedY=[rect1[1],rect1[3],rect2[1],rect2[3]].sort(compare),result=[];return rect1=Util.normalizeRect(rect1),rect2=Util.normalizeRect(rect2),orderedX[0]===rect1[0]&&orderedX[1]===rect2[0]||orderedX[0]===rect2[0]&&orderedX[1]===rect1[0]?(result[0]=orderedX[1],result[2]=orderedX[2],orderedY[0]===rect1[1]&&orderedY[1]===rect2[1]||orderedY[0]===rect2[1]&&orderedY[1]===rect1[1]?(result[1]=orderedY[1],result[3]=orderedY[2],result):null):null}}]),Util}();exports.Util=Util;var digits,PDFStringTranslateTable=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364],createObjectURL=(digits="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",function(data,contentType){var forceDataSchema=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!forceDataSchema&&URL.createObjectURL){var blob=new Blob([data],{type:contentType});return URL.createObjectURL(blob)}for(var buffer="data:".concat(contentType,";base64,"),i=0,ii=data.length;i<ii;i+=3){var b1=255&data[i],b2=255&data[i+1],b3=255&data[i+2],d1=b1>>2,d2=(3&b1)<<4|b2>>4,d3=i+1<ii?(15&b2)<<2|b3>>6:64,d4=i+2<ii?63&b3:64;buffer+=digits[d1]+digits[d2]+digits[d3]+digits[d4]}return buffer});exports.createObjectURL=createObjectURL;var XMLEntities={60:"&lt;",62:"&gt;",38:"&amp;",34:"&quot;",39:"&apos;"}},function(__unused_webpack_module,__unused_webpack_exports,__w_pdfjs_require__){__w_pdfjs_require__(4)},function(__unused_webpack_module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNodeJS=void 0;var isNodeJS=!("object"!==("undefined"==typeof process?"undefined":_typeof(process))||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);exports.isNodeJS=isNodeJS},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.clearPrimitiveCaches=function(){Cmd._clearCache(),Name._clearCache(),Ref._clearCache()},exports.isCmd=function(v,cmd){return v instanceof Cmd&&(void 0===cmd||v.cmd===cmd)},exports.isDict=function(v,type){return v instanceof Dict&&(void 0===type||isName(v.get("Type"),type))},exports.isEOF=function(v){return v===EOF},exports.isName=isName,exports.isRef=function(v){return v instanceof Ref},exports.isRefsEqual=function(v1,v2){return v1.num===v2.num&&v1.gen===v2.gen},exports.isStream=function(v){return"object"===_typeof(v)&&null!==v&&void 0!==v.getBytes},exports.RefSetCache=exports.RefSet=exports.Ref=exports.Name=exports.EOF=exports.Dict=exports.Cmd=void 0;var _util=__w_pdfjs_require__(2),EOF={};exports.EOF=EOF;var Name=function(){var nameCache=Object.create(null);function Name(name){this.name=name}return Name.prototype={},Name.get=function(name){var nameValue=nameCache[name];return nameValue||(nameCache[name]=new Name(name))},Name._clearCache=function(){nameCache=Object.create(null)},Name}();exports.Name=Name;var Cmd=function(){var cmdCache=Object.create(null);function Cmd(cmd){this.cmd=cmd}return Cmd.prototype={},Cmd.get=function(cmd){var cmdValue=cmdCache[cmd];return cmdValue||(cmdCache[cmd]=new Cmd(cmd))},Cmd._clearCache=function(){cmdCache=Object.create(null)},Cmd}();exports.Cmd=Cmd;var Dict=function(){var emptyDict,nonSerializable=function(){return nonSerializable};function Dict(xref){this._map=Object.create(null),this.xref=xref,this.objId=null,this.suppressEncryption=!1,this.__nonSerializable__=nonSerializable}return Dict.prototype={assignXref:function(newXref){this.xref=newXref},get size(){return Object.keys(this._map).length},get:function(key1,key2,key3){var value=this._map[key1];return void 0===value&&void 0!==key2&&void 0===(value=this._map[key2])&&void 0!==key3&&(value=this._map[key3]),value instanceof Ref&&this.xref?this.xref.fetch(value,this.suppressEncryption):value},getAsync:function(key1,key2,key3){var _this4=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var value;return regeneratorRuntime.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(void 0===(value=_this4._map[key1])&&void 0!==key2&&void 0===(value=_this4._map[key2])&&void 0!==key3&&(value=_this4._map[key3]),!(value instanceof Ref&&_this4.xref)){_context2.next=4;break}return _context2.abrupt("return",_this4.xref.fetchAsync(value,_this4.suppressEncryption));case 4:return _context2.abrupt("return",value);case 5:case"end":return _context2.stop()}}),_callee2)})))()},getArray:function(key1,key2,key3){var value=this.get(key1,key2,key3);if(!Array.isArray(value)||!this.xref)return value;for(var i=0,ii=(value=value.slice()).length;i<ii;i++)value[i]instanceof Ref&&(value[i]=this.xref.fetch(value[i],this.suppressEncryption));return value},getRaw:function(key){return this._map[key]},getKeys:function(){return Object.keys(this._map)},getRawValues:function(){return Object.values(this._map)},set:function(key,value){this._map[key]=value},has:function(key){return void 0!==this._map[key]},forEach:function(callback){for(var key in this._map)callback(key,this.get(key))}},Dict.empty=((emptyDict=new Dict(null)).set=function(key,value){(0,_util.unreachable)("Should not call `set` on the empty dictionary.")},emptyDict),Dict.merge=function(_ref11){var xref=_ref11.xref,dictArray=_ref11.dictArray,_ref11$mergeSubDicts=_ref11.mergeSubDicts,mergeSubDicts=void 0!==_ref11$mergeSubDicts&&_ref11$mergeSubDicts,mergedDict=new Dict(xref);if(!mergeSubDicts){var _step2,_iterator2=_createForOfIteratorHelper(dictArray);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var dict=_step2.value;if(dict instanceof Dict)for(var _i5=0,_Object$entries=Object.entries(dict._map);_i5<_Object$entries.length;_i5++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i5],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];void 0===mergedDict._map[key]&&(mergedDict._map[key]=value)}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return mergedDict.size>0?mergedDict:Dict.empty}var _step3,properties=new Map,_iterator3=_createForOfIteratorHelper(dictArray);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _dict=_step3.value;if(_dict instanceof Dict)for(var _i6=0,_Object$entries2=Object.entries(_dict._map);_i6<_Object$entries2.length;_i6++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i6],2),_key=_Object$entries2$_i[0],_value=_Object$entries2$_i[1],property=properties.get(_key);void 0===property&&(property=[],properties.set(_key,property)),property.push(_value)}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}var _step4,_iterator4=_createForOfIteratorHelper(properties);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _step4$value=_slicedToArray(_step4.value,2),name=_step4$value[0],values=_step4$value[1];if(1!==values.length&&values[0]instanceof Dict){var _step5,subDict=new Dict(xref),_iterator5=_createForOfIteratorHelper(values);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _dict2=_step5.value;if(_dict2 instanceof Dict)for(var _i7=0,_Object$entries3=Object.entries(_dict2._map);_i7<_Object$entries3.length;_i7++){var _Object$entries3$_i=_slicedToArray(_Object$entries3[_i7],2),_key2=_Object$entries3$_i[0],_value2=_Object$entries3$_i[1];void 0===subDict._map[_key2]&&(subDict._map[_key2]=_value2)}}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}subDict.size>0&&(mergedDict._map[name]=subDict)}else mergedDict._map[name]=values[0]}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}return properties.clear(),mergedDict.size>0?mergedDict:Dict.empty},Dict}();exports.Dict=Dict;var Ref=function(){var refCache=Object.create(null);function Ref(num,gen){this.num=num,this.gen=gen}return Ref.prototype={toString:function(){return 0===this.gen?"".concat(this.num,"R"):"".concat(this.num,"R").concat(this.gen)}},Ref.get=function(num,gen){var key=0===gen?"".concat(num,"R"):"".concat(num,"R").concat(gen),refValue=refCache[key];return refValue||(refCache[key]=new Ref(num,gen))},Ref._clearCache=function(){refCache=Object.create(null)},Ref}();exports.Ref=Ref;var RefSet=function(){function RefSet(){var parent=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,RefSet),this._set=new Set(parent&&parent._set)}return _createClass(RefSet,[{key:"has",value:function(ref){return this._set.has(ref.toString())}},{key:"put",value:function(ref){this._set.add(ref.toString())}},{key:"remove",value:function(ref){this._set.delete(ref.toString())}},{key:"forEach",value:function(callback){var _step6,_iterator6=_createForOfIteratorHelper(this._set.values());try{for(_iterator6.s();!(_step6=_iterator6.n()).done;)callback(_step6.value)}catch(err){_iterator6.e(err)}finally{_iterator6.f()}}},{key:"clear",value:function(){this._set.clear()}}]),RefSet}();exports.RefSet=RefSet;var RefSetCache=function(){function RefSetCache(){_classCallCheck(this,RefSetCache),this._map=new Map}return _createClass(RefSetCache,[{key:"size",get:function(){return this._map.size}},{key:"get",value:function(ref){return this._map.get(ref.toString())}},{key:"has",value:function(ref){return this._map.has(ref.toString())}},{key:"put",value:function(ref,obj){this._map.set(ref.toString(),obj)}},{key:"putAlias",value:function(ref,aliasRef){this._map.set(ref.toString(),this.get(aliasRef))}},{key:"forEach",value:function(callback){var _step7,_iterator7=_createForOfIteratorHelper(this._map.values());try{for(_iterator7.s();!(_step7=_iterator7.n()).done;)callback(_step7.value)}catch(err){_iterator7.e(err)}finally{_iterator7.f()}}},{key:"clear",value:function(){this._map.clear()}}]),RefSetCache}();function isName(v,name){return v instanceof Name&&(void 0===name||v.name===name)}exports.RefSetCache=RefSetCache},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.NetworkPdfManager=exports.LocalPdfManager=void 0;var _util=__w_pdfjs_require__(2),_chunked_stream=__w_pdfjs_require__(7),_core_utils=__w_pdfjs_require__(8),_document=__w_pdfjs_require__(9),_stream=__w_pdfjs_require__(12),BasePdfManager=function(){function BasePdfManager(){_classCallCheck(this,BasePdfManager),this.constructor===BasePdfManager&&(0,_util.unreachable)("Cannot initialize BasePdfManager.")}var _ensure;return _createClass(BasePdfManager,[{key:"docId",get:function(){return this._docId}},{key:"password",get:function(){return this._password}},{key:"docBaseUrl",get:function(){var docBaseUrl=null;if(this._docBaseUrl){var absoluteUrl=(0,_util.createValidAbsoluteUrl)(this._docBaseUrl);absoluteUrl?docBaseUrl=absoluteUrl.href:(0,_util.warn)('Invalid absolute docBaseUrl: "'.concat(this._docBaseUrl,'".'))}return(0,_util.shadow)(this,"docBaseUrl",docBaseUrl)}},{key:"onLoadedStream",value:function(){(0,_util.unreachable)("Abstract method `onLoadedStream` called")}},{key:"ensureDoc",value:function(prop,args){return this.ensure(this.pdfDocument,prop,args)}},{key:"ensureXRef",value:function(prop,args){return this.ensure(this.pdfDocument.xref,prop,args)}},{key:"ensureCatalog",value:function(prop,args){return this.ensure(this.pdfDocument.catalog,prop,args)}},{key:"getPage",value:function(pageIndex){return this.pdfDocument.getPage(pageIndex)}},{key:"fontFallback",value:function(id,handler){return this.pdfDocument.fontFallback(id,handler)}},{key:"cleanup",value:function(){var manuallyTriggered=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.pdfDocument.cleanup(manuallyTriggered)}},{key:"ensure",value:(_ensure=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(obj,prop,args){return regeneratorRuntime.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:(0,_util.unreachable)("Abstract method `ensure` called");case 1:case"end":return _context3.stop()}}),_callee3)}))),function(_x2,_x3,_x4){return _ensure.apply(this,arguments)})},{key:"requestRange",value:function(begin,end){(0,_util.unreachable)("Abstract method `requestRange` called")}},{key:"requestLoadedStream",value:function(){(0,_util.unreachable)("Abstract method `requestLoadedStream` called")}},{key:"sendProgressiveData",value:function(chunk){(0,_util.unreachable)("Abstract method `sendProgressiveData` called")}},{key:"updatePassword",value:function(password){this._password=password}},{key:"terminate",value:function(reason){(0,_util.unreachable)("Abstract method `terminate` called")}}]),BasePdfManager}(),LocalPdfManager=function(_BasePdfManager){_inherits(LocalPdfManager,_BasePdfManager);var _ensure2,_super8=_createSuper(LocalPdfManager);function LocalPdfManager(docId,data,password,evaluatorOptions,docBaseUrl){var _this5;_classCallCheck(this,LocalPdfManager),(_this5=_super8.call(this))._docId=docId,_this5._password=password,_this5._docBaseUrl=docBaseUrl,_this5.evaluatorOptions=evaluatorOptions;var stream=new _stream.Stream(data);return _this5.pdfDocument=new _document.PDFDocument(_assertThisInitialized(_this5),stream),_this5._loadedStreamPromise=Promise.resolve(stream),_this5}return _createClass(LocalPdfManager,[{key:"ensure",value:(_ensure2=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(obj,prop,args){var value;return regeneratorRuntime.wrap((function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if("function"!=typeof(value=obj[prop])){_context4.next=3;break}return _context4.abrupt("return",value.apply(obj,args));case 3:return _context4.abrupt("return",value);case 4:case"end":return _context4.stop()}}),_callee4)}))),function(_x5,_x6,_x7){return _ensure2.apply(this,arguments)})},{key:"requestRange",value:function(begin,end){return Promise.resolve()}},{key:"requestLoadedStream",value:function(){}},{key:"onLoadedStream",value:function(){return this._loadedStreamPromise}},{key:"terminate",value:function(reason){}}]),LocalPdfManager}(BasePdfManager);exports.LocalPdfManager=LocalPdfManager;var NetworkPdfManager=function(_BasePdfManager2){_inherits(NetworkPdfManager,_BasePdfManager2);var _ensure3,_super9=_createSuper(NetworkPdfManager);function NetworkPdfManager(docId,pdfNetworkStream,args,evaluatorOptions,docBaseUrl){var _this6;return _classCallCheck(this,NetworkPdfManager),(_this6=_super9.call(this))._docId=docId,_this6._password=args.password,_this6._docBaseUrl=docBaseUrl,_this6.msgHandler=args.msgHandler,_this6.evaluatorOptions=evaluatorOptions,_this6.streamManager=new _chunked_stream.ChunkedStreamManager(pdfNetworkStream,{msgHandler:args.msgHandler,length:args.length,disableAutoFetch:args.disableAutoFetch,rangeChunkSize:args.rangeChunkSize}),_this6.pdfDocument=new _document.PDFDocument(_assertThisInitialized(_this6),_this6.streamManager.getStream()),_this6}return _createClass(NetworkPdfManager,[{key:"ensure",value:(_ensure3=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(obj,prop,args){var value;return regeneratorRuntime.wrap((function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(_context5.prev=0,"function"!=typeof(value=obj[prop])){_context5.next=4;break}return _context5.abrupt("return",value.apply(obj,args));case 4:return _context5.abrupt("return",value);case 7:if(_context5.prev=7,_context5.t0=_context5.catch(0),_context5.t0 instanceof _core_utils.MissingDataException){_context5.next=11;break}throw _context5.t0;case 11:return _context5.next=13,this.requestRange(_context5.t0.begin,_context5.t0.end);case 13:return _context5.abrupt("return",this.ensure(obj,prop,args));case 14:case"end":return _context5.stop()}}),_callee5,this,[[0,7]])}))),function(_x8,_x9,_x10){return _ensure3.apply(this,arguments)})},{key:"requestRange",value:function(begin,end){return this.streamManager.requestRange(begin,end)}},{key:"requestLoadedStream",value:function(){this.streamManager.requestAllChunks()}},{key:"sendProgressiveData",value:function(chunk){this.streamManager.onReceiveData({chunk:chunk})}},{key:"onLoadedStream",value:function(){return this.streamManager.onLoadedStream()}},{key:"terminate",value:function(reason){this.streamManager.abort(reason)}}]),NetworkPdfManager}(BasePdfManager);exports.NetworkPdfManager=NetworkPdfManager},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChunkedStreamManager=exports.ChunkedStream=void 0;var _util=__w_pdfjs_require__(2),_core_utils=__w_pdfjs_require__(8),ChunkedStream=function(){function ChunkedStream(length,chunkSize,manager){_classCallCheck(this,ChunkedStream),this.bytes=new Uint8Array(length),this.start=0,this.pos=0,this.end=length,this.chunkSize=chunkSize,this._loadedChunks=new Set,this.numChunks=Math.ceil(length/chunkSize),this.manager=manager,this.progressiveDataLength=0,this.lastSuccessfulEnsureByteChunk=-1}return _createClass(ChunkedStream,[{key:"getMissingChunks",value:function(){for(var chunks=[],chunk=0,n=this.numChunks;chunk<n;++chunk)this._loadedChunks.has(chunk)||chunks.push(chunk);return chunks}},{key:"getBaseStreams",value:function(){return[this]}},{key:"numChunksLoaded",get:function(){return this._loadedChunks.size}},{key:"allChunksLoaded",value:function(){return this.numChunksLoaded===this.numChunks}},{key:"onReceiveData",value:function(begin,chunk){var chunkSize=this.chunkSize;if(begin%chunkSize!=0)throw new Error("Bad begin offset: ".concat(begin));var end=begin+chunk.byteLength;if(end%chunkSize!=0&&end!==this.bytes.length)throw new Error("Bad end offset: ".concat(end));this.bytes.set(new Uint8Array(chunk),begin);for(var beginChunk=Math.floor(begin/chunkSize),endChunk=Math.floor((end-1)/chunkSize)+1,curChunk=beginChunk;curChunk<endChunk;++curChunk)this._loadedChunks.add(curChunk)}},{key:"onReceiveProgressiveData",value:function(data){var position=this.progressiveDataLength,beginChunk=Math.floor(position/this.chunkSize);this.bytes.set(new Uint8Array(data),position),position+=data.byteLength,this.progressiveDataLength=position;for(var endChunk=position>=this.end?this.numChunks:Math.floor(position/this.chunkSize),curChunk=beginChunk;curChunk<endChunk;++curChunk)this._loadedChunks.add(curChunk)}},{key:"ensureByte",value:function(pos){if(!(pos<this.progressiveDataLength)){var chunk=Math.floor(pos/this.chunkSize);if(chunk!==this.lastSuccessfulEnsureByteChunk){if(!this._loadedChunks.has(chunk))throw new _core_utils.MissingDataException(pos,pos+1);this.lastSuccessfulEnsureByteChunk=chunk}}}},{key:"ensureRange",value:function(begin,end){if(!(begin>=end||end<=this.progressiveDataLength))for(var chunkSize=this.chunkSize,beginChunk=Math.floor(begin/chunkSize),endChunk=Math.floor((end-1)/chunkSize)+1,chunk=beginChunk;chunk<endChunk;++chunk)if(!this._loadedChunks.has(chunk))throw new _core_utils.MissingDataException(begin,end)}},{key:"nextEmptyChunk",value:function(beginChunk){for(var numChunks=this.numChunks,i=0;i<numChunks;++i){var chunk=(beginChunk+i)%numChunks;if(!this._loadedChunks.has(chunk))return chunk}return null}},{key:"hasChunk",value:function(chunk){return this._loadedChunks.has(chunk)}},{key:"length",get:function(){return this.end-this.start}},{key:"isEmpty",get:function(){return 0===this.length}},{key:"getByte",value:function(){var pos=this.pos;return pos>=this.end?-1:(pos>=this.progressiveDataLength&&this.ensureByte(pos),this.bytes[this.pos++])}},{key:"getUint16",value:function(){var b0=this.getByte(),b1=this.getByte();return-1===b0||-1===b1?-1:(b0<<8)+b1}},{key:"getInt32",value:function(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()}},{key:"getBytes",value:function(length){var forceClamped=arguments.length>1&&void 0!==arguments[1]&&arguments[1],bytes=this.bytes,pos=this.pos,strEnd=this.end;if(!length){strEnd>this.progressiveDataLength&&this.ensureRange(pos,strEnd);var _subarray=bytes.subarray(pos,strEnd);return forceClamped?new Uint8ClampedArray(_subarray):_subarray}var end=pos+length;end>strEnd&&(end=strEnd),end>this.progressiveDataLength&&this.ensureRange(pos,end),this.pos=end;var subarray=bytes.subarray(pos,end);return forceClamped?new Uint8ClampedArray(subarray):subarray}},{key:"peekByte",value:function(){var peekedByte=this.getByte();return-1!==peekedByte&&this.pos--,peekedByte}},{key:"peekBytes",value:function(length){var forceClamped=arguments.length>1&&void 0!==arguments[1]&&arguments[1],bytes=this.getBytes(length,forceClamped);return this.pos-=bytes.length,bytes}},{key:"getByteRange",value:function(begin,end){return begin<0&&(begin=0),end>this.end&&(end=this.end),end>this.progressiveDataLength&&this.ensureRange(begin,end),this.bytes.subarray(begin,end)}},{key:"skip",value:function(n){n||(n=1),this.pos+=n}},{key:"reset",value:function(){this.pos=this.start}},{key:"moveStart",value:function(){this.start=this.pos}},{key:"makeSubStream",value:function(start,length,dict){function ChunkedStreamSubstream(){}length?start+length>this.progressiveDataLength&&this.ensureRange(start,start+length):start>=this.progressiveDataLength&&this.ensureByte(start),ChunkedStreamSubstream.prototype=Object.create(this),ChunkedStreamSubstream.prototype.getMissingChunks=function(){for(var chunkSize=this.chunkSize,beginChunk=Math.floor(this.start/chunkSize),endChunk=Math.floor((this.end-1)/chunkSize)+1,missingChunks=[],chunk=beginChunk;chunk<endChunk;++chunk)this._loadedChunks.has(chunk)||missingChunks.push(chunk);return missingChunks},ChunkedStreamSubstream.prototype.allChunksLoaded=function(){return this.numChunksLoaded===this.numChunks||0===this.getMissingChunks().length};var subStream=new ChunkedStreamSubstream;return subStream.pos=subStream.start=start,subStream.end=start+length||this.end,subStream.dict=dict,subStream}}]),ChunkedStream}();exports.ChunkedStream=ChunkedStream;var ChunkedStreamManager=function(){function ChunkedStreamManager(pdfNetworkStream,args){_classCallCheck(this,ChunkedStreamManager),this.length=args.length,this.chunkSize=args.rangeChunkSize,this.stream=new ChunkedStream(this.length,this.chunkSize,this),this.pdfNetworkStream=pdfNetworkStream,this.disableAutoFetch=args.disableAutoFetch,this.msgHandler=args.msgHandler,this.currRequestId=0,this._chunksNeededByRequest=new Map,this._requestsByChunk=new Map,this._promisesByRequest=new Map,this.progressiveDataLength=0,this.aborted=!1,this._loadedStreamCapability=(0,_util.createPromiseCapability)()}return _createClass(ChunkedStreamManager,[{key:"onLoadedStream",value:function(){return this._loadedStreamCapability.promise}},{key:"sendRequest",value:function(begin,end){var _this7=this,rangeReader=this.pdfNetworkStream.getRangeReader(begin,end);rangeReader.isStreamingSupported||(rangeReader.onProgress=this.onProgress.bind(this));var chunks=[],loaded=0;new Promise((function(resolve,reject){rangeReader.read().then((function readChunk(chunk){try{if(!chunk.done){var data=chunk.value;return chunks.push(data),loaded+=(0,_util.arrayByteLength)(data),rangeReader.isStreamingSupported&&_this7.onProgress({loaded:loaded}),void rangeReader.read().then(readChunk,reject)}var chunkData=(0,_util.arraysToBytes)(chunks);chunks=null,resolve(chunkData)}catch(e){reject(e)}}),reject)})).then((function(data){_this7.aborted||_this7.onReceiveData({chunk:data,begin:begin})}))}},{key:"requestAllChunks",value:function(){var missingChunks=this.stream.getMissingChunks();return this._requestChunks(missingChunks),this._loadedStreamCapability.promise}},{key:"_requestChunks",value:function(chunks){var _this8=this,requestId=this.currRequestId++,chunksNeeded=new Set;this._chunksNeededByRequest.set(requestId,chunksNeeded);var _step8,_iterator8=_createForOfIteratorHelper(chunks);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var chunk=_step8.value;this.stream.hasChunk(chunk)||chunksNeeded.add(chunk)}}catch(err){_iterator8.e(err)}finally{_iterator8.f()}if(0===chunksNeeded.size)return Promise.resolve();var capability=(0,_util.createPromiseCapability)();this._promisesByRequest.set(requestId,capability);var _step9,chunksToRequest=[],_iterator9=_createForOfIteratorHelper(chunksNeeded);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _chunk=_step9.value,requestIds=this._requestsByChunk.get(_chunk);requestIds||(requestIds=[],this._requestsByChunk.set(_chunk,requestIds),chunksToRequest.push(_chunk)),requestIds.push(requestId)}}catch(err){_iterator9.e(err)}finally{_iterator9.f()}if(chunksToRequest.length>0){var _step10,_iterator10=_createForOfIteratorHelper(this.groupChunks(chunksToRequest));try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var groupedChunk=_step10.value,begin=groupedChunk.beginChunk*this.chunkSize,end=Math.min(groupedChunk.endChunk*this.chunkSize,this.length);this.sendRequest(begin,end)}}catch(err){_iterator10.e(err)}finally{_iterator10.f()}}return capability.promise.catch((function(reason){if(!_this8.aborted)throw reason}))}},{key:"getStream",value:function(){return this.stream}},{key:"requestRange",value:function(begin,end){end=Math.min(end,this.length);for(var beginChunk=this.getBeginChunk(begin),endChunk=this.getEndChunk(end),chunks=[],chunk=beginChunk;chunk<endChunk;++chunk)chunks.push(chunk);return this._requestChunks(chunks)}},{key:"requestRanges",value:function(){var _step11,ranges=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],chunksToRequest=[],_iterator11=_createForOfIteratorHelper(ranges);try{for(_iterator11.s();!(_step11=_iterator11.n()).done;)for(var range=_step11.value,beginChunk=this.getBeginChunk(range.begin),endChunk=this.getEndChunk(range.end),chunk=beginChunk;chunk<endChunk;++chunk)chunksToRequest.includes(chunk)||chunksToRequest.push(chunk)}catch(err){_iterator11.e(err)}finally{_iterator11.f()}return chunksToRequest.sort((function(a,b){return a-b})),this._requestChunks(chunksToRequest)}},{key:"groupChunks",value:function(chunks){for(var groupedChunks=[],beginChunk=-1,prevChunk=-1,i=0,ii=chunks.length;i<ii;++i){var chunk=chunks[i];beginChunk<0&&(beginChunk=chunk),prevChunk>=0&&prevChunk+1!==chunk&&(groupedChunks.push({beginChunk:beginChunk,endChunk:prevChunk+1}),beginChunk=chunk),i+1===chunks.length&&groupedChunks.push({beginChunk:beginChunk,endChunk:chunk+1}),prevChunk=chunk}return groupedChunks}},{key:"onProgress",value:function(args){this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize+args.loaded,total:this.length})}},{key:"onReceiveData",value:function(args){var chunk=args.chunk,isProgressive=void 0===args.begin,begin=isProgressive?this.progressiveDataLength:args.begin,end=begin+chunk.byteLength,beginChunk=Math.floor(begin/this.chunkSize),endChunk=end<this.length?Math.floor(end/this.chunkSize):Math.ceil(end/this.chunkSize);isProgressive?(this.stream.onReceiveProgressiveData(chunk),this.progressiveDataLength=end):this.stream.onReceiveData(begin,chunk),this.stream.allChunksLoaded()&&this._loadedStreamCapability.resolve(this.stream);for(var loadedRequests=[],curChunk=beginChunk;curChunk<endChunk;++curChunk){var requestIds=this._requestsByChunk.get(curChunk);if(requestIds){this._requestsByChunk.delete(curChunk);var _step12,_iterator12=_createForOfIteratorHelper(requestIds);try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var requestId=_step12.value,chunksNeeded=this._chunksNeededByRequest.get(requestId);chunksNeeded.has(curChunk)&&chunksNeeded.delete(curChunk),chunksNeeded.size>0||loadedRequests.push(requestId)}}catch(err){_iterator12.e(err)}finally{_iterator12.f()}}}if(!this.disableAutoFetch&&0===this._requestsByChunk.size){var nextEmptyChunk;if(1===this.stream.numChunksLoaded){var lastChunk=this.stream.numChunks-1;this.stream.hasChunk(lastChunk)||(nextEmptyChunk=lastChunk)}else nextEmptyChunk=this.stream.nextEmptyChunk(endChunk);Number.isInteger(nextEmptyChunk)&&this._requestChunks([nextEmptyChunk])}for(var _i8=0,_loadedRequests=loadedRequests;_i8<_loadedRequests.length;_i8++){var _requestId=_loadedRequests[_i8],capability=this._promisesByRequest.get(_requestId);this._promisesByRequest.delete(_requestId),capability.resolve()}this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize,total:this.length})}},{key:"onError",value:function(err){this._loadedStreamCapability.reject(err)}},{key:"getBeginChunk",value:function(begin){return Math.floor(begin/this.chunkSize)}},{key:"getEndChunk",value:function(end){return Math.floor((end-1)/this.chunkSize)+1}},{key:"abort",value:function(reason){this.aborted=!0,this.pdfNetworkStream&&this.pdfNetworkStream.cancelAllRequests(reason);var _step13,_iterator13=_createForOfIteratorHelper(this._promisesByRequest.values());try{for(_iterator13.s();!(_step13=_iterator13.n()).done;)_step13.value.reject(reason)}catch(err){_iterator13.e(err)}finally{_iterator13.f()}}}]),ChunkedStreamManager}();exports.ChunkedStreamManager=ChunkedStreamManager},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.collectActions=function(xref,dict,eventType){var actions=Object.create(null);if(dict.has("AA")){var _step15,additionalActions=dict.get("AA"),_iterator15=_createForOfIteratorHelper(additionalActions.getKeys());try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var key=_step15.value,action=eventType[key];if(action){var actionDict=additionalActions.getRaw(key),parents=new _primitives.RefSet,list=[];_collectJS(actionDict,xref,list,parents),list.length>0&&(actions[action]=list)}}}catch(err){_iterator15.e(err)}finally{_iterator15.f()}}if(dict.has("A")){var _actionDict=dict.get("A"),_parents=new _primitives.RefSet,_list=[];_collectJS(_actionDict,xref,_list,_parents),_list.length>0&&(actions.Action=_list)}return(0,_util.objectSize)(actions)>0?actions:null},exports.escapePDFName=function(str){for(var buffer=[],start=0,i=0,ii=str.length;i<ii;i++){var char=str.charCodeAt(i);(char<33||char>126||35===char||40===char||41===char||60===char||62===char||91===char||93===char||123===char||125===char||47===char||37===char)&&(start<i&&buffer.push(str.substring(start,i)),buffer.push("#".concat(char.toString(16))),start=i+1)}return 0===buffer.length?str:(start<str.length&&buffer.push(str.substring(start,str.length)),buffer.join(""))},exports.getArrayLookupTableFactory=function(initializer){var lookup;return function(){if(initializer){var arr=initializer();initializer=null,lookup=Object.create(null);for(var i=0,ii=arr.length;i<ii;i+=2)lookup[arr[i]]=arr[i+1];arr=null}return lookup}},exports.getInheritableProperty=function(_ref12){for(var values,dict=_ref12.dict,key=_ref12.key,_ref12$getArray=_ref12.getArray,getArray=void 0!==_ref12$getArray&&_ref12$getArray,_ref12$stopWhenFound=_ref12.stopWhenFound,stopWhenFound=void 0===_ref12$stopWhenFound||_ref12$stopWhenFound,loopCount=0;dict;){var value=getArray?dict.getArray(key):dict.get(key);if(void 0!==value){if(stopWhenFound)return value;values||(values=[]),values.push(value)}if(++loopCount>100){(0,_util.warn)('getInheritableProperty: maximum loop count exceeded for "'.concat(key,'"'));break}dict=dict.get("Parent")}return values},exports.getLookupTableFactory=function(initializer){var lookup;return function(){return initializer&&(lookup=Object.create(null),initializer(lookup),initializer=null),lookup}},exports.isWhiteSpace=function(ch){return 32===ch||9===ch||13===ch||10===ch},exports.log2=function(x){return x<=0?0:Math.ceil(Math.log2(x))},exports.parseXFAPath=function(path){var positionPattern=/(.+)\[([0-9]+)\]$/;return path.split(".").map((function(component){var m=component.match(positionPattern);return m?{name:m[1],pos:parseInt(m[2],10)}:{name:component,pos:0}}))},exports.readInt8=function(data,offset){return data[offset]<<24>>24},exports.readUint16=function(data,offset){return data[offset]<<8|data[offset+1]},exports.readUint32=function(data,offset){return(data[offset]<<24|data[offset+1]<<16|data[offset+2]<<8|data[offset+3])>>>0},exports.toRomanNumerals=function(number){var lowerCase=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,_util.assert)(Number.isInteger(number)&&number>0,"The number should be a positive integer.");for(var pos,romanBuf=[];number>=1e3;)number-=1e3,romanBuf.push("M");pos=number/100|0,number%=100,romanBuf.push(ROMAN_NUMBER_MAP[pos]),pos=number/10|0,number%=10,romanBuf.push(ROMAN_NUMBER_MAP[10+pos]),romanBuf.push(ROMAN_NUMBER_MAP[20+number]);var romanStr=romanBuf.join("");return lowerCase?romanStr.toLowerCase():romanStr},exports.XRefParseException=exports.XRefEntryException=exports.MissingDataException=void 0;var _util=__w_pdfjs_require__(2),_primitives=__w_pdfjs_require__(5),MissingDataException=function(_util$BaseException){_inherits(MissingDataException,_util$BaseException);var _super10=_createSuper(MissingDataException);function MissingDataException(begin,end){var _this9;return _classCallCheck(this,MissingDataException),(_this9=_super10.call(this,"Missing data [".concat(begin,", ").concat(end,")"))).begin=begin,_this9.end=end,_this9}return _createClass(MissingDataException)}(_util.BaseException);exports.MissingDataException=MissingDataException;var XRefEntryException=function(_util$BaseException2){_inherits(XRefEntryException,_util$BaseException2);var _super11=_createSuper(XRefEntryException);function XRefEntryException(){return _classCallCheck(this,XRefEntryException),_super11.apply(this,arguments)}return _createClass(XRefEntryException)}(_util.BaseException);exports.XRefEntryException=XRefEntryException;var XRefParseException=function(_util$BaseException3){_inherits(XRefParseException,_util$BaseException3);var _super12=_createSuper(XRefParseException);function XRefParseException(){return _classCallCheck(this,XRefParseException),_super12.apply(this,arguments)}return _createClass(XRefParseException)}(_util.BaseException);exports.XRefParseException=XRefParseException;var ROMAN_NUMBER_MAP=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function _collectJS(entry,xref,list,parents){if(entry){var parent=null;if((0,_primitives.isRef)(entry)){if(parents.has(entry))return;parent=entry,parents.put(parent),entry=xref.fetch(entry)}if(Array.isArray(entry)){var _step14,_iterator14=_createForOfIteratorHelper(entry);try{for(_iterator14.s();!(_step14=_iterator14.n()).done;)_collectJS(_step14.value,xref,list,parents)}catch(err){_iterator14.e(err)}finally{_iterator14.f()}}else if(entry instanceof _primitives.Dict){if((0,_primitives.isName)(entry.get("S"),"JavaScript")&&entry.has("JS")){var code,js=entry.get("JS");code=(0,_primitives.isStream)(js)?(0,_util.bytesToString)(js.getBytes()):js,(code=(0,_util.stringToPDFString)(code))&&list.push(code)}_collectJS(entry.getRaw("Next"),xref,list,parents)}parent&&parents.remove(parent)}}},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFDocument=exports.Page=void 0;var _util=__w_pdfjs_require__(2),_obj=__w_pdfjs_require__(10),_primitives=__w_pdfjs_require__(5),_core_utils=__w_pdfjs_require__(8),_stream=__w_pdfjs_require__(12),_annotation=__w_pdfjs_require__(25),_crypto=__w_pdfjs_require__(22),_parser=__w_pdfjs_require__(11),_operator_list=__w_pdfjs_require__(44),_evaluator=__w_pdfjs_require__(27),LETTER_SIZE_MEDIABOX=[0,0,612,792];function isAnnotationRenderable(annotation,intent){return"display"===intent&&annotation.viewable||"print"===intent&&annotation.printable}var Page=function(){function Page(_ref13){var pdfManager=_ref13.pdfManager,xref=_ref13.xref,pageIndex=_ref13.pageIndex,pageDict=_ref13.pageDict,ref=_ref13.ref,globalIdFactory=_ref13.globalIdFactory,fontCache=_ref13.fontCache,builtInCMapCache=_ref13.builtInCMapCache,globalImageCache=_ref13.globalImageCache,nonBlendModesSet=_ref13.nonBlendModesSet;_classCallCheck(this,Page),this.pdfManager=pdfManager,this.pageIndex=pageIndex,this.pageDict=pageDict,this.xref=xref,this.ref=ref,this.fontCache=fontCache,this.builtInCMapCache=builtInCMapCache,this.globalImageCache=globalImageCache,this.nonBlendModesSet=nonBlendModesSet,this.evaluatorOptions=pdfManager.evaluatorOptions,this.resourcesPromise=null;var idCounters={obj:0};this._localIdFactory=function(_globalIdFactory){_inherits(_class,_globalIdFactory);var _super13=_createSuper(_class);function _class(){return _classCallCheck(this,_class),_super13.apply(this,arguments)}return _createClass(_class,null,[{key:"createObjId",value:function(){return"p".concat(pageIndex,"_").concat(++idCounters.obj)}}]),_class}(globalIdFactory)}return _createClass(Page,[{key:"_getInheritableProperty",value:function(key){var getArray=arguments.length>1&&void 0!==arguments[1]&&arguments[1],value=(0,_core_utils.getInheritableProperty)({dict:this.pageDict,key:key,getArray:getArray,stopWhenFound:!1});return Array.isArray(value)?1!==value.length&&(0,_primitives.isDict)(value[0])?_primitives.Dict.merge({xref:this.xref,dictArray:value}):value[0]:value}},{key:"content",get:function(){return this.pageDict.get("Contents")}},{key:"resources",get:function(){return(0,_util.shadow)(this,"resources",this._getInheritableProperty("Resources")||_primitives.Dict.empty)}},{key:"_getBoundingBox",value:function(name){var box=this._getInheritableProperty(name,!0);if(Array.isArray(box)&&4===box.length){if(box[2]-box[0]!=0&&box[3]-box[1]!=0)return box;(0,_util.warn)("Empty /".concat(name," entry."))}return null}},{key:"mediaBox",get:function(){return(0,_util.shadow)(this,"mediaBox",this._getBoundingBox("MediaBox")||LETTER_SIZE_MEDIABOX)}},{key:"cropBox",get:function(){return(0,_util.shadow)(this,"cropBox",this._getBoundingBox("CropBox")||this.mediaBox)}},{key:"userUnit",get:function(){var obj=this.pageDict.get("UserUnit");return(!(0,_util.isNum)(obj)||obj<=0)&&(obj=1),(0,_util.shadow)(this,"userUnit",obj)}},{key:"view",get:function(){var view,cropBox=this.cropBox,mediaBox=this.mediaBox;if(cropBox===mediaBox||(0,_util.isArrayEqual)(cropBox,mediaBox))view=mediaBox;else{var box=_util.Util.intersect(cropBox,mediaBox);box&&box[2]-box[0]!=0&&box[3]-box[1]!=0?view=box:(0,_util.warn)("Empty /CropBox and /MediaBox intersection.")}return(0,_util.shadow)(this,"view",view||mediaBox)}},{key:"rotate",get:function(){var rotate=this._getInheritableProperty("Rotate")||0;return rotate%90!=0?rotate=0:rotate>=360?rotate%=360:rotate<0&&(rotate=(rotate%360+360)%360),(0,_util.shadow)(this,"rotate",rotate)}},{key:"getContentStream",value:function(){var stream,content=this.content;if(Array.isArray(content)){var _step16,xref=this.xref,streams=[],_iterator16=_createForOfIteratorHelper(content);try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var subStream=_step16.value;streams.push(xref.fetchIfRef(subStream))}}catch(err){_iterator16.e(err)}finally{_iterator16.f()}stream=new _stream.StreamsSequenceStream(streams)}else stream=(0,_primitives.isStream)(content)?content:new _stream.NullStream;return stream}},{key:"save",value:function(handler,task,annotationStorage){var partialEvaluator=new _evaluator.PartialEvaluator({xref:this.xref,handler:handler,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions});return this._parsedAnnotations.then((function(annotations){var _step17,newRefsPromises=[],_iterator17=_createForOfIteratorHelper(annotations);try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var annotation=_step17.value;isAnnotationRenderable(annotation,"print")&&newRefsPromises.push(annotation.save(partialEvaluator,task,annotationStorage).catch((function(reason){return(0,_util.warn)("save - ignoring annotation data during "+'"'.concat(task.name,'" task: "').concat(reason,'".')),null})))}}catch(err){_iterator17.e(err)}finally{_iterator17.f()}return Promise.all(newRefsPromises)}))}},{key:"loadResources",value:function(keys){var _this10=this;return this.resourcesPromise||(this.resourcesPromise=this.pdfManager.ensure(this,"resources")),this.resourcesPromise.then((function(){return new _obj.ObjectLoader(_this10.resources,keys,_this10.xref).load()}))}},{key:"getOperatorList",value:function(_ref14){var _this11=this,handler=_ref14.handler,sink=_ref14.sink,task=_ref14.task,intent=_ref14.intent,renderInteractiveForms=_ref14.renderInteractiveForms,annotationStorage=_ref14.annotationStorage,contentStreamPromise=this.pdfManager.ensure(this,"getContentStream"),resourcesPromise=this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"]),partialEvaluator=new _evaluator.PartialEvaluator({xref:this.xref,handler:handler,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions}),pageListPromise=Promise.all([contentStreamPromise,resourcesPromise]).then((function(_ref15){var contentStream=_slicedToArray(_ref15,1)[0],opList=new _operator_list.OperatorList(intent,sink);return handler.send("StartRenderPage",{transparency:partialEvaluator.hasBlendModes(_this11.resources,_this11.nonBlendModesSet),pageIndex:_this11.pageIndex,intent:intent}),partialEvaluator.getOperatorList({stream:contentStream,task:task,resources:_this11.resources,operatorList:opList}).then((function(){return opList}))}));return Promise.all([pageListPromise,this._parsedAnnotations]).then((function(_ref17){var _ref18=_slicedToArray(_ref17,2),pageOpList=_ref18[0],annotations=_ref18[1];if(0===annotations.length)return pageOpList.flush(!0),{length:pageOpList.totalLength};var _step18,opListPromises=[],_iterator18=_createForOfIteratorHelper(annotations);try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var annotation=_step18.value;isAnnotationRenderable(annotation,intent)&&!annotation.isHidden(annotationStorage)&&opListPromises.push(annotation.getOperatorList(partialEvaluator,task,renderInteractiveForms,annotationStorage).catch((function(reason){return(0,_util.warn)("getOperatorList - ignoring annotation data during "+'"'.concat(task.name,'" task: "').concat(reason,'".')),null})))}}catch(err){_iterator18.e(err)}finally{_iterator18.f()}return Promise.all(opListPromises).then((function(opLists){pageOpList.addOp(_util.OPS.beginAnnotations,[]);var _step19,_iterator19=_createForOfIteratorHelper(opLists);try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var opList=_step19.value;pageOpList.addOpList(opList)}}catch(err){_iterator19.e(err)}finally{_iterator19.f()}return pageOpList.addOp(_util.OPS.endAnnotations,[]),pageOpList.flush(!0),{length:pageOpList.totalLength}}))}))}},{key:"extractTextContent",value:function(_ref19){var _this12=this,handler=_ref19.handler,task=_ref19.task,normalizeWhitespace=_ref19.normalizeWhitespace,sink=_ref19.sink,combineTextItems=_ref19.combineTextItems,contentStreamPromise=this.pdfManager.ensure(this,"getContentStream"),resourcesPromise=this.loadResources(["ExtGState","XObject","Font"]);return Promise.all([contentStreamPromise,resourcesPromise]).then((function(_ref20){var contentStream=_slicedToArray(_ref20,1)[0];return new _evaluator.PartialEvaluator({xref:_this12.xref,handler:handler,pageIndex:_this12.pageIndex,idFactory:_this12._localIdFactory,fontCache:_this12.fontCache,builtInCMapCache:_this12.builtInCMapCache,globalImageCache:_this12.globalImageCache,options:_this12.evaluatorOptions}).getTextContent({stream:contentStream,task:task,resources:_this12.resources,normalizeWhitespace:normalizeWhitespace,combineTextItems:combineTextItems,sink:sink})}))}},{key:"getAnnotationsData",value:function(intent){return this._parsedAnnotations.then((function(annotations){for(var annotationsData=[],i=0,ii=annotations.length;i<ii;i++)intent&&!isAnnotationRenderable(annotations[i],intent)||annotationsData.push(annotations[i].data);return annotationsData}))}},{key:"annotations",get:function(){var annots=this._getInheritableProperty("Annots");return(0,_util.shadow)(this,"annotations",Array.isArray(annots)?annots:[])}},{key:"_parsedAnnotations",get:function(){var _this13=this,parsedAnnotations=this.pdfManager.ensure(this,"annotations").then((function(){var _step20,annotationPromises=[],_iterator20=_createForOfIteratorHelper(_this13.annotations);try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var annotationRef=_step20.value;annotationPromises.push(_annotation.AnnotationFactory.create(_this13.xref,annotationRef,_this13.pdfManager,_this13._localIdFactory).catch((function(reason){return(0,_util.warn)('_parsedAnnotations: "'.concat(reason,'".')),null})))}}catch(err){_iterator20.e(err)}finally{_iterator20.f()}return Promise.all(annotationPromises).then((function(annotations){return annotations.filter((function(annotation){return!!annotation}))}))}));return(0,_util.shadow)(this,"_parsedAnnotations",parsedAnnotations)}},{key:"jsActions",get:function(){var actions=(0,_core_utils.collectActions)(this.xref,this.pageDict,_util.PageActionEventType);return(0,_util.shadow)(this,"jsActions",actions)}}]),Page}();exports.Page=Page;var PDF_HEADER_SIGNATURE=new Uint8Array([37,80,68,70,45]),STARTXREF_SIGNATURE=new Uint8Array([115,116,97,114,116,120,114,101,102]),ENDOBJ_SIGNATURE=new Uint8Array([101,110,100,111,98,106]),PDF_HEADER_VERSION_REGEXP=/^[1-9]\.[0-9]$/;function find(stream,signature){var limit=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,backwards=arguments.length>3&&void 0!==arguments[3]&&arguments[3],signatureLength=signature.length,scanBytes=stream.peekBytes(limit),scanLength=scanBytes.length-signatureLength;if(scanLength<=0)return!1;if(backwards)for(var signatureEnd=signatureLength-1,pos=scanBytes.length-1;pos>=signatureEnd;){for(var j=0;j<signatureLength&&scanBytes[pos-j]===signature[signatureEnd-j];)j++;if(j>=signatureLength)return stream.pos+=pos-signatureEnd,!0;pos--}else for(var _pos=0;_pos<=scanLength;){for(var _j=0;_j<signatureLength&&scanBytes[_pos+_j]===signature[_j];)_j++;if(_j>=signatureLength)return stream.pos+=_pos,!0;_pos++}return!1}var PDFDocument=function(){function PDFDocument(pdfManager,arg){var stream;if(_classCallCheck(this,PDFDocument),(0,_primitives.isStream)(arg))stream=arg;else{if(!(0,_util.isArrayBuffer)(arg))throw new Error("PDFDocument: Unknown argument type");stream=new _stream.Stream(arg)}if(stream.length<=0)throw new _util.InvalidPDFException("The PDF file is empty, i.e. its size is zero bytes.");this.pdfManager=pdfManager,this.stream=stream,this.xref=new _obj.XRef(stream,pdfManager),this._pagePromises=[],this._version=null;var idCounters={font:0};this._globalIdFactory=function(){function _class2(){_classCallCheck(this,_class2)}return _createClass(_class2,null,[{key:"getDocId",value:function(){return"g_".concat(pdfManager.docId)}},{key:"createFontId",value:function(){return"f".concat(++idCounters.font)}},{key:"createObjId",value:function(){(0,_util.unreachable)("Abstract method `createObjId` called.")}}]),_class2}()}var _cleanup;return _createClass(PDFDocument,[{key:"parse",value:function(recoveryMode){this.xref.parse(recoveryMode),this.catalog=new _obj.Catalog(this.pdfManager,this.xref),this.catalog.version&&(this._version=this.catalog.version)}},{key:"linearization",get:function(){var linearization=null;try{linearization=_parser.Linearization.create(this.stream)}catch(err){if(err instanceof _core_utils.MissingDataException)throw err;(0,_util.info)(err)}return(0,_util.shadow)(this,"linearization",linearization)}},{key:"startXRef",get:function(){var stream=this.stream,startXRef=0;if(this.linearization)stream.reset(),find(stream,ENDOBJ_SIGNATURE)&&(startXRef=stream.pos+6-stream.start);else{for(var startXRefLength=STARTXREF_SIGNATURE.length,found=!1,pos=stream.end;!found&&pos>0;)(pos-=1024-startXRefLength)<0&&(pos=0),stream.pos=pos,found=find(stream,STARTXREF_SIGNATURE,1024,!0);if(found){var ch;stream.skip(9);do{ch=stream.getByte()}while((0,_core_utils.isWhiteSpace)(ch));for(var str="";ch>=32&&ch<=57;)str+=String.fromCharCode(ch),ch=stream.getByte();startXRef=parseInt(str,10),isNaN(startXRef)&&(startXRef=0)}}return(0,_util.shadow)(this,"startXRef",startXRef)}},{key:"checkHeader",value:function(){var stream=this.stream;if(stream.reset(),find(stream,PDF_HEADER_SIGNATURE)){stream.moveStart();for(var ch,version="";(ch=stream.getByte())>32&&!(version.length>=12);)version+=String.fromCharCode(ch);this._version||(this._version=version.substring(5))}}},{key:"parseStartXRef",value:function(){this.xref.setStartXRef(this.startXRef)}},{key:"numPages",get:function(){var linearization=this.linearization,num=linearization?linearization.numPages:this.catalog.numPages;return(0,_util.shadow)(this,"numPages",num)}},{key:"_hasOnlyDocumentSignatures",value:function(fields){var _this14=this,recursionDepth=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,RECURSION_LIMIT=10;return!!Array.isArray(fields)&&fields.every((function(field){if(!((field=_this14.xref.fetchIfRef(field))instanceof _primitives.Dict))return!1;if(field.has("Kids"))return++recursionDepth>RECURSION_LIMIT?((0,_util.warn)("_hasOnlyDocumentSignatures: maximum recursion depth reached"),!1):_this14._hasOnlyDocumentSignatures(field.get("Kids"),recursionDepth);var isSignature=(0,_primitives.isName)(field.get("FT"),"Sig"),rectangle=field.get("Rect"),isInvisible=Array.isArray(rectangle)&&rectangle.every((function(value){return 0===value}));return isSignature&&isInvisible}))}},{key:"formInfo",get:function(){var formInfo={hasFields:!1,hasAcroForm:!1,hasXfa:!1},acroForm=this.catalog.acroForm;if(!acroForm)return(0,_util.shadow)(this,"formInfo",formInfo);try{var fields=acroForm.get("Fields"),hasFields=Array.isArray(fields)&&fields.length>0;formInfo.hasFields=hasFields;var xfa=acroForm.get("XFA");formInfo.hasXfa=Array.isArray(xfa)&&xfa.length>0||(0,_primitives.isStream)(xfa)&&!xfa.isEmpty;var hasOnlyDocumentSignatures=!!(1&acroForm.get("SigFlags"))&&this._hasOnlyDocumentSignatures(fields);formInfo.hasAcroForm=hasFields&&!hasOnlyDocumentSignatures}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util.warn)('Cannot fetch form information: "'.concat(ex,'".'))}return(0,_util.shadow)(this,"formInfo",formInfo)}},{key:"documentInfo",get:function(){var DocumentInfoValidators={Title:_util.isString,Author:_util.isString,Subject:_util.isString,Keywords:_util.isString,Creator:_util.isString,Producer:_util.isString,CreationDate:_util.isString,ModDate:_util.isString,Trapped:_primitives.isName},version=this._version;"string"==typeof version&&PDF_HEADER_VERSION_REGEXP.test(version)||((0,_util.warn)("Invalid PDF header version number: ".concat(version)),version=null);var infoDict,docInfo={PDFFormatVersion:version,IsLinearized:!!this.linearization,IsAcroFormPresent:this.formInfo.hasAcroForm,IsXFAPresent:this.formInfo.hasXfa,IsCollectionPresent:!!this.catalog.collection};try{infoDict=this.xref.trailer.get("Info")}catch(err){if(err instanceof _core_utils.MissingDataException)throw err;(0,_util.info)("The document information dictionary is invalid.")}if((0,_primitives.isDict)(infoDict)){var _step21,_iterator21=_createForOfIteratorHelper(infoDict.getKeys());try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var key=_step21.value,value=infoDict.get(key);if(DocumentInfoValidators[key])DocumentInfoValidators[key](value)?docInfo[key]="string"!=typeof value?value:(0,_util.stringToPDFString)(value):(0,_util.info)('Bad value in document info for "'.concat(key,'".'));else if("string"==typeof key){var customValue=void 0;if((0,_util.isString)(value))customValue=(0,_util.stringToPDFString)(value);else{if(!((0,_primitives.isName)(value)||(0,_util.isNum)(value)||(0,_util.isBool)(value))){(0,_util.info)('Unsupported value in document info for (custom) "'.concat(key,'".'));continue}customValue=value}docInfo.Custom||(docInfo.Custom=Object.create(null)),docInfo.Custom[key]=customValue}}}catch(err){_iterator21.e(err)}finally{_iterator21.f()}}return(0,_util.shadow)(this,"documentInfo",docInfo)}},{key:"fingerprint",get:function(){for(var hash,idArray=this.xref.trailer.get("ID"),fingerprintBuf=[],i=0,ii=(hash=Array.isArray(idArray)&&idArray[0]&&(0,_util.isString)(idArray[0])&&"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"!==idArray[0]?(0,_util.stringToBytes)(idArray[0]):(0,_crypto.calculateMD5)(this.stream.getByteRange(0,1024),0,1024)).length;i<ii;i++){var hex=hash[i].toString(16);fingerprintBuf.push(hex.padStart(2,"0"))}return(0,_util.shadow)(this,"fingerprint",fingerprintBuf.join(""))}},{key:"_getLinearizationPage",value:function(pageIndex){var catalog=this.catalog,linearization=this.linearization,ref=_primitives.Ref.get(linearization.objectNumberFirst,0);return this.xref.fetchAsync(ref).then((function(obj){if((0,_primitives.isDict)(obj,"Page")||(0,_primitives.isDict)(obj)&&!obj.has("Type")&&obj.has("Contents"))return ref&&!catalog.pageKidsCountCache.has(ref)&&catalog.pageKidsCountCache.put(ref,1),[obj,ref];throw new _util.FormatError("The Linearization dictionary doesn't point to a valid Page dictionary.")})).catch((function(reason){return(0,_util.info)(reason),catalog.getPageDict(pageIndex)}))}},{key:"getPage",value:function(pageIndex){var _this15=this;if(void 0!==this._pagePromises[pageIndex])return this._pagePromises[pageIndex];var catalog=this.catalog,linearization=this.linearization,promise=linearization&&linearization.pageFirst===pageIndex?this._getLinearizationPage(pageIndex):catalog.getPageDict(pageIndex);return this._pagePromises[pageIndex]=promise.then((function(_ref22){var _ref23=_slicedToArray(_ref22,2),pageDict=_ref23[0],ref=_ref23[1];return new Page({pdfManager:_this15.pdfManager,xref:_this15.xref,pageIndex:pageIndex,pageDict:pageDict,ref:ref,globalIdFactory:_this15._globalIdFactory,fontCache:catalog.fontCache,builtInCMapCache:catalog.builtInCMapCache,globalImageCache:catalog.globalImageCache,nonBlendModesSet:catalog.nonBlendModesSet})}))}},{key:"checkFirstPage",value:function(){var _ref24,_this16=this;return this.getPage(0).catch((_ref24=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(reason){return regeneratorRuntime.wrap((function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(!(reason instanceof _core_utils.XRefEntryException)){_context6.next=5;break}return _this16._pagePromises.length=0,_context6.next=4,_this16.cleanup();case 4:throw new _core_utils.XRefParseException;case 5:case"end":return _context6.stop()}}),_callee6)}))),function(_x11){return _ref24.apply(this,arguments)}))}},{key:"fontFallback",value:function(id,handler){return this.catalog.fontFallback(id,handler)}},{key:"cleanup",value:(_cleanup=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){var manuallyTriggered,_args7=arguments;return regeneratorRuntime.wrap((function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return manuallyTriggered=_args7.length>0&&void 0!==_args7[0]&&_args7[0],_context7.abrupt("return",this.catalog?this.catalog.cleanup(manuallyTriggered):(0,_primitives.clearPrimitiveCaches)());case 2:case"end":return _context7.stop()}}),_callee7,this)}))),function(){return _cleanup.apply(this,arguments)})},{key:"_collectFieldObjects",value:function(name,fieldRef,promises){var field=this.xref.fetchIfRef(fieldRef);if(field.has("T")){var partName=(0,_util.stringToPDFString)(field.get("T"));name=""===name?partName:"".concat(name,".").concat(partName)}if(promises.has(name)||promises.set(name,[]),promises.get(name).push(_annotation.AnnotationFactory.create(this.xref,fieldRef,this.pdfManager,this._localIdFactory).then((function(annotation){return annotation&&annotation.getFieldObject()})).catch((function(reason){return(0,_util.warn)('_collectFieldObjects: "'.concat(reason,'".')),null}))),field.has("Kids")){var _step22,_iterator22=_createForOfIteratorHelper(field.get("Kids"));try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var kid=_step22.value;this._collectFieldObjects(name,kid,promises)}}catch(err){_iterator22.e(err)}finally{_iterator22.f()}}}},{key:"fieldObjects",get:function(){if(!this.formInfo.hasFields)return(0,_util.shadow)(this,"fieldObjects",Promise.resolve(null));var _step23,allFields=Object.create(null),fieldPromises=new Map,_iterator23=_createForOfIteratorHelper(this.catalog.acroForm.get("Fields"));try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var fieldRef=_step23.value;this._collectFieldObjects("",fieldRef,fieldPromises)}}catch(err){_iterator23.e(err)}finally{_iterator23.f()}var _step24,allPromises=[],_iterator24=_createForOfIteratorHelper(fieldPromises);try{var _loop2=function(){var _step24$value=_slicedToArray(_step24.value,2),name=_step24$value[0],promises=_step24$value[1];allPromises.push(Promise.all(promises).then((function(fields){(fields=fields.filter((function(field){return!!field}))).length>0&&(allFields[name]=fields)})))};for(_iterator24.s();!(_step24=_iterator24.n()).done;)_loop2()}catch(err){_iterator24.e(err)}finally{_iterator24.f()}return(0,_util.shadow)(this,"fieldObjects",Promise.all(allPromises).then((function(){return allFields})))}},{key:"hasJSActions",get:function(){var _this17=this;return(0,_util.shadow)(this,"hasJSActions",this.fieldObjects.then((function(fieldObjects){return null!==fieldObjects&&Object.values(fieldObjects).some((function(fieldObject){return fieldObject.some((function(object){return null!==object.actions}))}))||!!_this17.catalog.jsActions})))}},{key:"calculationOrderIds",get:function(){var acroForm=this.catalog.acroForm;if(!acroForm||!acroForm.has("CO"))return(0,_util.shadow)(this,"calculationOrderIds",null);var calculationOrder=acroForm.get("CO");if(!Array.isArray(calculationOrder)||0===calculationOrder.length)return(0,_util.shadow)(this,"calculationOrderIds",null);var ids=calculationOrder.filter(_primitives.isRef).map((function(ref){return ref.toString()}));return 0===ids.length?(0,_util.shadow)(this,"calculationOrderIds",null):(0,_util.shadow)(this,"calculationOrderIds",ids)}}]),PDFDocument}();exports.PDFDocument=PDFDocument},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.XRef=exports.ObjectLoader=exports.FileSpec=exports.Catalog=void 0;var _util=__w_pdfjs_require__(2),_primitives=__w_pdfjs_require__(5),_core_utils=__w_pdfjs_require__(8),_parser=__w_pdfjs_require__(11),_crypto=__w_pdfjs_require__(22),_colorspace=__w_pdfjs_require__(23),_image_utils=__w_pdfjs_require__(24);function fetchDestination(dest){return(0,_primitives.isDict)(dest)?dest.get("D"):dest}var Catalog=function(){function Catalog(pdfManager,xref){if(_classCallCheck(this,Catalog),this.pdfManager=pdfManager,this.xref=xref,this._catDict=xref.getCatalogObj(),!(0,_primitives.isDict)(this._catDict))throw new _util.FormatError("Catalog object is not a dictionary.");this.fontCache=new _primitives.RefSetCache,this.builtInCMapCache=new Map,this.globalImageCache=new _image_utils.GlobalImageCache,this.pageKidsCountCache=new _primitives.RefSetCache,this.nonBlendModesSet=new _primitives.RefSet}return _createClass(Catalog,[{key:"version",get:function(){var version=this._catDict.get("Version");return(0,_primitives.isName)(version)?(0,_util.shadow)(this,"version",version.name):(0,_util.shadow)(this,"version",null)}},{key:"collection",get:function(){var collection=null;try{var obj=this._catDict.get("Collection");(0,_primitives.isDict)(obj)&&obj.size>0&&(collection=obj)}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util.info)("Cannot fetch Collection entry; assuming no collection is present.")}return(0,_util.shadow)(this,"collection",collection)}},{key:"acroForm",get:function(){var acroForm=null;try{var obj=this._catDict.get("AcroForm");(0,_primitives.isDict)(obj)&&obj.size>0&&(acroForm=obj)}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util.info)("Cannot fetch AcroForm entry; assuming no forms are present.")}return(0,_util.shadow)(this,"acroForm",acroForm)}},{key:"metadata",get:function(){var streamRef=this._catDict.getRaw("Metadata");if(!(0,_primitives.isRef)(streamRef))return(0,_util.shadow)(this,"metadata",null);var metadata,suppressEncryption=!(this.xref.encrypt&&this.xref.encrypt.encryptMetadata),stream=this.xref.fetch(streamRef,suppressEncryption);if(stream&&(0,_primitives.isDict)(stream.dict)){var type=stream.dict.get("Type"),subtype=stream.dict.get("Subtype");if((0,_primitives.isName)(type,"Metadata")&&(0,_primitives.isName)(subtype,"XML"))try{metadata=(0,_util.stringToUTF8String)((0,_util.bytesToString)(stream.getBytes()))}catch(e){if(e instanceof _core_utils.MissingDataException)throw e;(0,_util.info)("Skipping invalid metadata.")}}return(0,_util.shadow)(this,"metadata",metadata)}},{key:"markInfo",get:function(){var markInfo=null;try{markInfo=this._readMarkInfo()}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util.warn)("Unable to read mark info.")}return(0,_util.shadow)(this,"markInfo",markInfo)}},{key:"_readMarkInfo",value:function(){var obj=this._catDict.get("MarkInfo");if(!(0,_primitives.isDict)(obj))return null;var markInfo=Object.assign(Object.create(null),{Marked:!1,UserProperties:!1,Suspects:!1});for(var key in markInfo)if(obj.has(key)){var value=obj.get(key);(0,_util.isBool)(value)&&(markInfo[key]=value)}return markInfo}},{key:"toplevelPagesDict",get:function(){var pagesObj=this._catDict.get("Pages");if(!(0,_primitives.isDict)(pagesObj))throw new _util.FormatError("Invalid top-level pages dictionary.");return(0,_util.shadow)(this,"toplevelPagesDict",pagesObj)}},{key:"documentOutline",get:function(){var obj=null;try{obj=this._readDocumentOutline()}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util.warn)("Unable to read document outline.")}return(0,_util.shadow)(this,"documentOutline",obj)}},{key:"_readDocumentOutline",value:function(){var obj=this._catDict.get("Outlines");if(!(0,_primitives.isDict)(obj))return null;if(obj=obj.getRaw("First"),!(0,_primitives.isRef)(obj))return null;var root={items:[]},queue=[{obj:obj,parent:root}],processed=new _primitives.RefSet;processed.put(obj);for(var xref=this.xref,blackColor=new Uint8ClampedArray(3);queue.length>0;){var i=queue.shift(),outlineDict=xref.fetchIfRef(i.obj);if(null!==outlineDict){if(!outlineDict.has("Title"))throw new _util.FormatError("Invalid outline item encountered.");var data={url:null,dest:null};Catalog.parseDestDictionary({destDict:outlineDict,resultObj:data,docBaseUrl:this.pdfManager.docBaseUrl});var title=outlineDict.get("Title"),flags=outlineDict.get("F")||0,color=outlineDict.getArray("C"),count=outlineDict.get("Count"),rgbColor=blackColor;!Array.isArray(color)||3!==color.length||0===color[0]&&0===color[1]&&0===color[2]||(rgbColor=_colorspace.ColorSpace.singletons.rgb.getRgb(color,0));var outlineItem={dest:data.dest,url:data.url,unsafeUrl:data.unsafeUrl,newWindow:data.newWindow,title:(0,_util.stringToPDFString)(title),color:rgbColor,count:Number.isInteger(count)?count:void 0,bold:!!(2&flags),italic:!!(1&flags),items:[]};i.parent.items.push(outlineItem),obj=outlineDict.getRaw("First"),(0,_primitives.isRef)(obj)&&!processed.has(obj)&&(queue.push({obj:obj,parent:outlineItem}),processed.put(obj)),obj=outlineDict.getRaw("Next"),(0,_primitives.isRef)(obj)&&!processed.has(obj)&&(queue.push({obj:obj,parent:i.parent}),processed.put(obj))}}return root.items.length>0?root.items:null}},{key:"permissions",get:function(){var permissions=null;try{permissions=this._readPermissions()}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util.warn)("Unable to read permissions.")}return(0,_util.shadow)(this,"permissions",permissions)}},{key:"_readPermissions",value:function(){var encrypt=this.xref.trailer.get("Encrypt");if(!(0,_primitives.isDict)(encrypt))return null;var flags=encrypt.get("P");if(!(0,_util.isNum)(flags))return null;flags+=Math.pow(2,32);var permissions=[];for(var key in _util.PermissionFlag){var value=_util.PermissionFlag[key];flags&value&&permissions.push(value)}return permissions}},{key:"optionalContentConfig",get:function(){var config=null;try{var properties=this._catDict.get("OCProperties");if(!properties)return(0,_util.shadow)(this,"optionalContentConfig",null);var defaultConfig=properties.get("D");if(!defaultConfig)return(0,_util.shadow)(this,"optionalContentConfig",null);var groupsData=properties.get("OCGs");if(!Array.isArray(groupsData))return(0,_util.shadow)(this,"optionalContentConfig",null);var _step25,groups=[],groupRefs=[],_iterator25=_createForOfIteratorHelper(groupsData);try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var groupRef=_step25.value;if((0,_primitives.isRef)(groupRef)){groupRefs.push(groupRef);var group=this.xref.fetchIfRef(groupRef);groups.push({id:groupRef.toString(),name:(0,_util.isString)(group.get("Name"))?(0,_util.stringToPDFString)(group.get("Name")):null,intent:(0,_util.isString)(group.get("Intent"))?(0,_util.stringToPDFString)(group.get("Intent")):null})}}}catch(err){_iterator25.e(err)}finally{_iterator25.f()}(config=this._readOptionalContentConfig(defaultConfig,groupRefs)).groups=groups}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util.warn)("Unable to read optional content config: ".concat(ex))}return(0,_util.shadow)(this,"optionalContentConfig",config)}},{key:"_readOptionalContentConfig",value:function(config,contentGroupRefs){function parseOnOff(refs){var onParsed=[];if(Array.isArray(refs)){var _step26,_iterator26=_createForOfIteratorHelper(refs);try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var value=_step26.value;(0,_primitives.isRef)(value)&&contentGroupRefs.includes(value)&&onParsed.push(value.toString())}}catch(err){_iterator26.e(err)}finally{_iterator26.f()}}return onParsed}function parseOrder(refs){var nestedLevels=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Array.isArray(refs))return null;var _step27,order=[],_iterator27=_createForOfIteratorHelper(refs);try{for(_iterator27.s();!(_step27=_iterator27.n()).done;){var value=_step27.value;if((0,_primitives.isRef)(value)&&contentGroupRefs.includes(value))parsedOrderRefs.put(value),order.push(value.toString());else{var nestedOrder=parseNestedOrder(value,nestedLevels);nestedOrder&&order.push(nestedOrder)}}}catch(err){_iterator27.e(err)}finally{_iterator27.f()}if(nestedLevels>0)return order;var _step28,hiddenGroups=[],_iterator28=_createForOfIteratorHelper(contentGroupRefs);try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var groupRef=_step28.value;parsedOrderRefs.has(groupRef)||hiddenGroups.push(groupRef.toString())}}catch(err){_iterator28.e(err)}finally{_iterator28.f()}return hiddenGroups.length&&order.push({name:null,order:hiddenGroups}),order}function parseNestedOrder(ref,nestedLevels){if(++nestedLevels>MAX_NESTED_LEVELS)return(0,_util.warn)("parseNestedOrder - reached MAX_NESTED_LEVELS."),null;var value=xref.fetchIfRef(ref);if(!Array.isArray(value))return null;var nestedName=xref.fetchIfRef(value[0]);if("string"!=typeof nestedName)return null;var nestedOrder=parseOrder(value.slice(1),nestedLevels);return nestedOrder&&nestedOrder.length?{name:(0,_util.stringToPDFString)(nestedName),order:nestedOrder}:null}var xref=this.xref,parsedOrderRefs=new _primitives.RefSet,MAX_NESTED_LEVELS=10;return{name:(0,_util.isString)(config.get("Name"))?(0,_util.stringToPDFString)(config.get("Name")):null,creator:(0,_util.isString)(config.get("Creator"))?(0,_util.stringToPDFString)(config.get("Creator")):null,baseState:(0,_primitives.isName)(config.get("BaseState"))?config.get("BaseState").name:null,on:parseOnOff(config.get("ON")),off:parseOnOff(config.get("OFF")),order:parseOrder(config.get("Order")),groups:null}}},{key:"numPages",get:function(){var obj=this.toplevelPagesDict.get("Count");if(!Number.isInteger(obj))throw new _util.FormatError("Page count in top-level pages dictionary is not an integer.");return(0,_util.shadow)(this,"numPages",obj)}},{key:"destinations",get:function(){var obj=this._readDests(),dests=Object.create(null);if(obj instanceof NameTree){var names=obj.getAll();for(var name in names)dests[name]=fetchDestination(names[name])}else obj instanceof _primitives.Dict&&obj.forEach((function(key,value){value&&(dests[key]=fetchDestination(value))}));return(0,_util.shadow)(this,"destinations",dests)}},{key:"getDestination",value:function(destinationId){var obj=this._readDests();return obj instanceof NameTree||obj instanceof _primitives.Dict?fetchDestination(obj.get(destinationId)||null):null}},{key:"_readDests",value:function(){var obj=this._catDict.get("Names");return obj&&obj.has("Dests")?new NameTree(obj.getRaw("Dests"),this.xref):this._catDict.has("Dests")?this._catDict.get("Dests"):void 0}},{key:"pageLabels",get:function(){var obj=null;try{obj=this._readPageLabels()}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util.warn)("Unable to read page labels.")}return(0,_util.shadow)(this,"pageLabels",obj)}},{key:"_readPageLabels",value:function(){var obj=this._catDict.getRaw("PageLabels");if(!obj)return null;for(var pageLabels=new Array(this.numPages),style=null,prefix="",nums=new NumberTree(obj,this.xref).getAll(),currentLabel="",currentIndex=1,i=0,ii=this.numPages;i<ii;i++){if(i in nums){var labelDict=nums[i];if(!(0,_primitives.isDict)(labelDict))throw new _util.FormatError("PageLabel is not a dictionary.");if(labelDict.has("Type")&&!(0,_primitives.isName)(labelDict.get("Type"),"PageLabel"))throw new _util.FormatError("Invalid type in PageLabel dictionary.");if(labelDict.has("S")){var s=labelDict.get("S");if(!(0,_primitives.isName)(s))throw new _util.FormatError("Invalid style in PageLabel dictionary.");style=s.name}else style=null;if(labelDict.has("P")){var p=labelDict.get("P");if(!(0,_util.isString)(p))throw new _util.FormatError("Invalid prefix in PageLabel dictionary.");prefix=(0,_util.stringToPDFString)(p)}else prefix="";if(labelDict.has("St")){var st=labelDict.get("St");if(!(Number.isInteger(st)&&st>=1))throw new _util.FormatError("Invalid start in PageLabel dictionary.");currentIndex=st}else currentIndex=1}switch(style){case"D":currentLabel=currentIndex;break;case"R":case"r":currentLabel=(0,_core_utils.toRomanNumerals)(currentIndex,"r"===style);break;case"A":case"a":for(var baseCharCode="a"===style?97:65,letterIndex=currentIndex-1,character=String.fromCharCode(baseCharCode+letterIndex%26),charBuf=[],j=0,jj=letterIndex/26|0;j<=jj;j++)charBuf.push(character);currentLabel=charBuf.join("");break;default:if(style)throw new _util.FormatError('Invalid style "'.concat(style,'" in PageLabel dictionary.'));currentLabel=""}pageLabels[i]=prefix+currentLabel,currentIndex++}return pageLabels}},{key:"pageLayout",get:function(){var obj=this._catDict.get("PageLayout"),pageLayout="";if((0,_primitives.isName)(obj))switch(obj.name){case"SinglePage":case"OneColumn":case"TwoColumnLeft":case"TwoColumnRight":case"TwoPageLeft":case"TwoPageRight":pageLayout=obj.name}return(0,_util.shadow)(this,"pageLayout",pageLayout)}},{key:"pageMode",get:function(){var obj=this._catDict.get("PageMode"),pageMode="UseNone";if((0,_primitives.isName)(obj))switch(obj.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"FullScreen":case"UseOC":case"UseAttachments":pageMode=obj.name}return(0,_util.shadow)(this,"pageMode",pageMode)}},{key:"viewerPreferences",get:function(){var _this18=this,ViewerPreferencesValidators={HideToolbar:_util.isBool,HideMenubar:_util.isBool,HideWindowUI:_util.isBool,FitWindow:_util.isBool,CenterWindow:_util.isBool,DisplayDocTitle:_util.isBool,NonFullScreenPageMode:_primitives.isName,Direction:_primitives.isName,ViewArea:_primitives.isName,ViewClip:_primitives.isName,PrintArea:_primitives.isName,PrintClip:_primitives.isName,PrintScaling:_primitives.isName,Duplex:_primitives.isName,PickTrayByPDFSize:_util.isBool,PrintPageRange:Array.isArray,NumCopies:Number.isInteger},obj=this._catDict.get("ViewerPreferences"),prefs=null;if((0,_primitives.isDict)(obj))for(var key in ViewerPreferencesValidators)if(obj.has(key)){var value=obj.get(key);if(ViewerPreferencesValidators[key](value)){var prefValue=void 0;switch(key){case"NonFullScreenPageMode":switch(value.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"UseOC":prefValue=value.name;break;default:prefValue="UseNone"}break;case"Direction":switch(value.name){case"L2R":case"R2L":prefValue=value.name;break;default:prefValue="L2R"}break;case"ViewArea":case"ViewClip":case"PrintArea":case"PrintClip":switch(value.name){case"MediaBox":case"CropBox":case"BleedBox":case"TrimBox":case"ArtBox":prefValue=value.name;break;default:prefValue="CropBox"}break;case"PrintScaling":switch(value.name){case"None":case"AppDefault":prefValue=value.name;break;default:prefValue="AppDefault"}break;case"Duplex":switch(value.name){case"Simplex":case"DuplexFlipShortEdge":case"DuplexFlipLongEdge":prefValue=value.name;break;default:prefValue="None"}break;case"PrintPageRange":if(value.length%2!=0)break;value.every((function(page,i,arr){return Number.isInteger(page)&&page>0&&(0===i||page>=arr[i-1])&&page<=_this18.numPages}))&&(prefValue=value);break;case"NumCopies":value>0&&(prefValue=value);break;default:if("boolean"!=typeof value)throw new _util.FormatError("viewerPreferences - expected a boolean value for: ".concat(key));prefValue=value}void 0!==prefValue?(prefs||(prefs=Object.create(null)),prefs[key]=prefValue):(0,_util.info)('Bad value in ViewerPreferences for "'.concat(key,'".'))}else(0,_util.info)('Bad value in ViewerPreferences for "'.concat(key,'".'))}return(0,_util.shadow)(this,"viewerPreferences",prefs)}},{key:"openAction",get:function(){var obj=this._catDict.get("OpenAction"),openAction=Object.create(null);if((0,_primitives.isDict)(obj)){var destDict=new _primitives.Dict(this.xref);destDict.set("A",obj);var resultObj={url:null,dest:null,action:null};Catalog.parseDestDictionary({destDict:destDict,resultObj:resultObj}),Array.isArray(resultObj.dest)?openAction.dest=resultObj.dest:resultObj.action&&(openAction.action=resultObj.action)}else Array.isArray(obj)&&(openAction.dest=obj);return(0,_util.shadow)(this,"openAction",(0,_util.objectSize)(openAction)>0?openAction:null)}},{key:"attachments",get:function(){var obj=this._catDict.get("Names"),attachments=null;if(obj&&obj.has("EmbeddedFiles")){var names=new NameTree(obj.getRaw("EmbeddedFiles"),this.xref).getAll();for(var name in names){var fs=new FileSpec(names[name],this.xref);attachments||(attachments=Object.create(null)),attachments[(0,_util.stringToPDFString)(name)]=fs.serializable}}return(0,_util.shadow)(this,"attachments",attachments)}},{key:"_collectJavaScript",value:function(){var obj=this._catDict.get("Names"),javaScript=null;function appendIfJavaScriptDict(name,jsDict){var type=jsDict.get("S");if((0,_primitives.isName)(type,"JavaScript")){var js=jsDict.get("JS");if((0,_primitives.isStream)(js))js=(0,_util.bytesToString)(js.getBytes());else if(!(0,_util.isString)(js))return;null===javaScript&&(javaScript=Object.create(null)),javaScript[name]=(0,_util.stringToPDFString)(js)}}if(obj&&obj.has("JavaScript")){var names=new NameTree(obj.getRaw("JavaScript"),this.xref).getAll();for(var name in names){var jsDict=names[name];(0,_primitives.isDict)(jsDict)&&appendIfJavaScriptDict(name,jsDict)}}var openAction=this._catDict.get("OpenAction");return(0,_primitives.isDict)(openAction)&&(0,_primitives.isName)(openAction.get("S"),"JavaScript")&&appendIfJavaScriptDict("OpenAction",openAction),javaScript}},{key:"javaScript",get:function(){var javaScript=this._collectJavaScript();return(0,_util.shadow)(this,"javaScript",javaScript?Object.values(javaScript):null)}},{key:"jsActions",get:function(){var js=this._collectJavaScript(),actions=(0,_core_utils.collectActions)(this.xref,this._catDict,_util.DocumentActionEventType);if(!actions&&js&&(actions=Object.create(null)),actions&&js)for(var _i9=0,_Object$entries4=Object.entries(js);_i9<_Object$entries4.length;_i9++){var _Object$entries4$_i=_slicedToArray(_Object$entries4[_i9],2),key=_Object$entries4$_i[0],val=_Object$entries4$_i[1];key in actions?actions[key].push(val):actions[key]=[val]}return(0,_util.shadow)(this,"jsActions",actions)}},{key:"fontFallback",value:function(id,handler){var promises=[];return this.fontCache.forEach((function(promise){promises.push(promise)})),Promise.all(promises).then((function(translatedFonts){var _step29,_iterator29=_createForOfIteratorHelper(translatedFonts);try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var translatedFont=_step29.value;if(translatedFont.loadedName===id)return void translatedFont.fallback(handler)}}catch(err){_iterator29.e(err)}finally{_iterator29.f()}}))}},{key:"cleanup",value:function(){var _this19=this,manuallyTriggered=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,_primitives.clearPrimitiveCaches)(),this.globalImageCache.clear(manuallyTriggered),this.pageKidsCountCache.clear(),this.nonBlendModesSet.clear();var promises=[];return this.fontCache.forEach((function(promise){promises.push(promise)})),Promise.all(promises).then((function(translatedFonts){var _step30,_iterator30=_createForOfIteratorHelper(translatedFonts);try{for(_iterator30.s();!(_step30=_iterator30.n()).done;)delete _step30.value.dict.cacheKey}catch(err){_iterator30.e(err)}finally{_iterator30.f()}_this19.fontCache.clear(),_this19.builtInCMapCache.clear()}))}},{key:"getPageDict",value:function(pageIndex){var count,capability=(0,_util.createPromiseCapability)(),nodesToVisit=[this._catDict.getRaw("Pages")],visitedNodes=new _primitives.RefSet,xref=this.xref,pageKidsCountCache=this.pageKidsCountCache,currentPageIndex=0;return function next(){for(var _loop3=function(){var currentNode=nodesToVisit.pop();if((0,_primitives.isRef)(currentNode))return(count=pageKidsCountCache.get(currentNode))>0&&currentPageIndex+count<pageIndex?(currentPageIndex+=count,"continue"):visitedNodes.has(currentNode)?(capability.reject(new _util.FormatError("Pages tree contains circular reference.")),{v:void 0}):(visitedNodes.put(currentNode),xref.fetchAsync(currentNode).then((function(obj){(0,_primitives.isDict)(obj,"Page")||(0,_primitives.isDict)(obj)&&!obj.has("Kids")?pageIndex===currentPageIndex?(currentNode&&!pageKidsCountCache.has(currentNode)&&pageKidsCountCache.put(currentNode,1),capability.resolve([obj,currentNode])):(currentPageIndex++,next()):(nodesToVisit.push(obj),next())}),capability.reject),{v:void 0});if(!(0,_primitives.isDict)(currentNode))return capability.reject(new _util.FormatError("Page dictionary kid reference points to wrong type of object.")),{v:void 0};if(count=currentNode.get("Count"),Number.isInteger(count)&&count>=0){var objId=currentNode.objId;if(objId&&!pageKidsCountCache.has(objId)&&pageKidsCountCache.put(objId,count),currentPageIndex+count<=pageIndex)return currentPageIndex+=count,"continue"}var kids=currentNode.get("Kids");if(!Array.isArray(kids))return(0,_primitives.isName)(currentNode.get("Type"),"Page")||!currentNode.has("Type")&&currentNode.has("Contents")?currentPageIndex===pageIndex?(capability.resolve([currentNode,null]),{v:void 0}):(currentPageIndex++,"continue"):(capability.reject(new _util.FormatError("Page dictionary kids object is not an array.")),{v:void 0});for(var last=kids.length-1;last>=0;last--)nodesToVisit.push(kids[last])};nodesToVisit.length;){var _ret=_loop3();if("continue"!==_ret&&"object"===_typeof(_ret))return _ret.v}capability.reject(new Error("Page index ".concat(pageIndex," not found.")))}(),capability.promise}},{key:"getPageIndex",value:function(pageRef){var xref=this.xref,total=0;return function next(ref){return function(kidRef){var parentRef,total=0;return xref.fetchAsync(kidRef).then((function(node){if((0,_primitives.isRefsEqual)(kidRef,pageRef)&&!(0,_primitives.isDict)(node,"Page")&&(!(0,_primitives.isDict)(node)||node.has("Type")||!node.has("Contents")))throw new _util.FormatError("The reference does not point to a /Page dictionary.");if(!node)return null;if(!(0,_primitives.isDict)(node))throw new _util.FormatError("Node must be a dictionary.");return parentRef=node.getRaw("Parent"),node.getAsync("Parent")})).then((function(parent){if(!parent)return null;if(!(0,_primitives.isDict)(parent))throw new _util.FormatError("Parent must be a dictionary.");return parent.getAsync("Kids")})).then((function(kids){if(!kids)return null;for(var kidPromises=[],found=!1,i=0,ii=kids.length;i<ii;i++){var kid=kids[i];if(!(0,_primitives.isRef)(kid))throw new _util.FormatError("Kid must be a reference.");if((0,_primitives.isRefsEqual)(kid,kidRef)){found=!0;break}kidPromises.push(xref.fetchAsync(kid).then((function(obj){if(!(0,_primitives.isDict)(obj))throw new _util.FormatError("Kid node must be a dictionary.");obj.has("Count")?total+=obj.get("Count"):total++})))}if(!found)throw new _util.FormatError("Kid reference not found in parent's kids.");return Promise.all(kidPromises).then((function(){return[total,parentRef]}))}))}(ref).then((function(args){if(!args)return total;var _args8=_slicedToArray(args,2),count=_args8[0],parentRef=_args8[1];return total+=count,next(parentRef)}))}(pageRef)}}],[{key:"parseDestDictionary",value:function(params){var destDict=params.destDict;if((0,_primitives.isDict)(destDict)){var resultObj=params.resultObj;if("object"===_typeof(resultObj)){var url,dest,docBaseUrl=params.docBaseUrl||null,action=destDict.get("A");if((0,_primitives.isDict)(action)||(destDict.has("Dest")?action=destDict.get("Dest"):(action=destDict.get("AA"),(0,_primitives.isDict)(action)&&(action.has("D")?action=action.get("D"):action.has("U")&&(action=action.get("U"))))),(0,_primitives.isDict)(action)){var actionType=action.get("S");if(!(0,_primitives.isName)(actionType))return void(0,_util.warn)("parseDestDictionary: Invalid type in Action dictionary.");var actionName=actionType.name;switch(actionName){case"URI":url=action.get("URI"),(0,_primitives.isName)(url)?url="/"+url.name:(0,_util.isString)(url)&&(url=function(url){return url.startsWith("www.")?"http://".concat(url):url}(url));break;case"GoTo":dest=action.get("D");break;case"Launch":case"GoToR":var urlDict=action.get("F");(0,_primitives.isDict)(urlDict)?url=urlDict.get("F")||null:(0,_util.isString)(urlDict)&&(url=urlDict);var remoteDest=action.get("D");if(remoteDest&&((0,_primitives.isName)(remoteDest)&&(remoteDest=remoteDest.name),(0,_util.isString)(url))){var baseUrl=url.split("#")[0];(0,_util.isString)(remoteDest)?url=baseUrl+"#"+remoteDest:Array.isArray(remoteDest)&&(url=baseUrl+"#"+JSON.stringify(remoteDest))}var newWindow=action.get("NewWindow");(0,_util.isBool)(newWindow)&&(resultObj.newWindow=newWindow);break;case"Named":var namedAction=action.get("N");(0,_primitives.isName)(namedAction)&&(resultObj.action=namedAction.name);break;case"JavaScript":var js,jsAction=action.get("JS");if((0,_primitives.isStream)(jsAction)?js=(0,_util.bytesToString)(jsAction.getBytes()):(0,_util.isString)(jsAction)&&(js=jsAction),js){var jsUrl=new RegExp("^\\s*("+["app.launchURL","window.open"].join("|").split(".").join("\\.")+")\\((?:'|\")([^'\"]*)(?:'|\")(?:,\\s*(\\w+)\\)|\\))","i").exec((0,_util.stringToPDFString)(js));if(jsUrl&&jsUrl[2]){url=jsUrl[2],"true"===jsUrl[3]&&"app.launchURL"===jsUrl[1]&&(resultObj.newWindow=!0);break}}default:(0,_util.warn)('parseDestDictionary: unsupported action type "'.concat(actionName,'".'))}}else destDict.has("Dest")&&(dest=destDict.get("Dest"));if((0,_util.isString)(url)){url=function(url){try{return(0,_util.stringToUTF8String)(url)}catch(e){return url}}(url);var absoluteUrl=(0,_util.createValidAbsoluteUrl)(url,docBaseUrl);absoluteUrl&&(resultObj.url=absoluteUrl.href),resultObj.unsafeUrl=url}dest&&((0,_primitives.isName)(dest)&&(dest=dest.name),((0,_util.isString)(dest)||Array.isArray(dest))&&(resultObj.dest=dest))}else(0,_util.warn)("parseDestDictionary: `resultObj` must be an object.")}else(0,_util.warn)("parseDestDictionary: `destDict` must be a dictionary.")}}]),Catalog}();exports.Catalog=Catalog;var XRef=function(){function XRef(stream,pdfManager){this.stream=stream,this.pdfManager=pdfManager,this.entries=[],this.xrefstms=Object.create(null),this._cacheMap=new Map,this.stats={streamTypes:Object.create(null),fontTypes:Object.create(null)},this._newRefNum=null}return XRef.prototype={getNewRef:function(){return null===this._newRefNum&&(this._newRefNum=this.entries.length),_primitives.Ref.get(this._newRefNum++,0)},resetNewRef:function(){this._newRefNum=null},setStartXRef:function(startXRef){this.startXRefQueue=[startXRef]},parse:function(recoveryMode){var trailerDict,encrypt,root;recoveryMode?((0,_util.warn)("Indexing all PDF objects"),trailerDict=this.indexObjects()):trailerDict=this.readXRef(),trailerDict.assignXref(this),this.trailer=trailerDict;try{encrypt=trailerDict.get("Encrypt")}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util.warn)('XRef.parse - Invalid "Encrypt" reference: "'.concat(ex,'".'))}if((0,_primitives.isDict)(encrypt)){var ids=trailerDict.get("ID"),fileId=ids&&ids.length?ids[0]:"";encrypt.suppressEncryption=!0,this.encrypt=new _crypto.CipherTransformFactory(encrypt,fileId,this.pdfManager.password)}try{root=trailerDict.get("Root")}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util.warn)('XRef.parse - Invalid "Root" reference: "'.concat(ex,'".'))}if(!(0,_primitives.isDict)(root)||!root.has("Pages")){if(!recoveryMode)throw new _core_utils.XRefParseException;throw new _util.FormatError("Invalid root reference")}this.root=root},processXRefTable:function(parser){"tableState"in this||(this.tableState={entryNum:0,streamPos:parser.lexer.stream.pos,parserBuf1:parser.buf1,parserBuf2:parser.buf2});var obj=this.readXRefTable(parser);if(!(0,_primitives.isCmd)(obj,"trailer"))throw new _util.FormatError("Invalid XRef table: could not find trailer dictionary");var dict=parser.getObj();if(!(0,_primitives.isDict)(dict)&&dict.dict&&(dict=dict.dict),!(0,_primitives.isDict)(dict))throw new _util.FormatError("Invalid XRef table: could not parse trailer dictionary");return delete this.tableState,dict},readXRefTable:function(parser){var obj,stream=parser.lexer.stream,tableState=this.tableState;for(stream.pos=tableState.streamPos,parser.buf1=tableState.parserBuf1,parser.buf2=tableState.parserBuf2;;){if(!("firstEntryNum"in tableState)||!("entryCount"in tableState)){if((0,_primitives.isCmd)(obj=parser.getObj(),"trailer"))break;tableState.firstEntryNum=obj,tableState.entryCount=parser.getObj()}var first=tableState.firstEntryNum,count=tableState.entryCount;if(!Number.isInteger(first)||!Number.isInteger(count))throw new _util.FormatError("Invalid XRef table: wrong types in subsection header");for(var i=tableState.entryNum;i<count;i++){tableState.streamPos=stream.pos,tableState.entryNum=i,tableState.parserBuf1=parser.buf1,tableState.parserBuf2=parser.buf2;var entry={};entry.offset=parser.getObj(),entry.gen=parser.getObj();var type=parser.getObj();if(type instanceof _primitives.Cmd)switch(type.cmd){case"f":entry.free=!0;break;case"n":entry.uncompressed=!0}if(!Number.isInteger(entry.offset)||!Number.isInteger(entry.gen)||!entry.free&&!entry.uncompressed)throw new _util.FormatError("Invalid entry in XRef subsection: ".concat(first,", ").concat(count));0===i&&entry.free&&1===first&&(first=0),this.entries[i+first]||(this.entries[i+first]=entry)}tableState.entryNum=0,tableState.streamPos=stream.pos,tableState.parserBuf1=parser.buf1,tableState.parserBuf2=parser.buf2,delete tableState.firstEntryNum,delete tableState.entryCount}if(this.entries[0]&&!this.entries[0].free)throw new _util.FormatError("Invalid XRef table: unexpected first object");return obj},processXRefStream:function(stream){if(!("streamState"in this)){var streamParameters=stream.dict,byteWidths=streamParameters.get("W"),range=streamParameters.get("Index");range||(range=[0,streamParameters.get("Size")]),this.streamState={entryRanges:range,byteWidths:byteWidths,entryNum:0,streamPos:stream.pos}}return this.readXRefStream(stream),delete this.streamState,stream.dict},readXRefStream:function(stream){var i,j,streamState=this.streamState;stream.pos=streamState.streamPos;for(var byteWidths=streamState.byteWidths,typeFieldWidth=byteWidths[0],offsetFieldWidth=byteWidths[1],generationFieldWidth=byteWidths[2],entryRanges=streamState.entryRanges;entryRanges.length>0;){var first=entryRanges[0],n=entryRanges[1];if(!Number.isInteger(first)||!Number.isInteger(n))throw new _util.FormatError("Invalid XRef range fields: ".concat(first,", ").concat(n));if(!Number.isInteger(typeFieldWidth)||!Number.isInteger(offsetFieldWidth)||!Number.isInteger(generationFieldWidth))throw new _util.FormatError("Invalid XRef entry fields length: ".concat(first,", ").concat(n));for(i=streamState.entryNum;i<n;++i){streamState.entryNum=i,streamState.streamPos=stream.pos;var type=0,offset=0,generation=0;for(j=0;j<typeFieldWidth;++j)type=type<<8|stream.getByte();for(0===typeFieldWidth&&(type=1),j=0;j<offsetFieldWidth;++j)offset=offset<<8|stream.getByte();for(j=0;j<generationFieldWidth;++j)generation=generation<<8|stream.getByte();var entry={};switch(entry.offset=offset,entry.gen=generation,type){case 0:entry.free=!0;break;case 1:entry.uncompressed=!0;break;case 2:break;default:throw new _util.FormatError("Invalid XRef entry type: ".concat(type))}this.entries[first+i]||(this.entries[first+i]=entry)}streamState.entryNum=0,streamState.streamPos=stream.pos,entryRanges.splice(0,2)}},indexObjects:function(){function readToken(data,offset){for(var token="",ch=data[offset];10!==ch&&13!==ch&&60!==ch&&!(++offset>=data.length);)token+=String.fromCharCode(ch),ch=data[offset];return token}function skipUntil(data,offset,what){for(var length=what.length,dataLength=data.length,skipped=0;offset<dataLength;){for(var i=0;i<length&&data[offset+i]===what[i];)++i;if(i>=length)break;offset++,skipped++}return skipped}var objRegExp=/^(\d+)\s+(\d+)\s+obj\b/,endobjRegExp=/\bendobj[\b\s]$/,nestedObjRegExp=/\s+(\d+\s+\d+\s+obj[\b\s<])$/,trailerBytes=new Uint8Array([116,114,97,105,108,101,114]),startxrefBytes=new Uint8Array([115,116,97,114,116,120,114,101,102]),objBytes=new Uint8Array([111,98,106]),xrefBytes=new Uint8Array([47,88,82,101,102]);this.entries.length=0;var stream=this.stream;stream.pos=0;for(var trailerDict,buffer=stream.getBytes(),position=stream.start,length=buffer.length,trailers=[],xrefStms=[];position<length;){var ch=buffer[position];if(9!==ch&&10!==ch&&13!==ch&&32!==ch)if(37!==ch){var m,token=readToken(buffer,position);if(token.startsWith("xref")&&(4===token.length||/\s/.test(token[4])))position+=skipUntil(buffer,position,trailerBytes),trailers.push(position),position+=skipUntil(buffer,position,startxrefBytes);else if(m=objRegExp.exec(token)){var num=0|m[1],gen=0|m[2];this.entries[num]&&this.entries[num].gen!==gen||(this.entries[num]={offset:position-stream.start,gen:gen,uncompressed:!0});for(var contentLength=void 0,startPos=position+token.length;startPos<buffer.length;){var endPos=startPos+skipUntil(buffer,startPos,objBytes)+4;contentLength=endPos-position;var checkPos=Math.max(endPos-25,startPos),tokenStr=(0,_util.bytesToString)(buffer.subarray(checkPos,endPos));if(endobjRegExp.test(tokenStr))break;var objToken=nestedObjRegExp.exec(tokenStr);if(objToken&&objToken[1]){(0,_util.warn)('indexObjects: Found new "obj" inside of another "obj", caused by missing "endobj" -- trying to recover.'),contentLength-=objToken[1].length;break}startPos=endPos}var content=buffer.subarray(position,position+contentLength),xrefTagOffset=skipUntil(content,0,xrefBytes);xrefTagOffset<contentLength&&content[xrefTagOffset+5]<64&&(xrefStms.push(position-stream.start),this.xrefstms[position-stream.start]=1),position+=contentLength}else token.startsWith("trailer")&&(7===token.length||/\s/.test(token[7]))?(trailers.push(position),position+=skipUntil(buffer,position,startxrefBytes)):position+=token.length+1}else do{if(++position>=length)break;ch=buffer[position]}while(10!==ch&&13!==ch);else++position}for(var i=0,ii=xrefStms.length;i<ii;++i)this.startXRefQueue.push(xrefStms[i]),this.readXRef(!0);for(var _i10=0,_ii=trailers.length;_i10<_ii;++_i10){stream.pos=trailers[_i10];var parser=new _parser.Parser({lexer:new _parser.Lexer(stream),xref:this,allowStreams:!0,recoveryMode:!0}),obj=parser.getObj();if((0,_primitives.isCmd)(obj,"trailer")){var dict=parser.getObj();if((0,_primitives.isDict)(dict)){try{var rootDict=dict.get("Root");if(!(rootDict instanceof _primitives.Dict))continue;var pagesDict=rootDict.get("Pages");if(!(pagesDict instanceof _primitives.Dict))continue;var pagesCount=pagesDict.get("Count");if(!Number.isInteger(pagesCount))continue}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;continue}if(dict.has("ID"))return dict;trailerDict=dict}}}if(trailerDict)return trailerDict;throw new _util.InvalidPDFException("Invalid PDF structure.")},readXRef:function(recoveryMode){var stream=this.stream,startXRefParsedCache=Object.create(null);try{for(;this.startXRefQueue.length;){var startXRef=this.startXRefQueue[0];if(startXRefParsedCache[startXRef])(0,_util.warn)("readXRef - skipping XRef table since it was already parsed."),this.startXRefQueue.shift();else{startXRefParsedCache[startXRef]=!0,stream.pos=startXRef+stream.start;var dict,parser=new _parser.Parser({lexer:new _parser.Lexer(stream),xref:this,allowStreams:!0}),obj=parser.getObj();if((0,_primitives.isCmd)(obj,"xref")){if(dict=this.processXRefTable(parser),this.topDict||(this.topDict=dict),obj=dict.get("XRefStm"),Number.isInteger(obj)){var pos=obj;pos in this.xrefstms||(this.xrefstms[pos]=1,this.startXRefQueue.push(pos))}}else{if(!Number.isInteger(obj))throw new _util.FormatError("Invalid XRef stream header");if(!Number.isInteger(parser.getObj())||!(0,_primitives.isCmd)(parser.getObj(),"obj")||!(0,_primitives.isStream)(obj=parser.getObj()))throw new _util.FormatError("Invalid XRef stream");if(dict=this.processXRefStream(obj),this.topDict||(this.topDict=dict),!dict)throw new _util.FormatError("Failed to read XRef stream")}obj=dict.get("Prev"),Number.isInteger(obj)?this.startXRefQueue.push(obj):(0,_primitives.isRef)(obj)&&this.startXRefQueue.push(obj.num),this.startXRefQueue.shift()}}return this.topDict}catch(e){if(e instanceof _core_utils.MissingDataException)throw e;(0,_util.info)("(while reading XRef): "+e)}if(!recoveryMode)throw new _core_utils.XRefParseException},getEntry:function(i){var xrefEntry=this.entries[i];return xrefEntry&&!xrefEntry.free&&xrefEntry.offset?xrefEntry:null},fetchIfRef:function(obj,suppressEncryption){return obj instanceof _primitives.Ref?this.fetch(obj,suppressEncryption):obj},fetch:function(ref,suppressEncryption){if(!(ref instanceof _primitives.Ref))throw new Error("ref object is not a reference");var num=ref.num,cacheEntry=this._cacheMap.get(num);if(void 0!==cacheEntry)return cacheEntry instanceof _primitives.Dict&&!cacheEntry.objId&&(cacheEntry.objId=ref.toString()),cacheEntry;var xrefEntry=this.getEntry(num);return null===xrefEntry?(this._cacheMap.set(num,xrefEntry),xrefEntry):(xrefEntry=xrefEntry.uncompressed?this.fetchUncompressed(ref,xrefEntry,suppressEncryption):this.fetchCompressed(ref,xrefEntry,suppressEncryption),(0,_primitives.isDict)(xrefEntry)?xrefEntry.objId=ref.toString():(0,_primitives.isStream)(xrefEntry)&&(xrefEntry.dict.objId=ref.toString()),xrefEntry)},fetchUncompressed:function(ref,xrefEntry){var suppressEncryption=arguments.length>2&&void 0!==arguments[2]&&arguments[2],gen=ref.gen,num=ref.num;if(xrefEntry.gen!==gen)throw new _core_utils.XRefEntryException("Inconsistent generation in XRef: ".concat(ref));var stream=this.stream.makeSubStream(xrefEntry.offset+this.stream.start),parser=new _parser.Parser({lexer:new _parser.Lexer(stream),xref:this,allowStreams:!0}),obj1=parser.getObj(),obj2=parser.getObj(),obj3=parser.getObj();if(obj1!==num||obj2!==gen||!(obj3 instanceof _primitives.Cmd))throw new _core_utils.XRefEntryException("Bad (uncompressed) XRef entry: ".concat(ref));if("obj"!==obj3.cmd){if(obj3.cmd.startsWith("obj")&&(num=parseInt(obj3.cmd.substring(3),10),!Number.isNaN(num)))return num;throw new _core_utils.XRefEntryException("Bad (uncompressed) XRef entry: ".concat(ref))}return xrefEntry=this.encrypt&&!suppressEncryption?parser.getObj(this.encrypt.createCipherTransform(num,gen)):parser.getObj(),(0,_primitives.isStream)(xrefEntry)||this._cacheMap.set(num,xrefEntry),xrefEntry},fetchCompressed:function(ref,xrefEntry){var tableOffset=xrefEntry.offset,stream=this.fetch(_primitives.Ref.get(tableOffset,0));if(!(0,_primitives.isStream)(stream))throw new _util.FormatError("bad ObjStm stream");var first=stream.dict.get("First"),n=stream.dict.get("N");if(!Number.isInteger(first)||!Number.isInteger(n))throw new _util.FormatError("invalid first and n parameters for ObjStm stream");for(var parser=new _parser.Parser({lexer:new _parser.Lexer(stream),xref:this,allowStreams:!0}),nums=new Array(n),i=0;i<n;++i){var num=parser.getObj();if(!Number.isInteger(num))throw new _util.FormatError("invalid object number in the ObjStm stream: ".concat(num));var offset=parser.getObj();if(!Number.isInteger(offset))throw new _util.FormatError("invalid object offset in the ObjStm stream: ".concat(offset));nums[i]=num}for(var entries=new Array(n),_i11=0;_i11<n;++_i11){var obj=parser.getObj();if(entries[_i11]=obj,parser.buf1 instanceof _primitives.Cmd&&"endobj"===parser.buf1.cmd&&parser.shift(),!(0,_primitives.isStream)(obj)){var _num=nums[_i11],entry=this.entries[_num];entry&&entry.offset===tableOffset&&entry.gen===_i11&&this._cacheMap.set(_num,obj)}}if(void 0===(xrefEntry=entries[xrefEntry.gen]))throw new _core_utils.XRefEntryException("Bad (compressed) XRef entry: ".concat(ref));return xrefEntry},fetchIfRefAsync:function(obj,suppressEncryption){var _this20=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee8(){return regeneratorRuntime.wrap((function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(!(obj instanceof _primitives.Ref)){_context8.next=2;break}return _context8.abrupt("return",_this20.fetchAsync(obj,suppressEncryption));case 2:return _context8.abrupt("return",obj);case 3:case"end":return _context8.stop()}}),_callee8)})))()},fetchAsync:function(ref,suppressEncryption){var _this21=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee9(){return regeneratorRuntime.wrap((function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return _context9.prev=0,_context9.abrupt("return",_this21.fetch(ref,suppressEncryption));case 4:if(_context9.prev=4,_context9.t0=_context9.catch(0),_context9.t0 instanceof _core_utils.MissingDataException){_context9.next=8;break}throw _context9.t0;case 8:return _context9.next=10,_this21.pdfManager.requestRange(_context9.t0.begin,_context9.t0.end);case 10:return _context9.abrupt("return",_this21.fetchAsync(ref,suppressEncryption));case 11:case"end":return _context9.stop()}}),_callee9,null,[[0,4]])})))()},getCatalogObj:function(){return this.root}},XRef}();exports.XRef=XRef;var NameOrNumberTree=function(){function NameOrNumberTree(root,xref,type){_classCallCheck(this,NameOrNumberTree),this.constructor===NameOrNumberTree&&(0,_util.unreachable)("Cannot initialize NameOrNumberTree."),this.root=root,this.xref=xref,this._type=type}return _createClass(NameOrNumberTree,[{key:"getAll",value:function(){var dict=Object.create(null);if(!this.root)return dict;var xref=this.xref,processed=new _primitives.RefSet;processed.put(this.root);for(var queue=[this.root];queue.length>0;){var obj=xref.fetchIfRef(queue.shift());if((0,_primitives.isDict)(obj))if(obj.has("Kids"))for(var kids=obj.get("Kids"),i=0,ii=kids.length;i<ii;i++){var kid=kids[i];if(processed.has(kid))throw new _util.FormatError('Duplicate entry in "'.concat(this._type,'" tree.'));queue.push(kid),processed.put(kid)}else{var entries=obj.get(this._type);if(Array.isArray(entries))for(var _i12=0,_ii2=entries.length;_i12<_ii2;_i12+=2)dict[xref.fetchIfRef(entries[_i12])]=xref.fetchIfRef(entries[_i12+1])}}return dict}},{key:"get",value:function(key){if(!this.root)return null;for(var xref=this.xref,kidsOrEntries=xref.fetchIfRef(this.root),loopCount=0;kidsOrEntries.has("Kids");){if(++loopCount>10)return(0,_util.warn)('Search depth limit reached for "'.concat(this._type,'" tree.')),null;var kids=kidsOrEntries.get("Kids");if(!Array.isArray(kids))return null;for(var l=0,r=kids.length-1;l<=r;){var m=l+r>>1,limits=xref.fetchIfRef(kids[m]).get("Limits");if(key<xref.fetchIfRef(limits[0]))r=m-1;else{if(!(key>xref.fetchIfRef(limits[1]))){kidsOrEntries=xref.fetchIfRef(kids[m]);break}l=m+1}}if(l>r)return null}var entries=kidsOrEntries.get(this._type);if(Array.isArray(entries)){for(var _l=0,_r=entries.length-2;_l<=_r;){var tmp=_l+_r>>1,_m=tmp+(1&tmp),currentKey=xref.fetchIfRef(entries[_m]);if(key<currentKey)_r=_m-2;else{if(!(key>currentKey))return xref.fetchIfRef(entries[_m+1]);_l=_m+2}}(0,_util.info)('Falling back to an exhaustive search, for key "'.concat(key,'", ')+'in "'.concat(this._type,'" tree.'));for(var _m2=0,mm=entries.length;_m2<mm;_m2+=2)if(xref.fetchIfRef(entries[_m2])===key)return(0,_util.warn)('The "'.concat(key,'" key was found at an incorrect, ')+'i.e. out-of-order, position in "'.concat(this._type,'" tree.')),xref.fetchIfRef(entries[_m2+1])}return null}}]),NameOrNumberTree}(),NameTree=function(_NameOrNumberTree){_inherits(NameTree,_NameOrNumberTree);var _super14=_createSuper(NameTree);function NameTree(root,xref){return _classCallCheck(this,NameTree),_super14.call(this,root,xref,"Names")}return _createClass(NameTree)}(NameOrNumberTree),NumberTree=function(_NameOrNumberTree2){_inherits(NumberTree,_NameOrNumberTree2);var _super15=_createSuper(NumberTree);function NumberTree(root,xref){return _classCallCheck(this,NumberTree),_super15.call(this,root,xref,"Nums")}return _createClass(NumberTree)}(NameOrNumberTree),FileSpec=function(){function FileSpec(root,xref){root&&(0,_primitives.isDict)(root)&&(this.xref=xref,this.root=root,root.has("FS")&&(this.fs=root.get("FS")),this.description=root.has("Desc")?(0,_util.stringToPDFString)(root.get("Desc")):"",root.has("RF")&&(0,_util.warn)("Related file specifications are not supported"),this.contentAvailable=!0,root.has("EF")||(this.contentAvailable=!1,(0,_util.warn)("Non-embedded file specifications are not supported")))}function pickPlatformItem(dict){return dict.has("UF")?dict.get("UF"):dict.has("F")?dict.get("F"):dict.has("Unix")?dict.get("Unix"):dict.has("Mac")?dict.get("Mac"):dict.has("DOS")?dict.get("DOS"):null}return FileSpec.prototype={get filename(){if(!this._filename&&this.root){var filename=pickPlatformItem(this.root)||"unnamed";this._filename=(0,_util.stringToPDFString)(filename).replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\/g,"/")}return this._filename},get content(){if(!this.contentAvailable)return null;!this.contentRef&&this.root&&(this.contentRef=pickPlatformItem(this.root.get("EF")));var content=null;if(this.contentRef){var fileObj=this.xref.fetchIfRef(this.contentRef);fileObj&&(0,_primitives.isStream)(fileObj)?content=fileObj.getBytes():(0,_util.warn)("Embedded file specification points to non-existing/invalid content")}else(0,_util.warn)("Embedded file specification does not have a content");return content},get serializable(){return{filename:this.filename,content:this.content}}},FileSpec}();exports.FileSpec=FileSpec;var ObjectLoader=function(){function addChildren(node,nodesToVisit){if(node instanceof _primitives.Dict)node=node.getRawValues();else if((0,_primitives.isStream)(node))node=node.dict.getRawValues();else if(!Array.isArray(node))return;var _step31,value,_iterator31=_createForOfIteratorHelper(node);try{for(_iterator31.s();!(_step31=_iterator31.n()).done;){var rawValue=_step31.value;((value=rawValue)instanceof _primitives.Ref||value instanceof _primitives.Dict||Array.isArray(value)||(0,_primitives.isStream)(value))&&nodesToVisit.push(rawValue)}}catch(err){_iterator31.e(err)}finally{_iterator31.f()}}function ObjectLoader(dict,keys,xref){this.dict=dict,this.keys=keys,this.xref=xref,this.refSet=null}return ObjectLoader.prototype={load:function(){var _this22=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee10(){var keys,dict,nodesToVisit,i,ii,rawValue;return regeneratorRuntime.wrap((function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:if(_this22.xref.stream.allChunksLoaded&&!_this22.xref.stream.allChunksLoaded()){_context10.next=2;break}return _context10.abrupt("return",void 0);case 2:for(keys=_this22.keys,dict=_this22.dict,_this22.refSet=new _primitives.RefSet,nodesToVisit=[],i=0,ii=keys.length;i<ii;i++)void 0!==(rawValue=dict.getRaw(keys[i]))&&nodesToVisit.push(rawValue);return _context10.abrupt("return",_this22._walk(nodesToVisit));case 7:case"end":return _context10.stop()}}),_callee10)})))()},_walk:function(nodesToVisit){var _this23=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee11(){var nodesToRevisit,pendingRequests,currentNode,baseStreams,foundMissingData,i,ii,stream,_i13,_ii3,node;return regeneratorRuntime.wrap((function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:nodesToRevisit=[],pendingRequests=[];case 2:if(!nodesToVisit.length){_context11.next=22;break}if(!((currentNode=nodesToVisit.pop())instanceof _primitives.Ref)){_context11.next=18;break}if(!_this23.refSet.has(currentNode)){_context11.next=7;break}return _context11.abrupt("continue",2);case 7:_context11.prev=7,_this23.refSet.put(currentNode),currentNode=_this23.xref.fetch(currentNode),_context11.next=18;break;case 12:if(_context11.prev=12,_context11.t0=_context11.catch(7),_context11.t0 instanceof _core_utils.MissingDataException){_context11.next=16;break}throw _context11.t0;case 16:nodesToRevisit.push(currentNode),pendingRequests.push({begin:_context11.t0.begin,end:_context11.t0.end});case 18:if(currentNode&&currentNode.getBaseStreams){for(baseStreams=currentNode.getBaseStreams(),foundMissingData=!1,i=0,ii=baseStreams.length;i<ii;i++)(stream=baseStreams[i]).allChunksLoaded&&!stream.allChunksLoaded()&&(foundMissingData=!0,pendingRequests.push({begin:stream.start,end:stream.end}));foundMissingData&&nodesToRevisit.push(currentNode)}addChildren(currentNode,nodesToVisit),_context11.next=2;break;case 22:if(!pendingRequests.length){_context11.next=27;break}return _context11.next=25,_this23.xref.stream.manager.requestRanges(pendingRequests);case 25:for(_i13=0,_ii3=nodesToRevisit.length;_i13<_ii3;_i13++)(node=nodesToRevisit[_i13])instanceof _primitives.Ref&&_this23.refSet.remove(node);return _context11.abrupt("return",_this23._walk(nodesToRevisit));case 27:return _this23.refSet=null,_context11.abrupt("return",void 0);case 29:case"end":return _context11.stop()}}),_callee11,null,[[7,12]])})))()}},ObjectLoader}();exports.ObjectLoader=ObjectLoader},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.Parser=exports.Linearization=exports.Lexer=void 0;var _stream=__w_pdfjs_require__(12),_util=__w_pdfjs_require__(2),_primitives=__w_pdfjs_require__(5),_core_utils=__w_pdfjs_require__(8),_ccitt_stream=__w_pdfjs_require__(13),_jbig2_stream=__w_pdfjs_require__(15),_jpeg_stream=__w_pdfjs_require__(18),_jpx_stream=__w_pdfjs_require__(20);function computeAdler32(bytes){for(var bytesLength=bytes.length,a=1,b=0,i=0;i<bytesLength;++i)b+=a+=255&bytes[i];return b%65521<<16|a%65521}var Parser=function(){function Parser(_ref25){var lexer=_ref25.lexer,xref=_ref25.xref,_ref25$allowStreams=_ref25.allowStreams,allowStreams=void 0!==_ref25$allowStreams&&_ref25$allowStreams,_ref25$recoveryMode=_ref25.recoveryMode,recoveryMode=void 0!==_ref25$recoveryMode&&_ref25$recoveryMode;_classCallCheck(this,Parser),this.lexer=lexer,this.xref=xref,this.allowStreams=allowStreams,this.recoveryMode=recoveryMode,this.imageCache=Object.create(null),this.refill()}return _createClass(Parser,[{key:"refill",value:function(){this.buf1=this.lexer.getObj(),this.buf2=this.lexer.getObj()}},{key:"shift",value:function(){this.buf2 instanceof _primitives.Cmd&&"ID"===this.buf2.cmd?(this.buf1=this.buf2,this.buf2=null):(this.buf1=this.buf2,this.buf2=this.lexer.getObj())}},{key:"tryShift",value:function(){try{return this.shift(),!0}catch(e){if(e instanceof _core_utils.MissingDataException)throw e;return!1}}},{key:"getObj",value:function(){var cipherTransform=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,buf1=this.buf1;if(this.shift(),buf1 instanceof _primitives.Cmd)switch(buf1.cmd){case"BI":return this.makeInlineImage(cipherTransform);case"[":for(var array=[];!(0,_primitives.isCmd)(this.buf1,"]")&&!(0,_primitives.isEOF)(this.buf1);)array.push(this.getObj(cipherTransform));if((0,_primitives.isEOF)(this.buf1)){if(!this.recoveryMode)throw new _util.FormatError("End of file inside array");return array}return this.shift(),array;case"<<":for(var dict=new _primitives.Dict(this.xref);!(0,_primitives.isCmd)(this.buf1,">>")&&!(0,_primitives.isEOF)(this.buf1);)if((0,_primitives.isName)(this.buf1)){var key=this.buf1.name;if(this.shift(),(0,_primitives.isEOF)(this.buf1))break;dict.set(key,this.getObj(cipherTransform))}else(0,_util.info)("Malformed dictionary: key must be a name object"),this.shift();if((0,_primitives.isEOF)(this.buf1)){if(!this.recoveryMode)throw new _util.FormatError("End of file inside dictionary");return dict}return(0,_primitives.isCmd)(this.buf2,"stream")?this.allowStreams?this.makeStream(dict,cipherTransform):dict:(this.shift(),dict);default:return buf1}if(Number.isInteger(buf1)){if(Number.isInteger(this.buf1)&&(0,_primitives.isCmd)(this.buf2,"R")){var ref=_primitives.Ref.get(buf1,this.buf1);return this.shift(),this.shift(),ref}return buf1}return"string"==typeof buf1&&cipherTransform?cipherTransform.decryptString(buf1):buf1}},{key:"findDefaultInlineStreamEnd",value:function(stream){for(var ch,maybeEIPos,lexer=this.lexer,startPos=stream.pos,state=0;-1!==(ch=stream.getByte());)if(0===state)state=69===ch?1:0;else if(1===state)state=73===ch?2:0;else if((0,_util.assert)(2===state,"findDefaultInlineStreamEnd - invalid state."),32===ch||10===ch||13===ch){maybeEIPos=stream.pos;for(var followingBytes=stream.peekBytes(10),i=0,ii=followingBytes.length;i<ii;i++)if((0!==(ch=followingBytes[i])||0===followingBytes[i+1])&&10!==ch&&13!==ch&&(ch<32||ch>127)){state=0;break}if(2!==state)continue;if(lexer.knownCommands){var nextObj=lexer.peekObj();nextObj instanceof _primitives.Cmd&&!lexer.knownCommands[nextObj.cmd]&&(state=0)}else(0,_util.warn)("findDefaultInlineStreamEnd - `lexer.knownCommands` is undefined.");if(2===state)break}else state=0;-1===ch&&((0,_util.warn)("findDefaultInlineStreamEnd: Reached the end of the stream without finding a valid EI marker"),maybeEIPos&&((0,_util.warn)('... trying to recover by using the last "EI" occurrence.'),stream.skip(-(stream.pos-maybeEIPos))));var endOffset=4;return stream.skip(-endOffset),ch=stream.peekByte(),stream.skip(endOffset),(0,_core_utils.isWhiteSpace)(ch)||endOffset--,stream.pos-endOffset-startPos}},{key:"findDCTDecodeInlineStreamEnd",value:function(stream){for(var b,markerLength,startPos=stream.pos,foundEOI=!1;-1!==(b=stream.getByte());)if(255===b){switch(stream.getByte()){case 0:break;case 255:stream.skip(-1);break;case 217:foundEOI=!0;break;case 192:case 193:case 194:case 195:case 197:case 198:case 199:case 201:case 202:case 203:case 205:case 206:case 207:case 196:case 204:case 218:case 219:case 220:case 221:case 222:case 223:case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:case 254:(markerLength=stream.getUint16())>2?stream.skip(markerLength-2):stream.skip(-2)}if(foundEOI)break}var length=stream.pos-startPos;return-1===b?((0,_util.warn)("Inline DCTDecode image stream: EOI marker not found, searching for /EI/ instead."),stream.skip(-length),this.findDefaultInlineStreamEnd(stream)):(this.inlineStreamSkipEI(stream),length)}},{key:"findASCII85DecodeInlineStreamEnd",value:function(stream){for(var ch,startPos=stream.pos;-1!==(ch=stream.getByte());)if(126===ch){var tildePos=stream.pos;for(ch=stream.peekByte();(0,_core_utils.isWhiteSpace)(ch);)stream.skip(),ch=stream.peekByte();if(62===ch){stream.skip();break}if(stream.pos>tildePos){var maybeEI=stream.peekBytes(2);if(69===maybeEI[0]&&73===maybeEI[1])break}}var length=stream.pos-startPos;return-1===ch?((0,_util.warn)("Inline ASCII85Decode image stream: EOD marker not found, searching for /EI/ instead."),stream.skip(-length),this.findDefaultInlineStreamEnd(stream)):(this.inlineStreamSkipEI(stream),length)}},{key:"findASCIIHexDecodeInlineStreamEnd",value:function(stream){for(var ch,startPos=stream.pos;-1!==(ch=stream.getByte())&&62!==ch;);var length=stream.pos-startPos;return-1===ch?((0,_util.warn)("Inline ASCIIHexDecode image stream: EOD marker not found, searching for /EI/ instead."),stream.skip(-length),this.findDefaultInlineStreamEnd(stream)):(this.inlineStreamSkipEI(stream),length)}},{key:"inlineStreamSkipEI",value:function(stream){for(var ch,state=0;-1!==(ch=stream.getByte());)if(0===state)state=69===ch?1:0;else if(1===state)state=73===ch?2:0;else if(2===state)break}},{key:"makeInlineImage",value:function(cipherTransform){for(var dictLength,lexer=this.lexer,stream=lexer.stream,dict=new _primitives.Dict(this.xref);!(0,_primitives.isCmd)(this.buf1,"ID")&&!(0,_primitives.isEOF)(this.buf1);){if(!(0,_primitives.isName)(this.buf1))throw new _util.FormatError("Dictionary key must be a name object");var key=this.buf1.name;if(this.shift(),(0,_primitives.isEOF)(this.buf1))break;dict.set(key,this.getObj(cipherTransform))}-1!==lexer.beginInlineImagePos&&(dictLength=stream.pos-lexer.beginInlineImagePos);var filterName,filter=dict.get("Filter","F");if((0,_primitives.isName)(filter))filterName=filter.name;else if(Array.isArray(filter)){var filterZero=this.xref.fetchIfRef(filter[0]);(0,_primitives.isName)(filterZero)&&(filterName=filterZero.name)}var length,startPos=stream.pos;length="DCTDecode"===filterName||"DCT"===filterName?this.findDCTDecodeInlineStreamEnd(stream):"ASCII85Decode"===filterName||"A85"===filterName?this.findASCII85DecodeInlineStreamEnd(stream):"ASCIIHexDecode"===filterName||"AHx"===filterName?this.findASCIIHexDecodeInlineStreamEnd(stream):this.findDefaultInlineStreamEnd(stream);var cacheKey,imageStream=stream.makeSubStream(startPos,length,dict);if(length<1e3&&dictLength<5552){var imageBytes=imageStream.getBytes();imageStream.reset();var initialStreamPos=stream.pos;stream.pos=lexer.beginInlineImagePos;var dictBytes=stream.getBytes(dictLength);stream.pos=initialStreamPos,cacheKey=computeAdler32(imageBytes)+"_"+computeAdler32(dictBytes);var cacheEntry=this.imageCache[cacheKey];if(void 0!==cacheEntry)return this.buf2=_primitives.Cmd.get("EI"),this.shift(),cacheEntry.reset(),cacheEntry}return cipherTransform&&(imageStream=cipherTransform.createStream(imageStream,length)),(imageStream=this.filter(imageStream,dict,length)).dict=dict,void 0!==cacheKey&&(imageStream.cacheKey="inline_".concat(length,"_").concat(cacheKey),this.imageCache[cacheKey]=imageStream),this.buf2=_primitives.Cmd.get("EI"),this.shift(),imageStream}},{key:"_findStreamLength",value:function(startPos,signature){var stream=this.lexer.stream;stream.pos=startPos;for(var signatureLength=signature.length;stream.pos<stream.end;){var scanBytes=stream.peekBytes(2048),scanLength=scanBytes.length-signatureLength;if(scanLength<=0)break;for(var pos=0;pos<scanLength;){for(var j=0;j<signatureLength&&scanBytes[pos+j]===signature[j];)j++;if(j>=signatureLength)return stream.pos+=pos,stream.pos-startPos;pos++}stream.pos+=scanLength}return-1}},{key:"makeStream",value:function(dict,cipherTransform){var lexer=this.lexer,stream=lexer.stream;lexer.skipToNextLine();var startPos=stream.pos-1,length=dict.get("Length");if(Number.isInteger(length)||((0,_util.info)('Bad length "'.concat(length,'" in stream')),length=0),stream.pos=startPos+length,lexer.nextChar(),this.tryShift()&&(0,_primitives.isCmd)(this.buf2,"endstream"))this.shift();else{var ENDSTREAM_SIGNATURE=new Uint8Array([101,110,100,115,116,114,101,97,109]),actualLength=this._findStreamLength(startPos,ENDSTREAM_SIGNATURE);if(actualLength<0){for(var i=1;i<=1;i++){var end=ENDSTREAM_SIGNATURE.length-i,TRUNCATED_SIGNATURE=ENDSTREAM_SIGNATURE.slice(0,end),maybeLength=this._findStreamLength(startPos,TRUNCATED_SIGNATURE);if(maybeLength>=0){var lastByte=stream.peekBytes(end+1)[end];if(!(0,_core_utils.isWhiteSpace)(lastByte))break;(0,_util.info)('Found "'.concat((0,_util.bytesToString)(TRUNCATED_SIGNATURE),'" when ')+"searching for endstream command."),actualLength=maybeLength;break}}if(actualLength<0)throw new _util.FormatError("Missing endstream command.")}length=actualLength,lexer.nextChar(),this.shift(),this.shift()}return this.shift(),stream=stream.makeSubStream(startPos,length,dict),cipherTransform&&(stream=cipherTransform.createStream(stream,length)),(stream=this.filter(stream,dict,length)).dict=dict,stream}},{key:"filter",value:function(stream,dict,length){var filter=dict.get("Filter","F"),params=dict.get("DecodeParms","DP");if((0,_primitives.isName)(filter))return Array.isArray(params)&&(0,_util.warn)("/DecodeParms should not contain an Array, when /Filter contains a Name."),this.makeFilter(stream,filter.name,length,params);var maybeLength=length;if(Array.isArray(filter))for(var filterArray=filter,paramsArray=params,i=0,ii=filterArray.length;i<ii;++i){if(filter=this.xref.fetchIfRef(filterArray[i]),!(0,_primitives.isName)(filter))throw new _util.FormatError('Bad filter name "'.concat(filter,'"'));params=null,Array.isArray(paramsArray)&&i in paramsArray&&(params=this.xref.fetchIfRef(paramsArray[i])),stream=this.makeFilter(stream,filter.name,maybeLength,params),maybeLength=null}return stream}},{key:"makeFilter",value:function(stream,name,maybeLength,params){if(0===maybeLength)return(0,_util.warn)('Empty "'.concat(name,'" stream.')),new _stream.NullStream;try{var xrefStreamStats=this.xref.stats.streamTypes;if("FlateDecode"===name||"Fl"===name)return xrefStreamStats[_util.StreamType.FLATE]=!0,params?new _stream.PredictorStream(new _stream.FlateStream(stream,maybeLength),maybeLength,params):new _stream.FlateStream(stream,maybeLength);if("LZWDecode"===name||"LZW"===name){xrefStreamStats[_util.StreamType.LZW]=!0;var earlyChange=1;return params?(params.has("EarlyChange")&&(earlyChange=params.get("EarlyChange")),new _stream.PredictorStream(new _stream.LZWStream(stream,maybeLength,earlyChange),maybeLength,params)):new _stream.LZWStream(stream,maybeLength,earlyChange)}return"DCTDecode"===name||"DCT"===name?(xrefStreamStats[_util.StreamType.DCT]=!0,new _jpeg_stream.JpegStream(stream,maybeLength,stream.dict,params)):"JPXDecode"===name||"JPX"===name?(xrefStreamStats[_util.StreamType.JPX]=!0,new _jpx_stream.JpxStream(stream,maybeLength,stream.dict,params)):"ASCII85Decode"===name||"A85"===name?(xrefStreamStats[_util.StreamType.A85]=!0,new _stream.Ascii85Stream(stream,maybeLength)):"ASCIIHexDecode"===name||"AHx"===name?(xrefStreamStats[_util.StreamType.AHX]=!0,new _stream.AsciiHexStream(stream,maybeLength)):"CCITTFaxDecode"===name||"CCF"===name?(xrefStreamStats[_util.StreamType.CCF]=!0,new _ccitt_stream.CCITTFaxStream(stream,maybeLength,params)):"RunLengthDecode"===name||"RL"===name?(xrefStreamStats[_util.StreamType.RLX]=!0,new _stream.RunLengthStream(stream,maybeLength)):"JBIG2Decode"===name?(xrefStreamStats[_util.StreamType.JBIG]=!0,new _jbig2_stream.Jbig2Stream(stream,maybeLength,stream.dict,params)):((0,_util.warn)('Filter "'.concat(name,'" is not supported.')),stream)}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;return(0,_util.warn)('Invalid stream: "'.concat(ex,'"')),new _stream.NullStream}}}]),Parser}();exports.Parser=Parser;var specialChars=[1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function toHexDigit(ch){return ch>=48&&ch<=57?15&ch:ch>=65&&ch<=70||ch>=97&&ch<=102?9+(15&ch):-1}var Lexer=function(){function Lexer(stream){var knownCommands=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classCallCheck(this,Lexer),this.stream=stream,this.nextChar(),this.strBuf=[],this.knownCommands=knownCommands,this._hexStringNumWarn=0,this.beginInlineImagePos=-1}return _createClass(Lexer,[{key:"nextChar",value:function(){return this.currentChar=this.stream.getByte()}},{key:"peekChar",value:function(){return this.stream.peekByte()}},{key:"getNumber",value:function(){var ch=this.currentChar,eNotation=!1,divideBy=0,sign=0;if(45===ch?(sign=-1,45===(ch=this.nextChar())&&(ch=this.nextChar())):43===ch&&(sign=1,ch=this.nextChar()),10===ch||13===ch)do{ch=this.nextChar()}while(10===ch||13===ch);if(46===ch&&(divideBy=10,ch=this.nextChar()),ch<48||ch>57){if(10===divideBy&&0===sign&&((0,_core_utils.isWhiteSpace)(ch)||-1===ch))return(0,_util.warn)("Lexer.getNumber - treating a single decimal point as zero."),0;throw new _util.FormatError("Invalid number: ".concat(String.fromCharCode(ch)," (charCode ").concat(ch,")"))}sign=sign||1;for(var baseValue=ch-48,powerValue=0,powerValueSign=1;(ch=this.nextChar())>=0;)if(ch>=48&&ch<=57){var currentDigit=ch-48;eNotation?powerValue=10*powerValue+currentDigit:(0!==divideBy&&(divideBy*=10),baseValue=10*baseValue+currentDigit)}else if(46===ch){if(0!==divideBy)break;divideBy=1}else if(45===ch)(0,_util.warn)("Badly formatted number: minus sign in the middle");else{if(69!==ch&&101!==ch)break;if(43===(ch=this.peekChar())||45===ch)powerValueSign=45===ch?-1:1,this.nextChar();else if(ch<48||ch>57)break;eNotation=!0}return 0!==divideBy&&(baseValue/=divideBy),eNotation&&(baseValue*=Math.pow(10,powerValueSign*powerValue)),sign*baseValue}},{key:"getString",value:function(){var numParen=1,done=!1,strBuf=this.strBuf;strBuf.length=0;for(var ch=this.nextChar();;){var charBuffered=!1;switch(0|ch){case-1:(0,_util.warn)("Unterminated string"),done=!0;break;case 40:++numParen,strBuf.push("(");break;case 41:0==--numParen?(this.nextChar(),done=!0):strBuf.push(")");break;case 92:switch(ch=this.nextChar()){case-1:(0,_util.warn)("Unterminated string"),done=!0;break;case 110:strBuf.push("\n");break;case 114:strBuf.push("\r");break;case 116:strBuf.push("\t");break;case 98:strBuf.push("\b");break;case 102:strBuf.push("\f");break;case 92:case 40:case 41:strBuf.push(String.fromCharCode(ch));break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:var x=15&ch;charBuffered=!0,(ch=this.nextChar())>=48&&ch<=55&&(x=(x<<3)+(15&ch),(ch=this.nextChar())>=48&&ch<=55&&(charBuffered=!1,x=(x<<3)+(15&ch))),strBuf.push(String.fromCharCode(x));break;case 13:10===this.peekChar()&&this.nextChar();break;case 10:break;default:strBuf.push(String.fromCharCode(ch))}break;default:strBuf.push(String.fromCharCode(ch))}if(done)break;charBuffered||(ch=this.nextChar())}return strBuf.join("")}},{key:"getName",value:function(){var ch,previousCh,strBuf=this.strBuf;for(strBuf.length=0;(ch=this.nextChar())>=0&&!specialChars[ch];)if(35===ch){if(ch=this.nextChar(),specialChars[ch]){(0,_util.warn)("Lexer_getName: NUMBER SIGN (#) should be followed by a hexadecimal number."),strBuf.push("#");break}var x=toHexDigit(ch);if(-1!==x){previousCh=ch;var x2=toHexDigit(ch=this.nextChar());if(-1===x2){if((0,_util.warn)("Lexer_getName: Illegal digit (".concat(String.fromCharCode(ch),") ")+"in hexadecimal number."),strBuf.push("#",String.fromCharCode(previousCh)),specialChars[ch])break;strBuf.push(String.fromCharCode(ch));continue}strBuf.push(String.fromCharCode(x<<4|x2))}else strBuf.push("#",String.fromCharCode(ch))}else strBuf.push(String.fromCharCode(ch));return strBuf.length>127&&(0,_util.warn)("Name token is longer than allowed by the spec: ".concat(strBuf.length)),_primitives.Name.get(strBuf.join(""))}},{key:"_hexStringWarn",value:function(ch){5!=this._hexStringNumWarn++?this._hexStringNumWarn>5||(0,_util.warn)("getHexString - ignoring invalid character: ".concat(ch)):(0,_util.warn)("getHexString - ignoring additional invalid characters.")}},{key:"getHexString",value:function(){var strBuf=this.strBuf;strBuf.length=0;var firstDigit,secondDigit,ch=this.currentChar,isFirstHex=!0;for(this._hexStringNumWarn=0;;){if(ch<0){(0,_util.warn)("Unterminated hex string");break}if(62===ch){this.nextChar();break}if(1!==specialChars[ch]){if(isFirstHex){if(-1===(firstDigit=toHexDigit(ch))){this._hexStringWarn(ch),ch=this.nextChar();continue}}else{if(-1===(secondDigit=toHexDigit(ch))){this._hexStringWarn(ch),ch=this.nextChar();continue}strBuf.push(String.fromCharCode(firstDigit<<4|secondDigit))}isFirstHex=!isFirstHex,ch=this.nextChar()}else ch=this.nextChar()}return strBuf.join("")}},{key:"getObj",value:function(){for(var comment=!1,ch=this.currentChar;;){if(ch<0)return _primitives.EOF;if(comment)10!==ch&&13!==ch||(comment=!1);else if(37===ch)comment=!0;else if(1!==specialChars[ch])break;ch=this.nextChar()}switch(0|ch){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return this.getNumber();case 40:return this.getString();case 47:return this.getName();case 91:return this.nextChar(),_primitives.Cmd.get("[");case 93:return this.nextChar(),_primitives.Cmd.get("]");case 60:return 60===(ch=this.nextChar())?(this.nextChar(),_primitives.Cmd.get("<<")):this.getHexString();case 62:return 62===(ch=this.nextChar())?(this.nextChar(),_primitives.Cmd.get(">>")):_primitives.Cmd.get(">");case 123:return this.nextChar(),_primitives.Cmd.get("{");case 125:return this.nextChar(),_primitives.Cmd.get("}");case 41:throw this.nextChar(),new _util.FormatError("Illegal character: ".concat(ch))}for(var str=String.fromCharCode(ch),knownCommands=this.knownCommands,knownCommandFound=knownCommands&&void 0!==knownCommands[str];(ch=this.nextChar())>=0&&!specialChars[ch];){var possibleCommand=str+String.fromCharCode(ch);if(knownCommandFound&&void 0===knownCommands[possibleCommand])break;if(128===str.length)throw new _util.FormatError("Command token too long: ".concat(str.length));str=possibleCommand,knownCommandFound=knownCommands&&void 0!==knownCommands[str]}return"true"===str||"false"!==str&&("null"===str?null:("BI"===str&&(this.beginInlineImagePos=this.stream.pos),_primitives.Cmd.get(str)))}},{key:"peekObj",value:function(){var nextObj,streamPos=this.stream.pos,currentChar=this.currentChar,beginInlineImagePos=this.beginInlineImagePos;try{nextObj=this.getObj()}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util.warn)("peekObj: ".concat(ex))}return this.stream.pos=streamPos,this.currentChar=currentChar,this.beginInlineImagePos=beginInlineImagePos,nextObj}},{key:"skipToNextLine",value:function(){for(var ch=this.currentChar;ch>=0;){if(13===ch){10===(ch=this.nextChar())&&this.nextChar();break}if(10===ch){this.nextChar();break}ch=this.nextChar()}}}]),Lexer}();exports.Lexer=Lexer;var Linearization=function(){function Linearization(){_classCallCheck(this,Linearization)}return _createClass(Linearization,null,[{key:"create",value:function(stream){function getInt(linDict,name){var allowZeroValue=arguments.length>2&&void 0!==arguments[2]&&arguments[2],obj=linDict.get(name);if(Number.isInteger(obj)&&(allowZeroValue?obj>=0:obj>0))return obj;throw new Error('The "'.concat(name,'" parameter in the linearization ')+"dictionary is invalid.")}var obj,length,parser=new Parser({lexer:new Lexer(stream),xref:null}),obj1=parser.getObj(),obj2=parser.getObj(),obj3=parser.getObj(),linDict=parser.getObj();if(!(Number.isInteger(obj1)&&Number.isInteger(obj2)&&(0,_primitives.isCmd)(obj3,"obj")&&(0,_primitives.isDict)(linDict)&&(0,_util.isNum)(obj=linDict.get("Linearized"))&&obj>0))return null;if((length=getInt(linDict,"L"))!==stream.length)throw new Error('The "L" parameter in the linearization dictionary does not equal the stream length.');return{length:length,hints:function(linDict){var hintsLength,hints=linDict.get("H");if(Array.isArray(hints)&&(2===(hintsLength=hints.length)||4===hintsLength)){for(var index=0;index<hintsLength;index++){var hint=hints[index];if(!(Number.isInteger(hint)&&hint>0))throw new Error("Hint (".concat(index,") in the linearization dictionary is invalid."))}return hints}throw new Error("Hint array in the linearization dictionary is invalid.")}(linDict),objectNumberFirst:getInt(linDict,"O"),endFirst:getInt(linDict,"E"),numPages:getInt(linDict,"N"),mainXRefEntriesOffset:getInt(linDict,"T"),pageFirst:linDict.has("P")?getInt(linDict,"P",!0):0}}}]),Linearization}();exports.Linearization=Linearization},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.StringStream=exports.StreamsSequenceStream=exports.Stream=exports.RunLengthStream=exports.PredictorStream=exports.NullStream=exports.LZWStream=exports.FlateStream=exports.DecryptStream=exports.DecodeStream=exports.AsciiHexStream=exports.Ascii85Stream=void 0;var _util=__w_pdfjs_require__(2),_primitives=__w_pdfjs_require__(5),_core_utils=__w_pdfjs_require__(8),Stream=function(){function Stream(arrayBuffer,start,length,dict){this.bytes=arrayBuffer instanceof Uint8Array?arrayBuffer:new Uint8Array(arrayBuffer),this.start=start||0,this.pos=this.start,this.end=start+length||this.bytes.length,this.dict=dict}return Stream.prototype={get length(){return this.end-this.start},get isEmpty(){return 0===this.length},getByte:function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},getUint16:function(){var b0=this.getByte(),b1=this.getByte();return-1===b0||-1===b1?-1:(b0<<8)+b1},getInt32:function(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()},getBytes:function(length){var forceClamped=arguments.length>1&&void 0!==arguments[1]&&arguments[1],bytes=this.bytes,pos=this.pos,strEnd=this.end;if(!length){var _subarray2=bytes.subarray(pos,strEnd);return forceClamped?new Uint8ClampedArray(_subarray2):_subarray2}var end=pos+length;end>strEnd&&(end=strEnd),this.pos=end;var subarray=bytes.subarray(pos,end);return forceClamped?new Uint8ClampedArray(subarray):subarray},peekByte:function(){var peekedByte=this.getByte();return-1!==peekedByte&&this.pos--,peekedByte},peekBytes:function(length){var forceClamped=arguments.length>1&&void 0!==arguments[1]&&arguments[1],bytes=this.getBytes(length,forceClamped);return this.pos-=bytes.length,bytes},getByteRange:function(begin,end){return begin<0&&(begin=0),end>this.end&&(end=this.end),this.bytes.subarray(begin,end)},skip:function(n){n||(n=1),this.pos+=n},reset:function(){this.pos=this.start},moveStart:function(){this.start=this.pos},makeSubStream:function(start,length,dict){return new Stream(this.bytes.buffer,start,length,dict)}},Stream}();exports.Stream=Stream;var StringStream=function(){function StringStream(str){var bytes=(0,_util.stringToBytes)(str);Stream.call(this,bytes)}return StringStream.prototype=Stream.prototype,StringStream}();exports.StringStream=StringStream;var DecodeStream=function(){var emptyBuffer=new Uint8Array(0);function DecodeStream(maybeMinBufferLength){if(this._rawMinBufferLength=maybeMinBufferLength||0,this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=emptyBuffer,this.minBufferLength=512,maybeMinBufferLength)for(;this.minBufferLength<maybeMinBufferLength;)this.minBufferLength*=2}return DecodeStream.prototype={get length(){(0,_util.unreachable)("Should not access DecodeStream.length")},get isEmpty(){for(;!this.eof&&0===this.bufferLength;)this.readBlock();return 0===this.bufferLength},ensureBuffer:function(requested){var buffer=this.buffer;if(requested<=buffer.byteLength)return buffer;for(var size=this.minBufferLength;size<requested;)size*=2;var buffer2=new Uint8Array(size);return buffer2.set(buffer),this.buffer=buffer2},getByte:function(){for(var pos=this.pos;this.bufferLength<=pos;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},getUint16:function(){var b0=this.getByte(),b1=this.getByte();return-1===b0||-1===b1?-1:(b0<<8)+b1},getInt32:function(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()},getBytes:function(length){var end,forceClamped=arguments.length>1&&void 0!==arguments[1]&&arguments[1],pos=this.pos;if(length){for(this.ensureBuffer(pos+length),end=pos+length;!this.eof&&this.bufferLength<end;)this.readBlock();var bufEnd=this.bufferLength;end>bufEnd&&(end=bufEnd)}else{for(;!this.eof;)this.readBlock();end=this.bufferLength}this.pos=end;var subarray=this.buffer.subarray(pos,end);return!forceClamped||subarray instanceof Uint8ClampedArray?subarray:new Uint8ClampedArray(subarray)},peekByte:function(){var peekedByte=this.getByte();return-1!==peekedByte&&this.pos--,peekedByte},peekBytes:function(length){var forceClamped=arguments.length>1&&void 0!==arguments[1]&&arguments[1],bytes=this.getBytes(length,forceClamped);return this.pos-=bytes.length,bytes},makeSubStream:function(start,length,dict){for(var end=start+length;this.bufferLength<=end&&!this.eof;)this.readBlock();return new Stream(this.buffer,start,length,dict)},getByteRange:function(begin,end){(0,_util.unreachable)("Should not call DecodeStream.getByteRange")},skip:function(n){n||(n=1),this.pos+=n},reset:function(){this.pos=0},getBaseStreams:function(){return this.str&&this.str.getBaseStreams?this.str.getBaseStreams():[]}},DecodeStream}();exports.DecodeStream=DecodeStream;var StreamsSequenceStream=function(){function StreamsSequenceStream(streams){this.streams=streams;for(var maybeLength=0,i=0,ii=streams.length;i<ii;i++){var stream=streams[i];maybeLength+=stream instanceof DecodeStream?stream._rawMinBufferLength:stream.length}DecodeStream.call(this,maybeLength)}return StreamsSequenceStream.prototype=Object.create(DecodeStream.prototype),StreamsSequenceStream.prototype.readBlock=function(){var streams=this.streams;if(0!==streams.length){var chunk=streams.shift().getBytes(),bufferLength=this.bufferLength,newLength=bufferLength+chunk.length;this.ensureBuffer(newLength).set(chunk,bufferLength),this.bufferLength=newLength}else this.eof=!0},StreamsSequenceStream.prototype.getBaseStreams=function(){for(var baseStreams=[],i=0,ii=this.streams.length;i<ii;i++){var stream=this.streams[i];stream.getBaseStreams&&baseStreams.push.apply(baseStreams,_toConsumableArray(stream.getBaseStreams()))}return baseStreams},StreamsSequenceStream}();exports.StreamsSequenceStream=StreamsSequenceStream;var FlateStream=function(){var codeLenCodeMap=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lengthDecode=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),distDecode=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),fixedLitCodeTab=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],fixedDistCodeTab=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function FlateStream(str,maybeLength){this.str=str,this.dict=str.dict;var cmf=str.getByte(),flg=str.getByte();if(-1===cmf||-1===flg)throw new _util.FormatError("Invalid header in flate stream: ".concat(cmf,", ").concat(flg));if(8!=(15&cmf))throw new _util.FormatError("Unknown compression method in flate stream: ".concat(cmf,", ").concat(flg));if(((cmf<<8)+flg)%31!=0)throw new _util.FormatError("Bad FCHECK in flate stream: ".concat(cmf,", ").concat(flg));if(32&flg)throw new _util.FormatError("FDICT bit set in flate stream: ".concat(cmf,", ").concat(flg));this.codeSize=0,this.codeBuf=0,DecodeStream.call(this,maybeLength)}return FlateStream.prototype=Object.create(DecodeStream.prototype),FlateStream.prototype.getBits=function(bits){for(var b,str=this.str,codeSize=this.codeSize,codeBuf=this.codeBuf;codeSize<bits;){if(-1===(b=str.getByte()))throw new _util.FormatError("Bad encoding in flate stream");codeBuf|=b<<codeSize,codeSize+=8}return b=codeBuf&(1<<bits)-1,this.codeBuf=codeBuf>>bits,this.codeSize=codeSize-=bits,b},FlateStream.prototype.getCode=function(table){for(var b,str=this.str,codes=table[0],maxLen=table[1],codeSize=this.codeSize,codeBuf=this.codeBuf;codeSize<maxLen&&-1!==(b=str.getByte());)codeBuf|=b<<codeSize,codeSize+=8;var code=codes[codeBuf&(1<<maxLen)-1],codeLen=code>>16,codeVal=65535&code;if(codeLen<1||codeSize<codeLen)throw new _util.FormatError("Bad encoding in flate stream");return this.codeBuf=codeBuf>>codeLen,this.codeSize=codeSize-codeLen,codeVal},FlateStream.prototype.generateHuffmanTable=function(lengths){var i,n=lengths.length,maxLen=0;for(i=0;i<n;++i)lengths[i]>maxLen&&(maxLen=lengths[i]);for(var size=1<<maxLen,codes=new Int32Array(size),len=1,code=0,skip=2;len<=maxLen;++len,code<<=1,skip<<=1)for(var val=0;val<n;++val)if(lengths[val]===len){var code2=0,t=code;for(i=0;i<len;++i)code2=code2<<1|1&t,t>>=1;for(i=code2;i<size;i+=skip)codes[i]=len<<16|val;++code}return[codes,maxLen]},FlateStream.prototype.readBlock=function(){var buffer,len,str=this.str,hdr=this.getBits(3);if(1&hdr&&(this.eof=!0),0!=(hdr>>=1)){var litCodeTable,distCodeTable;if(1===hdr)litCodeTable=fixedLitCodeTab,distCodeTable=fixedDistCodeTab;else{if(2!==hdr)throw new _util.FormatError("Unknown block type in flate stream");var i,numLitCodes=this.getBits(5)+257,numDistCodes=this.getBits(5)+1,numCodeLenCodes=this.getBits(4)+4,codeLenCodeLengths=new Uint8Array(codeLenCodeMap.length);for(i=0;i<numCodeLenCodes;++i)codeLenCodeLengths[codeLenCodeMap[i]]=this.getBits(3);var codeLenCodeTab=this.generateHuffmanTable(codeLenCodeLengths);len=0,i=0;for(var bitsLength,bitsOffset,what,codes=numLitCodes+numDistCodes,codeLengths=new Uint8Array(codes);i<codes;){var code=this.getCode(codeLenCodeTab);if(16===code)bitsLength=2,bitsOffset=3,what=len;else if(17===code)bitsLength=3,bitsOffset=3,what=len=0;else{if(18!==code){codeLengths[i++]=len=code;continue}bitsLength=7,bitsOffset=11,what=len=0}for(var repeatLength=this.getBits(bitsLength)+bitsOffset;repeatLength-- >0;)codeLengths[i++]=what}litCodeTable=this.generateHuffmanTable(codeLengths.subarray(0,numLitCodes)),distCodeTable=this.generateHuffmanTable(codeLengths.subarray(numLitCodes,codes))}for(var limit=(buffer=this.buffer)?buffer.length:0,pos=this.bufferLength;;){var code1=this.getCode(litCodeTable);if(code1<256)pos+1>=limit&&(limit=(buffer=this.ensureBuffer(pos+1)).length),buffer[pos++]=code1;else{if(256===code1)return void(this.bufferLength=pos);var code2=(code1=lengthDecode[code1-=257])>>16;code2>0&&(code2=this.getBits(code2)),len=(65535&code1)+code2,code1=this.getCode(distCodeTable),(code2=(code1=distDecode[code1])>>16)>0&&(code2=this.getBits(code2));var dist=(65535&code1)+code2;pos+len>=limit&&(limit=(buffer=this.ensureBuffer(pos+len)).length);for(var k=0;k<len;++k,++pos)buffer[pos]=buffer[pos-dist]}}}else{var b;if(-1===(b=str.getByte()))throw new _util.FormatError("Bad block header in flate stream");var blockLen=b;if(-1===(b=str.getByte()))throw new _util.FormatError("Bad block header in flate stream");if(blockLen|=b<<8,-1===(b=str.getByte()))throw new _util.FormatError("Bad block header in flate stream");var check=b;if(-1===(b=str.getByte()))throw new _util.FormatError("Bad block header in flate stream");if((check|=b<<8)!=(65535&~blockLen)&&(0!==blockLen||0!==check))throw new _util.FormatError("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;var bufferLength=this.bufferLength,end=bufferLength+blockLen;if(buffer=this.ensureBuffer(end),this.bufferLength=end,0===blockLen)-1===str.peekByte()&&(this.eof=!0);else{var block=str.getBytes(blockLen);buffer.set(block,bufferLength),block.length<blockLen&&(this.eof=!0)}}},FlateStream}();exports.FlateStream=FlateStream;var PredictorStream=function(){function PredictorStream(str,maybeLength,params){if(!(0,_primitives.isDict)(params))return str;var predictor=this.predictor=params.get("Predictor")||1;if(predictor<=1)return str;if(2!==predictor&&(predictor<10||predictor>15))throw new _util.FormatError("Unsupported predictor: ".concat(predictor));this.readBlock=2===predictor?this.readBlockTiff:this.readBlockPng,this.str=str,this.dict=str.dict;var colors=this.colors=params.get("Colors")||1,bits=this.bits=params.get("BitsPerComponent")||8,columns=this.columns=params.get("Columns")||1;return this.pixBytes=colors*bits+7>>3,this.rowBytes=columns*colors*bits+7>>3,DecodeStream.call(this,maybeLength),this}return PredictorStream.prototype=Object.create(DecodeStream.prototype),PredictorStream.prototype.readBlockTiff=function(){var rowBytes=this.rowBytes,bufferLength=this.bufferLength,buffer=this.ensureBuffer(bufferLength+rowBytes),bits=this.bits,colors=this.colors,rawBytes=this.str.getBytes(rowBytes);if(this.eof=!rawBytes.length,!this.eof){var i,inbuf=0,outbuf=0,inbits=0,outbits=0,pos=bufferLength;if(1===bits&&1===colors)for(i=0;i<rowBytes;++i){var c=rawBytes[i]^inbuf;c^=c>>1,c^=c>>2,inbuf=(1&(c^=c>>4))<<7,buffer[pos++]=c}else if(8===bits){for(i=0;i<colors;++i)buffer[pos++]=rawBytes[i];for(;i<rowBytes;++i)buffer[pos]=buffer[pos-colors]+rawBytes[i],pos++}else if(16===bits){var bytesPerPixel=2*colors;for(i=0;i<bytesPerPixel;++i)buffer[pos++]=rawBytes[i];for(;i<rowBytes;i+=2){var sum=((255&rawBytes[i])<<8)+(255&rawBytes[i+1])+((255&buffer[pos-bytesPerPixel])<<8)+(255&buffer[pos-bytesPerPixel+1]);buffer[pos++]=sum>>8&255,buffer[pos++]=255&sum}}else{var compArray=new Uint8Array(colors+1),bitMask=(1<<bits)-1,j=0,k=bufferLength,columns=this.columns;for(i=0;i<columns;++i)for(var kk=0;kk<colors;++kk)inbits<bits&&(inbuf=inbuf<<8|255&rawBytes[j++],inbits+=8),compArray[kk]=compArray[kk]+(inbuf>>inbits-bits)&bitMask,inbits-=bits,outbuf=outbuf<<bits|compArray[kk],(outbits+=bits)>=8&&(buffer[k++]=outbuf>>outbits-8&255,outbits-=8);outbits>0&&(buffer[k++]=(outbuf<<8-outbits)+(inbuf&(1<<8-outbits)-1))}this.bufferLength+=rowBytes}},PredictorStream.prototype.readBlockPng=function(){var rowBytes=this.rowBytes,pixBytes=this.pixBytes,predictor=this.str.getByte(),rawBytes=this.str.getBytes(rowBytes);if(this.eof=!rawBytes.length,!this.eof){var bufferLength=this.bufferLength,buffer=this.ensureBuffer(bufferLength+rowBytes),prevRow=buffer.subarray(bufferLength-rowBytes,bufferLength);0===prevRow.length&&(prevRow=new Uint8Array(rowBytes));var i,up,c,j=bufferLength;switch(predictor){case 0:for(i=0;i<rowBytes;++i)buffer[j++]=rawBytes[i];break;case 1:for(i=0;i<pixBytes;++i)buffer[j++]=rawBytes[i];for(;i<rowBytes;++i)buffer[j]=buffer[j-pixBytes]+rawBytes[i]&255,j++;break;case 2:for(i=0;i<rowBytes;++i)buffer[j++]=prevRow[i]+rawBytes[i]&255;break;case 3:for(i=0;i<pixBytes;++i)buffer[j++]=(prevRow[i]>>1)+rawBytes[i];for(;i<rowBytes;++i)buffer[j]=(prevRow[i]+buffer[j-pixBytes]>>1)+rawBytes[i]&255,j++;break;case 4:for(i=0;i<pixBytes;++i)up=prevRow[i],c=rawBytes[i],buffer[j++]=up+c;for(;i<rowBytes;++i){up=prevRow[i];var upLeft=prevRow[i-pixBytes],left=buffer[j-pixBytes],p=left+up-upLeft,pa=p-left;pa<0&&(pa=-pa);var pb=p-up;pb<0&&(pb=-pb);var pc=p-upLeft;pc<0&&(pc=-pc),c=rawBytes[i],buffer[j++]=pa<=pb&&pa<=pc?left+c:pb<=pc?up+c:upLeft+c}break;default:throw new _util.FormatError("Unsupported predictor: ".concat(predictor))}this.bufferLength+=rowBytes}},PredictorStream}();exports.PredictorStream=PredictorStream;var DecryptStream=function(){function DecryptStream(str,maybeLength,decrypt){this.str=str,this.dict=str.dict,this.decrypt=decrypt,this.nextChunk=null,this.initialized=!1,DecodeStream.call(this,maybeLength)}return DecryptStream.prototype=Object.create(DecodeStream.prototype),DecryptStream.prototype.readBlock=function(){var chunk;if(this.initialized?chunk=this.nextChunk:(chunk=this.str.getBytes(512),this.initialized=!0),chunk&&0!==chunk.length){this.nextChunk=this.str.getBytes(512);var hasMoreData=this.nextChunk&&this.nextChunk.length>0;chunk=(0,this.decrypt)(chunk,!hasMoreData);var i,bufferLength=this.bufferLength,n=chunk.length,buffer=this.ensureBuffer(bufferLength+n);for(i=0;i<n;i++)buffer[bufferLength++]=chunk[i];this.bufferLength=bufferLength}else this.eof=!0},DecryptStream}();exports.DecryptStream=DecryptStream;var Ascii85Stream=function(){function Ascii85Stream(str,maybeLength){this.str=str,this.dict=str.dict,this.input=new Uint8Array(5),maybeLength&&(maybeLength*=.8),DecodeStream.call(this,maybeLength)}return Ascii85Stream.prototype=Object.create(DecodeStream.prototype),Ascii85Stream.prototype.readBlock=function(){for(var str=this.str,c=str.getByte();(0,_core_utils.isWhiteSpace)(c);)c=str.getByte();if(-1!==c&&126!==c){var buffer,i,bufferLength=this.bufferLength;if(122===c){for(buffer=this.ensureBuffer(bufferLength+4),i=0;i<4;++i)buffer[bufferLength+i]=0;this.bufferLength+=4}else{var input=this.input;for(input[0]=c,i=1;i<5;++i){for(c=str.getByte();(0,_core_utils.isWhiteSpace)(c);)c=str.getByte();if(input[i]=c,-1===c||126===c)break}if(buffer=this.ensureBuffer(bufferLength+i-1),this.bufferLength+=i-1,i<5){for(;i<5;++i)input[i]=117;this.eof=!0}var t=0;for(i=0;i<5;++i)t=85*t+(input[i]-33);for(i=3;i>=0;--i)buffer[bufferLength+i]=255&t,t>>=8}}else this.eof=!0},Ascii85Stream}();exports.Ascii85Stream=Ascii85Stream;var AsciiHexStream=function(){function AsciiHexStream(str,maybeLength){this.str=str,this.dict=str.dict,this.firstDigit=-1,maybeLength&&(maybeLength*=.5),DecodeStream.call(this,maybeLength)}return AsciiHexStream.prototype=Object.create(DecodeStream.prototype),AsciiHexStream.prototype.readBlock=function(){var bytes=this.str.getBytes(8e3);if(bytes.length){for(var maxDecodeLength=bytes.length+1>>1,buffer=this.ensureBuffer(this.bufferLength+maxDecodeLength),bufferLength=this.bufferLength,firstDigit=this.firstDigit,i=0,ii=bytes.length;i<ii;i++){var digit,ch=bytes[i];if(ch>=48&&ch<=57)digit=15&ch;else{if(!(ch>=65&&ch<=70||ch>=97&&ch<=102)){if(62===ch){this.eof=!0;break}continue}digit=9+(15&ch)}firstDigit<0?firstDigit=digit:(buffer[bufferLength++]=firstDigit<<4|digit,firstDigit=-1)}firstDigit>=0&&this.eof&&(buffer[bufferLength++]=firstDigit<<4,firstDigit=-1),this.firstDigit=firstDigit,this.bufferLength=bufferLength}else this.eof=!0},AsciiHexStream}();exports.AsciiHexStream=AsciiHexStream;var RunLengthStream=function(){function RunLengthStream(str,maybeLength){this.str=str,this.dict=str.dict,DecodeStream.call(this,maybeLength)}return RunLengthStream.prototype=Object.create(DecodeStream.prototype),RunLengthStream.prototype.readBlock=function(){var repeatHeader=this.str.getBytes(2);if(!repeatHeader||repeatHeader.length<2||128===repeatHeader[0])this.eof=!0;else{var buffer,bufferLength=this.bufferLength,n=repeatHeader[0];if(n<128){if((buffer=this.ensureBuffer(bufferLength+n+1))[bufferLength++]=repeatHeader[1],n>0){var source=this.str.getBytes(n);buffer.set(source,bufferLength),bufferLength+=n}}else{n=257-n;var b=repeatHeader[1];buffer=this.ensureBuffer(bufferLength+n+1);for(var i=0;i<n;i++)buffer[bufferLength++]=b}this.bufferLength=bufferLength}},RunLengthStream}();exports.RunLengthStream=RunLengthStream;var LZWStream=function(){function LZWStream(str,maybeLength,earlyChange){this.str=str,this.dict=str.dict,this.cachedData=0,this.bitsCached=0;for(var lzwState={earlyChange:earlyChange,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(4096),dictionaryLengths:new Uint16Array(4096),dictionaryPrevCodes:new Uint16Array(4096),currentSequence:new Uint8Array(4096),currentSequenceLength:0},i=0;i<256;++i)lzwState.dictionaryValues[i]=i,lzwState.dictionaryLengths[i]=1;this.lzwState=lzwState,DecodeStream.call(this,maybeLength)}return LZWStream.prototype=Object.create(DecodeStream.prototype),LZWStream.prototype.readBits=function(n){for(var bitsCached=this.bitsCached,cachedData=this.cachedData;bitsCached<n;){var c=this.str.getByte();if(-1===c)return this.eof=!0,null;cachedData=cachedData<<8|c,bitsCached+=8}return this.bitsCached=bitsCached-=n,this.cachedData=cachedData,this.lastCode=null,cachedData>>>bitsCached&(1<<n)-1},LZWStream.prototype.readBlock=function(){var i,j,q,estimatedDecodedSize=1024,lzwState=this.lzwState;if(lzwState){var earlyChange=lzwState.earlyChange,nextCode=lzwState.nextCode,dictionaryValues=lzwState.dictionaryValues,dictionaryLengths=lzwState.dictionaryLengths,dictionaryPrevCodes=lzwState.dictionaryPrevCodes,codeLength=lzwState.codeLength,prevCode=lzwState.prevCode,currentSequence=lzwState.currentSequence,currentSequenceLength=lzwState.currentSequenceLength,decodedLength=0,currentBufferLength=this.bufferLength,buffer=this.ensureBuffer(this.bufferLength+estimatedDecodedSize);for(i=0;i<512;i++){var code=this.readBits(codeLength),hasPrev=currentSequenceLength>0;if(code<256)currentSequence[0]=code,currentSequenceLength=1;else{if(!(code>=258)){if(256===code){codeLength=9,nextCode=258,currentSequenceLength=0;continue}this.eof=!0,delete this.lzwState;break}if(code<nextCode)for(j=(currentSequenceLength=dictionaryLengths[code])-1,q=code;j>=0;j--)currentSequence[j]=dictionaryValues[q],q=dictionaryPrevCodes[q];else currentSequence[currentSequenceLength++]=currentSequence[0]}if(hasPrev&&(dictionaryPrevCodes[nextCode]=prevCode,dictionaryLengths[nextCode]=dictionaryLengths[prevCode]+1,dictionaryValues[nextCode]=currentSequence[0],codeLength=++nextCode+earlyChange&nextCode+earlyChange-1?codeLength:0|Math.min(Math.log(nextCode+earlyChange)/.6931471805599453+1,12)),prevCode=code,estimatedDecodedSize<(decodedLength+=currentSequenceLength)){do{estimatedDecodedSize+=512}while(estimatedDecodedSize<decodedLength);buffer=this.ensureBuffer(this.bufferLength+estimatedDecodedSize)}for(j=0;j<currentSequenceLength;j++)buffer[currentBufferLength++]=currentSequence[j]}lzwState.nextCode=nextCode,lzwState.codeLength=codeLength,lzwState.prevCode=prevCode,lzwState.currentSequenceLength=currentSequenceLength,this.bufferLength=currentBufferLength}},LZWStream}();exports.LZWStream=LZWStream;var NullStream=function(){function NullStream(){Stream.call(this,new Uint8Array(0))}return NullStream.prototype=Stream.prototype,NullStream}();exports.NullStream=NullStream},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.CCITTFaxStream=void 0;var _primitives=__w_pdfjs_require__(5),_ccitt=__w_pdfjs_require__(14),_stream=__w_pdfjs_require__(12),CCITTFaxStream=function(){function CCITTFaxStream(str,maybeLength,params){this.str=str,this.dict=str.dict,(0,_primitives.isDict)(params)||(params=_primitives.Dict.empty);var source={next:function(){return str.getByte()}};this.ccittFaxDecoder=new _ccitt.CCITTFaxDecoder(source,{K:params.get("K"),EndOfLine:params.get("EndOfLine"),EncodedByteAlign:params.get("EncodedByteAlign"),Columns:params.get("Columns"),Rows:params.get("Rows"),EndOfBlock:params.get("EndOfBlock"),BlackIs1:params.get("BlackIs1")}),_stream.DecodeStream.call(this,maybeLength)}return CCITTFaxStream.prototype=Object.create(_stream.DecodeStream.prototype),CCITTFaxStream.prototype.readBlock=function(){for(;!this.eof;){var c=this.ccittFaxDecoder.readNextChar();if(-1===c)return void(this.eof=!0);this.ensureBuffer(this.bufferLength+1),this.buffer[this.bufferLength++]=c}},CCITTFaxStream}();exports.CCITTFaxStream=CCITTFaxStream},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.CCITTFaxDecoder=void 0;var _util=__w_pdfjs_require__(2),CCITTFaxDecoder=function(){var twoDimTable=[[-1,-1],[-1,-1],[7,8],[7,7],[6,6],[6,6],[6,5],[6,5],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2]],whiteTable1=[[-1,-1],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[12,1984],[12,2048],[12,2112],[12,2176],[12,2240],[12,2304],[11,1856],[11,1856],[11,1920],[11,1920],[12,2368],[12,2432],[12,2496],[12,2560]],whiteTable2=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[8,29],[8,29],[8,30],[8,30],[8,45],[8,45],[8,46],[8,46],[7,22],[7,22],[7,22],[7,22],[7,23],[7,23],[7,23],[7,23],[8,47],[8,47],[8,48],[8,48],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[7,20],[7,20],[7,20],[7,20],[8,33],[8,33],[8,34],[8,34],[8,35],[8,35],[8,36],[8,36],[8,37],[8,37],[8,38],[8,38],[7,19],[7,19],[7,19],[7,19],[8,31],[8,31],[8,32],[8,32],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[8,53],[8,53],[8,54],[8,54],[7,26],[7,26],[7,26],[7,26],[8,39],[8,39],[8,40],[8,40],[8,41],[8,41],[8,42],[8,42],[8,43],[8,43],[8,44],[8,44],[7,21],[7,21],[7,21],[7,21],[7,28],[7,28],[7,28],[7,28],[8,61],[8,61],[8,62],[8,62],[8,63],[8,63],[8,0],[8,0],[8,320],[8,320],[8,384],[8,384],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[7,27],[7,27],[7,27],[7,27],[8,59],[8,59],[8,60],[8,60],[9,1472],[9,1536],[9,1600],[9,1728],[7,18],[7,18],[7,18],[7,18],[7,24],[7,24],[7,24],[7,24],[8,49],[8,49],[8,50],[8,50],[8,51],[8,51],[8,52],[8,52],[7,25],[7,25],[7,25],[7,25],[8,55],[8,55],[8,56],[8,56],[8,57],[8,57],[8,58],[8,58],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[8,448],[8,448],[8,512],[8,512],[9,704],[9,768],[8,640],[8,640],[8,576],[8,576],[9,832],[9,896],[9,960],[9,1024],[9,1088],[9,1152],[9,1216],[9,1280],[9,1344],[9,1408],[7,256],[7,256],[7,256],[7,256],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7]],blackTable1=[[-1,-1],[-1,-1],[12,-2],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[11,1792],[11,1792],[12,1984],[12,1984],[12,2048],[12,2048],[12,2112],[12,2112],[12,2176],[12,2176],[12,2240],[12,2240],[12,2304],[12,2304],[11,1856],[11,1856],[11,1856],[11,1856],[11,1920],[11,1920],[11,1920],[11,1920],[12,2368],[12,2368],[12,2432],[12,2432],[12,2496],[12,2496],[12,2560],[12,2560],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[12,52],[12,52],[13,640],[13,704],[13,768],[13,832],[12,55],[12,55],[12,56],[12,56],[13,1280],[13,1344],[13,1408],[13,1472],[12,59],[12,59],[12,60],[12,60],[13,1536],[13,1600],[11,24],[11,24],[11,24],[11,24],[11,25],[11,25],[11,25],[11,25],[13,1664],[13,1728],[12,320],[12,320],[12,384],[12,384],[12,448],[12,448],[13,512],[13,576],[12,53],[12,53],[12,54],[12,54],[13,896],[13,960],[13,1024],[13,1088],[13,1152],[13,1216],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64]],blackTable2=[[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[11,23],[11,23],[12,50],[12,51],[12,44],[12,45],[12,46],[12,47],[12,57],[12,58],[12,61],[12,256],[10,16],[10,16],[10,16],[10,16],[10,17],[10,17],[10,17],[10,17],[12,48],[12,49],[12,62],[12,63],[12,30],[12,31],[12,32],[12,33],[12,40],[12,41],[11,22],[11,22],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[12,128],[12,192],[12,26],[12,27],[12,28],[12,29],[11,19],[11,19],[11,20],[11,20],[12,34],[12,35],[12,36],[12,37],[12,38],[12,39],[11,21],[11,21],[12,42],[12,43],[10,0],[10,0],[10,0],[10,0],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12]],blackTable3=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[6,9],[6,8],[5,7],[5,7],[4,6],[4,6],[4,6],[4,6],[4,5],[4,5],[4,5],[4,5],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2]];function CCITTFaxDecoder(source){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!source||"function"!=typeof source.next)throw new Error('CCITTFaxDecoder - invalid "source" parameter.');this.source=source,this.eof=!1,this.encoding=options.K||0,this.eoline=options.EndOfLine||!1,this.byteAlign=options.EncodedByteAlign||!1,this.columns=options.Columns||1728,this.rows=options.Rows||0;var code1,eoblock=options.EndOfBlock;for(null==eoblock&&(eoblock=!0),this.eoblock=eoblock,this.black=options.BlackIs1||!1,this.codingLine=new Uint32Array(this.columns+1),this.refLine=new Uint32Array(this.columns+2),this.codingLine[0]=this.columns,this.codingPos=0,this.row=0,this.nextLine2D=this.encoding<0,this.inputBits=0,this.inputBuf=0,this.outputBits=0,this.rowsDone=!1;0===(code1=this._lookBits(12));)this._eatBits(1);1===code1&&this._eatBits(12),this.encoding>0&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1))}return CCITTFaxDecoder.prototype={readNextChar:function(){if(this.eof)return-1;var refPos,blackPixels,bits,i,c,refLine=this.refLine,codingLine=this.codingLine,columns=this.columns;if(0===this.outputBits){if(this.rowsDone&&(this.eof=!0),this.eof)return-1;var code1,code2,code3;if(this.err=!1,this.nextLine2D){for(i=0;codingLine[i]<columns;++i)refLine[i]=codingLine[i];for(refLine[i++]=columns,refLine[i]=columns,codingLine[0]=0,this.codingPos=0,refPos=0,blackPixels=0;codingLine[this.codingPos]<columns;)switch(code1=this._getTwoDimCode()){case 0:this._addPixels(refLine[refPos+1],blackPixels),refLine[refPos+1]<columns&&(refPos+=2);break;case 1:if(code1=code2=0,blackPixels){do{code1+=code3=this._getBlackCode()}while(code3>=64);do{code2+=code3=this._getWhiteCode()}while(code3>=64)}else{do{code1+=code3=this._getWhiteCode()}while(code3>=64);do{code2+=code3=this._getBlackCode()}while(code3>=64)}for(this._addPixels(codingLine[this.codingPos]+code1,blackPixels),codingLine[this.codingPos]<columns&&this._addPixels(codingLine[this.codingPos]+code2,1^blackPixels);refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns;)refPos+=2;break;case 7:if(this._addPixels(refLine[refPos]+3,blackPixels),blackPixels^=1,codingLine[this.codingPos]<columns)for(++refPos;refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns;)refPos+=2;break;case 5:if(this._addPixels(refLine[refPos]+2,blackPixels),blackPixels^=1,codingLine[this.codingPos]<columns)for(++refPos;refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns;)refPos+=2;break;case 3:if(this._addPixels(refLine[refPos]+1,blackPixels),blackPixels^=1,codingLine[this.codingPos]<columns)for(++refPos;refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns;)refPos+=2;break;case 2:if(this._addPixels(refLine[refPos],blackPixels),blackPixels^=1,codingLine[this.codingPos]<columns)for(++refPos;refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns;)refPos+=2;break;case 8:if(this._addPixelsNeg(refLine[refPos]-3,blackPixels),blackPixels^=1,codingLine[this.codingPos]<columns)for(refPos>0?--refPos:++refPos;refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns;)refPos+=2;break;case 6:if(this._addPixelsNeg(refLine[refPos]-2,blackPixels),blackPixels^=1,codingLine[this.codingPos]<columns)for(refPos>0?--refPos:++refPos;refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns;)refPos+=2;break;case 4:if(this._addPixelsNeg(refLine[refPos]-1,blackPixels),blackPixels^=1,codingLine[this.codingPos]<columns)for(refPos>0?--refPos:++refPos;refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns;)refPos+=2;break;case-1:this._addPixels(columns,0),this.eof=!0;break;default:(0,_util.info)("bad 2d code"),this._addPixels(columns,0),this.err=!0}}else for(codingLine[0]=0,this.codingPos=0,blackPixels=0;codingLine[this.codingPos]<columns;){if(code1=0,blackPixels)do{code1+=code3=this._getBlackCode()}while(code3>=64);else do{code1+=code3=this._getWhiteCode()}while(code3>=64);this._addPixels(codingLine[this.codingPos]+code1,blackPixels),blackPixels^=1}var gotEOL=!1;if(this.byteAlign&&(this.inputBits&=-8),this.eoblock||this.row!==this.rows-1){if(code1=this._lookBits(12),this.eoline)for(;-1!==code1&&1!==code1;)this._eatBits(1),code1=this._lookBits(12);else for(;0===code1;)this._eatBits(1),code1=this._lookBits(12);1===code1?(this._eatBits(12),gotEOL=!0):-1===code1&&(this.eof=!0)}else this.rowsDone=!0;if(!this.eof&&this.encoding>0&&!this.rowsDone&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1)),this.eoblock&&gotEOL&&this.byteAlign){if(1===(code1=this._lookBits(12))){if(this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1)),this.encoding>=0)for(i=0;i<4;++i)1!==(code1=this._lookBits(12))&&(0,_util.info)("bad rtc code: "+code1),this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1));this.eof=!0}}else if(this.err&&this.eoline){for(;;){if(-1===(code1=this._lookBits(13)))return this.eof=!0,-1;if(code1>>1==1)break;this._eatBits(1)}this._eatBits(12),this.encoding>0&&(this._eatBits(1),this.nextLine2D=!(1&code1))}codingLine[0]>0?this.outputBits=codingLine[this.codingPos=0]:this.outputBits=codingLine[this.codingPos=1],this.row++}if(this.outputBits>=8)c=1&this.codingPos?0:255,this.outputBits-=8,0===this.outputBits&&codingLine[this.codingPos]<columns&&(this.codingPos++,this.outputBits=codingLine[this.codingPos]-codingLine[this.codingPos-1]);else{bits=8,c=0;do{this.outputBits>bits?(c<<=bits,1&this.codingPos||(c|=255>>8-bits),this.outputBits-=bits,bits=0):(c<<=this.outputBits,1&this.codingPos||(c|=255>>8-this.outputBits),bits-=this.outputBits,this.outputBits=0,codingLine[this.codingPos]<columns?(this.codingPos++,this.outputBits=codingLine[this.codingPos]-codingLine[this.codingPos-1]):bits>0&&(c<<=bits,bits=0))}while(bits)}return this.black&&(c^=255),c},_addPixels:function(a1,blackPixels){var codingLine=this.codingLine,codingPos=this.codingPos;a1>codingLine[codingPos]&&(a1>this.columns&&((0,_util.info)("row is wrong length"),this.err=!0,a1=this.columns),1&codingPos^blackPixels&&++codingPos,codingLine[codingPos]=a1),this.codingPos=codingPos},_addPixelsNeg:function(a1,blackPixels){var codingLine=this.codingLine,codingPos=this.codingPos;if(a1>codingLine[codingPos])a1>this.columns&&((0,_util.info)("row is wrong length"),this.err=!0,a1=this.columns),1&codingPos^blackPixels&&++codingPos,codingLine[codingPos]=a1;else if(a1<codingLine[codingPos]){for(a1<0&&((0,_util.info)("invalid code"),this.err=!0,a1=0);codingPos>0&&a1<codingLine[codingPos-1];)--codingPos;codingLine[codingPos]=a1}this.codingPos=codingPos},_findTableCode:function(start,end,table,limit){for(var limitValue=limit||0,i=start;i<=end;++i){var code=this._lookBits(i);if(-1===code)return[!0,1,!1];if(i<end&&(code<<=end-i),!limitValue||code>=limitValue){var p=table[code-limitValue];if(p[0]===i)return this._eatBits(i),[!0,p[1],!0]}}return[!1,0,!1]},_getTwoDimCode:function(){var p,code=0;if(this.eoblock){if(code=this._lookBits(7),(p=twoDimTable[code])&&p[0]>0)return this._eatBits(p[0]),p[1]}else{var result=this._findTableCode(1,7,twoDimTable);if(result[0]&&result[2])return result[1]}return(0,_util.info)("Bad two dim code"),-1},_getWhiteCode:function(){var p,code=0;if(this.eoblock){if(-1===(code=this._lookBits(12)))return 1;if((p=code>>5==0?whiteTable1[code]:whiteTable2[code>>3])[0]>0)return this._eatBits(p[0]),p[1]}else{var result=this._findTableCode(1,9,whiteTable2);if(result[0])return result[1];if((result=this._findTableCode(11,12,whiteTable1))[0])return result[1]}return(0,_util.info)("bad white code"),this._eatBits(1),1},_getBlackCode:function(){var code,p;if(this.eoblock){if(-1===(code=this._lookBits(13)))return 1;if((p=code>>7==0?blackTable1[code]:code>>9==0&&code>>7!=0?blackTable2[(code>>1)-64]:blackTable3[code>>7])[0]>0)return this._eatBits(p[0]),p[1]}else{var result=this._findTableCode(2,6,blackTable3);if(result[0])return result[1];if((result=this._findTableCode(7,12,blackTable2,64))[0])return result[1];if((result=this._findTableCode(10,13,blackTable1))[0])return result[1]}return(0,_util.info)("bad black code"),this._eatBits(1),1},_lookBits:function(n){for(var c;this.inputBits<n;){if(-1===(c=this.source.next()))return 0===this.inputBits?-1:this.inputBuf<<n-this.inputBits&65535>>16-n;this.inputBuf=this.inputBuf<<8|c,this.inputBits+=8}return this.inputBuf>>this.inputBits-n&65535>>16-n},_eatBits:function(n){(this.inputBits-=n)<0&&(this.inputBits=0)}},CCITTFaxDecoder}();exports.CCITTFaxDecoder=CCITTFaxDecoder},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.Jbig2Stream=void 0;var _primitives=__w_pdfjs_require__(5),_stream=__w_pdfjs_require__(12),_jbig=__w_pdfjs_require__(16),_util=__w_pdfjs_require__(2),Jbig2Stream=function(){function Jbig2Stream(stream,maybeLength,dict,params){this.stream=stream,this.maybeLength=maybeLength,this.dict=dict,this.params=params,_stream.DecodeStream.call(this,maybeLength)}return Jbig2Stream.prototype=Object.create(_stream.DecodeStream.prototype),Object.defineProperty(Jbig2Stream.prototype,"bytes",{get:function(){return(0,_util.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))},configurable:!0}),Jbig2Stream.prototype.ensureBuffer=function(requested){},Jbig2Stream.prototype.readBlock=function(){if(!this.eof){var jbig2Image=new _jbig.Jbig2Image,chunks=[];if((0,_primitives.isDict)(this.params)){var globalsStream=this.params.get("JBIG2Globals");if((0,_primitives.isStream)(globalsStream)){var globals=globalsStream.getBytes();chunks.push({data:globals,start:0,end:globals.length})}}chunks.push({data:this.bytes,start:0,end:this.bytes.length});for(var data=jbig2Image.parseChunks(chunks),dataLength=data.length,i=0;i<dataLength;i++)data[i]^=255;this.buffer=data,this.bufferLength=dataLength,this.eof=!0}},Jbig2Stream}();exports.Jbig2Stream=Jbig2Stream},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.Jbig2Image=void 0;var _util=__w_pdfjs_require__(2),_core_utils=__w_pdfjs_require__(8),_arithmetic_decoder=__w_pdfjs_require__(17),_ccitt=__w_pdfjs_require__(14),Jbig2Error=function(_util$BaseException4){_inherits(Jbig2Error,_util$BaseException4);var _super16=_createSuper(Jbig2Error);function Jbig2Error(msg){return _classCallCheck(this,Jbig2Error),_super16.call(this,"JBIG2 error: ".concat(msg))}return _createClass(Jbig2Error)}(_util.BaseException),Jbig2Image=function(){function ContextCache(){}function DecodingContext(data,start,end){this.data=data,this.start=start,this.end=end}function decodeInteger(contextCache,procedure,decoder){var contexts=contextCache.getContexts(procedure),prev=1;function readBits(length){for(var v=0,i=0;i<length;i++){var bit=decoder.readBit(contexts,prev);prev=prev<256?prev<<1|bit:511&(prev<<1|bit)|256,v=v<<1|bit}return v>>>0}var sign=readBits(1),value=readBits(1)?readBits(1)?readBits(1)?readBits(1)?readBits(1)?readBits(32)+4436:readBits(12)+340:readBits(8)+84:readBits(6)+20:readBits(4)+4:readBits(2);return 0===sign?value:value>0?-value:null}function decodeIAID(contextCache,decoder,codeLength){for(var contexts=contextCache.getContexts("IAID"),prev=1,i=0;i<codeLength;i++)prev=prev<<1|decoder.readBit(contexts,prev);return codeLength<31?prev&(1<<codeLength)-1:2147483647&prev}ContextCache.prototype={getContexts:function(id){return id in this?this[id]:this[id]=new Int8Array(65536)}},DecodingContext.prototype={get decoder(){var decoder=new _arithmetic_decoder.ArithmeticDecoder(this.data,this.start,this.end);return(0,_util.shadow)(this,"decoder",decoder)},get contextCache(){var cache=new ContextCache;return(0,_util.shadow)(this,"contextCache",cache)}};var SegmentTypes=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"PatternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],CodingTemplates=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],RefinementTemplates=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],ReusedContexts=[39717,1941,229,405],RefinementReusedContexts=[32,8];function decodeBitmap(mmr,width,height,templateIndex,prediction,skip,at,decodingContext){if(mmr)return decodeMMRBitmap(new Reader(decodingContext.data,decodingContext.start,decodingContext.end),width,height,!1);if(0===templateIndex&&!skip&&!prediction&&4===at.length&&3===at[0].x&&-1===at[0].y&&-3===at[1].x&&-1===at[1].y&&2===at[2].x&&-2===at[2].y&&-2===at[3].x&&-2===at[3].y)return function(width,height,decodingContext){var contextLabel,i,j,pixel,row,row1,row2,decoder=decodingContext.decoder,contexts=decodingContext.contextCache.getContexts("GB"),bitmap=[];for(i=0;i<height;i++)for(row=bitmap[i]=new Uint8Array(width),row1=i<1?row:bitmap[i-1],contextLabel=(row2=i<2?row:bitmap[i-2])[0]<<13|row2[1]<<12|row2[2]<<11|row1[0]<<7|row1[1]<<6|row1[2]<<5|row1[3]<<4,j=0;j<width;j++)row[j]=pixel=decoder.readBit(contexts,contextLabel),contextLabel=(31735&contextLabel)<<1|(j+3<width?row2[j+3]<<11:0)|(j+4<width?row1[j+4]<<4:0)|pixel;return bitmap}(width,height,decodingContext);var useskip=!!skip,template=CodingTemplates[templateIndex].concat(at);template.sort((function(a,b){return a.y-b.y||a.x-b.x}));var c,k,templateLength=template.length,templateX=new Int8Array(templateLength),templateY=new Int8Array(templateLength),changingTemplateEntries=[],reuseMask=0,minX=0,maxX=0,minY=0;for(k=0;k<templateLength;k++)templateX[k]=template[k].x,templateY[k]=template[k].y,minX=Math.min(minX,template[k].x),maxX=Math.max(maxX,template[k].x),minY=Math.min(minY,template[k].y),k<templateLength-1&&template[k].y===template[k+1].y&&template[k].x===template[k+1].x-1?reuseMask|=1<<templateLength-1-k:changingTemplateEntries.push(k);var changingEntriesLength=changingTemplateEntries.length,changingTemplateX=new Int8Array(changingEntriesLength),changingTemplateY=new Int8Array(changingEntriesLength),changingTemplateBit=new Uint16Array(changingEntriesLength);for(c=0;c<changingEntriesLength;c++)k=changingTemplateEntries[c],changingTemplateX[c]=template[k].x,changingTemplateY[c]=template[k].y,changingTemplateBit[c]=1<<templateLength-1-k;for(var j,i0,j0,bit,shift,sbb_left=-minX,sbb_top=-minY,sbb_right=width-maxX,pseudoPixelContext=ReusedContexts[templateIndex],row=new Uint8Array(width),bitmap=[],decoder=decodingContext.decoder,contexts=decodingContext.contextCache.getContexts("GB"),ltp=0,contextLabel=0,i=0;i<height;i++)if(prediction&&(ltp^=decoder.readBit(contexts,pseudoPixelContext)))bitmap.push(row);else for(row=new Uint8Array(row),bitmap.push(row),j=0;j<width;j++)if(useskip&&skip[i][j])row[j]=0;else{if(j>=sbb_left&&j<sbb_right&&i>=sbb_top)for(contextLabel=contextLabel<<1&reuseMask,k=0;k<changingEntriesLength;k++)i0=i+changingTemplateY[k],j0=j+changingTemplateX[k],(bit=bitmap[i0][j0])&&(contextLabel|=bit=changingTemplateBit[k]);else for(contextLabel=0,shift=templateLength-1,k=0;k<templateLength;k++,shift--)(j0=j+templateX[k])>=0&&j0<width&&(i0=i+templateY[k])>=0&&(bit=bitmap[i0][j0])&&(contextLabel|=bit<<shift);var pixel=decoder.readBit(contexts,contextLabel);row[j]=pixel}return bitmap}function decodeRefinement(width,height,templateIndex,referenceBitmap,offsetX,offsetY,prediction,at,decodingContext){var codingTemplate=RefinementTemplates[templateIndex].coding;0===templateIndex&&(codingTemplate=codingTemplate.concat([at[0]]));var k,codingTemplateLength=codingTemplate.length,codingTemplateX=new Int32Array(codingTemplateLength),codingTemplateY=new Int32Array(codingTemplateLength);for(k=0;k<codingTemplateLength;k++)codingTemplateX[k]=codingTemplate[k].x,codingTemplateY[k]=codingTemplate[k].y;var referenceTemplate=RefinementTemplates[templateIndex].reference;0===templateIndex&&(referenceTemplate=referenceTemplate.concat([at[1]]));var referenceTemplateLength=referenceTemplate.length,referenceTemplateX=new Int32Array(referenceTemplateLength),referenceTemplateY=new Int32Array(referenceTemplateLength);for(k=0;k<referenceTemplateLength;k++)referenceTemplateX[k]=referenceTemplate[k].x,referenceTemplateY[k]=referenceTemplate[k].y;for(var referenceWidth=referenceBitmap[0].length,referenceHeight=referenceBitmap.length,pseudoPixelContext=RefinementReusedContexts[templateIndex],bitmap=[],decoder=decodingContext.decoder,contexts=decodingContext.contextCache.getContexts("GR"),ltp=0,i=0;i<height;i++){if(prediction&&(ltp^=decoder.readBit(contexts,pseudoPixelContext)))throw new Jbig2Error("prediction is not supported");var row=new Uint8Array(width);bitmap.push(row);for(var j=0;j<width;j++){var i0,j0,contextLabel=0;for(k=0;k<codingTemplateLength;k++)i0=i+codingTemplateY[k],j0=j+codingTemplateX[k],i0<0||j0<0||j0>=width?contextLabel<<=1:contextLabel=contextLabel<<1|bitmap[i0][j0];for(k=0;k<referenceTemplateLength;k++)i0=i+referenceTemplateY[k]-offsetY,j0=j+referenceTemplateX[k]-offsetX,i0<0||i0>=referenceHeight||j0<0||j0>=referenceWidth?contextLabel<<=1:contextLabel=contextLabel<<1|referenceBitmap[i0][j0];var pixel=decoder.readBit(contexts,contextLabel);row[j]=pixel}}return bitmap}function decodeTextRegion(huffman,refinement,width,height,defaultPixelValue,numberOfSymbolInstances,stripSize,inputSymbols,symbolCodeLength,transposed,dsOffset,referenceCorner,combinationOperator,huffmanTables,refinementTemplateIndex,refinementAt,decodingContext,logStripSize,huffmanInput){if(huffman&&refinement)throw new Jbig2Error("refinement with Huffman is not supported");var i,row,bitmap=[];for(i=0;i<height;i++){if(row=new Uint8Array(width),defaultPixelValue)for(var j=0;j<width;j++)row[j]=defaultPixelValue;bitmap.push(row)}var decoder=decodingContext.decoder,contextCache=decodingContext.contextCache,stripT=huffman?-huffmanTables.tableDeltaT.decode(huffmanInput):-decodeInteger(contextCache,"IADT",decoder),firstS=0;for(i=0;i<numberOfSymbolInstances;){stripT+=huffman?huffmanTables.tableDeltaT.decode(huffmanInput):decodeInteger(contextCache,"IADT",decoder);for(var currentS=firstS+=huffman?huffmanTables.tableFirstS.decode(huffmanInput):decodeInteger(contextCache,"IAFS",decoder);;){var currentT=0;stripSize>1&&(currentT=huffman?huffmanInput.readBits(logStripSize):decodeInteger(contextCache,"IAIT",decoder));var t=stripSize*stripT+currentT,symbolId=huffman?huffmanTables.symbolIDTable.decode(huffmanInput):decodeIAID(contextCache,decoder,symbolCodeLength),applyRefinement=refinement&&(huffman?huffmanInput.readBit():decodeInteger(contextCache,"IARI",decoder)),symbolBitmap=inputSymbols[symbolId],symbolWidth=symbolBitmap[0].length,symbolHeight=symbolBitmap.length;if(applyRefinement){var rdw=decodeInteger(contextCache,"IARDW",decoder),rdh=decodeInteger(contextCache,"IARDH",decoder);symbolBitmap=decodeRefinement(symbolWidth+=rdw,symbolHeight+=rdh,refinementTemplateIndex,symbolBitmap,(rdw>>1)+decodeInteger(contextCache,"IARDX",decoder),(rdh>>1)+decodeInteger(contextCache,"IARDY",decoder),!1,refinementAt,decodingContext)}var s2,t2,symbolRow,offsetT=t-(1&referenceCorner?0:symbolHeight-1),offsetS=currentS-(2&referenceCorner?symbolWidth-1:0);if(transposed){for(s2=0;s2<symbolHeight;s2++)if(row=bitmap[offsetS+s2]){symbolRow=symbolBitmap[s2];var maxWidth=Math.min(width-offsetT,symbolWidth);switch(combinationOperator){case 0:for(t2=0;t2<maxWidth;t2++)row[offsetT+t2]|=symbolRow[t2];break;case 2:for(t2=0;t2<maxWidth;t2++)row[offsetT+t2]^=symbolRow[t2];break;default:throw new Jbig2Error("operator ".concat(combinationOperator," is not supported"))}}currentS+=symbolHeight-1}else{for(t2=0;t2<symbolHeight;t2++)if(row=bitmap[offsetT+t2])switch(symbolRow=symbolBitmap[t2],combinationOperator){case 0:for(s2=0;s2<symbolWidth;s2++)row[offsetS+s2]|=symbolRow[s2];break;case 2:for(s2=0;s2<symbolWidth;s2++)row[offsetS+s2]^=symbolRow[s2];break;default:throw new Jbig2Error("operator ".concat(combinationOperator," is not supported"))}currentS+=symbolWidth-1}i++;var deltaS=huffman?huffmanTables.tableDeltaS.decode(huffmanInput):decodeInteger(contextCache,"IADS",decoder);if(null===deltaS)break;currentS+=deltaS+dsOffset}}return bitmap}function readSegmentHeader(data,start){var segmentHeader={};segmentHeader.number=(0,_core_utils.readUint32)(data,start);var flags=data[start+4],segmentType=63&flags;if(!SegmentTypes[segmentType])throw new Jbig2Error("invalid segment type: "+segmentType);segmentHeader.type=segmentType,segmentHeader.typeName=SegmentTypes[segmentType],segmentHeader.deferredNonRetain=!!(128&flags);var pageAssociationFieldSize=!!(64&flags),referredFlags=data[start+5],referredToCount=referredFlags>>5&7,retainBits=[31&referredFlags],position=start+6;if(7===referredFlags){referredToCount=536870911&(0,_core_utils.readUint32)(data,position-1),position+=3;var bytes=referredToCount+7>>3;for(retainBits[0]=data[position++];--bytes>0;)retainBits.push(data[position++])}else if(5===referredFlags||6===referredFlags)throw new Jbig2Error("invalid referred-to flags");segmentHeader.retainBits=retainBits;var referredToSegmentNumberSize=4;segmentHeader.number<=256?referredToSegmentNumberSize=1:segmentHeader.number<=65536&&(referredToSegmentNumberSize=2);var i,ii,referredTo=[];for(i=0;i<referredToCount;i++){var number=void 0;number=1===referredToSegmentNumberSize?data[position]:2===referredToSegmentNumberSize?(0,_core_utils.readUint16)(data,position):(0,_core_utils.readUint32)(data,position),referredTo.push(number),position+=referredToSegmentNumberSize}if(segmentHeader.referredTo=referredTo,pageAssociationFieldSize?(segmentHeader.pageAssociation=(0,_core_utils.readUint32)(data,position),position+=4):segmentHeader.pageAssociation=data[position++],segmentHeader.length=(0,_core_utils.readUint32)(data,position),position+=4,4294967295===segmentHeader.length){if(38!==segmentType)throw new Jbig2Error("invalid unknown segment length");var genericRegionInfo=readRegionSegmentInformation(data,position),genericRegionMmr=!!(1&data[position+RegionSegmentInformationFieldLength]),searchPattern=new Uint8Array(6);for(genericRegionMmr||(searchPattern[0]=255,searchPattern[1]=172),searchPattern[2]=genericRegionInfo.height>>>24&255,searchPattern[3]=genericRegionInfo.height>>16&255,searchPattern[4]=genericRegionInfo.height>>8&255,searchPattern[5]=255&genericRegionInfo.height,i=position,ii=data.length;i<ii;i++){for(var j=0;j<6&&searchPattern[j]===data[i+j];)j++;if(6===j){segmentHeader.length=i+6;break}}if(4294967295===segmentHeader.length)throw new Jbig2Error("segment end was not found")}return segmentHeader.headerEnd=position,segmentHeader}function readSegments(header,data,start,end){for(var segments=[],position=start;position<end;){var segmentHeader=readSegmentHeader(data,position);position=segmentHeader.headerEnd;var segment={header:segmentHeader,data:data};if(header.randomAccess||(segment.start=position,position+=segmentHeader.length,segment.end=position),segments.push(segment),51===segmentHeader.type)break}if(header.randomAccess)for(var i=0,ii=segments.length;i<ii;i++)segments[i].start=position,position+=segments[i].header.length,segments[i].end=position;return segments}function readRegionSegmentInformation(data,start){return{width:(0,_core_utils.readUint32)(data,start),height:(0,_core_utils.readUint32)(data,start+4),x:(0,_core_utils.readUint32)(data,start+8),y:(0,_core_utils.readUint32)(data,start+12),combinationOperator:7&data[start+16]}}var RegionSegmentInformationFieldLength=17;function processSegment(segment,visitor){var args,at,i,atLength,header=segment.header,data=segment.data,position=segment.start,end=segment.end;switch(header.type){case 0:var dictionary={},dictionaryFlags=(0,_core_utils.readUint16)(data,position);if(dictionary.huffman=!!(1&dictionaryFlags),dictionary.refinement=!!(2&dictionaryFlags),dictionary.huffmanDHSelector=dictionaryFlags>>2&3,dictionary.huffmanDWSelector=dictionaryFlags>>4&3,dictionary.bitmapSizeSelector=dictionaryFlags>>6&1,dictionary.aggregationInstancesSelector=dictionaryFlags>>7&1,dictionary.bitmapCodingContextUsed=!!(256&dictionaryFlags),dictionary.bitmapCodingContextRetained=!!(512&dictionaryFlags),dictionary.template=dictionaryFlags>>10&3,dictionary.refinementTemplate=dictionaryFlags>>12&1,position+=2,!dictionary.huffman){for(atLength=0===dictionary.template?4:1,at=[],i=0;i<atLength;i++)at.push({x:(0,_core_utils.readInt8)(data,position),y:(0,_core_utils.readInt8)(data,position+1)}),position+=2;dictionary.at=at}if(dictionary.refinement&&!dictionary.refinementTemplate){for(at=[],i=0;i<2;i++)at.push({x:(0,_core_utils.readInt8)(data,position),y:(0,_core_utils.readInt8)(data,position+1)}),position+=2;dictionary.refinementAt=at}dictionary.numberOfExportedSymbols=(0,_core_utils.readUint32)(data,position),position+=4,dictionary.numberOfNewSymbols=(0,_core_utils.readUint32)(data,position),position+=4,args=[dictionary,header.number,header.referredTo,data,position,end];break;case 6:case 7:var textRegion={};textRegion.info=readRegionSegmentInformation(data,position),position+=RegionSegmentInformationFieldLength;var textRegionSegmentFlags=(0,_core_utils.readUint16)(data,position);if(position+=2,textRegion.huffman=!!(1&textRegionSegmentFlags),textRegion.refinement=!!(2&textRegionSegmentFlags),textRegion.logStripSize=textRegionSegmentFlags>>2&3,textRegion.stripSize=1<<textRegion.logStripSize,textRegion.referenceCorner=textRegionSegmentFlags>>4&3,textRegion.transposed=!!(64&textRegionSegmentFlags),textRegion.combinationOperator=textRegionSegmentFlags>>7&3,textRegion.defaultPixelValue=textRegionSegmentFlags>>9&1,textRegion.dsOffset=textRegionSegmentFlags<<17>>27,textRegion.refinementTemplate=textRegionSegmentFlags>>15&1,textRegion.huffman){var textRegionHuffmanFlags=(0,_core_utils.readUint16)(data,position);position+=2,textRegion.huffmanFS=3&textRegionHuffmanFlags,textRegion.huffmanDS=textRegionHuffmanFlags>>2&3,textRegion.huffmanDT=textRegionHuffmanFlags>>4&3,textRegion.huffmanRefinementDW=textRegionHuffmanFlags>>6&3,textRegion.huffmanRefinementDH=textRegionHuffmanFlags>>8&3,textRegion.huffmanRefinementDX=textRegionHuffmanFlags>>10&3,textRegion.huffmanRefinementDY=textRegionHuffmanFlags>>12&3,textRegion.huffmanRefinementSizeSelector=!!(16384&textRegionHuffmanFlags)}if(textRegion.refinement&&!textRegion.refinementTemplate){for(at=[],i=0;i<2;i++)at.push({x:(0,_core_utils.readInt8)(data,position),y:(0,_core_utils.readInt8)(data,position+1)}),position+=2;textRegion.refinementAt=at}textRegion.numberOfSymbolInstances=(0,_core_utils.readUint32)(data,position),position+=4,args=[textRegion,header.referredTo,data,position,end];break;case 16:var patternDictionary={},patternDictionaryFlags=data[position++];patternDictionary.mmr=!!(1&patternDictionaryFlags),patternDictionary.template=patternDictionaryFlags>>1&3,patternDictionary.patternWidth=data[position++],patternDictionary.patternHeight=data[position++],patternDictionary.maxPatternIndex=(0,_core_utils.readUint32)(data,position),position+=4,args=[patternDictionary,header.number,data,position,end];break;case 22:case 23:var halftoneRegion={};halftoneRegion.info=readRegionSegmentInformation(data,position),position+=RegionSegmentInformationFieldLength;var halftoneRegionFlags=data[position++];halftoneRegion.mmr=!!(1&halftoneRegionFlags),halftoneRegion.template=halftoneRegionFlags>>1&3,halftoneRegion.enableSkip=!!(8&halftoneRegionFlags),halftoneRegion.combinationOperator=halftoneRegionFlags>>4&7,halftoneRegion.defaultPixelValue=halftoneRegionFlags>>7&1,halftoneRegion.gridWidth=(0,_core_utils.readUint32)(data,position),position+=4,halftoneRegion.gridHeight=(0,_core_utils.readUint32)(data,position),position+=4,halftoneRegion.gridOffsetX=4294967295&(0,_core_utils.readUint32)(data,position),position+=4,halftoneRegion.gridOffsetY=4294967295&(0,_core_utils.readUint32)(data,position),position+=4,halftoneRegion.gridVectorX=(0,_core_utils.readUint16)(data,position),position+=2,halftoneRegion.gridVectorY=(0,_core_utils.readUint16)(data,position),position+=2,args=[halftoneRegion,header.referredTo,data,position,end];break;case 38:case 39:var genericRegion={};genericRegion.info=readRegionSegmentInformation(data,position),position+=RegionSegmentInformationFieldLength;var genericRegionSegmentFlags=data[position++];if(genericRegion.mmr=!!(1&genericRegionSegmentFlags),genericRegion.template=genericRegionSegmentFlags>>1&3,genericRegion.prediction=!!(8&genericRegionSegmentFlags),!genericRegion.mmr){for(atLength=0===genericRegion.template?4:1,at=[],i=0;i<atLength;i++)at.push({x:(0,_core_utils.readInt8)(data,position),y:(0,_core_utils.readInt8)(data,position+1)}),position+=2;genericRegion.at=at}args=[genericRegion,data,position,end];break;case 48:var pageInfo={width:(0,_core_utils.readUint32)(data,position),height:(0,_core_utils.readUint32)(data,position+4),resolutionX:(0,_core_utils.readUint32)(data,position+8),resolutionY:(0,_core_utils.readUint32)(data,position+12)};4294967295===pageInfo.height&&delete pageInfo.height;var pageSegmentFlags=data[position+16];(0,_core_utils.readUint16)(data,position+17),pageInfo.lossless=!!(1&pageSegmentFlags),pageInfo.refinement=!!(2&pageSegmentFlags),pageInfo.defaultPixelValue=pageSegmentFlags>>2&1,pageInfo.combinationOperator=pageSegmentFlags>>3&3,pageInfo.requiresBuffer=!!(32&pageSegmentFlags),pageInfo.combinationOperatorOverride=!!(64&pageSegmentFlags),args=[pageInfo];break;case 49:case 50:case 51:case 62:break;case 53:args=[header.number,data,position,end];break;default:throw new Jbig2Error("segment type ".concat(header.typeName,"(").concat(header.type,")")+" is not implemented")}var callbackName="on"+header.typeName;callbackName in visitor&&visitor[callbackName].apply(visitor,args)}function processSegments(segments,visitor){for(var i=0,ii=segments.length;i<ii;i++)processSegment(segments[i],visitor)}function SimpleSegmentVisitor(){}function HuffmanLine(lineData){2===lineData.length?(this.isOOB=!0,this.rangeLow=0,this.prefixLength=lineData[0],this.rangeLength=0,this.prefixCode=lineData[1],this.isLowerRange=!1):(this.isOOB=!1,this.rangeLow=lineData[0],this.prefixLength=lineData[1],this.rangeLength=lineData[2],this.prefixCode=lineData[3],this.isLowerRange="lower"===lineData[4])}function HuffmanTreeNode(line){this.children=[],line?(this.isLeaf=!0,this.rangeLength=line.rangeLength,this.rangeLow=line.rangeLow,this.isLowerRange=line.isLowerRange,this.isOOB=line.isOOB):this.isLeaf=!1}function HuffmanTable(lines,prefixCodesDone){prefixCodesDone||this.assignPrefixCodes(lines),this.rootNode=new HuffmanTreeNode(null);for(var i=0,ii=lines.length;i<ii;i++){var line=lines[i];line.prefixLength>0&&this.rootNode.buildTree(line,line.prefixLength-1)}}SimpleSegmentVisitor.prototype={onPageInformation:function(info){this.currentPageInfo=info;var rowSize=info.width+7>>3,buffer=new Uint8ClampedArray(rowSize*info.height);if(info.defaultPixelValue)for(var i=0,ii=buffer.length;i<ii;i++)buffer[i]=255;this.buffer=buffer},drawBitmap:function(regionInfo,bitmap){var i,j,mask,offset,pageInfo=this.currentPageInfo,width=regionInfo.width,height=regionInfo.height,rowSize=pageInfo.width+7>>3,combinationOperator=pageInfo.combinationOperatorOverride?regionInfo.combinationOperator:pageInfo.combinationOperator,buffer=this.buffer,mask0=128>>(7&regionInfo.x),offset0=regionInfo.y*rowSize+(regionInfo.x>>3);switch(combinationOperator){case 0:for(i=0;i<height;i++){for(mask=mask0,offset=offset0,j=0;j<width;j++)bitmap[i][j]&&(buffer[offset]|=mask),(mask>>=1)||(mask=128,offset++);offset0+=rowSize}break;case 2:for(i=0;i<height;i++){for(mask=mask0,offset=offset0,j=0;j<width;j++)bitmap[i][j]&&(buffer[offset]^=mask),(mask>>=1)||(mask=128,offset++);offset0+=rowSize}break;default:throw new Jbig2Error("operator ".concat(combinationOperator," is not supported"))}},onImmediateGenericRegion:function(region,data,start,end){var regionInfo=region.info,decodingContext=new DecodingContext(data,start,end),bitmap=decodeBitmap(region.mmr,regionInfo.width,regionInfo.height,region.template,region.prediction,null,region.at,decodingContext);this.drawBitmap(regionInfo,bitmap)},onImmediateLosslessGenericRegion:function(){this.onImmediateGenericRegion.apply(this,arguments)},onSymbolDictionary:function(dictionary,currentSegment,referredSegments,data,start,end){var huffmanTables,huffmanInput;dictionary.huffman&&(huffmanTables=function(dictionary,referredTo,customTables){var tableDeltaHeight,tableDeltaWidth,tableBitmapSize,tableAggregateInstances,customIndex=0;switch(dictionary.huffmanDHSelector){case 0:case 1:tableDeltaHeight=getStandardTable(dictionary.huffmanDHSelector+4);break;case 3:tableDeltaHeight=getCustomHuffmanTable(customIndex,referredTo,customTables),customIndex++;break;default:throw new Jbig2Error("invalid Huffman DH selector")}switch(dictionary.huffmanDWSelector){case 0:case 1:tableDeltaWidth=getStandardTable(dictionary.huffmanDWSelector+2);break;case 3:tableDeltaWidth=getCustomHuffmanTable(customIndex,referredTo,customTables),customIndex++;break;default:throw new Jbig2Error("invalid Huffman DW selector")}return dictionary.bitmapSizeSelector?(tableBitmapSize=getCustomHuffmanTable(customIndex,referredTo,customTables),customIndex++):tableBitmapSize=getStandardTable(1),tableAggregateInstances=dictionary.aggregationInstancesSelector?getCustomHuffmanTable(customIndex,referredTo,customTables):getStandardTable(1),{tableDeltaHeight:tableDeltaHeight,tableDeltaWidth:tableDeltaWidth,tableBitmapSize:tableBitmapSize,tableAggregateInstances:tableAggregateInstances}}(dictionary,referredSegments,this.customTables),huffmanInput=new Reader(data,start,end));var symbols=this.symbols;symbols||(this.symbols=symbols={});for(var inputSymbols=[],i=0,ii=referredSegments.length;i<ii;i++){var referredSymbols=symbols[referredSegments[i]];referredSymbols&&(inputSymbols=inputSymbols.concat(referredSymbols))}var decodingContext=new DecodingContext(data,start,end);symbols[currentSegment]=function(huffman,refinement,symbols,numberOfNewSymbols,numberOfExportedSymbols,huffmanTables,templateIndex,at,refinementTemplateIndex,refinementAt,decodingContext,huffmanInput){if(huffman&&refinement)throw new Jbig2Error("symbol refinement with Huffman is not supported");var tableB1,symbolWidths,newSymbols=[],currentHeight=0,symbolCodeLength=(0,_core_utils.log2)(symbols.length+numberOfNewSymbols),decoder=decodingContext.decoder,contextCache=decodingContext.contextCache;for(huffman&&(tableB1=getStandardTable(1),symbolWidths=[],symbolCodeLength=Math.max(symbolCodeLength,1));newSymbols.length<numberOfNewSymbols;){currentHeight+=huffman?huffmanTables.tableDeltaHeight.decode(huffmanInput):decodeInteger(contextCache,"IADH",decoder);for(var currentWidth=0,totalWidth=0,firstSymbol=huffman?symbolWidths.length:0;;){var bitmap,deltaWidth=huffman?huffmanTables.tableDeltaWidth.decode(huffmanInput):decodeInteger(contextCache,"IADW",decoder);if(null===deltaWidth)break;if(totalWidth+=currentWidth+=deltaWidth,refinement){var numberOfInstances=decodeInteger(contextCache,"IAAI",decoder);if(numberOfInstances>1)bitmap=decodeTextRegion(huffman,refinement,currentWidth,currentHeight,0,numberOfInstances,1,symbols.concat(newSymbols),symbolCodeLength,0,0,1,0,huffmanTables,refinementTemplateIndex,refinementAt,decodingContext,0,huffmanInput);else{var symbolId=decodeIAID(contextCache,decoder,symbolCodeLength),rdx=decodeInteger(contextCache,"IARDX",decoder),rdy=decodeInteger(contextCache,"IARDY",decoder);bitmap=decodeRefinement(currentWidth,currentHeight,refinementTemplateIndex,symbolId<symbols.length?symbols[symbolId]:newSymbols[symbolId-symbols.length],rdx,rdy,!1,refinementAt,decodingContext)}newSymbols.push(bitmap)}else huffman?symbolWidths.push(currentWidth):(bitmap=decodeBitmap(!1,currentWidth,currentHeight,templateIndex,!1,null,at,decodingContext),newSymbols.push(bitmap))}if(huffman&&!refinement){var bitmapSize=huffmanTables.tableBitmapSize.decode(huffmanInput);huffmanInput.byteAlign();var collectiveBitmap=void 0;if(0===bitmapSize)collectiveBitmap=readUncompressedBitmap(huffmanInput,totalWidth,currentHeight);else{var originalEnd=huffmanInput.end,bitmapEnd=huffmanInput.position+bitmapSize;huffmanInput.end=bitmapEnd,collectiveBitmap=decodeMMRBitmap(huffmanInput,totalWidth,currentHeight,!1),huffmanInput.end=originalEnd,huffmanInput.position=bitmapEnd}var numberOfSymbolsDecoded=symbolWidths.length;if(firstSymbol===numberOfSymbolsDecoded-1)newSymbols.push(collectiveBitmap);else{var _i14=void 0,y=void 0,xMin=0,xMax=void 0,symbolBitmap=void 0;for(_i14=firstSymbol;_i14<numberOfSymbolsDecoded;_i14++){for(xMax=xMin+symbolWidths[_i14],symbolBitmap=[],y=0;y<currentHeight;y++)symbolBitmap.push(collectiveBitmap[y].subarray(xMin,xMax));newSymbols.push(symbolBitmap),xMin=xMax}}}}for(var exportedSymbols=[],flags=[],currentFlag=!1,totalSymbolsLength=symbols.length+numberOfNewSymbols;flags.length<totalSymbolsLength;){for(var runLength=huffman?tableB1.decode(huffmanInput):decodeInteger(contextCache,"IAEX",decoder);runLength--;)flags.push(currentFlag);currentFlag=!currentFlag}for(var i=0,ii=symbols.length;i<ii;i++)flags[i]&&exportedSymbols.push(symbols[i]);for(var j=0;j<numberOfNewSymbols;i++,j++)flags[i]&&exportedSymbols.push(newSymbols[j]);return exportedSymbols}(dictionary.huffman,dictionary.refinement,inputSymbols,dictionary.numberOfNewSymbols,dictionary.numberOfExportedSymbols,huffmanTables,dictionary.template,dictionary.at,dictionary.refinementTemplate,dictionary.refinementAt,decodingContext,huffmanInput)},onImmediateTextRegion:function(region,referredSegments,data,start,end){for(var huffmanTables,huffmanInput,regionInfo=region.info,symbols=this.symbols,inputSymbols=[],i=0,ii=referredSegments.length;i<ii;i++){var referredSymbols=symbols[referredSegments[i]];referredSymbols&&(inputSymbols=inputSymbols.concat(referredSymbols))}var symbolCodeLength=(0,_core_utils.log2)(inputSymbols.length);region.huffman&&(huffmanInput=new Reader(data,start,end),huffmanTables=function(textRegion,referredTo,customTables,numberOfSymbols,reader){for(var codes=[],i=0;i<=34;i++){var codeLength=reader.readBits(4);codes.push(new HuffmanLine([i,codeLength,0,0]))}var runCodesTable=new HuffmanTable(codes,!1);codes.length=0;for(var _i16=0;_i16<numberOfSymbols;){var _codeLength=runCodesTable.decode(reader);if(_codeLength>=32){var repeatedLength=void 0,numberOfRepeats=void 0,j=void 0;switch(_codeLength){case 32:if(0===_i16)throw new Jbig2Error("no previous value in symbol ID table");numberOfRepeats=reader.readBits(2)+3,repeatedLength=codes[_i16-1].prefixLength;break;case 33:numberOfRepeats=reader.readBits(3)+3,repeatedLength=0;break;case 34:numberOfRepeats=reader.readBits(7)+11,repeatedLength=0;break;default:throw new Jbig2Error("invalid code length in symbol ID table")}for(j=0;j<numberOfRepeats;j++)codes.push(new HuffmanLine([_i16,repeatedLength,0,0])),_i16++}else codes.push(new HuffmanLine([_i16,_codeLength,0,0])),_i16++}reader.byteAlign();var tableFirstS,tableDeltaS,tableDeltaT,symbolIDTable=new HuffmanTable(codes,!1),customIndex=0;switch(textRegion.huffmanFS){case 0:case 1:tableFirstS=getStandardTable(textRegion.huffmanFS+6);break;case 3:tableFirstS=getCustomHuffmanTable(customIndex,referredTo,customTables),customIndex++;break;default:throw new Jbig2Error("invalid Huffman FS selector")}switch(textRegion.huffmanDS){case 0:case 1:case 2:tableDeltaS=getStandardTable(textRegion.huffmanDS+8);break;case 3:tableDeltaS=getCustomHuffmanTable(customIndex,referredTo,customTables),customIndex++;break;default:throw new Jbig2Error("invalid Huffman DS selector")}switch(textRegion.huffmanDT){case 0:case 1:case 2:tableDeltaT=getStandardTable(textRegion.huffmanDT+11);break;case 3:tableDeltaT=getCustomHuffmanTable(customIndex,referredTo,customTables),customIndex++;break;default:throw new Jbig2Error("invalid Huffman DT selector")}if(textRegion.refinement)throw new Jbig2Error("refinement with Huffman is not supported");return{symbolIDTable:symbolIDTable,tableFirstS:tableFirstS,tableDeltaS:tableDeltaS,tableDeltaT:tableDeltaT}}(region,referredSegments,this.customTables,inputSymbols.length,huffmanInput));var decodingContext=new DecodingContext(data,start,end),bitmap=decodeTextRegion(region.huffman,region.refinement,regionInfo.width,regionInfo.height,region.defaultPixelValue,region.numberOfSymbolInstances,region.stripSize,inputSymbols,symbolCodeLength,region.transposed,region.dsOffset,region.referenceCorner,region.combinationOperator,huffmanTables,region.refinementTemplate,region.refinementAt,decodingContext,region.logStripSize,huffmanInput);this.drawBitmap(regionInfo,bitmap)},onImmediateLosslessTextRegion:function(){this.onImmediateTextRegion.apply(this,arguments)},onPatternDictionary:function(dictionary,currentSegment,data,start,end){var patterns=this.patterns;patterns||(this.patterns=patterns={});var decodingContext=new DecodingContext(data,start,end);patterns[currentSegment]=function(mmr,patternWidth,patternHeight,maxPatternIndex,template,decodingContext){var at=[];mmr||(at.push({x:-patternWidth,y:0}),0===template&&(at.push({x:-3,y:-1}),at.push({x:2,y:-2}),at.push({x:-2,y:-2})));for(var collectiveBitmap=decodeBitmap(mmr,(maxPatternIndex+1)*patternWidth,patternHeight,template,!1,null,at,decodingContext),patterns=[],i=0;i<=maxPatternIndex;i++){for(var patternBitmap=[],xMin=patternWidth*i,xMax=xMin+patternWidth,y=0;y<patternHeight;y++)patternBitmap.push(collectiveBitmap[y].subarray(xMin,xMax));patterns.push(patternBitmap)}return patterns}(dictionary.mmr,dictionary.patternWidth,dictionary.patternHeight,dictionary.maxPatternIndex,dictionary.template,decodingContext)},onImmediateHalftoneRegion:function(region,referredSegments,data,start,end){var patterns=this.patterns[referredSegments[0]],regionInfo=region.info,decodingContext=new DecodingContext(data,start,end),bitmap=function(mmr,patterns,template,regionWidth,regionHeight,defaultPixelValue,enableSkip,combinationOperator,gridWidth,gridHeight,gridOffsetX,gridOffsetY,gridVectorX,gridVectorY,decodingContext){if(enableSkip)throw new Jbig2Error("skip is not supported");if(0!==combinationOperator)throw new Jbig2Error("operator "+combinationOperator+" is not supported in halftone region");var i,j,row,regionBitmap=[];for(i=0;i<regionHeight;i++){if(row=new Uint8Array(regionWidth),defaultPixelValue)for(j=0;j<regionWidth;j++)row[j]=defaultPixelValue;regionBitmap.push(row)}var numberOfPatterns=patterns.length,pattern0=patterns[0],patternWidth=pattern0[0].length,patternHeight=pattern0.length,bitsPerValue=(0,_core_utils.log2)(numberOfPatterns),at=[];mmr||(at.push({x:template<=1?3:2,y:-1}),0===template&&(at.push({x:-3,y:-1}),at.push({x:2,y:-2}),at.push({x:-2,y:-2})));var mmrInput,bitmap,mg,ng,bit,patternIndex,patternBitmap,x,y,patternRow,regionRow,grayScaleBitPlanes=[];for(mmr&&(mmrInput=new Reader(decodingContext.data,decodingContext.start,decodingContext.end)),i=bitsPerValue-1;i>=0;i--)bitmap=mmr?decodeMMRBitmap(mmrInput,gridWidth,gridHeight,!0):decodeBitmap(!1,gridWidth,gridHeight,template,!1,null,at,decodingContext),grayScaleBitPlanes[i]=bitmap;for(mg=0;mg<gridHeight;mg++)for(ng=0;ng<gridWidth;ng++){for(bit=0,patternIndex=0,j=bitsPerValue-1;j>=0;j--)patternIndex|=(bit=grayScaleBitPlanes[j][mg][ng]^bit)<<j;if(patternBitmap=patterns[patternIndex],y=gridOffsetY+mg*gridVectorX-ng*gridVectorY>>8,(x=gridOffsetX+mg*gridVectorY+ng*gridVectorX>>8)>=0&&x+patternWidth<=regionWidth&&y>=0&&y+patternHeight<=regionHeight)for(i=0;i<patternHeight;i++)for(regionRow=regionBitmap[y+i],patternRow=patternBitmap[i],j=0;j<patternWidth;j++)regionRow[x+j]|=patternRow[j];else{var regionX=void 0,regionY=void 0;for(i=0;i<patternHeight;i++)if(!((regionY=y+i)<0||regionY>=regionHeight))for(regionRow=regionBitmap[regionY],patternRow=patternBitmap[i],j=0;j<patternWidth;j++)(regionX=x+j)>=0&&regionX<regionWidth&&(regionRow[regionX]|=patternRow[j])}}return regionBitmap}(region.mmr,patterns,region.template,regionInfo.width,regionInfo.height,region.defaultPixelValue,region.enableSkip,region.combinationOperator,region.gridWidth,region.gridHeight,region.gridOffsetX,region.gridOffsetY,region.gridVectorX,region.gridVectorY,decodingContext);this.drawBitmap(regionInfo,bitmap)},onImmediateLosslessHalftoneRegion:function(){this.onImmediateHalftoneRegion.apply(this,arguments)},onTables:function(currentSegment,data,start,end){var customTables=this.customTables;customTables||(this.customTables=customTables={}),customTables[currentSegment]=function(data,start,end){var prefixLength,rangeLength,flags=data[start],lowestValue=4294967295&(0,_core_utils.readUint32)(data,start+1),highestValue=4294967295&(0,_core_utils.readUint32)(data,start+5),reader=new Reader(data,start+9,end),prefixSizeBits=1+(flags>>1&7),rangeSizeBits=1+(flags>>4&7),lines=[],currentRangeLow=lowestValue;do{prefixLength=reader.readBits(prefixSizeBits),rangeLength=reader.readBits(rangeSizeBits),lines.push(new HuffmanLine([currentRangeLow,prefixLength,rangeLength,0])),currentRangeLow+=1<<rangeLength}while(currentRangeLow<highestValue);return prefixLength=reader.readBits(prefixSizeBits),lines.push(new HuffmanLine([lowestValue-1,prefixLength,32,0,"lower"])),prefixLength=reader.readBits(prefixSizeBits),lines.push(new HuffmanLine([highestValue,prefixLength,32,0])),1&flags&&(prefixLength=reader.readBits(prefixSizeBits),lines.push(new HuffmanLine([prefixLength,0]))),new HuffmanTable(lines,!1)}(data,start,end)}},HuffmanTreeNode.prototype={buildTree:function(line,shift){var bit=line.prefixCode>>shift&1;if(shift<=0)this.children[bit]=new HuffmanTreeNode(line);else{var node=this.children[bit];node||(this.children[bit]=node=new HuffmanTreeNode(null)),node.buildTree(line,shift-1)}},decodeNode:function(reader){if(this.isLeaf){if(this.isOOB)return null;var htOffset=reader.readBits(this.rangeLength);return this.rangeLow+(this.isLowerRange?-htOffset:htOffset)}var node=this.children[reader.readBit()];if(!node)throw new Jbig2Error("invalid Huffman data");return node.decodeNode(reader)}},HuffmanTable.prototype={decode:function(reader){return this.rootNode.decodeNode(reader)},assignPrefixCodes:function(lines){for(var linesLength=lines.length,prefixLengthMax=0,i=0;i<linesLength;i++)prefixLengthMax=Math.max(prefixLengthMax,lines[i].prefixLength);for(var histogram=new Uint32Array(prefixLengthMax+1),_i15=0;_i15<linesLength;_i15++)histogram[lines[_i15].prefixLength]++;var currentCode,currentTemp,line,currentLength=1,firstCode=0;for(histogram[0]=0;currentLength<=prefixLengthMax;){for(currentCode=firstCode=firstCode+histogram[currentLength-1]<<1,currentTemp=0;currentTemp<linesLength;)(line=lines[currentTemp]).prefixLength===currentLength&&(line.prefixCode=currentCode,currentCode++),currentTemp++;currentLength++}}};var standardTablesCache={};function getStandardTable(number){var lines,table=standardTablesCache[number];if(table)return table;switch(number){case 1:lines=[[0,1,4,0],[16,2,8,2],[272,3,16,6],[65808,3,32,7]];break;case 2:lines=[[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[75,6,32,62],[6,63]];break;case 3:lines=[[-256,8,8,254],[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[-257,8,32,255,"lower"],[75,7,32,126],[6,62]];break;case 4:lines=[[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[76,5,32,31]];break;case 5:lines=[[-255,7,8,126],[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[-256,7,32,127,"lower"],[76,6,32,62]];break;case 6:lines=[[-2048,5,10,28],[-1024,4,9,8],[-512,4,8,9],[-256,4,7,10],[-128,5,6,29],[-64,5,5,30],[-32,4,5,11],[0,2,7,0],[128,3,7,2],[256,3,8,3],[512,4,9,12],[1024,4,10,13],[-2049,6,32,62,"lower"],[2048,6,32,63]];break;case 7:lines=[[-1024,4,9,8],[-512,3,8,0],[-256,4,7,9],[-128,5,6,26],[-64,5,5,27],[-32,4,5,10],[0,4,5,11],[32,5,5,28],[64,5,6,29],[128,4,7,12],[256,3,8,1],[512,3,9,2],[1024,3,10,3],[-1025,5,32,30,"lower"],[2048,5,32,31]];break;case 8:lines=[[-15,8,3,252],[-7,9,1,508],[-5,8,1,253],[-3,9,0,509],[-2,7,0,124],[-1,4,0,10],[0,2,1,0],[2,5,0,26],[3,6,0,58],[4,3,4,4],[20,6,1,59],[22,4,4,11],[38,4,5,12],[70,5,6,27],[134,5,7,28],[262,6,7,60],[390,7,8,125],[646,6,10,61],[-16,9,32,510,"lower"],[1670,9,32,511],[2,1]];break;case 9:lines=[[-31,8,4,252],[-15,9,2,508],[-11,8,2,253],[-7,9,1,509],[-5,7,1,124],[-3,4,1,10],[-1,3,1,2],[1,3,1,3],[3,5,1,26],[5,6,1,58],[7,3,5,4],[39,6,2,59],[43,4,5,11],[75,4,6,12],[139,5,7,27],[267,5,8,28],[523,6,8,60],[779,7,9,125],[1291,6,11,61],[-32,9,32,510,"lower"],[3339,9,32,511],[2,0]];break;case 10:lines=[[-21,7,4,122],[-5,8,0,252],[-4,7,0,123],[-3,5,0,24],[-2,2,2,0],[2,5,0,25],[3,6,0,54],[4,7,0,124],[5,8,0,253],[6,2,6,1],[70,5,5,26],[102,6,5,55],[134,6,6,56],[198,6,7,57],[326,6,8,58],[582,6,9,59],[1094,6,10,60],[2118,7,11,125],[-22,8,32,254,"lower"],[4166,8,32,255],[2,2]];break;case 11:lines=[[1,1,0,0],[2,2,1,2],[4,4,0,12],[5,4,1,13],[7,5,1,28],[9,5,2,29],[13,6,2,60],[17,7,2,122],[21,7,3,123],[29,7,4,124],[45,7,5,125],[77,7,6,126],[141,7,32,127]];break;case 12:lines=[[1,1,0,0],[2,2,0,2],[3,3,1,6],[5,5,0,28],[6,5,1,29],[8,6,1,60],[10,7,0,122],[11,7,1,123],[13,7,2,124],[17,7,3,125],[25,7,4,126],[41,8,5,254],[73,8,32,255]];break;case 13:lines=[[1,1,0,0],[2,3,0,4],[3,4,0,12],[4,5,0,28],[5,4,1,13],[7,3,3,5],[15,6,1,58],[17,6,2,59],[21,6,3,60],[29,6,4,61],[45,6,5,62],[77,7,6,126],[141,7,32,127]];break;case 14:lines=[[-2,3,0,4],[-1,3,0,5],[0,1,0,0],[1,3,0,6],[2,3,0,7]];break;case 15:lines=[[-24,7,4,124],[-8,6,2,60],[-4,5,1,28],[-2,4,0,12],[-1,3,0,4],[0,1,0,0],[1,3,0,5],[2,4,0,13],[3,5,1,29],[5,6,2,61],[9,7,4,125],[-25,7,32,126,"lower"],[25,7,32,127]];break;default:throw new Jbig2Error("standard table B.".concat(number," does not exist"))}for(var i=0,ii=lines.length;i<ii;i++)lines[i]=new HuffmanLine(lines[i]);return table=new HuffmanTable(lines,!0),standardTablesCache[number]=table,table}function Reader(data,start,end){this.data=data,this.start=start,this.end=end,this.position=start,this.shift=-1,this.currentByte=0}function getCustomHuffmanTable(index,referredTo,customTables){for(var currentIndex=0,i=0,ii=referredTo.length;i<ii;i++){var table=customTables[referredTo[i]];if(table){if(index===currentIndex)return table;currentIndex++}}throw new Jbig2Error("can't find custom Huffman table")}function readUncompressedBitmap(reader,width,height){for(var bitmap=[],y=0;y<height;y++){var row=new Uint8Array(width);bitmap.push(row);for(var x=0;x<width;x++)row[x]=reader.readBit();reader.byteAlign()}return bitmap}function decodeMMRBitmap(input,width,height,endOfBlock){for(var currentByte,params={K:-1,Columns:width,Rows:height,BlackIs1:!0,EndOfBlock:endOfBlock},decoder=new _ccitt.CCITTFaxDecoder(input,params),bitmap=[],eof=!1,y=0;y<height;y++){var row=new Uint8Array(width);bitmap.push(row);for(var shift=-1,x=0;x<width;x++)shift<0&&(-1===(currentByte=decoder.readNextChar())&&(currentByte=0,eof=!0),shift=7),row[x]=currentByte>>shift&1,shift--}if(endOfBlock&&!eof)for(var i=0;i<5&&-1!==decoder.readNextChar();i++);return bitmap}function Jbig2Image(){}return Reader.prototype={readBit:function(){if(this.shift<0){if(this.position>=this.end)throw new Jbig2Error("end of data while reading bit");this.currentByte=this.data[this.position++],this.shift=7}var bit=this.currentByte>>this.shift&1;return this.shift--,bit},readBits:function(numBits){var i,result=0;for(i=numBits-1;i>=0;i--)result|=this.readBit()<<i;return result},byteAlign:function(){this.shift=-1},next:function(){return this.position>=this.end?-1:this.data[this.position++]}},Jbig2Image.prototype={parseChunks:function(chunks){return function(chunks){for(var visitor=new SimpleSegmentVisitor,i=0,ii=chunks.length;i<ii;i++){var chunk=chunks[i];processSegments(readSegments({},chunk.data,chunk.start,chunk.end),visitor)}return visitor.buffer}(chunks)},parse:function(data){var _parseJbig=function(data){var end=data.length,position=0;if(151!==data[position]||74!==data[position+1]||66!==data[position+2]||50!==data[position+3]||13!==data[position+4]||10!==data[position+5]||26!==data[position+6]||10!==data[position+7])throw new Jbig2Error("parseJbig2 - invalid header.");var header=Object.create(null);position+=8;var flags=data[position++];header.randomAccess=!(1&flags),2&flags||(header.numberOfPages=(0,_core_utils.readUint32)(data,position),position+=4);var segments=readSegments(header,data,position,end),visitor=new SimpleSegmentVisitor;processSegments(segments,visitor);for(var _visitor$currentPageI=visitor.currentPageInfo,width=_visitor$currentPageI.width,height=_visitor$currentPageI.height,bitPacked=visitor.buffer,imgData=new Uint8ClampedArray(width*height),q=0,k=0,i=0;i<height;i++)for(var mask=0,buffer=void 0,j=0;j<width;j++)mask||(mask=128,buffer=bitPacked[k++]),imgData[q++]=buffer&mask?0:255,mask>>=1;return{imgData:imgData,width:width,height:height}}(data),imgData=_parseJbig.imgData,width=_parseJbig.width,height=_parseJbig.height;return this.width=width,this.height=height,imgData}},Jbig2Image}();exports.Jbig2Image=Jbig2Image},function(__unused_webpack_module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.ArithmeticDecoder=void 0;var QeTable=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}],ArithmeticDecoder=function(){function ArithmeticDecoder(data,start,end){_classCallCheck(this,ArithmeticDecoder),this.data=data,this.bp=start,this.dataEnd=end,this.chigh=data[start],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}return _createClass(ArithmeticDecoder,[{key:"byteIn",value:function(){var data=this.data,bp=this.bp;255===data[bp]?data[bp+1]>143?(this.clow+=65280,this.ct=8):(bp++,this.clow+=data[bp]<<9,this.ct=7,this.bp=bp):(bp++,this.clow+=bp<this.dataEnd?data[bp]<<8:65280,this.ct=8,this.bp=bp),this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)}},{key:"readBit",value:function(contexts,pos){var d,cx_index=contexts[pos]>>1,cx_mps=1&contexts[pos],qeTableIcx=QeTable[cx_index],qeIcx=qeTableIcx.qe,a=this.a-qeIcx;if(this.chigh<qeIcx)a<qeIcx?(a=qeIcx,d=cx_mps,cx_index=qeTableIcx.nmps):(a=qeIcx,d=1^cx_mps,1===qeTableIcx.switchFlag&&(cx_mps=d),cx_index=qeTableIcx.nlps);else{if(this.chigh-=qeIcx,0!=(32768&a))return this.a=a,cx_mps;a<qeIcx?(d=1^cx_mps,1===qeTableIcx.switchFlag&&(cx_mps=d),cx_index=qeTableIcx.nlps):(d=cx_mps,cx_index=qeTableIcx.nmps)}do{0===this.ct&&this.byteIn(),a<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(0==(32768&a));return this.a=a,contexts[pos]=cx_index<<1|cx_mps,d}}]),ArithmeticDecoder}();exports.ArithmeticDecoder=ArithmeticDecoder},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.JpegStream=void 0;var _stream=__w_pdfjs_require__(12),_primitives=__w_pdfjs_require__(5),_jpg=__w_pdfjs_require__(19),_util=__w_pdfjs_require__(2),JpegStream=function(){function JpegStream(stream,maybeLength,dict,params){for(var ch;-1!==(ch=stream.getByte());)if(255===ch){stream.skip(-1);break}this.stream=stream,this.maybeLength=maybeLength,this.dict=dict,this.params=params,_stream.DecodeStream.call(this,maybeLength)}return JpegStream.prototype=Object.create(_stream.DecodeStream.prototype),Object.defineProperty(JpegStream.prototype,"bytes",{get:function(){return(0,_util.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))},configurable:!0}),JpegStream.prototype.ensureBuffer=function(requested){},JpegStream.prototype.readBlock=function(){if(!this.eof){var jpegOptions={decodeTransform:void 0,colorTransform:void 0},decodeArr=this.dict.getArray("Decode","D");if(this.forceRGB&&Array.isArray(decodeArr)){for(var bitsPerComponent=this.dict.get("BitsPerComponent")||8,decodeArrLength=decodeArr.length,transform=new Int32Array(decodeArrLength),transformNeeded=!1,maxValue=(1<<bitsPerComponent)-1,i=0;i<decodeArrLength;i+=2)transform[i]=256*(decodeArr[i+1]-decodeArr[i])|0,transform[i+1]=decodeArr[i]*maxValue|0,256===transform[i]&&0===transform[i+1]||(transformNeeded=!0);transformNeeded&&(jpegOptions.decodeTransform=transform)}if((0,_primitives.isDict)(this.params)){var colorTransform=this.params.get("ColorTransform");Number.isInteger(colorTransform)&&(jpegOptions.colorTransform=colorTransform)}var jpegImage=new _jpg.JpegImage(jpegOptions);jpegImage.parse(this.bytes);var data=jpegImage.getData({width:this.drawWidth,height:this.drawHeight,forceRGB:this.forceRGB,isSourcePDF:!0});this.buffer=data,this.bufferLength=data.length,this.eof=!0}},JpegStream}();exports.JpegStream=JpegStream},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.JpegImage=void 0;var _util=__w_pdfjs_require__(2),_core_utils=__w_pdfjs_require__(8),JpegError=function(_util$BaseException5){_inherits(JpegError,_util$BaseException5);var _super17=_createSuper(JpegError);function JpegError(msg){return _classCallCheck(this,JpegError),_super17.call(this,"JPEG error: ".concat(msg))}return _createClass(JpegError)}(_util.BaseException),DNLMarkerError=function(_util$BaseException6){_inherits(DNLMarkerError,_util$BaseException6);var _super18=_createSuper(DNLMarkerError);function DNLMarkerError(message,scanLines){var _this24;return _classCallCheck(this,DNLMarkerError),(_this24=_super18.call(this,message)).scanLines=scanLines,_this24}return _createClass(DNLMarkerError)}(_util.BaseException),EOIMarkerError=function(_util$BaseException7){_inherits(EOIMarkerError,_util$BaseException7);var _super19=_createSuper(EOIMarkerError);function EOIMarkerError(){return _classCallCheck(this,EOIMarkerError),_super19.apply(this,arguments)}return _createClass(EOIMarkerError)}(_util.BaseException),JpegImage=function(){var dctZigZag=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function JpegImage(){var _ref26=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref26$decodeTransfor=_ref26.decodeTransform,decodeTransform=void 0===_ref26$decodeTransfor?null:_ref26$decodeTransfor,_ref26$colorTransform=_ref26.colorTransform,colorTransform=void 0===_ref26$colorTransform?-1:_ref26$colorTransform;this._decodeTransform=decodeTransform,this._colorTransform=colorTransform}function buildHuffmanTable(codeLengths,values){for(var i,j,k=0,code=[],length=16;length>0&&!codeLengths[length-1];)length--;code.push({children:[],index:0});var q,p=code[0];for(i=0;i<length;i++){for(j=0;j<codeLengths[i];j++){for((p=code.pop()).children[p.index]=values[k];p.index>0;)p=code.pop();for(p.index++,code.push(p);code.length<=i;)code.push(q={children:[],index:0}),p.children[p.index]=q.children,p=q;k++}i+1<length&&(code.push(q={children:[],index:0}),p.children[p.index]=q.children,p=q)}return code[0].children}function getBlockBufferOffset(component,row,col){return 64*((component.blocksPerLine+1)*row+col)}function decodeScan(data,offset,frame,components,resetInterval,spectralStart,spectralEnd,successivePrev,successive){var parseDNLMarker=arguments.length>9&&void 0!==arguments[9]&&arguments[9],mcusPerLine=frame.mcusPerLine,progressive=frame.progressive,startOffset=offset,bitsData=0,bitsCount=0;function readBit(){if(bitsCount>0)return bitsCount--,bitsData>>bitsCount&1;if(255===(bitsData=data[offset++])){var nextByte=data[offset++];if(nextByte){if(220===nextByte&&parseDNLMarker){offset+=2;var scanLines=(0,_core_utils.readUint16)(data,offset);if(offset+=2,scanLines>0&&scanLines!==frame.scanLines)throw new DNLMarkerError("Found DNL marker (0xFFDC) while parsing scan data",scanLines)}else if(217===nextByte){if(parseDNLMarker){var maybeScanLines=blockRow*(8===frame.precision?8:0);if(maybeScanLines>0&&Math.round(frame.scanLines/maybeScanLines)>=10)throw new DNLMarkerError("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",maybeScanLines)}throw new EOIMarkerError("Found EOI marker (0xFFD9) while parsing scan data")}throw new JpegError("unexpected marker ".concat((bitsData<<8|nextByte).toString(16)))}}return bitsCount=7,bitsData>>>7}function decodeHuffman(tree){for(var node=tree;;){switch(_typeof(node=node[readBit()])){case"number":return node;case"object":continue}throw new JpegError("invalid huffman sequence")}}function receive(length){for(var n=0;length>0;)n=n<<1|readBit(),length--;return n}function receiveAndExtend(length){if(1===length)return 1===readBit()?1:-1;var n=receive(length);return n>=1<<length-1?n:n+(-1<<length)+1}function decodeBaseline(component,blockOffset){var t=decodeHuffman(component.huffmanTableDC),diff=0===t?0:receiveAndExtend(t);component.blockData[blockOffset]=component.pred+=diff;for(var k=1;k<64;){var rs=decodeHuffman(component.huffmanTableAC),s=15&rs,r=rs>>4;if(0!==s){var z=dctZigZag[k+=r];component.blockData[blockOffset+z]=receiveAndExtend(s),k++}else{if(r<15)break;k+=16}}}function decodeDCFirst(component,blockOffset){var t=decodeHuffman(component.huffmanTableDC),diff=0===t?0:receiveAndExtend(t)<<successive;component.blockData[blockOffset]=component.pred+=diff}function decodeDCSuccessive(component,blockOffset){component.blockData[blockOffset]|=readBit()<<successive}var eobrun=0;function decodeACFirst(component,blockOffset){if(eobrun>0)eobrun--;else for(var k=spectralStart,e=spectralEnd;k<=e;){var rs=decodeHuffman(component.huffmanTableAC),s=15&rs,r=rs>>4;if(0!==s){var z=dctZigZag[k+=r];component.blockData[blockOffset+z]=receiveAndExtend(s)*(1<<successive),k++}else{if(r<15){eobrun=receive(r)+(1<<r)-1;break}k+=16}}}var successiveACNextValue,successiveACState=0;function decodeACSuccessive(component,blockOffset){for(var s,rs,k=spectralStart,e=spectralEnd,r=0;k<=e;){var offsetZ=blockOffset+dctZigZag[k],sign=component.blockData[offsetZ]<0?-1:1;switch(successiveACState){case 0:if(r=(rs=decodeHuffman(component.huffmanTableAC))>>4,0==(s=15&rs))r<15?(eobrun=receive(r)+(1<<r),successiveACState=4):(r=16,successiveACState=1);else{if(1!==s)throw new JpegError("invalid ACn encoding");successiveACNextValue=receiveAndExtend(s),successiveACState=r?2:3}continue;case 1:case 2:component.blockData[offsetZ]?component.blockData[offsetZ]+=sign*(readBit()<<successive):0==--r&&(successiveACState=2===successiveACState?3:0);break;case 3:component.blockData[offsetZ]?component.blockData[offsetZ]+=sign*(readBit()<<successive):(component.blockData[offsetZ]=successiveACNextValue<<successive,successiveACState=0);break;case 4:component.blockData[offsetZ]&&(component.blockData[offsetZ]+=sign*(readBit()<<successive))}k++}4===successiveACState&&0==--eobrun&&(successiveACState=0)}var blockRow=0;function decodeMcu(component,decode,mcu,row,col){var mcuCol=mcu%mcusPerLine;blockRow=(mcu/mcusPerLine|0)*component.v+row;var blockCol=mcuCol*component.h+col;decode(component,getBlockBufferOffset(component,blockRow,blockCol))}function decodeBlock(component,decode,mcu){blockRow=mcu/component.blocksPerLine|0;var blockCol=mcu%component.blocksPerLine;decode(component,getBlockBufferOffset(component,blockRow,blockCol))}var component,i,j,k,n,decodeFn,componentsLength=components.length;decodeFn=progressive?0===spectralStart?0===successivePrev?decodeDCFirst:decodeDCSuccessive:0===successivePrev?decodeACFirst:decodeACSuccessive:decodeBaseline;var fileMarker,mcuExpected,h,v,mcu=0;for(mcuExpected=1===componentsLength?components[0].blocksPerLine*components[0].blocksPerColumn:mcusPerLine*frame.mcusPerColumn;mcu<=mcuExpected;){var mcuToRead=resetInterval?Math.min(mcuExpected-mcu,resetInterval):mcuExpected;if(mcuToRead>0){for(i=0;i<componentsLength;i++)components[i].pred=0;if(eobrun=0,1===componentsLength)for(component=components[0],n=0;n<mcuToRead;n++)decodeBlock(component,decodeFn,mcu),mcu++;else for(n=0;n<mcuToRead;n++){for(i=0;i<componentsLength;i++)for(h=(component=components[i]).h,v=component.v,j=0;j<v;j++)for(k=0;k<h;k++)decodeMcu(component,decodeFn,mcu,j,k);mcu++}}if(bitsCount=0,!(fileMarker=findNextFileMarker(data,offset)))break;if(fileMarker.invalid){var partialMsg=mcuToRead>0?"unexpected":"excessive";(0,_util.warn)("decodeScan - ".concat(partialMsg," MCU data, current marker is: ").concat(fileMarker.invalid)),offset=fileMarker.offset}if(!(fileMarker.marker>=65488&&fileMarker.marker<=65495))break;offset+=2}return offset-startOffset}function quantizeAndInverse(component,blockBufferOffset,p){var v0,v1,v2,v3,v4,v5,v6,v7,p0,p1,p2,p3,p4,p5,p6,p7,t,qt=component.quantizationTable,blockData=component.blockData;if(!qt)throw new JpegError("missing required Quantization Table.");for(var row=0;row<64;row+=8)p0=blockData[blockBufferOffset+row],p1=blockData[blockBufferOffset+row+1],p2=blockData[blockBufferOffset+row+2],p3=blockData[blockBufferOffset+row+3],p4=blockData[blockBufferOffset+row+4],p5=blockData[blockBufferOffset+row+5],p6=blockData[blockBufferOffset+row+6],p7=blockData[blockBufferOffset+row+7],p0*=qt[row],0!=(p1|p2|p3|p4|p5|p6|p7)?(p1*=qt[row+1],p2*=qt[row+2],p3*=qt[row+3],p4*=qt[row+4],p5*=qt[row+5],v1=(v0=(v0=5793*p0+128>>8)+(v1=5793*p4+128>>8)+1>>1)-v1,t=3784*(v2=p2)+1567*(v3=p6*=qt[row+6])+128>>8,v2=1567*v2-3784*v3+128>>8,v6=(v4=(v4=2896*(p1-(p7*=qt[row+7]))+128>>8)+(v6=p5<<4)+1>>1)-v6,v5=(v7=(v7=2896*(p1+p7)+128>>8)+(v5=p3<<4)+1>>1)-v5,v3=(v0=v0+(v3=t)+1>>1)-v3,v2=(v1=v1+v2+1>>1)-v2,t=2276*v4+3406*v7+2048>>12,v4=3406*v4-2276*v7+2048>>12,v7=t,t=799*v5+4017*v6+2048>>12,v5=4017*v5-799*v6+2048>>12,v6=t,p[row]=v0+v7,p[row+7]=v0-v7,p[row+1]=v1+v6,p[row+6]=v1-v6,p[row+2]=v2+v5,p[row+5]=v2-v5,p[row+3]=v3+v4,p[row+4]=v3-v4):(t=5793*p0+512>>10,p[row]=t,p[row+1]=t,p[row+2]=t,p[row+3]=t,p[row+4]=t,p[row+5]=t,p[row+6]=t,p[row+7]=t);for(var col=0;col<8;++col)p0=p[col],0!=((p1=p[col+8])|(p2=p[col+16])|(p3=p[col+24])|(p4=p[col+32])|(p5=p[col+40])|(p6=p[col+48])|(p7=p[col+56]))?(v1=(v0=4112+((v0=5793*p0+2048>>12)+(v1=5793*p4+2048>>12)+1>>1))-v1,t=3784*(v2=p2)+1567*(v3=p6)+2048>>12,v2=1567*v2-3784*v3+2048>>12,v3=t,v6=(v4=(v4=2896*(p1-p7)+2048>>12)+(v6=p5)+1>>1)-v6,v5=(v7=(v7=2896*(p1+p7)+2048>>12)+(v5=p3)+1>>1)-v5,t=2276*v4+3406*v7+2048>>12,v4=3406*v4-2276*v7+2048>>12,v7=t,t=799*v5+4017*v6+2048>>12,v5=4017*v5-799*v6+2048>>12,(p0=(v0=v0+v3+1>>1)+v7)<16?p0=0:p0>=4080?p0=255:p0>>=4,(p1=(v1=v1+v2+1>>1)+(v6=t))<16?p1=0:p1>=4080?p1=255:p1>>=4,(p2=(v2=v1-v2)+v5)<16?p2=0:p2>=4080?p2=255:p2>>=4,(p3=(v3=v0-v3)+v4)<16?p3=0:p3>=4080?p3=255:p3>>=4,(p4=v3-v4)<16?p4=0:p4>=4080?p4=255:p4>>=4,(p5=v2-v5)<16?p5=0:p5>=4080?p5=255:p5>>=4,(p6=v1-v6)<16?p6=0:p6>=4080?p6=255:p6>>=4,(p7=v0-v7)<16?p7=0:p7>=4080?p7=255:p7>>=4,blockData[blockBufferOffset+col]=p0,blockData[blockBufferOffset+col+8]=p1,blockData[blockBufferOffset+col+16]=p2,blockData[blockBufferOffset+col+24]=p3,blockData[blockBufferOffset+col+32]=p4,blockData[blockBufferOffset+col+40]=p5,blockData[blockBufferOffset+col+48]=p6,blockData[blockBufferOffset+col+56]=p7):(t=(t=5793*p0+8192>>14)<-2040?0:t>=2024?255:t+2056>>4,blockData[blockBufferOffset+col]=t,blockData[blockBufferOffset+col+8]=t,blockData[blockBufferOffset+col+16]=t,blockData[blockBufferOffset+col+24]=t,blockData[blockBufferOffset+col+32]=t,blockData[blockBufferOffset+col+40]=t,blockData[blockBufferOffset+col+48]=t,blockData[blockBufferOffset+col+56]=t)}function buildComponentData(frame,component){for(var blocksPerLine=component.blocksPerLine,blocksPerColumn=component.blocksPerColumn,computationBuffer=new Int16Array(64),blockRow=0;blockRow<blocksPerColumn;blockRow++)for(var blockCol=0;blockCol<blocksPerLine;blockCol++)quantizeAndInverse(component,getBlockBufferOffset(component,blockRow,blockCol),computationBuffer);return component.blockData}function findNextFileMarker(data,currentPos){var startPos=arguments.length>2&&void 0!==arguments[2]?arguments[2]:currentPos,maxPos=data.length-1,newPos=startPos<currentPos?startPos:currentPos;if(currentPos>=maxPos)return null;var currentMarker=(0,_core_utils.readUint16)(data,currentPos);if(currentMarker>=65472&&currentMarker<=65534)return{invalid:null,marker:currentMarker,offset:currentPos};for(var newMarker=(0,_core_utils.readUint16)(data,newPos);!(newMarker>=65472&&newMarker<=65534);){if(++newPos>=maxPos)return null;newMarker=(0,_core_utils.readUint16)(data,newPos)}return{invalid:currentMarker.toString(16),marker:newMarker,offset:newPos}}return JpegImage.prototype={parse:function(data){var _ref27=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref27$dnlScanLines=_ref27.dnlScanLines,dnlScanLines=void 0===_ref27$dnlScanLines?null:_ref27$dnlScanLines;function readDataBlock(){var length=(0,_core_utils.readUint16)(data,offset),endOffset=(offset+=2)+length-2,fileMarker=findNextFileMarker(data,endOffset,offset);fileMarker&&fileMarker.invalid&&((0,_util.warn)("readDataBlock - incorrect length, current marker is: "+fileMarker.invalid),endOffset=fileMarker.offset);var array=data.subarray(offset,endOffset);return offset+=array.length,array}function prepareComponents(frame){for(var mcusPerLine=Math.ceil(frame.samplesPerLine/8/frame.maxH),mcusPerColumn=Math.ceil(frame.scanLines/8/frame.maxV),i=0;i<frame.components.length;i++){component=frame.components[i];var blocksPerLine=Math.ceil(Math.ceil(frame.samplesPerLine/8)*component.h/frame.maxH),blocksPerColumn=Math.ceil(Math.ceil(frame.scanLines/8)*component.v/frame.maxV),blocksPerLineForMcu=mcusPerLine*component.h,blocksBufferSize=mcusPerColumn*component.v*64*(blocksPerLineForMcu+1);component.blockData=new Int16Array(blocksBufferSize),component.blocksPerLine=blocksPerLine,component.blocksPerColumn=blocksPerColumn}frame.mcusPerLine=mcusPerLine,frame.mcusPerColumn=mcusPerColumn}var frame,resetInterval,offset=0,jfif=null,adobe=null,numSOSMarkers=0,quantizationTables=[],huffmanTablesAC=[],huffmanTablesDC=[],fileMarker=(0,_core_utils.readUint16)(data,offset);if(offset+=2,65496!==fileMarker)throw new JpegError("SOI not found");fileMarker=(0,_core_utils.readUint16)(data,offset),offset+=2;markerLoop:for(;65497!==fileMarker;){var i,j,l;switch(fileMarker){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var appData=readDataBlock();65504===fileMarker&&74===appData[0]&&70===appData[1]&&73===appData[2]&&70===appData[3]&&0===appData[4]&&(jfif={version:{major:appData[5],minor:appData[6]},densityUnits:appData[7],xDensity:appData[8]<<8|appData[9],yDensity:appData[10]<<8|appData[11],thumbWidth:appData[12],thumbHeight:appData[13],thumbData:appData.subarray(14,14+3*appData[12]*appData[13])}),65518===fileMarker&&65===appData[0]&&100===appData[1]&&111===appData[2]&&98===appData[3]&&101===appData[4]&&(adobe={version:appData[5]<<8|appData[6],flags0:appData[7]<<8|appData[8],flags1:appData[9]<<8|appData[10],transformCode:appData[11]});break;case 65499:for(var quantizationTablesLength=(0,_core_utils.readUint16)(data,offset),quantizationTablesEnd=quantizationTablesLength+(offset+=2)-2;offset<quantizationTablesEnd;){var quantizationTableSpec=data[offset++],tableData=new Uint16Array(64);if(quantizationTableSpec>>4==0)for(j=0;j<64;j++)tableData[dctZigZag[j]]=data[offset++];else{if(quantizationTableSpec>>4!=1)throw new JpegError("DQT - invalid table spec");for(j=0;j<64;j++)tableData[dctZigZag[j]]=(0,_core_utils.readUint16)(data,offset),offset+=2}quantizationTables[15&quantizationTableSpec]=tableData}break;case 65472:case 65473:case 65474:if(frame)throw new JpegError("Only single frame JPEGs supported");offset+=2,(frame={}).extended=65473===fileMarker,frame.progressive=65474===fileMarker,frame.precision=data[offset++];var sofScanLines=(0,_core_utils.readUint16)(data,offset);offset+=2,frame.scanLines=dnlScanLines||sofScanLines,frame.samplesPerLine=(0,_core_utils.readUint16)(data,offset),offset+=2,frame.components=[],frame.componentIds={};var componentId,componentsCount=data[offset++],maxH=0,maxV=0;for(i=0;i<componentsCount;i++){componentId=data[offset];var h=data[offset+1]>>4,v=15&data[offset+1];maxH<h&&(maxH=h),maxV<v&&(maxV=v);var qId=data[offset+2];l=frame.components.push({h:h,v:v,quantizationId:qId,quantizationTable:null}),frame.componentIds[componentId]=l-1,offset+=3}frame.maxH=maxH,frame.maxV=maxV,prepareComponents(frame);break;case 65476:var huffmanLength=(0,_core_utils.readUint16)(data,offset);for(offset+=2,i=2;i<huffmanLength;){var huffmanTableSpec=data[offset++],codeLengths=new Uint8Array(16),codeLengthSum=0;for(j=0;j<16;j++,offset++)codeLengthSum+=codeLengths[j]=data[offset];var huffmanValues=new Uint8Array(codeLengthSum);for(j=0;j<codeLengthSum;j++,offset++)huffmanValues[j]=data[offset];i+=17+codeLengthSum,(huffmanTableSpec>>4==0?huffmanTablesDC:huffmanTablesAC)[15&huffmanTableSpec]=buildHuffmanTable(codeLengths,huffmanValues)}break;case 65501:offset+=2,resetInterval=(0,_core_utils.readUint16)(data,offset),offset+=2;break;case 65498:var parseDNLMarker=1==++numSOSMarkers&&!dnlScanLines;offset+=2;var component,selectorsCount=data[offset++],components=[];for(i=0;i<selectorsCount;i++){var index=data[offset++],componentIndex=frame.componentIds[index];(component=frame.components[componentIndex]).index=index;var tableSpec=data[offset++];component.huffmanTableDC=huffmanTablesDC[tableSpec>>4],component.huffmanTableAC=huffmanTablesAC[15&tableSpec],components.push(component)}var spectralStart=data[offset++],spectralEnd=data[offset++],successiveApproximation=data[offset++];try{var processed=decodeScan(data,offset,frame,components,resetInterval,spectralStart,spectralEnd,successiveApproximation>>4,15&successiveApproximation,parseDNLMarker);offset+=processed}catch(ex){if(ex instanceof DNLMarkerError)return(0,_util.warn)("".concat(ex.message," -- attempting to re-parse the JPEG image.")),this.parse(data,{dnlScanLines:ex.scanLines});if(ex instanceof EOIMarkerError){(0,_util.warn)("".concat(ex.message," -- ignoring the rest of the image data."));break markerLoop}throw ex}break;case 65500:offset+=4;break;case 65535:255!==data[offset]&&offset--;break;default:var nextFileMarker=findNextFileMarker(data,offset-2,offset-3);if(nextFileMarker&&nextFileMarker.invalid){(0,_util.warn)("JpegImage.parse - unexpected data, current marker is: "+nextFileMarker.invalid),offset=nextFileMarker.offset;break}if(!nextFileMarker||offset>=data.length-1){(0,_util.warn)("JpegImage.parse - reached the end of the image data without finding an EOI marker (0xFFD9).");break markerLoop}throw new JpegError("JpegImage.parse - unknown marker: "+fileMarker.toString(16))}fileMarker=(0,_core_utils.readUint16)(data,offset),offset+=2}for(this.width=frame.samplesPerLine,this.height=frame.scanLines,this.jfif=jfif,this.adobe=adobe,this.components=[],i=0;i<frame.components.length;i++){var quantizationTable=quantizationTables[(component=frame.components[i]).quantizationId];quantizationTable&&(component.quantizationTable=quantizationTable),this.components.push({index:component.index,output:buildComponentData(0,component),scaleX:component.h/frame.maxH,scaleY:component.v/frame.maxV,blocksPerLine:component.blocksPerLine,blocksPerColumn:component.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(width,height){var component,componentScaleX,componentScaleY,blocksPerScanline,x,y,i,j,k,index,output,lastComponentScaleX,isSourcePDF=arguments.length>2&&void 0!==arguments[2]&&arguments[2],scaleX=this.width/width,scaleY=this.height/height,offset=0,numComponents=this.components.length,dataLength=width*height*numComponents,data=new Uint8ClampedArray(dataLength),xScaleBlockOffset=new Uint32Array(width),mask3LSB=4294967288;for(i=0;i<numComponents;i++){if(componentScaleX=(component=this.components[i]).scaleX*scaleX,componentScaleY=component.scaleY*scaleY,offset=i,output=component.output,blocksPerScanline=component.blocksPerLine+1<<3,componentScaleX!==lastComponentScaleX){for(x=0;x<width;x++)j=0|x*componentScaleX,xScaleBlockOffset[x]=(j&mask3LSB)<<3|7&j;lastComponentScaleX=componentScaleX}for(y=0;y<height;y++)for(index=blocksPerScanline*((j=0|y*componentScaleY)&mask3LSB)|(7&j)<<3,x=0;x<width;x++)data[offset]=output[index+xScaleBlockOffset[x]],offset+=numComponents}var transform=this._decodeTransform;if(isSourcePDF||4!==numComponents||transform||(transform=new Int32Array([-256,255,-256,255,-256,255,-256,255])),transform)for(i=0;i<dataLength;)for(j=0,k=0;j<numComponents;j++,i++,k+=2)data[i]=(data[i]*transform[k]>>8)+transform[k+1];return data},get _isColorConversionNeeded(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this._colorTransform&&(82!==this.components[0].index||71!==this.components[1].index||66!==this.components[2].index):1===this._colorTransform},_convertYccToRgb:function(data){for(var Y,Cb,Cr,i=0,length=data.length;i<length;i+=3)Y=data[i],Cb=data[i+1],Cr=data[i+2],data[i]=Y-179.456+1.402*Cr,data[i+1]=Y+135.459-.344*Cb-.714*Cr,data[i+2]=Y-226.816+1.772*Cb;return data},_convertYcckToRgb:function(data){for(var Y,Cb,Cr,k,offset=0,i=0,length=data.length;i<length;i+=4)Y=data[i],Cb=data[i+1],Cr=data[i+2],k=data[i+3],data[offset++]=Cb*(-660635669420364e-19*Cb+.000437130475926232*Cr-54080610064599e-18*Y+.00048449797120281*k-.154362151871126)-122.67195406894+Cr*(-.000957964378445773*Cr+.000817076911346625*Y-.00477271405408747*k+1.53380253221734)+Y*(.000961250184130688*Y-.00266257332283933*k+.48357088451265)+k*(-.000336197177618394*k+.484791561490776),data[offset++]=107.268039397724+Cb*(219927104525741e-19*Cb-.000640992018297945*Cr+.000659397001245577*Y+.000426105652938837*k-.176491792462875)+Cr*(-.000778269941513683*Cr+.00130872261408275*Y+.000770482631801132*k-.151051492775562)+Y*(.00126935368114843*Y-.00265090189010898*k+.25802910206845)+k*(-.000318913117588328*k-.213742400323665),data[offset++]=Cb*(-.000570115196973677*Cb-263409051004589e-19*Cr+.0020741088115012*Y-.00288260236853442*k+.814272968359295)-20.810012546947+Cr*(-153496057440975e-19*Cr-.000132689043961446*Y+.000560833691242812*k-.195152027534049)+Y*(.00174418132927582*Y-.00255243321439347*k+.116935020465145)+k*(-.000343531996510555*k+.24165260232407);return data.subarray(0,offset)},_convertYcckToCmyk:function(data){for(var Y,Cb,Cr,i=0,length=data.length;i<length;i+=4)Y=data[i],Cb=data[i+1],Cr=data[i+2],data[i]=434.456-Y-1.402*Cr,data[i+1]=119.541-Y+.344*Cb+.714*Cr,data[i+2]=481.816-Y-1.772*Cb;return data},_convertCmykToRgb:function(data){for(var c,m,y,k,offset=0,i=0,length=data.length;i<length;i+=4)c=data[i],m=data[i+1],y=data[i+2],k=data[i+3],data[offset++]=255+c*(-6747147073602441e-20*c+.0008379262121013727*m+.0002894718188643294*y+.003264231057537806*k-1.1185611867203937)+m*(26374107616089405e-21*m-8626949158638572e-20*y-.0002748769067499491*k-.02155688794978967)+y*(-3878099212869363e-20*y-.0003267808279485286*k+.0686742238595345)-k*(.0003361971776183937*k+.7430659151342254),data[offset++]=255+c*(.00013596372813588848*c+.000924537132573585*m+.00010567359618683593*y+.0004791864687436512*k-.3109689587515875)+m*(-.00023545346108370344*m+.0002702845253534714*y+.0020200308977307156*k-.7488052167015494)+y*(6834815998235662e-20*y+.00015168452363460973*k-.09751927774728933)-k*(.0003189131175883281*k+.7364883807733168),data[offset++]=255+c*(13598650411385307e-21*c+.00012423956175490851*m+.0004751985097583589*y-36729317476630422e-22*k-.05562186980264034)+m*(.00016141380598724676*m+.0009692239130725186*y+.0007782692450036253*k-.44015232367526463)+y*(5.068882914068769e-7*y+.0017778369011375071*k-.7591454649749609)-k*(.0003435319965105553*k+.7063770186160144);return data.subarray(0,offset)},getData:function(_ref28){var width=_ref28.width,height=_ref28.height,_ref28$forceRGB=_ref28.forceRGB,forceRGB=void 0!==_ref28$forceRGB&&_ref28$forceRGB,_ref28$isSourcePDF=_ref28.isSourcePDF,isSourcePDF=void 0!==_ref28$isSourcePDF&&_ref28$isSourcePDF;if(this.numComponents>4)throw new JpegError("Unsupported color mode");var data=this._getLinearizedBlockData(width,height,isSourcePDF);if(1===this.numComponents&&forceRGB){for(var dataLength=data.length,rgbData=new Uint8ClampedArray(3*dataLength),offset=0,i=0;i<dataLength;i++){var grayColor=data[i];rgbData[offset++]=grayColor,rgbData[offset++]=grayColor,rgbData[offset++]=grayColor}return rgbData}if(3===this.numComponents&&this._isColorConversionNeeded)return this._convertYccToRgb(data);if(4===this.numComponents){if(this._isColorConversionNeeded)return forceRGB?this._convertYcckToRgb(data):this._convertYcckToCmyk(data);if(forceRGB)return this._convertCmykToRgb(data)}return data}},JpegImage}();exports.JpegImage=JpegImage},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.JpxStream=void 0;var _stream=__w_pdfjs_require__(12),_jpx=__w_pdfjs_require__(21),_util=__w_pdfjs_require__(2),JpxStream=function(){function JpxStream(stream,maybeLength,dict,params){this.stream=stream,this.maybeLength=maybeLength,this.dict=dict,this.params=params,_stream.DecodeStream.call(this,maybeLength)}return JpxStream.prototype=Object.create(_stream.DecodeStream.prototype),Object.defineProperty(JpxStream.prototype,"bytes",{get:function(){return(0,_util.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))},configurable:!0}),JpxStream.prototype.ensureBuffer=function(requested){},JpxStream.prototype.readBlock=function(){if(!this.eof){var jpxImage=new _jpx.JpxImage;jpxImage.parse(this.bytes);var width=jpxImage.width,height=jpxImage.height,componentsCount=jpxImage.componentsCount,tileCount=jpxImage.tiles.length;if(1===tileCount)this.buffer=jpxImage.tiles[0].items;else{for(var data=new Uint8ClampedArray(width*height*componentsCount),k=0;k<tileCount;k++)for(var tileComponents=jpxImage.tiles[k],tileWidth=tileComponents.width,tileHeight=tileComponents.height,tileLeft=tileComponents.left,tileTop=tileComponents.top,src=tileComponents.items,srcPosition=0,dataPosition=(width*tileTop+tileLeft)*componentsCount,imgRowSize=width*componentsCount,tileRowSize=tileWidth*componentsCount,j=0;j<tileHeight;j++){var rowBytes=src.subarray(srcPosition,srcPosition+tileRowSize);data.set(rowBytes,dataPosition),srcPosition+=tileRowSize,dataPosition+=imgRowSize}this.buffer=data}this.bufferLength=this.buffer.length,this.eof=!0}},JpxStream}();exports.JpxStream=JpxStream},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.JpxImage=void 0;var _util=__w_pdfjs_require__(2),_core_utils=__w_pdfjs_require__(8),_arithmetic_decoder=__w_pdfjs_require__(17),JpxError=function(_util$BaseException8){_inherits(JpxError,_util$BaseException8);var _super20=_createSuper(JpxError);function JpxError(msg){return _classCallCheck(this,JpxError),_super20.call(this,"JPX error: ".concat(msg))}return _createClass(JpxError)}(_util.BaseException),JpxImage=function(){var SubbandsGainLog2={LL:0,LH:1,HL:1,HH:2};function JpxImage(){this.failOnCorruptedImage=!1}function calculateComponentDimensions(component,siz){component.x0=Math.ceil(siz.XOsiz/component.XRsiz),component.x1=Math.ceil(siz.Xsiz/component.XRsiz),component.y0=Math.ceil(siz.YOsiz/component.YRsiz),component.y1=Math.ceil(siz.Ysiz/component.YRsiz),component.width=component.x1-component.x0,component.height=component.y1-component.y0}function calculateTileGrids(context,components){for(var tile,siz=context.SIZ,tiles=[],numXtiles=Math.ceil((siz.Xsiz-siz.XTOsiz)/siz.XTsiz),numYtiles=Math.ceil((siz.Ysiz-siz.YTOsiz)/siz.YTsiz),q=0;q<numYtiles;q++)for(var p=0;p<numXtiles;p++)(tile={}).tx0=Math.max(siz.XTOsiz+p*siz.XTsiz,siz.XOsiz),tile.ty0=Math.max(siz.YTOsiz+q*siz.YTsiz,siz.YOsiz),tile.tx1=Math.min(siz.XTOsiz+(p+1)*siz.XTsiz,siz.Xsiz),tile.ty1=Math.min(siz.YTOsiz+(q+1)*siz.YTsiz,siz.Ysiz),tile.width=tile.tx1-tile.tx0,tile.height=tile.ty1-tile.ty0,tile.components=[],tiles.push(tile);context.tiles=tiles;for(var i=0,ii=siz.Csiz;i<ii;i++)for(var component=components[i],j=0,jj=tiles.length;j<jj;j++){var tileComponent={};tile=tiles[j],tileComponent.tcx0=Math.ceil(tile.tx0/component.XRsiz),tileComponent.tcy0=Math.ceil(tile.ty0/component.YRsiz),tileComponent.tcx1=Math.ceil(tile.tx1/component.XRsiz),tileComponent.tcy1=Math.ceil(tile.ty1/component.YRsiz),tileComponent.width=tileComponent.tcx1-tileComponent.tcx0,tileComponent.height=tileComponent.tcy1-tileComponent.tcy0,tile.components[i]=tileComponent}}function getBlocksDimensions(context,component,r){var codOrCoc=component.codingStyleParameters,result={};return codOrCoc.entropyCoderWithCustomPrecincts?(result.PPx=codOrCoc.precinctsSizes[r].PPx,result.PPy=codOrCoc.precinctsSizes[r].PPy):(result.PPx=15,result.PPy=15),result.xcb_=r>0?Math.min(codOrCoc.xcb,result.PPx-1):Math.min(codOrCoc.xcb,result.PPx),result.ycb_=r>0?Math.min(codOrCoc.ycb,result.PPy-1):Math.min(codOrCoc.ycb,result.PPy),result}function buildPrecincts(context,resolution,dimensions){var precinctWidth=1<<dimensions.PPx,precinctHeight=1<<dimensions.PPy,isZeroRes=0===resolution.resLevel,precinctWidthInSubband=1<<dimensions.PPx+(isZeroRes?0:-1),precinctHeightInSubband=1<<dimensions.PPy+(isZeroRes?0:-1),numprecinctswide=resolution.trx1>resolution.trx0?Math.ceil(resolution.trx1/precinctWidth)-Math.floor(resolution.trx0/precinctWidth):0,numprecinctshigh=resolution.try1>resolution.try0?Math.ceil(resolution.try1/precinctHeight)-Math.floor(resolution.try0/precinctHeight):0,numprecincts=numprecinctswide*numprecinctshigh;resolution.precinctParameters={precinctWidth:precinctWidth,precinctHeight:precinctHeight,numprecinctswide:numprecinctswide,numprecinctshigh:numprecinctshigh,numprecincts:numprecincts,precinctWidthInSubband:precinctWidthInSubband,precinctHeightInSubband:precinctHeightInSubband}}function buildCodeblocks(context,subband,dimensions){var i,j,codeblock,precinctNumber,xcb_=dimensions.xcb_,ycb_=dimensions.ycb_,codeblockWidth=1<<xcb_,codeblockHeight=1<<ycb_,cbx0=subband.tbx0>>xcb_,cby0=subband.tby0>>ycb_,cbx1=subband.tbx1+codeblockWidth-1>>xcb_,cby1=subband.tby1+codeblockHeight-1>>ycb_,precinctParameters=subband.resolution.precinctParameters,codeblocks=[],precincts=[];for(j=cby0;j<cby1;j++)for(i=cbx0;i<cbx1;i++)if((codeblock={cbx:i,cby:j,tbx0:codeblockWidth*i,tby0:codeblockHeight*j,tbx1:codeblockWidth*(i+1),tby1:codeblockHeight*(j+1)}).tbx0_=Math.max(subband.tbx0,codeblock.tbx0),codeblock.tby0_=Math.max(subband.tby0,codeblock.tby0),codeblock.tbx1_=Math.min(subband.tbx1,codeblock.tbx1),codeblock.tby1_=Math.min(subband.tby1,codeblock.tby1),precinctNumber=Math.floor((codeblock.tbx0_-subband.tbx0)/precinctParameters.precinctWidthInSubband)+Math.floor((codeblock.tby0_-subband.tby0)/precinctParameters.precinctHeightInSubband)*precinctParameters.numprecinctswide,codeblock.precinctNumber=precinctNumber,codeblock.subbandType=subband.type,codeblock.Lblock=3,!(codeblock.tbx1_<=codeblock.tbx0_||codeblock.tby1_<=codeblock.tby0_)){codeblocks.push(codeblock);var precinct=precincts[precinctNumber];void 0!==precinct?(i<precinct.cbxMin?precinct.cbxMin=i:i>precinct.cbxMax&&(precinct.cbxMax=i),j<precinct.cbyMin?precinct.cbxMin=j:j>precinct.cbyMax&&(precinct.cbyMax=j)):precincts[precinctNumber]=precinct={cbxMin:i,cbyMin:j,cbxMax:i,cbyMax:j},codeblock.precinct=precinct}subband.codeblockParameters={codeblockWidth:xcb_,codeblockHeight:ycb_,numcodeblockwide:cbx1-cbx0+1,numcodeblockhigh:cby1-cby0+1},subband.codeblocks=codeblocks,subband.precincts=precincts}function createPacket(resolution,precinctNumber,layerNumber){for(var precinctCodeblocks=[],subbands=resolution.subbands,i=0,ii=subbands.length;i<ii;i++)for(var codeblocks=subbands[i].codeblocks,j=0,jj=codeblocks.length;j<jj;j++){var codeblock=codeblocks[j];codeblock.precinctNumber===precinctNumber&&precinctCodeblocks.push(codeblock)}return{layerNumber:layerNumber,codeblocks:precinctCodeblocks}}function LayerResolutionComponentPositionIterator(context){for(var siz=context.SIZ,tileIndex=context.currentTile.index,tile=context.tiles[tileIndex],layersCount=tile.codingStyleDefaultParameters.layersCount,componentsCount=siz.Csiz,maxDecompositionLevelsCount=0,q=0;q<componentsCount;q++)maxDecompositionLevelsCount=Math.max(maxDecompositionLevelsCount,tile.components[q].codingStyleParameters.decompositionLevelsCount);var l=0,r=0,i=0,k=0;this.nextPacket=function(){for(;l<layersCount;l++){for(;r<=maxDecompositionLevelsCount;r++){for(;i<componentsCount;i++){var component=tile.components[i];if(!(r>component.codingStyleParameters.decompositionLevelsCount)){for(var resolution=component.resolutions[r],numprecincts=resolution.precinctParameters.numprecincts;k<numprecincts;){var packet=createPacket(resolution,k,l);return k++,packet}k=0}}i=0}r=0}throw new JpxError("Out of packets")}}function ResolutionLayerComponentPositionIterator(context){for(var siz=context.SIZ,tileIndex=context.currentTile.index,tile=context.tiles[tileIndex],layersCount=tile.codingStyleDefaultParameters.layersCount,componentsCount=siz.Csiz,maxDecompositionLevelsCount=0,q=0;q<componentsCount;q++)maxDecompositionLevelsCount=Math.max(maxDecompositionLevelsCount,tile.components[q].codingStyleParameters.decompositionLevelsCount);var r=0,l=0,i=0,k=0;this.nextPacket=function(){for(;r<=maxDecompositionLevelsCount;r++){for(;l<layersCount;l++){for(;i<componentsCount;i++){var component=tile.components[i];if(!(r>component.codingStyleParameters.decompositionLevelsCount)){for(var resolution=component.resolutions[r],numprecincts=resolution.precinctParameters.numprecincts;k<numprecincts;){var packet=createPacket(resolution,k,l);return k++,packet}k=0}}i=0}l=0}throw new JpxError("Out of packets")}}function ResolutionPositionComponentLayerIterator(context){var l,r,c,p,siz=context.SIZ,tileIndex=context.currentTile.index,tile=context.tiles[tileIndex],layersCount=tile.codingStyleDefaultParameters.layersCount,componentsCount=siz.Csiz,maxDecompositionLevelsCount=0;for(c=0;c<componentsCount;c++){var component=tile.components[c];maxDecompositionLevelsCount=Math.max(maxDecompositionLevelsCount,component.codingStyleParameters.decompositionLevelsCount)}var maxNumPrecinctsInLevel=new Int32Array(maxDecompositionLevelsCount+1);for(r=0;r<=maxDecompositionLevelsCount;++r){var maxNumPrecincts=0;for(c=0;c<componentsCount;++c){var resolutions=tile.components[c].resolutions;r<resolutions.length&&(maxNumPrecincts=Math.max(maxNumPrecincts,resolutions[r].precinctParameters.numprecincts))}maxNumPrecinctsInLevel[r]=maxNumPrecincts}l=0,r=0,c=0,p=0,this.nextPacket=function(){for(;r<=maxDecompositionLevelsCount;r++){for(;p<maxNumPrecinctsInLevel[r];p++){for(;c<componentsCount;c++){var _component=tile.components[c];if(!(r>_component.codingStyleParameters.decompositionLevelsCount)){var resolution=_component.resolutions[r],numprecincts=resolution.precinctParameters.numprecincts;if(!(p>=numprecincts)){for(;l<layersCount;){var packet=createPacket(resolution,p,l);return l++,packet}l=0}}}c=0}p=0}throw new JpxError("Out of packets")}}function PositionComponentResolutionLayerIterator(context){var siz=context.SIZ,tileIndex=context.currentTile.index,tile=context.tiles[tileIndex],layersCount=tile.codingStyleDefaultParameters.layersCount,componentsCount=siz.Csiz,precinctsSizes=getPrecinctSizesInImageScale(tile),precinctsIterationSizes=precinctsSizes,l=0,r=0,c=0,px=0,py=0;this.nextPacket=function(){for(;py<precinctsIterationSizes.maxNumHigh;py++){for(;px<precinctsIterationSizes.maxNumWide;px++){for(;c<componentsCount;c++){for(var component=tile.components[c],decompositionLevelsCount=component.codingStyleParameters.decompositionLevelsCount;r<=decompositionLevelsCount;r++){var resolution=component.resolutions[r],sizeInImageScale=precinctsSizes.components[c].resolutions[r],k=getPrecinctIndexIfExist(px,py,sizeInImageScale,precinctsIterationSizes,resolution);if(null!==k){for(;l<layersCount;){var packet=createPacket(resolution,k,l);return l++,packet}l=0}}r=0}c=0}px=0}throw new JpxError("Out of packets")}}function ComponentPositionResolutionLayerIterator(context){var siz=context.SIZ,tileIndex=context.currentTile.index,tile=context.tiles[tileIndex],layersCount=tile.codingStyleDefaultParameters.layersCount,componentsCount=siz.Csiz,precinctsSizes=getPrecinctSizesInImageScale(tile),l=0,r=0,c=0,px=0,py=0;this.nextPacket=function(){for(;c<componentsCount;++c){for(var component=tile.components[c],precinctsIterationSizes=precinctsSizes.components[c],decompositionLevelsCount=component.codingStyleParameters.decompositionLevelsCount;py<precinctsIterationSizes.maxNumHigh;py++){for(;px<precinctsIterationSizes.maxNumWide;px++){for(;r<=decompositionLevelsCount;r++){var resolution=component.resolutions[r],sizeInImageScale=precinctsIterationSizes.resolutions[r],k=getPrecinctIndexIfExist(px,py,sizeInImageScale,precinctsIterationSizes,resolution);if(null!==k){for(;l<layersCount;){var packet=createPacket(resolution,k,l);return l++,packet}l=0}}r=0}px=0}py=0}throw new JpxError("Out of packets")}}function getPrecinctIndexIfExist(pxIndex,pyIndex,sizeInImageScale,precinctIterationSizes,resolution){var posX=pxIndex*precinctIterationSizes.minWidth,posY=pyIndex*precinctIterationSizes.minHeight;if(posX%sizeInImageScale.width!=0||posY%sizeInImageScale.height!=0)return null;var startPrecinctRowIndex=posY/sizeInImageScale.width*resolution.precinctParameters.numprecinctswide;return posX/sizeInImageScale.height+startPrecinctRowIndex}function getPrecinctSizesInImageScale(tile){for(var componentsCount=tile.components.length,minWidth=Number.MAX_VALUE,minHeight=Number.MAX_VALUE,maxNumWide=0,maxNumHigh=0,sizePerComponent=new Array(componentsCount),c=0;c<componentsCount;c++){for(var component=tile.components[c],decompositionLevelsCount=component.codingStyleParameters.decompositionLevelsCount,sizePerResolution=new Array(decompositionLevelsCount+1),minWidthCurrentComponent=Number.MAX_VALUE,minHeightCurrentComponent=Number.MAX_VALUE,maxNumWideCurrentComponent=0,maxNumHighCurrentComponent=0,scale=1,r=decompositionLevelsCount;r>=0;--r){var resolution=component.resolutions[r],widthCurrentResolution=scale*resolution.precinctParameters.precinctWidth,heightCurrentResolution=scale*resolution.precinctParameters.precinctHeight;minWidthCurrentComponent=Math.min(minWidthCurrentComponent,widthCurrentResolution),minHeightCurrentComponent=Math.min(minHeightCurrentComponent,heightCurrentResolution),maxNumWideCurrentComponent=Math.max(maxNumWideCurrentComponent,resolution.precinctParameters.numprecinctswide),maxNumHighCurrentComponent=Math.max(maxNumHighCurrentComponent,resolution.precinctParameters.numprecinctshigh),sizePerResolution[r]={width:widthCurrentResolution,height:heightCurrentResolution},scale<<=1}minWidth=Math.min(minWidth,minWidthCurrentComponent),minHeight=Math.min(minHeight,minHeightCurrentComponent),maxNumWide=Math.max(maxNumWide,maxNumWideCurrentComponent),maxNumHigh=Math.max(maxNumHigh,maxNumHighCurrentComponent),sizePerComponent[c]={resolutions:sizePerResolution,minWidth:minWidthCurrentComponent,minHeight:minHeightCurrentComponent,maxNumWide:maxNumWideCurrentComponent,maxNumHigh:maxNumHighCurrentComponent}}return{components:sizePerComponent,minWidth:minWidth,minHeight:minHeight,maxNumWide:maxNumWide,maxNumHigh:maxNumHigh}}function buildPackets(context){for(var siz=context.SIZ,tileIndex=context.currentTile.index,tile=context.tiles[tileIndex],componentsCount=siz.Csiz,c=0;c<componentsCount;c++){for(var component=tile.components[c],decompositionLevelsCount=component.codingStyleParameters.decompositionLevelsCount,resolutions=[],subbands=[],r=0;r<=decompositionLevelsCount;r++){var subband,blocksDimensions=getBlocksDimensions(0,component,r),resolution={},scale=1<<decompositionLevelsCount-r;if(resolution.trx0=Math.ceil(component.tcx0/scale),resolution.try0=Math.ceil(component.tcy0/scale),resolution.trx1=Math.ceil(component.tcx1/scale),resolution.try1=Math.ceil(component.tcy1/scale),resolution.resLevel=r,buildPrecincts(0,resolution,blocksDimensions),resolutions.push(resolution),0===r)(subband={}).type="LL",subband.tbx0=Math.ceil(component.tcx0/scale),subband.tby0=Math.ceil(component.tcy0/scale),subband.tbx1=Math.ceil(component.tcx1/scale),subband.tby1=Math.ceil(component.tcy1/scale),subband.resolution=resolution,buildCodeblocks(0,subband,blocksDimensions),subbands.push(subband),resolution.subbands=[subband];else{var bscale=1<<decompositionLevelsCount-r+1,resolutionSubbands=[];(subband={}).type="HL",subband.tbx0=Math.ceil(component.tcx0/bscale-.5),subband.tby0=Math.ceil(component.tcy0/bscale),subband.tbx1=Math.ceil(component.tcx1/bscale-.5),subband.tby1=Math.ceil(component.tcy1/bscale),subband.resolution=resolution,buildCodeblocks(0,subband,blocksDimensions),subbands.push(subband),resolutionSubbands.push(subband),(subband={}).type="LH",subband.tbx0=Math.ceil(component.tcx0/bscale),subband.tby0=Math.ceil(component.tcy0/bscale-.5),subband.tbx1=Math.ceil(component.tcx1/bscale),subband.tby1=Math.ceil(component.tcy1/bscale-.5),subband.resolution=resolution,buildCodeblocks(0,subband,blocksDimensions),subbands.push(subband),resolutionSubbands.push(subband),(subband={}).type="HH",subband.tbx0=Math.ceil(component.tcx0/bscale-.5),subband.tby0=Math.ceil(component.tcy0/bscale-.5),subband.tbx1=Math.ceil(component.tcx1/bscale-.5),subband.tby1=Math.ceil(component.tcy1/bscale-.5),subband.resolution=resolution,buildCodeblocks(0,subband,blocksDimensions),subbands.push(subband),resolutionSubbands.push(subband),resolution.subbands=resolutionSubbands}}component.resolutions=resolutions,component.subbands=subbands}var progressionOrder=tile.codingStyleDefaultParameters.progressionOrder;switch(progressionOrder){case 0:tile.packetsIterator=new LayerResolutionComponentPositionIterator(context);break;case 1:tile.packetsIterator=new ResolutionLayerComponentPositionIterator(context);break;case 2:tile.packetsIterator=new ResolutionPositionComponentLayerIterator(context);break;case 3:tile.packetsIterator=new PositionComponentResolutionLayerIterator(context);break;case 4:tile.packetsIterator=new ComponentPositionResolutionLayerIterator(context);break;default:throw new JpxError("Unsupported progression order ".concat(progressionOrder))}}function parseTilePackets(context,data,offset,dataLength){var buffer,position=0,bufferSize=0,skipNextBit=!1;function readBits(count){for(;bufferSize<count;){var b=data[offset+position];position++,skipNextBit?(buffer=buffer<<7|b,bufferSize+=7,skipNextBit=!1):(buffer=buffer<<8|b,bufferSize+=8),255===b&&(skipNextBit=!0)}return buffer>>>(bufferSize-=count)&(1<<count)-1}function skipMarkerIfEqual(value){return 255===data[offset+position-1]&&data[offset+position]===value?(skipBytes(1),!0):255===data[offset+position]&&data[offset+position+1]===value&&(skipBytes(2),!0)}function skipBytes(count){position+=count}function alignToByte(){bufferSize=0,skipNextBit&&(position++,skipNextBit=!1)}function readCodingpasses(){if(0===readBits(1))return 1;if(0===readBits(1))return 2;var value=readBits(2);return value<3?value+3:(value=readBits(5))<31?value+6:(value=readBits(7))+37}for(var tileIndex=context.currentTile.index,tile=context.tiles[tileIndex],sopMarkerUsed=context.COD.sopMarkerUsed,ephMarkerUsed=context.COD.ephMarkerUsed,packetsIterator=tile.packetsIterator;position<dataLength;){alignToByte(),sopMarkerUsed&&skipMarkerIfEqual(145)&&skipBytes(4);var packet=packetsIterator.nextPacket();if(readBits(1)){for(var codeblock,layerNumber=packet.layerNumber,queue=[],i=0,ii=packet.codeblocks.length;i<ii;i++){var precinct=(codeblock=packet.codeblocks[i]).precinct,codeblockColumn=codeblock.cbx-precinct.cbxMin,codeblockRow=codeblock.cby-precinct.cbyMin,codeblockIncluded=!1,firstTimeInclusion=!1;if(void 0!==codeblock.included)codeblockIncluded=!!readBits(1);else{var inclusionTree,zeroBitPlanesTree;if(void 0!==(precinct=codeblock.precinct).inclusionTree)inclusionTree=precinct.inclusionTree;else{var width=precinct.cbxMax-precinct.cbxMin+1,height=precinct.cbyMax-precinct.cbyMin+1;inclusionTree=new InclusionTree(width,height,layerNumber),zeroBitPlanesTree=new TagTree(width,height),precinct.inclusionTree=inclusionTree,precinct.zeroBitPlanesTree=zeroBitPlanesTree}if(inclusionTree.reset(codeblockColumn,codeblockRow,layerNumber))for(;;){if(!readBits(1)){inclusionTree.incrementValue(layerNumber);break}if(!inclusionTree.nextLevel()){codeblock.included=!0,codeblockIncluded=firstTimeInclusion=!0;break}}}if(codeblockIncluded){if(firstTimeInclusion){for((zeroBitPlanesTree=precinct.zeroBitPlanesTree).reset(codeblockColumn,codeblockRow);;)if(readBits(1)){if(!zeroBitPlanesTree.nextLevel())break}else zeroBitPlanesTree.incrementValue();codeblock.zeroBitPlanes=zeroBitPlanesTree.value}for(var codingpasses=readCodingpasses();readBits(1);)codeblock.Lblock++;var codingpassesLog2=(0,_core_utils.log2)(codingpasses),codedDataLength=readBits((codingpasses<1<<codingpassesLog2?codingpassesLog2-1:codingpassesLog2)+codeblock.Lblock);queue.push({codeblock:codeblock,codingpasses:codingpasses,dataLength:codedDataLength})}}for(alignToByte(),ephMarkerUsed&&skipMarkerIfEqual(146);queue.length>0;){var packetItem=queue.shift();void 0===(codeblock=packetItem.codeblock).data&&(codeblock.data=[]),codeblock.data.push({data:data,start:offset+position,end:offset+position+packetItem.dataLength,codingpasses:packetItem.codingpasses}),position+=packetItem.dataLength}}}return position}function copyCoefficients(coefficients,levelWidth,levelHeight,subband,delta,mb,reversible,segmentationSymbolUsed){for(var x0=subband.tbx0,y0=subband.tby0,width=subband.tbx1-subband.tbx0,codeblocks=subband.codeblocks,right="H"===subband.type.charAt(0)?1:0,bottom="H"===subband.type.charAt(1)?levelWidth:0,i=0,ii=codeblocks.length;i<ii;++i){var codeblock=codeblocks[i],blockWidth=codeblock.tbx1_-codeblock.tbx0_,blockHeight=codeblock.tby1_-codeblock.tby0_;if(0!==blockWidth&&0!==blockHeight&&void 0!==codeblock.data){var bitModel,currentCodingpassType;bitModel=new BitModel(blockWidth,blockHeight,codeblock.subbandType,codeblock.zeroBitPlanes,mb),currentCodingpassType=2;var j,jj,dataItem,data=codeblock.data,totalLength=0,codingpasses=0;for(j=0,jj=data.length;j<jj;j++)totalLength+=(dataItem=data[j]).end-dataItem.start,codingpasses+=dataItem.codingpasses;var encodedData=new Uint8Array(totalLength),position=0;for(j=0,jj=data.length;j<jj;j++){var chunk=(dataItem=data[j]).data.subarray(dataItem.start,dataItem.end);encodedData.set(chunk,position),position+=chunk.length}var decoder=new _arithmetic_decoder.ArithmeticDecoder(encodedData,0,totalLength);for(bitModel.setDecoder(decoder),j=0;j<codingpasses;j++){switch(currentCodingpassType){case 0:bitModel.runSignificancePropagationPass();break;case 1:bitModel.runMagnitudeRefinementPass();break;case 2:bitModel.runCleanupPass(),segmentationSymbolUsed&&bitModel.checkSegmentationSymbol()}currentCodingpassType=(currentCodingpassType+1)%3}var k,n,nb,offset=codeblock.tbx0_-x0+(codeblock.tby0_-y0)*width,sign=bitModel.coefficentsSign,magnitude=bitModel.coefficentsMagnitude,bitsDecoded=bitModel.bitsDecoded,magnitudeCorrection=reversible?0:.5;position=0;var interleave="LL"!==subband.type;for(j=0;j<blockHeight;j++){var levelOffset=2*(offset/width|0)*(levelWidth-width)+right+bottom;for(k=0;k<blockWidth;k++){if(0!==(n=magnitude[position])){n=(n+magnitudeCorrection)*delta,0!==sign[position]&&(n=-n),nb=bitsDecoded[position];var pos=interleave?levelOffset+(offset<<1):offset;coefficients[pos]=reversible&&nb>=mb?n:n*(1<<mb-nb)}offset++,position++}offset+=width-blockWidth}}}}function transformTile(context,tile,c){for(var component=tile.components[c],codingStyleParameters=component.codingStyleParameters,quantizationParameters=component.quantizationParameters,decompositionLevelsCount=codingStyleParameters.decompositionLevelsCount,spqcds=quantizationParameters.SPqcds,scalarExpounded=quantizationParameters.scalarExpounded,guardBits=quantizationParameters.guardBits,segmentationSymbolUsed=codingStyleParameters.segmentationSymbolUsed,precision=context.components[c].precision,reversible=codingStyleParameters.reversibleTransformation,transform=reversible?new ReversibleTransform:new IrreversibleTransform,subbandCoefficients=[],b=0,i=0;i<=decompositionLevelsCount;i++){for(var resolution=component.resolutions[i],width=resolution.trx1-resolution.trx0,height=resolution.try1-resolution.try0,coefficients=new Float32Array(width*height),j=0,jj=resolution.subbands.length;j<jj;j++){var mu,epsilon;scalarExpounded?(mu=spqcds[b].mu,epsilon=spqcds[b].epsilon,b++):(mu=spqcds[0].mu,epsilon=spqcds[0].epsilon+(i>0?1-i:0));var subband=resolution.subbands[j],gainLog2=SubbandsGainLog2[subband.type];copyCoefficients(coefficients,width,0,subband,reversible?1:Math.pow(2,precision+gainLog2-epsilon)*(1+mu/2048),guardBits+epsilon-1,reversible,segmentationSymbolUsed)}subbandCoefficients.push({width:width,height:height,items:coefficients})}var result=transform.calculate(subbandCoefficients,component.tcx0,component.tcy0);return{left:component.tcx0,top:component.tcy0,width:result.width,height:result.height,items:result.items}}function initializeTile(context,tileIndex){for(var componentsCount=context.SIZ.Csiz,tile=context.tiles[tileIndex],c=0;c<componentsCount;c++){var component=tile.components[c],qcdOrQcc=void 0!==context.currentTile.QCC[c]?context.currentTile.QCC[c]:context.currentTile.QCD;component.quantizationParameters=qcdOrQcc;var codOrCoc=void 0!==context.currentTile.COC[c]?context.currentTile.COC[c]:context.currentTile.COD;component.codingStyleParameters=codOrCoc}tile.codingStyleDefaultParameters=context.currentTile.COD}JpxImage.prototype={parse:function(data){if(65359!==(0,_core_utils.readUint16)(data,0))for(var position=0,length=data.length;position<length;){var headerSize=8,lbox=(0,_core_utils.readUint32)(data,position),tbox=(0,_core_utils.readUint32)(data,position+4);if(position+=headerSize,1===lbox&&(lbox=4294967296*(0,_core_utils.readUint32)(data,position)+(0,_core_utils.readUint32)(data,position+4),position+=8,headerSize+=8),0===lbox&&(lbox=length-position+headerSize),lbox<headerSize)throw new JpxError("Invalid box field size");var dataLength=lbox-headerSize,jumpDataLength=!0;switch(tbox){case 1785737832:jumpDataLength=!1;break;case 1668246642:var method=data[position];if(1===method){var colorspace=(0,_core_utils.readUint32)(data,position+3);switch(colorspace){case 16:case 17:case 18:break;default:(0,_util.warn)("Unknown colorspace "+colorspace)}}else 2===method&&(0,_util.info)("ICC profile not supported");break;case 1785737827:this.parseCodestream(data,position,position+dataLength);break;case 1783636e3:218793738!==(0,_core_utils.readUint32)(data,position)&&(0,_util.warn)("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:var headerType=String.fromCharCode(tbox>>24&255,tbox>>16&255,tbox>>8&255,255&tbox);(0,_util.warn)("Unsupported header type "+tbox+" ("+headerType+")")}jumpDataLength&&(position+=dataLength)}else this.parseCodestream(data,0,data.length)},parseImageProperties:function(stream){for(var newByte=stream.getByte();newByte>=0;)if(65361==(newByte<<8|(newByte=stream.getByte()))){stream.skip(4);var Xsiz=stream.getInt32()>>>0,Ysiz=stream.getInt32()>>>0,XOsiz=stream.getInt32()>>>0,YOsiz=stream.getInt32()>>>0;stream.skip(16);var Csiz=stream.getUint16();return this.width=Xsiz-XOsiz,this.height=Ysiz-YOsiz,this.componentsCount=Csiz,void(this.bitsPerComponent=8)}throw new JpxError("No size marker found in JPX stream")},parseCodestream:function(data,start,end){var context={},doNotRecover=!1;try{for(var position=start;position+1<end;){var code=(0,_core_utils.readUint16)(data,position);position+=2;var j,sqcd,spqcds,spqcdSize,scalarExpounded,tile,length=0;switch(code){case 65359:context.mainHeader=!0;break;case 65497:break;case 65361:length=(0,_core_utils.readUint16)(data,position);var siz={};siz.Xsiz=(0,_core_utils.readUint32)(data,position+4),siz.Ysiz=(0,_core_utils.readUint32)(data,position+8),siz.XOsiz=(0,_core_utils.readUint32)(data,position+12),siz.YOsiz=(0,_core_utils.readUint32)(data,position+16),siz.XTsiz=(0,_core_utils.readUint32)(data,position+20),siz.YTsiz=(0,_core_utils.readUint32)(data,position+24),siz.XTOsiz=(0,_core_utils.readUint32)(data,position+28),siz.YTOsiz=(0,_core_utils.readUint32)(data,position+32);var componentsCount=(0,_core_utils.readUint16)(data,position+36);siz.Csiz=componentsCount;var components=[];j=position+38;for(var i=0;i<componentsCount;i++){var component={precision:1+(127&data[j]),isSigned:!!(128&data[j]),XRsiz:data[j+1],YRsiz:data[j+2]};j+=3,calculateComponentDimensions(component,siz),components.push(component)}context.SIZ=siz,context.components=components,calculateTileGrids(context,components),context.QCC=[],context.COC=[];break;case 65372:length=(0,_core_utils.readUint16)(data,position);var qcd={};switch(j=position+2,31&(sqcd=data[j++])){case 0:spqcdSize=8,scalarExpounded=!0;break;case 1:spqcdSize=16,scalarExpounded=!1;break;case 2:spqcdSize=16,scalarExpounded=!0;break;default:throw new Error("Invalid SQcd value "+sqcd)}for(qcd.noQuantization=8===spqcdSize,qcd.scalarExpounded=scalarExpounded,qcd.guardBits=sqcd>>5,spqcds=[];j<length+position;){var spqcd={};8===spqcdSize?(spqcd.epsilon=data[j++]>>3,spqcd.mu=0):(spqcd.epsilon=data[j]>>3,spqcd.mu=(7&data[j])<<8|data[j+1],j+=2),spqcds.push(spqcd)}qcd.SPqcds=spqcds,context.mainHeader?context.QCD=qcd:(context.currentTile.QCD=qcd,context.currentTile.QCC=[]);break;case 65373:length=(0,_core_utils.readUint16)(data,position);var cqcc,qcc={};switch(j=position+2,context.SIZ.Csiz<257?cqcc=data[j++]:(cqcc=(0,_core_utils.readUint16)(data,j),j+=2),31&(sqcd=data[j++])){case 0:spqcdSize=8,scalarExpounded=!0;break;case 1:spqcdSize=16,scalarExpounded=!1;break;case 2:spqcdSize=16,scalarExpounded=!0;break;default:throw new Error("Invalid SQcd value "+sqcd)}for(qcc.noQuantization=8===spqcdSize,qcc.scalarExpounded=scalarExpounded,qcc.guardBits=sqcd>>5,spqcds=[];j<length+position;)spqcd={},8===spqcdSize?(spqcd.epsilon=data[j++]>>3,spqcd.mu=0):(spqcd.epsilon=data[j]>>3,spqcd.mu=(7&data[j])<<8|data[j+1],j+=2),spqcds.push(spqcd);qcc.SPqcds=spqcds,context.mainHeader?context.QCC[cqcc]=qcc:context.currentTile.QCC[cqcc]=qcc;break;case 65362:length=(0,_core_utils.readUint16)(data,position);var cod={};j=position+2;var scod=data[j++];cod.entropyCoderWithCustomPrecincts=!!(1&scod),cod.sopMarkerUsed=!!(2&scod),cod.ephMarkerUsed=!!(4&scod),cod.progressionOrder=data[j++],cod.layersCount=(0,_core_utils.readUint16)(data,j),j+=2,cod.multipleComponentTransform=data[j++],cod.decompositionLevelsCount=data[j++],cod.xcb=2+(15&data[j++]),cod.ycb=2+(15&data[j++]);var blockStyle=data[j++];if(cod.selectiveArithmeticCodingBypass=!!(1&blockStyle),cod.resetContextProbabilities=!!(2&blockStyle),cod.terminationOnEachCodingPass=!!(4&blockStyle),cod.verticallyStripe=!!(8&blockStyle),cod.predictableTermination=!!(16&blockStyle),cod.segmentationSymbolUsed=!!(32&blockStyle),cod.reversibleTransformation=data[j++],cod.entropyCoderWithCustomPrecincts){for(var precinctsSizes=[];j<length+position;){var precinctsSize=data[j++];precinctsSizes.push({PPx:15&precinctsSize,PPy:precinctsSize>>4})}cod.precinctsSizes=precinctsSizes}var unsupported=[];cod.selectiveArithmeticCodingBypass&&unsupported.push("selectiveArithmeticCodingBypass"),cod.resetContextProbabilities&&unsupported.push("resetContextProbabilities"),cod.terminationOnEachCodingPass&&unsupported.push("terminationOnEachCodingPass"),cod.verticallyStripe&&unsupported.push("verticallyStripe"),cod.predictableTermination&&unsupported.push("predictableTermination"),unsupported.length>0&&(doNotRecover=!0,(0,_util.warn)("JPX: Unsupported COD options (".concat(unsupported.join(", "),")."))),context.mainHeader?context.COD=cod:(context.currentTile.COD=cod,context.currentTile.COC=[]);break;case 65424:length=(0,_core_utils.readUint16)(data,position),(tile={}).index=(0,_core_utils.readUint16)(data,position+2),tile.length=(0,_core_utils.readUint32)(data,position+4),tile.dataEnd=tile.length+position-2,tile.partIndex=data[position+8],tile.partsCount=data[position+9],context.mainHeader=!1,0===tile.partIndex&&(tile.COD=context.COD,tile.COC=context.COC.slice(0),tile.QCD=context.QCD,tile.QCC=context.QCC.slice(0)),context.currentTile=tile;break;case 65427:0===(tile=context.currentTile).partIndex&&(initializeTile(context,tile.index),buildPackets(context)),parseTilePackets(context,data,position,length=tile.dataEnd-position);break;case 65363:(0,_util.warn)("JPX: Codestream code 0xFF53 (COC) is not implemented.");case 65365:case 65367:case 65368:case 65380:length=(0,_core_utils.readUint16)(data,position);break;default:throw new Error("Unknown codestream code: "+code.toString(16))}position+=length}}catch(e){if(doNotRecover||this.failOnCorruptedImage)throw new JpxError(e.message);(0,_util.warn)('JPX: Trying to recover from: "'.concat(e.message,'".'))}this.tiles=function(context){for(var siz=context.SIZ,components=context.components,componentsCount=siz.Csiz,resultImages=[],i=0,ii=context.tiles.length;i<ii;i++){var c,tile=context.tiles[i],transformedTiles=[];for(c=0;c<componentsCount;c++)transformedTiles[c]=transformTile(context,tile,c);var shift,offset,j,jj,y0,y1,y2,tile0=transformedTiles[0],out=new Uint8ClampedArray(tile0.items.length*componentsCount),result={left:tile0.left,top:tile0.top,width:tile0.width,height:tile0.height,items:out},pos=0;if(tile.codingStyleDefaultParameters.multipleComponentTransform){var fourComponents=4===componentsCount,y0items=transformedTiles[0].items,y1items=transformedTiles[1].items,y2items=transformedTiles[2].items,y3items=fourComponents?transformedTiles[3].items:null;offset=.5+(128<<(shift=components[0].precision-8));var component0=tile.components[0],alpha01=componentsCount-3;if(jj=y0items.length,component0.codingStyleParameters.reversibleTransformation)for(j=0;j<jj;j++,pos+=alpha01){y0=y0items[j]+offset,y1=y1items[j];var g=y0-((y2=y2items[j])+y1>>2);out[pos++]=g+y2>>shift,out[pos++]=g>>shift,out[pos++]=g+y1>>shift}else for(j=0;j<jj;j++,pos+=alpha01)y0=y0items[j]+offset,y1=y1items[j],y2=y2items[j],out[pos++]=y0+1.402*y2>>shift,out[pos++]=y0-.34413*y1-.71414*y2>>shift,out[pos++]=y0+1.772*y1>>shift;if(fourComponents)for(j=0,pos=3;j<jj;j++,pos+=4)out[pos]=y3items[j]+offset>>shift}else for(c=0;c<componentsCount;c++){var items=transformedTiles[c].items;for(offset=.5+(128<<(shift=components[c].precision-8)),pos=c,j=0,jj=items.length;j<jj;j++)out[pos]=items[j]+offset>>shift,pos+=componentsCount}resultImages.push(result)}return resultImages}(context),this.width=context.SIZ.Xsiz-context.SIZ.XOsiz,this.height=context.SIZ.Ysiz-context.SIZ.YOsiz,this.componentsCount=context.SIZ.Csiz}};var TagTree=function(){function TagTree(width,height){var levelsLength=(0,_core_utils.log2)(Math.max(width,height))+1;this.levels=[];for(var i=0;i<levelsLength;i++){var level={width:width,height:height,items:[]};this.levels.push(level),width=Math.ceil(width/2),height=Math.ceil(height/2)}}return TagTree.prototype={reset:function(i,j){for(var level,currentLevel=0,value=0;currentLevel<this.levels.length;){var index=i+j*(level=this.levels[currentLevel]).width;if(void 0!==level.items[index]){value=level.items[index];break}level.index=index,i>>=1,j>>=1,currentLevel++}currentLevel--,(level=this.levels[currentLevel]).items[level.index]=value,this.currentLevel=currentLevel,delete this.value},incrementValue:function(){var level=this.levels[this.currentLevel];level.items[level.index]++},nextLevel:function(){var currentLevel=this.currentLevel,level=this.levels[currentLevel],value=level.items[level.index];return--currentLevel<0?(this.value=value,!1):(this.currentLevel=currentLevel,(level=this.levels[currentLevel]).items[level.index]=value,!0)}},TagTree}(),InclusionTree=function(){function InclusionTree(width,height,defaultValue){var levelsLength=(0,_core_utils.log2)(Math.max(width,height))+1;this.levels=[];for(var i=0;i<levelsLength;i++){for(var items=new Uint8Array(width*height),j=0,jj=items.length;j<jj;j++)items[j]=defaultValue;var level={width:width,height:height,items:items};this.levels.push(level),width=Math.ceil(width/2),height=Math.ceil(height/2)}}return InclusionTree.prototype={reset:function(i,j,stopValue){for(var currentLevel=0;currentLevel<this.levels.length;){var level=this.levels[currentLevel],index=i+j*level.width;level.index=index;var value=level.items[index];if(255===value)break;if(value>stopValue)return this.currentLevel=currentLevel,this.propagateValues(),!1;i>>=1,j>>=1,currentLevel++}return this.currentLevel=currentLevel-1,!0},incrementValue:function(stopValue){var level=this.levels[this.currentLevel];level.items[level.index]=stopValue+1,this.propagateValues()},propagateValues:function(){for(var levelIndex=this.currentLevel,level=this.levels[levelIndex],currentValue=level.items[level.index];--levelIndex>=0;)(level=this.levels[levelIndex]).items[level.index]=currentValue},nextLevel:function(){var currentLevel=this.currentLevel,level=this.levels[currentLevel],value=level.items[level.index];return level.items[level.index]=255,!(--currentLevel<0||(this.currentLevel=currentLevel,(level=this.levels[currentLevel]).items[level.index]=value,0))}},InclusionTree}(),BitModel=function(){var LLAndLHContextsLabel=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),HLContextLabel=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),HHContextLabel=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);function BitModel(width,height,subband,zeroBitPlanes,mb){var contextLabelTable;this.width=width,this.height=height,contextLabelTable="HH"===subband?HHContextLabel:"HL"===subband?HLContextLabel:LLAndLHContextsLabel,this.contextLabelTable=contextLabelTable;var coefficentsMagnitude,coefficientCount=width*height;this.neighborsSignificance=new Uint8Array(coefficientCount),this.coefficentsSign=new Uint8Array(coefficientCount),coefficentsMagnitude=mb>14?new Uint32Array(coefficientCount):mb>6?new Uint16Array(coefficientCount):new Uint8Array(coefficientCount),this.coefficentsMagnitude=coefficentsMagnitude,this.processingFlags=new Uint8Array(coefficientCount);var bitsDecoded=new Uint8Array(coefficientCount);if(0!==zeroBitPlanes)for(var i=0;i<coefficientCount;i++)bitsDecoded[i]=zeroBitPlanes;this.bitsDecoded=bitsDecoded,this.reset()}return BitModel.prototype={setDecoder:function(decoder){this.decoder=decoder},reset:function(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6},setNeighborsSignificance:function(row,column,index){var i,neighborsSignificance=this.neighborsSignificance,width=this.width,height=this.height,left=column>0,right=column+1<width;row>0&&(i=index-width,left&&(neighborsSignificance[i-1]+=16),right&&(neighborsSignificance[i+1]+=16),neighborsSignificance[i]+=4),row+1<height&&(i=index+width,left&&(neighborsSignificance[i-1]+=16),right&&(neighborsSignificance[i+1]+=16),neighborsSignificance[i]+=4),left&&(neighborsSignificance[index-1]+=1),right&&(neighborsSignificance[index+1]+=1),neighborsSignificance[index]|=128},runSignificancePropagationPass:function(){for(var decoder=this.decoder,width=this.width,height=this.height,coefficentsMagnitude=this.coefficentsMagnitude,coefficentsSign=this.coefficentsSign,neighborsSignificance=this.neighborsSignificance,processingFlags=this.processingFlags,contexts=this.contexts,labels=this.contextLabelTable,bitsDecoded=this.bitsDecoded,i0=0;i0<height;i0+=4)for(var j=0;j<width;j++)for(var index=i0*width+j,i1=0;i1<4;i1++,index+=width){var i=i0+i1;if(i>=height)break;if(processingFlags[index]&=-2,!coefficentsMagnitude[index]&&neighborsSignificance[index]){var contextLabel=labels[neighborsSignificance[index]];if(decoder.readBit(contexts,contextLabel)){var sign=this.decodeSignBit(i,j,index);coefficentsSign[index]=sign,coefficentsMagnitude[index]=1,this.setNeighborsSignificance(i,j,index),processingFlags[index]|=2}bitsDecoded[index]++,processingFlags[index]|=1}}},decodeSignBit:function(row,column,index){var contribution,sign0,sign1,significance1,contextLabel,decoded,width=this.width,height=this.height,coefficentsMagnitude=this.coefficentsMagnitude,coefficentsSign=this.coefficentsSign;significance1=column>0&&0!==coefficentsMagnitude[index-1],column+1<width&&0!==coefficentsMagnitude[index+1]?(sign1=coefficentsSign[index+1],contribution=significance1?1-sign1-(sign0=coefficentsSign[index-1]):1-sign1-sign1):contribution=significance1?1-(sign0=coefficentsSign[index-1])-sign0:0;var horizontalContribution=3*contribution;return significance1=row>0&&0!==coefficentsMagnitude[index-width],row+1<height&&0!==coefficentsMagnitude[index+width]?(sign1=coefficentsSign[index+width],contribution=significance1?1-sign1-(sign0=coefficentsSign[index-width])+horizontalContribution:1-sign1-sign1+horizontalContribution):contribution=significance1?1-(sign0=coefficentsSign[index-width])-sign0+horizontalContribution:horizontalContribution,contribution>=0?(contextLabel=9+contribution,decoded=this.decoder.readBit(this.contexts,contextLabel)):(contextLabel=9-contribution,decoded=1^this.decoder.readBit(this.contexts,contextLabel)),decoded},runMagnitudeRefinementPass:function(){for(var indexNext,decoder=this.decoder,width=this.width,height=this.height,coefficentsMagnitude=this.coefficentsMagnitude,neighborsSignificance=this.neighborsSignificance,contexts=this.contexts,bitsDecoded=this.bitsDecoded,processingFlags=this.processingFlags,length=width*height,width4=4*width,index0=0;index0<length;index0=indexNext){indexNext=Math.min(length,index0+width4);for(var j=0;j<width;j++)for(var index=index0+j;index<indexNext;index+=width)if(coefficentsMagnitude[index]&&0==(1&processingFlags[index])){var contextLabel=16;0!=(2&processingFlags[index])&&(processingFlags[index]^=2,contextLabel=0==(127&neighborsSignificance[index])?15:14);var bit=decoder.readBit(contexts,contextLabel);coefficentsMagnitude[index]=coefficentsMagnitude[index]<<1|bit,bitsDecoded[index]++,processingFlags[index]|=1}}},runCleanupPass:function(){for(var iNext,decoder=this.decoder,width=this.width,height=this.height,neighborsSignificance=this.neighborsSignificance,coefficentsMagnitude=this.coefficentsMagnitude,coefficentsSign=this.coefficentsSign,contexts=this.contexts,labels=this.contextLabelTable,bitsDecoded=this.bitsDecoded,processingFlags=this.processingFlags,oneRowDown=width,twoRowsDown=2*width,threeRowsDown=3*width,i0=0;i0<height;i0=iNext){iNext=Math.min(i0+4,height);for(var indexBase=i0*width,checkAllEmpty=i0+3<height,j=0;j<width;j++){var sign,index0=indexBase+j,i1=0,index=index0,i=i0;if(checkAllEmpty&&0===processingFlags[index0]&&0===processingFlags[index0+oneRowDown]&&0===processingFlags[index0+twoRowsDown]&&0===processingFlags[index0+threeRowsDown]&&0===neighborsSignificance[index0]&&0===neighborsSignificance[index0+oneRowDown]&&0===neighborsSignificance[index0+twoRowsDown]&&0===neighborsSignificance[index0+threeRowsDown]){if(!decoder.readBit(contexts,18)){bitsDecoded[index0]++,bitsDecoded[index0+oneRowDown]++,bitsDecoded[index0+twoRowsDown]++,bitsDecoded[index0+threeRowsDown]++;continue}0!=(i1=decoder.readBit(contexts,17)<<1|decoder.readBit(contexts,17))&&(i=i0+i1,index+=i1*width),sign=this.decodeSignBit(i,j,index),coefficentsSign[index]=sign,coefficentsMagnitude[index]=1,this.setNeighborsSignificance(i,j,index),processingFlags[index]|=2,index=index0;for(var i2=i0;i2<=i;i2++,index+=width)bitsDecoded[index]++;i1++}for(i=i0+i1;i<iNext;i++,index+=width)if(!coefficentsMagnitude[index]&&0==(1&processingFlags[index])){var contextLabel=labels[neighborsSignificance[index]];1===decoder.readBit(contexts,contextLabel)&&(sign=this.decodeSignBit(i,j,index),coefficentsSign[index]=sign,coefficentsMagnitude[index]=1,this.setNeighborsSignificance(i,j,index),processingFlags[index]|=2),bitsDecoded[index]++}}}},checkSegmentationSymbol:function(){var decoder=this.decoder,contexts=this.contexts;if(10!=(decoder.readBit(contexts,17)<<3|decoder.readBit(contexts,17)<<2|decoder.readBit(contexts,17)<<1|decoder.readBit(contexts,17)))throw new JpxError("Invalid segmentation symbol")}},BitModel}(),Transform=function(){function Transform(){}return Transform.prototype.calculate=function(subbands,u0,v0){for(var ll=subbands[0],i=1,ii=subbands.length;i<ii;i++)ll=this.iterate(ll,subbands[i],u0,v0);return ll},Transform.prototype.extend=function(buffer,offset,size){var i1=offset-1,j1=offset+1,i2=offset+size-2,j2=offset+size;buffer[i1--]=buffer[j1++],buffer[j2++]=buffer[i2--],buffer[i1--]=buffer[j1++],buffer[j2++]=buffer[i2--],buffer[i1--]=buffer[j1++],buffer[j2++]=buffer[i2--],buffer[i1]=buffer[j1],buffer[j2]=buffer[i2]},Transform.prototype.iterate=function(ll,hl_lh_hh,u0,v0){var i,j,k,l,u,v,llWidth=ll.width,llHeight=ll.height,llItems=ll.items,width=hl_lh_hh.width,height=hl_lh_hh.height,items=hl_lh_hh.items;for(k=0,i=0;i<llHeight;i++)for(l=2*i*width,j=0;j<llWidth;j++,k++,l+=2)items[l]=llItems[k];llItems=ll.items=null;var rowBuffer=new Float32Array(width+8);if(1===width){if(0!=(1&u0))for(v=0,k=0;v<height;v++,k+=width)items[k]*=.5}else for(v=0,k=0;v<height;v++,k+=width)rowBuffer.set(items.subarray(k,k+width),4),this.extend(rowBuffer,4,width),this.filter(rowBuffer,4,width),items.set(rowBuffer.subarray(4,4+width),k);var numBuffers=16,colBuffers=[];for(i=0;i<numBuffers;i++)colBuffers.push(new Float32Array(height+8));var b,currentBuffer=0;if(ll=4+height,1===height){if(0!=(1&v0))for(u=0;u<width;u++)items[u]*=.5}else for(u=0;u<width;u++){if(0===currentBuffer){for(numBuffers=Math.min(width-u,numBuffers),k=u,l=4;l<ll;k+=width,l++)for(b=0;b<numBuffers;b++)colBuffers[b][l]=items[k+b];currentBuffer=numBuffers}var buffer=colBuffers[--currentBuffer];if(this.extend(buffer,4,height),this.filter(buffer,4,height),0===currentBuffer)for(k=u-numBuffers+1,l=4;l<ll;k+=width,l++)for(b=0;b<numBuffers;b++)items[k+b]=colBuffers[b][l]}return{width:width,height:height,items:items}},Transform}(),IrreversibleTransform=function(){function IrreversibleTransform(){Transform.call(this)}return IrreversibleTransform.prototype=Object.create(Transform.prototype),IrreversibleTransform.prototype.filter=function(x,offset,length){var j,n,current,next,len=length>>1,alpha=-1.586134342059924,beta=-.052980118572961,gamma=.882911075530934,delta=.443506852043971,K=1.230174104914001;for(j=(offset|=0)-3,n=len+4;n--;j+=2)x[j]*=.8128930661159609;for(current=delta*x[(j=offset-2)-1],n=len+3;n--&&(next=delta*x[j+1],x[j]=K*x[j]-current-next,n--);j+=2)current=delta*x[(j+=2)+1],x[j]=K*x[j]-current-next;for(current=gamma*x[(j=offset-1)-1],n=len+2;n--&&(next=gamma*x[j+1],x[j]-=current+next,n--);j+=2)current=gamma*x[(j+=2)+1],x[j]-=current+next;for(current=beta*x[(j=offset)-1],n=len+1;n--&&(next=beta*x[j+1],x[j]-=current+next,n--);j+=2)current=beta*x[(j+=2)+1],x[j]-=current+next;if(0!==len)for(current=alpha*x[(j=offset+1)-1],n=len;n--&&(next=alpha*x[j+1],x[j]-=current+next,n--);j+=2)current=alpha*x[(j+=2)+1],x[j]-=current+next},IrreversibleTransform}(),ReversibleTransform=function(){function ReversibleTransform(){Transform.call(this)}return ReversibleTransform.prototype=Object.create(Transform.prototype),ReversibleTransform.prototype.filter=function(x,offset,length){var j,n,len=length>>1;for(j=offset|=0,n=len+1;n--;j+=2)x[j]-=x[j-1]+x[j+1]+2>>2;for(j=offset+1,n=len;n--;j+=2)x[j]+=x[j-1]+x[j+1]>>1},ReversibleTransform}();return JpxImage}();exports.JpxImage=JpxImage},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDF20=exports.PDF17=exports.CipherTransformFactory=exports.calculateSHA512=exports.calculateSHA384=exports.calculateSHA256=exports.calculateMD5=exports.ARCFourCipher=exports.AES256Cipher=exports.AES128Cipher=void 0;var _util=__w_pdfjs_require__(2),_primitives=__w_pdfjs_require__(5),_stream=__w_pdfjs_require__(12),ARCFourCipher=function(){function ARCFourCipher(key){this.a=0,this.b=0;var i,tmp,s=new Uint8Array(256),j=0,keyLength=key.length;for(i=0;i<256;++i)s[i]=i;for(i=0;i<256;++i)j=j+(tmp=s[i])+key[i%keyLength]&255,s[i]=s[j],s[j]=tmp;this.s=s}return ARCFourCipher.prototype={encryptBlock:function(data){var i,tmp,tmp2,n=data.length,a=this.a,b=this.b,s=this.s,output=new Uint8Array(n);for(i=0;i<n;++i)tmp2=s[b=b+(tmp=s[a=a+1&255])&255],s[a]=tmp2,s[b]=tmp,output[i]=data[i]^s[tmp+tmp2&255];return this.a=a,this.b=b,output}},ARCFourCipher.prototype.decryptBlock=ARCFourCipher.prototype.encryptBlock,ARCFourCipher.prototype.encrypt=ARCFourCipher.prototype.encryptBlock,ARCFourCipher}();exports.ARCFourCipher=ARCFourCipher;var r,k,calculateMD5=(r=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),k=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]),function(data,offset,length){var i,j,n,h0=1732584193,h1=-271733879,h2=-1732584194,h3=271733878,paddedLength=length+72&-64,padded=new Uint8Array(paddedLength);for(i=0;i<length;++i)padded[i]=data[offset++];for(padded[i++]=128,n=paddedLength-8;i<n;)padded[i++]=0;padded[i++]=length<<3&255,padded[i++]=length>>5&255,padded[i++]=length>>13&255,padded[i++]=length>>21&255,padded[i++]=length>>>29&255,padded[i++]=0,padded[i++]=0,padded[i++]=0;var w=new Int32Array(16);for(i=0;i<paddedLength;){for(j=0;j<16;++j,i+=4)w[j]=padded[i]|padded[i+1]<<8|padded[i+2]<<16|padded[i+3]<<24;var f,g,a=h0,b=h1,c=h2,d=h3;for(j=0;j<64;++j){j<16?(f=b&c|~b&d,g=j):j<32?(f=d&b|~d&c,g=5*j+1&15):j<48?(f=b^c^d,g=3*j+5&15):(f=c^(b|~d),g=7*j&15);var tmp=d,rotateArg=a+f+k[j]+w[g]|0,rotate=r[j];d=c,c=b,b=b+(rotateArg<<rotate|rotateArg>>>32-rotate)|0,a=tmp}h0=h0+a|0,h1=h1+b|0,h2=h2+c|0,h3=h3+d|0}return new Uint8Array([255&h0,h0>>8&255,h0>>16&255,h0>>>24&255,255&h1,h1>>8&255,h1>>16&255,h1>>>24&255,255&h2,h2>>8&255,h2>>16&255,h2>>>24&255,255&h3,h3>>8&255,h3>>16&255,h3>>>24&255])});exports.calculateMD5=calculateMD5;var Word64=function(){function Word64(highInteger,lowInteger){this.high=0|highInteger,this.low=0|lowInteger}return Word64.prototype={and:function(word){this.high&=word.high,this.low&=word.low},xor:function(word){this.high^=word.high,this.low^=word.low},or:function(word){this.high|=word.high,this.low|=word.low},shiftRight:function(places){places>=32?(this.low=this.high>>>places-32|0,this.high=0):(this.low=this.low>>>places|this.high<<32-places,this.high=this.high>>>places|0)},shiftLeft:function(places){places>=32?(this.high=this.low<<places-32,this.low=0):(this.high=this.high<<places|this.low>>>32-places,this.low=this.low<<places)},rotateRight:function(places){var low,high;32&places?(high=this.low,low=this.high):(low=this.low,high=this.high),places&=31,this.low=low>>>places|high<<32-places,this.high=high>>>places|low<<32-places},not:function(){this.high=~this.high,this.low=~this.low},add:function(word){var lowAdd=(this.low>>>0)+(word.low>>>0),highAdd=(this.high>>>0)+(word.high>>>0);lowAdd>4294967295&&(highAdd+=1),this.low=0|lowAdd,this.high=0|highAdd},copyTo:function(bytes,offset){bytes[offset]=this.high>>>24&255,bytes[offset+1]=this.high>>16&255,bytes[offset+2]=this.high>>8&255,bytes[offset+3]=255&this.high,bytes[offset+4]=this.low>>>24&255,bytes[offset+5]=this.low>>16&255,bytes[offset+6]=this.low>>8&255,bytes[offset+7]=255&this.low},assign:function(word){this.high=word.high,this.low=word.low}},Word64}(),calculateSHA256=function(){function rotr(x,n){return x>>>n|x<<32-n}function ch(x,y,z){return x&y^~x&z}function maj(x,y,z){return x&y^x&z^y&z}function sigma(x){return rotr(x,2)^rotr(x,13)^rotr(x,22)}function sigmaPrime(x){return rotr(x,6)^rotr(x,11)^rotr(x,25)}function littleSigma(x){return rotr(x,7)^rotr(x,18)^x>>>3}var k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];return function(data,offset,length){var i,j,n,h0=1779033703,h1=3144134277,h2=1013904242,h3=2773480762,h4=1359893119,h5=2600822924,h6=528734635,h7=1541459225,paddedLength=64*Math.ceil((length+9)/64),padded=new Uint8Array(paddedLength);for(i=0;i<length;++i)padded[i]=data[offset++];for(padded[i++]=128,n=paddedLength-8;i<n;)padded[i++]=0;padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=length>>>29&255,padded[i++]=length>>21&255,padded[i++]=length>>13&255,padded[i++]=length>>5&255,padded[i++]=length<<3&255;var x,w=new Uint32Array(64);for(i=0;i<paddedLength;){for(j=0;j<16;++j)w[j]=padded[i]<<24|padded[i+1]<<16|padded[i+2]<<8|padded[i+3],i+=4;for(j=16;j<64;++j)w[j]=0|(rotr(x=w[j-2],17)^rotr(x,19)^x>>>10)+w[j-7]+littleSigma(w[j-15])+w[j-16];var t1,t2,a=h0,b=h1,c=h2,d=h3,e=h4,f=h5,g=h6,h=h7;for(j=0;j<64;++j)t1=h+sigmaPrime(e)+ch(e,f,g)+k[j]+w[j],t2=sigma(a)+maj(a,b,c),h=g,g=f,f=e,e=d+t1|0,d=c,c=b,b=a,a=t1+t2|0;h0=h0+a|0,h1=h1+b|0,h2=h2+c|0,h3=h3+d|0,h4=h4+e|0,h5=h5+f|0,h6=h6+g|0,h7=h7+h|0}return new Uint8Array([h0>>24&255,h0>>16&255,h0>>8&255,255&h0,h1>>24&255,h1>>16&255,h1>>8&255,255&h1,h2>>24&255,h2>>16&255,h2>>8&255,255&h2,h3>>24&255,h3>>16&255,h3>>8&255,255&h3,h4>>24&255,h4>>16&255,h4>>8&255,255&h4,h5>>24&255,h5>>16&255,h5>>8&255,255&h5,h6>>24&255,h6>>16&255,h6>>8&255,255&h6,h7>>24&255,h7>>16&255,h7>>8&255,255&h7])}}();exports.calculateSHA256=calculateSHA256;var calculateSHA512=function(){function ch(result,x,y,z,tmp){result.assign(x),result.and(y),tmp.assign(x),tmp.not(),tmp.and(z),result.xor(tmp)}function maj(result,x,y,z,tmp){result.assign(x),result.and(y),tmp.assign(x),tmp.and(z),result.xor(tmp),tmp.assign(y),tmp.and(z),result.xor(tmp)}function sigma(result,x,tmp){result.assign(x),result.rotateRight(28),tmp.assign(x),tmp.rotateRight(34),result.xor(tmp),tmp.assign(x),tmp.rotateRight(39),result.xor(tmp)}function sigmaPrime(result,x,tmp){result.assign(x),result.rotateRight(14),tmp.assign(x),tmp.rotateRight(18),result.xor(tmp),tmp.assign(x),tmp.rotateRight(41),result.xor(tmp)}function littleSigma(result,x,tmp){result.assign(x),result.rotateRight(1),tmp.assign(x),tmp.rotateRight(8),result.xor(tmp),tmp.assign(x),tmp.shiftRight(7),result.xor(tmp)}function littleSigmaPrime(result,x,tmp){result.assign(x),result.rotateRight(19),tmp.assign(x),tmp.rotateRight(61),result.xor(tmp),tmp.assign(x),tmp.shiftRight(6),result.xor(tmp)}var k=[new Word64(1116352408,3609767458),new Word64(1899447441,602891725),new Word64(3049323471,3964484399),new Word64(3921009573,2173295548),new Word64(961987163,4081628472),new Word64(1508970993,3053834265),new Word64(2453635748,2937671579),new Word64(2870763221,3664609560),new Word64(3624381080,2734883394),new Word64(310598401,1164996542),new Word64(607225278,1323610764),new Word64(1426881987,3590304994),new Word64(1925078388,4068182383),new Word64(2162078206,991336113),new Word64(2614888103,633803317),new Word64(3248222580,3479774868),new Word64(3835390401,2666613458),new Word64(4022224774,944711139),new Word64(264347078,2341262773),new Word64(604807628,2007800933),new Word64(770255983,1495990901),new Word64(1249150122,1856431235),new Word64(1555081692,3175218132),new Word64(1996064986,2198950837),new Word64(2554220882,3999719339),new Word64(2821834349,766784016),new Word64(2952996808,2566594879),new Word64(3210313671,3203337956),new Word64(3336571891,1034457026),new Word64(3584528711,2466948901),new Word64(113926993,3758326383),new Word64(338241895,168717936),new Word64(666307205,1188179964),new Word64(773529912,1546045734),new Word64(1294757372,1522805485),new Word64(1396182291,2643833823),new Word64(1695183700,2343527390),new Word64(1986661051,1014477480),new Word64(2177026350,1206759142),new Word64(2456956037,344077627),new Word64(2730485921,1290863460),new Word64(2820302411,3158454273),new Word64(3259730800,3505952657),new Word64(3345764771,106217008),new Word64(3516065817,3606008344),new Word64(3600352804,1432725776),new Word64(4094571909,1467031594),new Word64(275423344,851169720),new Word64(430227734,3100823752),new Word64(506948616,1363258195),new Word64(659060556,3750685593),new Word64(883997877,3785050280),new Word64(958139571,3318307427),new Word64(1322822218,3812723403),new Word64(1537002063,2003034995),new Word64(1747873779,3602036899),new Word64(1955562222,1575990012),new Word64(2024104815,1125592928),new Word64(2227730452,2716904306),new Word64(2361852424,442776044),new Word64(2428436474,593698344),new Word64(2756734187,3733110249),new Word64(3204031479,2999351573),new Word64(3329325298,3815920427),new Word64(3391569614,3928383900),new Word64(3515267271,566280711),new Word64(3940187606,3454069534),new Word64(4118630271,4000239992),new Word64(116418474,1914138554),new Word64(174292421,2731055270),new Word64(289380356,3203993006),new Word64(460393269,320620315),new Word64(685471733,587496836),new Word64(852142971,1086792851),new Word64(1017036298,365543100),new Word64(1126000580,2618297676),new Word64(1288033470,3409855158),new Word64(1501505948,4234509866),new Word64(1607167915,987167468),new Word64(1816402316,1246189591)];return function(data,offset,length,mode384){var h0,h1,h2,h3,h4,h5,h6,h7;(mode384=!!mode384)?(h0=new Word64(3418070365,3238371032),h1=new Word64(1654270250,914150663),h2=new Word64(2438529370,812702999),h3=new Word64(355462360,4144912697),h4=new Word64(1731405415,4290775857),h5=new Word64(2394180231,1750603025),h6=new Word64(3675008525,1694076839),h7=new Word64(1203062813,3204075428)):(h0=new Word64(1779033703,4089235720),h1=new Word64(3144134277,2227873595),h2=new Word64(1013904242,4271175723),h3=new Word64(2773480762,1595750129),h4=new Word64(1359893119,2917565137),h5=new Word64(2600822924,725511199),h6=new Word64(528734635,4215389547),h7=new Word64(1541459225,327033209));var i,j,n,paddedLength=128*Math.ceil((length+17)/128),padded=new Uint8Array(paddedLength);for(i=0;i<length;++i)padded[i]=data[offset++];for(padded[i++]=128,n=paddedLength-16;i<n;)padded[i++]=0;padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=length>>>29&255,padded[i++]=length>>21&255,padded[i++]=length>>13&255,padded[i++]=length>>5&255,padded[i++]=length<<3&255;var w=new Array(80);for(i=0;i<80;i++)w[i]=new Word64(0,0);var tmp3,result,a=new Word64(0,0),b=new Word64(0,0),c=new Word64(0,0),d=new Word64(0,0),e=new Word64(0,0),f=new Word64(0,0),g=new Word64(0,0),h=new Word64(0,0),t1=new Word64(0,0),t2=new Word64(0,0),tmp1=new Word64(0,0),tmp2=new Word64(0,0);for(i=0;i<paddedLength;){for(j=0;j<16;++j)w[j].high=padded[i]<<24|padded[i+1]<<16|padded[i+2]<<8|padded[i+3],w[j].low=padded[i+4]<<24|padded[i+5]<<16|padded[i+6]<<8|padded[i+7],i+=8;for(j=16;j<80;++j)littleSigmaPrime(tmp3=w[j],w[j-2],tmp2),tmp3.add(w[j-7]),littleSigma(tmp1,w[j-15],tmp2),tmp3.add(tmp1),tmp3.add(w[j-16]);for(a.assign(h0),b.assign(h1),c.assign(h2),d.assign(h3),e.assign(h4),f.assign(h5),g.assign(h6),h.assign(h7),j=0;j<80;++j)t1.assign(h),sigmaPrime(tmp1,e,tmp2),t1.add(tmp1),ch(tmp1,e,f,g,tmp2),t1.add(tmp1),t1.add(k[j]),t1.add(w[j]),sigma(t2,a,tmp2),maj(tmp1,a,b,c,tmp2),t2.add(tmp1),tmp3=h,h=g,g=f,f=e,d.add(t1),e=d,d=c,c=b,b=a,tmp3.assign(t1),tmp3.add(t2),a=tmp3;h0.add(a),h1.add(b),h2.add(c),h3.add(d),h4.add(e),h5.add(f),h6.add(g),h7.add(h)}return mode384?(result=new Uint8Array(48),h0.copyTo(result,0),h1.copyTo(result,8),h2.copyTo(result,16),h3.copyTo(result,24),h4.copyTo(result,32),h5.copyTo(result,40)):(result=new Uint8Array(64),h0.copyTo(result,0),h1.copyTo(result,8),h2.copyTo(result,16),h3.copyTo(result,24),h4.copyTo(result,32),h5.copyTo(result,40),h6.copyTo(result,48),h7.copyTo(result,56)),result}}();exports.calculateSHA512=calculateSHA512;var calculateSHA384=function(data,offset,length){return calculateSHA512(data,offset,length,!0)};exports.calculateSHA384=calculateSHA384;var NullCipher=function(){function NullCipher(){}return NullCipher.prototype={decryptBlock:function(data){return data},encrypt:function(data){return data}},NullCipher}(),AESBaseCipher=function(){function AESBaseCipher(){_classCallCheck(this,AESBaseCipher),this.constructor===AESBaseCipher&&(0,_util.unreachable)("Cannot initialize AESBaseCipher."),this._s=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),this._inv_s=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]),this._mix=new Uint32Array([0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795]),this._mixCol=new Uint8Array(256);for(var i=0;i<256;i++)this._mixCol[i]=i<128?i<<1:i<<1^27;this.buffer=new Uint8Array(16),this.bufferPosition=0}return _createClass(AESBaseCipher,[{key:"_expandKey",value:function(cipherKey){(0,_util.unreachable)("Cannot call `_expandKey` on the base class")}},{key:"_decrypt",value:function(input,key){var t,u,v,state=new Uint8Array(16);state.set(input);for(var j=0,k=this._keySize;j<16;++j,++k)state[j]^=key[k];for(var i=this._cyclesOfRepetition-1;i>=1;--i){t=state[13],state[13]=state[9],state[9]=state[5],state[5]=state[1],state[1]=t,t=state[14],u=state[10],state[14]=state[6],state[10]=state[2],state[6]=t,state[2]=u,t=state[15],u=state[11],v=state[7],state[15]=state[3],state[11]=t,state[7]=u,state[3]=v;for(var _j2=0;_j2<16;++_j2)state[_j2]=this._inv_s[state[_j2]];for(var _j3=0,_k=16*i;_j3<16;++_j3,++_k)state[_j3]^=key[_k];for(var _j4=0;_j4<16;_j4+=4){var s0=this._mix[state[_j4]],s1=this._mix[state[_j4+1]],s2=this._mix[state[_j4+2]],s3=this._mix[state[_j4+3]];t=s0^s1>>>8^s1<<24^s2>>>16^s2<<16^s3>>>24^s3<<8,state[_j4]=t>>>24&255,state[_j4+1]=t>>16&255,state[_j4+2]=t>>8&255,state[_j4+3]=255&t}}t=state[13],state[13]=state[9],state[9]=state[5],state[5]=state[1],state[1]=t,t=state[14],u=state[10],state[14]=state[6],state[10]=state[2],state[6]=t,state[2]=u,t=state[15],u=state[11],v=state[7],state[15]=state[3],state[11]=t,state[7]=u,state[3]=v;for(var _j5=0;_j5<16;++_j5)state[_j5]=this._inv_s[state[_j5]],state[_j5]^=key[_j5];return state}},{key:"_encrypt",value:function(input,key){var t,u,v,s=this._s,state=new Uint8Array(16);state.set(input);for(var j=0;j<16;++j)state[j]^=key[j];for(var i=1;i<this._cyclesOfRepetition;i++){for(var _j6=0;_j6<16;++_j6)state[_j6]=s[state[_j6]];v=state[1],state[1]=state[5],state[5]=state[9],state[9]=state[13],state[13]=v,v=state[2],u=state[6],state[2]=state[10],state[6]=state[14],state[10]=v,state[14]=u,v=state[3],u=state[7],t=state[11],state[3]=state[15],state[7]=v,state[11]=u,state[15]=t;for(var _j7=0;_j7<16;_j7+=4){var s0=state[_j7+0],s1=state[_j7+1],s2=state[_j7+2],s3=state[_j7+3];t=s0^s1^s2^s3,state[_j7+0]^=t^this._mixCol[s0^s1],state[_j7+1]^=t^this._mixCol[s1^s2],state[_j7+2]^=t^this._mixCol[s2^s3],state[_j7+3]^=t^this._mixCol[s3^s0]}for(var _j8=0,k=16*i;_j8<16;++_j8,++k)state[_j8]^=key[k]}for(var _j9=0;_j9<16;++_j9)state[_j9]=s[state[_j9]];v=state[1],state[1]=state[5],state[5]=state[9],state[9]=state[13],state[13]=v,v=state[2],u=state[6],state[2]=state[10],state[6]=state[14],state[10]=v,state[14]=u,v=state[3],u=state[7],t=state[11],state[3]=state[15],state[7]=v,state[11]=u,state[15]=t;for(var _j10=0,_k2=this._keySize;_j10<16;++_j10,++_k2)state[_j10]^=key[_k2];return state}},{key:"_decryptBlock2",value:function(data,finalize){for(var sourceLength=data.length,buffer=this.buffer,bufferLength=this.bufferPosition,result=[],iv=this.iv,i=0;i<sourceLength;++i)if(buffer[bufferLength]=data[i],!(++bufferLength<16)){for(var plain=this._decrypt(buffer,this._key),j=0;j<16;++j)plain[j]^=iv[j];iv=buffer,result.push(plain),buffer=new Uint8Array(16),bufferLength=0}if(this.buffer=buffer,this.bufferLength=bufferLength,this.iv=iv,0===result.length)return new Uint8Array(0);var outputLength=16*result.length;if(finalize){var lastBlock=result[result.length-1],psLen=lastBlock[15];if(psLen<=16){for(var _i17=15,ii=16-psLen;_i17>=ii;--_i17)if(lastBlock[_i17]!==psLen){psLen=0;break}outputLength-=psLen,result[result.length-1]=lastBlock.subarray(0,16-psLen)}}for(var output=new Uint8Array(outputLength),_i18=0,_j11=0,_ii4=result.length;_i18<_ii4;++_i18,_j11+=16)output.set(result[_i18],_j11);return output}},{key:"decryptBlock",value:function(data,finalize){var iv=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,sourceLength=data.length,buffer=this.buffer,bufferLength=this.bufferPosition;if(iv)this.iv=iv;else{for(var i=0;bufferLength<16&&i<sourceLength;++i,++bufferLength)buffer[bufferLength]=data[i];if(bufferLength<16)return this.bufferLength=bufferLength,new Uint8Array(0);this.iv=buffer,data=data.subarray(16)}return this.buffer=new Uint8Array(16),this.bufferLength=0,this.decryptBlock=this._decryptBlock2,this.decryptBlock(data,finalize)}},{key:"encrypt",value:function(data,iv){var sourceLength=data.length,buffer=this.buffer,bufferLength=this.bufferPosition,result=[];iv||(iv=new Uint8Array(16));for(var i=0;i<sourceLength;++i)if(buffer[bufferLength]=data[i],!(++bufferLength<16)){for(var j=0;j<16;++j)buffer[j]^=iv[j];var cipher=this._encrypt(buffer,this._key);iv=cipher,result.push(cipher),buffer=new Uint8Array(16),bufferLength=0}if(this.buffer=buffer,this.bufferLength=bufferLength,this.iv=iv,0===result.length)return new Uint8Array(0);for(var outputLength=16*result.length,output=new Uint8Array(outputLength),_i19=0,_j12=0,ii=result.length;_i19<ii;++_i19,_j12+=16)output.set(result[_i19],_j12);return output}}]),AESBaseCipher}(),AES128Cipher=function(_AESBaseCipher){_inherits(AES128Cipher,_AESBaseCipher);var _super21=_createSuper(AES128Cipher);function AES128Cipher(key){var _this25;return _classCallCheck(this,AES128Cipher),(_this25=_super21.call(this))._cyclesOfRepetition=10,_this25._keySize=160,_this25._rcon=new Uint8Array([141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141]),_this25._key=_this25._expandKey(key),_this25}return _createClass(AES128Cipher,[{key:"_expandKey",value:function(cipherKey){var s=this._s,rcon=this._rcon,result=new Uint8Array(176);result.set(cipherKey);for(var j=16,i=1;j<176;++i){var t1=result[j-3],t2=result[j-2],t3=result[j-1],t4=result[j-4];t1=s[t1],t2=s[t2],t3=s[t3],t4=s[t4],t1^=rcon[i];for(var n=0;n<4;++n)result[j]=t1^=result[j-16],result[++j]=t2^=result[j-16],result[++j]=t3^=result[j-16],result[++j]=t4^=result[j-16],j++}return result}}]),AES128Cipher}(AESBaseCipher);exports.AES128Cipher=AES128Cipher;var AES256Cipher=function(_AESBaseCipher2){_inherits(AES256Cipher,_AESBaseCipher2);var _super22=_createSuper(AES256Cipher);function AES256Cipher(key){var _this26;return _classCallCheck(this,AES256Cipher),(_this26=_super22.call(this))._cyclesOfRepetition=14,_this26._keySize=224,_this26._key=_this26._expandKey(key),_this26}return _createClass(AES256Cipher,[{key:"_expandKey",value:function(cipherKey){var s=this._s,result=new Uint8Array(240);result.set(cipherKey);for(var t1,t2,t3,t4,r=1,j=32,i=1;j<240;++i){j%32==16?(t1=s[t1],t2=s[t2],t3=s[t3],t4=s[t4]):j%32==0&&(t1=result[j-3],t2=result[j-2],t3=result[j-1],t4=result[j-4],t1=s[t1],t2=s[t2],t3=s[t3],t4=s[t4],t1^=r,(r<<=1)>=256&&(r=255&(27^r)));for(var n=0;n<4;++n)result[j]=t1^=result[j-32],result[++j]=t2^=result[j-32],result[++j]=t3^=result[j-32],result[++j]=t4^=result[j-32],j++}return result}}]),AES256Cipher}(AESBaseCipher);exports.AES256Cipher=AES256Cipher;var PDF17=function(){function compareByteArrays(array1,array2){if(array1.length!==array2.length)return!1;for(var i=0;i<array1.length;i++)if(array1[i]!==array2[i])return!1;return!0}function PDF17(){}return PDF17.prototype={checkOwnerPassword:function(password,ownerValidationSalt,userBytes,ownerPassword){var hashData=new Uint8Array(password.length+56);return hashData.set(password,0),hashData.set(ownerValidationSalt,password.length),hashData.set(userBytes,password.length+ownerValidationSalt.length),compareByteArrays(calculateSHA256(hashData,0,hashData.length),ownerPassword)},checkUserPassword:function(password,userValidationSalt,userPassword){var hashData=new Uint8Array(password.length+8);return hashData.set(password,0),hashData.set(userValidationSalt,password.length),compareByteArrays(calculateSHA256(hashData,0,hashData.length),userPassword)},getOwnerKey:function(password,ownerKeySalt,userBytes,ownerEncryption){var hashData=new Uint8Array(password.length+56);hashData.set(password,0),hashData.set(ownerKeySalt,password.length),hashData.set(userBytes,password.length+ownerKeySalt.length);var key=calculateSHA256(hashData,0,hashData.length);return new AES256Cipher(key).decryptBlock(ownerEncryption,!1,new Uint8Array(16))},getUserKey:function(password,userKeySalt,userEncryption){var hashData=new Uint8Array(password.length+8);hashData.set(password,0),hashData.set(userKeySalt,password.length);var key=calculateSHA256(hashData,0,hashData.length);return new AES256Cipher(key).decryptBlock(userEncryption,!1,new Uint8Array(16))}},PDF17}();exports.PDF17=PDF17;var PDF20=function(){function concatArrays(array1,array2){var t=new Uint8Array(array1.length+array2.length);return t.set(array1,0),t.set(array2,array1.length),t}function calculatePDF20Hash(password,input,userBytes){for(var k=calculateSHA256(input,0,input.length).subarray(0,32),e=[0],i=0;i<64||e[e.length-1]>i-32;){var arrayLength=password.length+k.length+userBytes.length,k1=new Uint8Array(64*arrayLength),array=concatArrays(password,k);array=concatArrays(array,userBytes);for(var j=0,pos=0;j<64;j++,pos+=arrayLength)k1.set(array,pos);e=new AES128Cipher(k.subarray(0,16)).encrypt(k1,k.subarray(16,32));for(var remainder=0,z=0;z<16;z++)remainder*=1,remainder%=3,remainder+=(e[z]>>>0)%3,remainder%=3;0===remainder?k=calculateSHA256(e,0,e.length):1===remainder?k=calculateSHA384(e,0,e.length):2===remainder&&(k=calculateSHA512(e,0,e.length)),i++}return k.subarray(0,32)}function PDF20(){}function compareByteArrays(array1,array2){if(array1.length!==array2.length)return!1;for(var i=0;i<array1.length;i++)if(array1[i]!==array2[i])return!1;return!0}return PDF20.prototype={hash:function(password,concatBytes,userBytes){return calculatePDF20Hash(password,concatBytes,userBytes)},checkOwnerPassword:function(password,ownerValidationSalt,userBytes,ownerPassword){var hashData=new Uint8Array(password.length+56);return hashData.set(password,0),hashData.set(ownerValidationSalt,password.length),hashData.set(userBytes,password.length+ownerValidationSalt.length),compareByteArrays(calculatePDF20Hash(password,hashData,userBytes),ownerPassword)},checkUserPassword:function(password,userValidationSalt,userPassword){var hashData=new Uint8Array(password.length+8);return hashData.set(password,0),hashData.set(userValidationSalt,password.length),compareByteArrays(calculatePDF20Hash(password,hashData,[]),userPassword)},getOwnerKey:function(password,ownerKeySalt,userBytes,ownerEncryption){var hashData=new Uint8Array(password.length+56);hashData.set(password,0),hashData.set(ownerKeySalt,password.length),hashData.set(userBytes,password.length+ownerKeySalt.length);var key=calculatePDF20Hash(password,hashData,userBytes);return new AES256Cipher(key).decryptBlock(ownerEncryption,!1,new Uint8Array(16))},getUserKey:function(password,userKeySalt,userEncryption){var hashData=new Uint8Array(password.length+8);hashData.set(password,0),hashData.set(userKeySalt,password.length);var key=calculatePDF20Hash(password,hashData,[]);return new AES256Cipher(key).decryptBlock(userEncryption,!1,new Uint8Array(16))}},PDF20}();exports.PDF20=PDF20;var CipherTransform=function(){function CipherTransform(stringCipherConstructor,streamCipherConstructor){this.StringCipherConstructor=stringCipherConstructor,this.StreamCipherConstructor=streamCipherConstructor}return CipherTransform.prototype={createStream:function(stream,length){var cipher=new this.StreamCipherConstructor;return new _stream.DecryptStream(stream,length,(function(data,finalize){return cipher.decryptBlock(data,finalize)}))},decryptString:function(s){var cipher=new this.StringCipherConstructor,data=(0,_util.stringToBytes)(s);return data=cipher.decryptBlock(data,!0),(0,_util.bytesToString)(data)},encryptString:function(s){var cipher=new this.StringCipherConstructor;if(cipher instanceof AESBaseCipher){var strLen=s.length,pad=16-strLen%16;16!==pad&&(s=s.padEnd(16*Math.ceil(strLen/16),String.fromCharCode(pad)));var iv=new Uint8Array(16);if("undefined"!=typeof crypto)crypto.getRandomValues(iv);else for(var i=0;i<16;i++)iv[i]=Math.floor(256*Math.random());var _data=(0,_util.stringToBytes)(s);_data=cipher.encrypt(_data,iv);var buf=new Uint8Array(16+_data.length);return buf.set(iv),buf.set(_data,16),(0,_util.bytesToString)(buf)}var data=(0,_util.stringToBytes)(s);return data=cipher.encrypt(data),(0,_util.bytesToString)(data)}},CipherTransform}(),CipherTransformFactory=function(){var defaultPasswordBytes=new Uint8Array([40,191,78,94,78,117,138,65,100,0,78,86,255,250,1,8,46,46,0,182,208,104,62,128,47,12,169,254,100,83,105,122]);function prepareKeyData(fileId,password,ownerPassword,userPassword,flags,revision,keyLength,encryptMetadata){var j,n,hashDataSize=40+ownerPassword.length+fileId.length,hashData=new Uint8Array(hashDataSize),i=0;if(password)for(n=Math.min(32,password.length);i<n;++i)hashData[i]=password[i];for(j=0;i<32;)hashData[i++]=defaultPasswordBytes[j++];for(j=0,n=ownerPassword.length;j<n;++j)hashData[i++]=ownerPassword[j];for(hashData[i++]=255&flags,hashData[i++]=flags>>8&255,hashData[i++]=flags>>16&255,hashData[i++]=flags>>>24&255,j=0,n=fileId.length;j<n;++j)hashData[i++]=fileId[j];revision>=4&&!encryptMetadata&&(hashData[i++]=255,hashData[i++]=255,hashData[i++]=255,hashData[i++]=255);var hash=calculateMD5(hashData,0,i),keyLengthInBytes=keyLength>>3;if(revision>=3)for(j=0;j<50;++j)hash=calculateMD5(hash,0,keyLengthInBytes);var checkData,encryptionKey=hash.subarray(0,keyLengthInBytes);if(revision>=3){for(i=0;i<32;++i)hashData[i]=defaultPasswordBytes[i];for(j=0,n=fileId.length;j<n;++j)hashData[i++]=fileId[j];checkData=new ARCFourCipher(encryptionKey).encryptBlock(calculateMD5(hashData,0,i)),n=encryptionKey.length;var k,derivedKey=new Uint8Array(n);for(j=1;j<=19;++j){for(k=0;k<n;++k)derivedKey[k]=encryptionKey[k]^j;checkData=new ARCFourCipher(derivedKey).encryptBlock(checkData)}for(j=0,n=checkData.length;j<n;++j)if(userPassword[j]!==checkData[j])return null}else for(j=0,n=(checkData=new ARCFourCipher(encryptionKey).encryptBlock(defaultPasswordBytes)).length;j<n;++j)if(userPassword[j]!==checkData[j])return null;return encryptionKey}var identityName=_primitives.Name.get("Identity");function CipherTransformFactory(dict,fileId,password){var filter=dict.get("Filter");if(!(0,_primitives.isName)(filter,"Standard"))throw new _util.FormatError("unknown encryption method");this.dict=dict;var algorithm=dict.get("V");if(!Number.isInteger(algorithm)||1!==algorithm&&2!==algorithm&&4!==algorithm&&5!==algorithm)throw new _util.FormatError("unsupported encryption algorithm");this.algorithm=algorithm;var keyLength=dict.get("Length");if(!keyLength)if(algorithm<=3)keyLength=40;else{var cfDict=dict.get("CF"),streamCryptoName=dict.get("StmF");if((0,_primitives.isDict)(cfDict)&&(0,_primitives.isName)(streamCryptoName)){cfDict.suppressEncryption=!0;var handlerDict=cfDict.get(streamCryptoName.name);(keyLength=handlerDict&&handlerDict.get("Length")||128)<40&&(keyLength<<=3)}}if(!Number.isInteger(keyLength)||keyLength<40||keyLength%8!=0)throw new _util.FormatError("invalid key length");var ownerPassword=(0,_util.stringToBytes)(dict.get("O")).subarray(0,32),userPassword=(0,_util.stringToBytes)(dict.get("U")).subarray(0,32),flags=dict.get("P"),revision=dict.get("R"),encryptMetadata=(4===algorithm||5===algorithm)&&!1!==dict.get("EncryptMetadata");this.encryptMetadata=encryptMetadata;var passwordBytes,encryptionKey,fileIdBytes=(0,_util.stringToBytes)(fileId);if(password){if(6===revision)try{password=(0,_util.utf8StringToString)(password)}catch(ex){(0,_util.warn)("CipherTransformFactory: Unable to convert UTF8 encoded password.")}passwordBytes=(0,_util.stringToBytes)(password)}if(5!==algorithm)encryptionKey=prepareKeyData(fileIdBytes,passwordBytes,ownerPassword,userPassword,flags,revision,keyLength,encryptMetadata);else{var ownerValidationSalt=(0,_util.stringToBytes)(dict.get("O")).subarray(32,40),ownerKeySalt=(0,_util.stringToBytes)(dict.get("O")).subarray(40,48),uBytes=(0,_util.stringToBytes)(dict.get("U")).subarray(0,48),userValidationSalt=(0,_util.stringToBytes)(dict.get("U")).subarray(32,40),userKeySalt=(0,_util.stringToBytes)(dict.get("U")).subarray(40,48),ownerEncryption=(0,_util.stringToBytes)(dict.get("OE")),userEncryption=(0,_util.stringToBytes)(dict.get("UE"));(0,_util.stringToBytes)(dict.get("Perms")),encryptionKey=function(revision,password,ownerPassword,ownerValidationSalt,ownerKeySalt,uBytes,userPassword,userValidationSalt,userKeySalt,ownerEncryption,userEncryption,perms){if(password){var passwordLength=Math.min(127,password.length);password=password.subarray(0,passwordLength)}else password=[];var pdfAlgorithm;return(pdfAlgorithm=6===revision?new PDF20:new PDF17).checkUserPassword(password,userValidationSalt,userPassword)?pdfAlgorithm.getUserKey(password,userKeySalt,userEncryption):password.length&&pdfAlgorithm.checkOwnerPassword(password,ownerValidationSalt,uBytes,ownerPassword)?pdfAlgorithm.getOwnerKey(password,ownerKeySalt,uBytes,ownerEncryption):null}(revision,passwordBytes,ownerPassword,ownerValidationSalt,ownerKeySalt,uBytes,userPassword,userValidationSalt,userKeySalt,ownerEncryption,userEncryption)}if(!encryptionKey&&!password)throw new _util.PasswordException("No password given",_util.PasswordResponses.NEED_PASSWORD);if(!encryptionKey&&password){var decodedPassword=function(password,ownerPassword,revision,keyLength){var j,n,hashData=new Uint8Array(32),i=0;for(n=Math.min(32,password.length);i<n;++i)hashData[i]=password[i];for(j=0;i<32;)hashData[i++]=defaultPasswordBytes[j++];var userPassword,hash=calculateMD5(hashData,0,i),keyLengthInBytes=keyLength>>3;if(revision>=3)for(j=0;j<50;++j)hash=calculateMD5(hash,0,hash.length);if(revision>=3){userPassword=ownerPassword;var k,derivedKey=new Uint8Array(keyLengthInBytes);for(j=19;j>=0;j--){for(k=0;k<keyLengthInBytes;++k)derivedKey[k]=hash[k]^j;userPassword=new ARCFourCipher(derivedKey).encryptBlock(userPassword)}}else userPassword=new ARCFourCipher(hash.subarray(0,keyLengthInBytes)).encryptBlock(ownerPassword);return userPassword}(passwordBytes,ownerPassword,revision,keyLength);encryptionKey=prepareKeyData(fileIdBytes,decodedPassword,ownerPassword,userPassword,flags,revision,keyLength,encryptMetadata)}if(!encryptionKey)throw new _util.PasswordException("Incorrect Password",_util.PasswordResponses.INCORRECT_PASSWORD);if(this.encryptionKey=encryptionKey,algorithm>=4){var cf=dict.get("CF");(0,_primitives.isDict)(cf)&&(cf.suppressEncryption=!0),this.cf=cf,this.stmf=dict.get("StmF")||identityName,this.strf=dict.get("StrF")||identityName,this.eff=dict.get("EFF")||this.stmf}}function buildObjectKey(num,gen,encryptionKey,isAes){var i,n,key=new Uint8Array(encryptionKey.length+9);for(i=0,n=encryptionKey.length;i<n;++i)key[i]=encryptionKey[i];return key[i++]=255&num,key[i++]=num>>8&255,key[i++]=num>>16&255,key[i++]=255&gen,key[i++]=gen>>8&255,isAes&&(key[i++]=115,key[i++]=65,key[i++]=108,key[i++]=84),calculateMD5(key,0,i).subarray(0,Math.min(encryptionKey.length+5,16))}function buildCipherConstructor(cf,name,num,gen,key){if(!(0,_primitives.isName)(name))throw new _util.FormatError("Invalid crypt filter name.");var cfm,cryptFilter=cf.get(name.name);if(null!=cryptFilter&&(cfm=cryptFilter.get("CFM")),!cfm||"None"===cfm.name)return function(){return new NullCipher};if("V2"===cfm.name)return function(){return new ARCFourCipher(buildObjectKey(num,gen,key,!1))};if("AESV2"===cfm.name)return function(){return new AES128Cipher(buildObjectKey(num,gen,key,!0))};if("AESV3"===cfm.name)return function(){return new AES256Cipher(key)};throw new _util.FormatError("Unknown crypto method")}return CipherTransformFactory.prototype={createCipherTransform:function(num,gen){if(4===this.algorithm||5===this.algorithm)return new CipherTransform(buildCipherConstructor(this.cf,this.stmf,num,gen,this.encryptionKey),buildCipherConstructor(this.cf,this.strf,num,gen,this.encryptionKey));var key=buildObjectKey(num,gen,this.encryptionKey,!1),cipherConstructor=function(){return new ARCFourCipher(key)};return new CipherTransform(cipherConstructor,cipherConstructor)}},CipherTransformFactory}();exports.CipherTransformFactory=CipherTransformFactory},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorSpace=void 0;var _util=__w_pdfjs_require__(2),_primitives=__w_pdfjs_require__(5),_core_utils=__w_pdfjs_require__(8),ColorSpace=function(){function ColorSpace(name,numComps){_classCallCheck(this,ColorSpace),this.constructor===ColorSpace&&(0,_util.unreachable)("Cannot initialize ColorSpace."),this.name=name,this.numComps=numComps}var _parseAsync;return _createClass(ColorSpace,[{key:"getRgb",value:function(src,srcOffset){var rgb=new Uint8ClampedArray(3);return this.getRgbItem(src,srcOffset,rgb,0),rgb}},{key:"getRgbItem",value:function(src,srcOffset,dest,destOffset){(0,_util.unreachable)("Should not call ColorSpace.getRgbItem")}},{key:"getRgbBuffer",value:function(src,srcOffset,count,dest,destOffset,bits,alpha01){(0,_util.unreachable)("Should not call ColorSpace.getRgbBuffer")}},{key:"getOutputLength",value:function(inputLength,alpha01){(0,_util.unreachable)("Should not call ColorSpace.getOutputLength")}},{key:"isPassthrough",value:function(bits){return!1}},{key:"isDefaultDecode",value:function(decodeMap,bpc){return ColorSpace.isDefaultDecode(decodeMap,this.numComps)}},{key:"fillRgb",value:function(dest,originalWidth,originalHeight,width,height,actualHeight,bpc,comps,alpha01){var count=originalWidth*originalHeight,rgbBuf=null,numComponentColors=1<<bpc,needsResizing=originalHeight!==height||originalWidth!==width;if(this.isPassthrough(bpc))rgbBuf=comps;else if(1===this.numComps&&count>numComponentColors&&"DeviceGray"!==this.name&&"DeviceRGB"!==this.name){for(var allColors=bpc<=8?new Uint8Array(numComponentColors):new Uint16Array(numComponentColors),i=0;i<numComponentColors;i++)allColors[i]=i;var colorMap=new Uint8ClampedArray(3*numComponentColors);if(this.getRgbBuffer(allColors,0,numComponentColors,colorMap,0,bpc,0),needsResizing){rgbBuf=new Uint8Array(3*count);for(var rgbPos=0,_i22=0;_i22<count;++_i22){var _key3=3*comps[_i22];rgbBuf[rgbPos++]=colorMap[_key3],rgbBuf[rgbPos++]=colorMap[_key3+1],rgbBuf[rgbPos++]=colorMap[_key3+2]}}else for(var destPos=0,_i21=0;_i21<count;++_i21){var key=3*comps[_i21];dest[destPos++]=colorMap[key],dest[destPos++]=colorMap[key+1],dest[destPos++]=colorMap[key+2],destPos+=alpha01}}else needsResizing?(rgbBuf=new Uint8ClampedArray(3*count),this.getRgbBuffer(comps,0,count,rgbBuf,0,bpc,0)):this.getRgbBuffer(comps,0,width*actualHeight,dest,0,bpc,alpha01);if(rgbBuf)if(needsResizing)!function(src,dest,w1,h1,w2,h2,alpha01){alpha01=1!==alpha01?0:alpha01;for(var oldIndex,xRatio=w1/w2,yRatio=h1/h2,newIndex=0,xScaled=new Uint16Array(w2),w1Scanline=3*w1,i=0;i<w2;i++)xScaled[i]=3*Math.floor(i*xRatio);for(var _i20=0;_i20<h2;_i20++)for(var py=Math.floor(_i20*yRatio)*w1Scanline,j=0;j<w2;j++)oldIndex=py+xScaled[j],dest[newIndex++]=src[oldIndex++],dest[newIndex++]=src[oldIndex++],dest[newIndex++]=src[oldIndex++],newIndex+=alpha01}(rgbBuf,dest,originalWidth,originalHeight,width,height,alpha01);else for(var _destPos=0,_rgbPos=0,_i23=0,ii=width*actualHeight;_i23<ii;_i23++)dest[_destPos++]=rgbBuf[_rgbPos++],dest[_destPos++]=rgbBuf[_rgbPos++],dest[_destPos++]=rgbBuf[_rgbPos++],_destPos+=alpha01}},{key:"usesZeroToOneRange",get:function(){return(0,_util.shadow)(this,"usesZeroToOneRange",!0)}}],[{key:"_cache",value:function(cacheKey,xref,localColorSpaceCache,parsedColorSpace){if(!localColorSpaceCache)throw new Error('ColorSpace._cache - expected "localColorSpaceCache" argument.');if(!parsedColorSpace)throw new Error('ColorSpace._cache - expected "parsedColorSpace" argument.');var csName,csRef;cacheKey instanceof _primitives.Ref&&(csRef=cacheKey,cacheKey=xref.fetch(cacheKey)),cacheKey instanceof _primitives.Name&&(csName=cacheKey.name),(csName||csRef)&&localColorSpaceCache.set(csName,csRef,parsedColorSpace)}},{key:"getCached",value:function(cacheKey,xref,localColorSpaceCache){if(!localColorSpaceCache)throw new Error('ColorSpace.getCached - expected "localColorSpaceCache" argument.');if(cacheKey instanceof _primitives.Ref){var localColorSpace=localColorSpaceCache.getByRef(cacheKey);if(localColorSpace)return localColorSpace;try{cacheKey=xref.fetch(cacheKey)}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex}}if(cacheKey instanceof _primitives.Name){var _localColorSpace=localColorSpaceCache.getByName(cacheKey.name);if(_localColorSpace)return _localColorSpace}return null}},{key:"parseAsync",value:(_parseAsync=_asyncToGenerator(regeneratorRuntime.mark((function _callee12(_ref29){var cs,xref,_ref29$resources,resources,pdfFunctionFactory,localColorSpaceCache,parsedColorSpace;return regeneratorRuntime.wrap((function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:return cs=_ref29.cs,xref=_ref29.xref,_ref29$resources=_ref29.resources,resources=void 0===_ref29$resources?null:_ref29$resources,pdfFunctionFactory=_ref29.pdfFunctionFactory,localColorSpaceCache=_ref29.localColorSpaceCache,parsedColorSpace=this._parse(cs,xref,resources,pdfFunctionFactory),this._cache(cs,xref,localColorSpaceCache,parsedColorSpace),_context12.abrupt("return",parsedColorSpace);case 4:case"end":return _context12.stop()}}),_callee12,this)}))),function(_x12){return _parseAsync.apply(this,arguments)})},{key:"parse",value:function(_ref30){var cs=_ref30.cs,xref=_ref30.xref,_ref30$resources=_ref30.resources,resources=void 0===_ref30$resources?null:_ref30$resources,pdfFunctionFactory=_ref30.pdfFunctionFactory,localColorSpaceCache=_ref30.localColorSpaceCache,cachedColorSpace=this.getCached(cs,xref,localColorSpaceCache);if(cachedColorSpace)return cachedColorSpace;var parsedColorSpace=this._parse(cs,xref,resources,pdfFunctionFactory);return this._cache(cs,xref,localColorSpaceCache,parsedColorSpace),parsedColorSpace}},{key:"_parse",value:function(cs,xref){var resources=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,pdfFunctionFactory=arguments.length>3?arguments[3]:void 0;if(cs=xref.fetchIfRef(cs),(0,_primitives.isName)(cs))switch(cs.name){case"DeviceGray":case"G":return this.singletons.gray;case"DeviceRGB":case"RGB":return this.singletons.rgb;case"DeviceCMYK":case"CMYK":return this.singletons.cmyk;case"Pattern":return new PatternCS(null);default:if((0,_primitives.isDict)(resources)){var colorSpaces=resources.get("ColorSpace");if((0,_primitives.isDict)(colorSpaces)){var resourcesCS=colorSpaces.get(cs.name);if(resourcesCS){if((0,_primitives.isName)(resourcesCS))return this._parse(resourcesCS,xref,resources,pdfFunctionFactory);cs=resourcesCS;break}}}throw new _util.FormatError("Unrecognized ColorSpace: ".concat(cs.name))}if(Array.isArray(cs)){var params,numComps,baseCS,whitePoint,blackPoint,gamma,mode=xref.fetchIfRef(cs[0]).name;switch(mode){case"DeviceGray":case"G":return this.singletons.gray;case"DeviceRGB":case"RGB":return this.singletons.rgb;case"DeviceCMYK":case"CMYK":return this.singletons.cmyk;case"CalGray":return whitePoint=(params=xref.fetchIfRef(cs[1])).getArray("WhitePoint"),blackPoint=params.getArray("BlackPoint"),gamma=params.get("Gamma"),new CalGrayCS(whitePoint,blackPoint,gamma);case"CalRGB":whitePoint=(params=xref.fetchIfRef(cs[1])).getArray("WhitePoint"),blackPoint=params.getArray("BlackPoint"),gamma=params.getArray("Gamma");var matrix=params.getArray("Matrix");return new CalRGBCS(whitePoint,blackPoint,gamma,matrix);case"ICCBased":var stream=xref.fetchIfRef(cs[1]),dict=stream.dict;numComps=dict.get("N");var alt=dict.get("Alternate");if(alt){var altCS=this._parse(alt,xref,resources,pdfFunctionFactory);if(altCS.numComps===numComps)return altCS;(0,_util.warn)("ICCBased color space: Ignoring incorrect /Alternate entry.")}if(1===numComps)return this.singletons.gray;if(3===numComps)return this.singletons.rgb;if(4===numComps)return this.singletons.cmyk;break;case"Pattern":return(baseCS=cs[1]||null)&&(baseCS=this._parse(baseCS,xref,resources,pdfFunctionFactory)),new PatternCS(baseCS);case"Indexed":case"I":baseCS=this._parse(cs[1],xref,resources,pdfFunctionFactory);var hiVal=xref.fetchIfRef(cs[2])+1,lookup=xref.fetchIfRef(cs[3]);return new IndexedCS(baseCS,hiVal,lookup);case"Separation":case"DeviceN":var name=xref.fetchIfRef(cs[1]);numComps=Array.isArray(name)?name.length:1,baseCS=this._parse(cs[2],xref,resources,pdfFunctionFactory);var tintFn=pdfFunctionFactory.create(cs[3]);return new AlternateCS(numComps,baseCS,tintFn);case"Lab":whitePoint=(params=xref.fetchIfRef(cs[1])).getArray("WhitePoint"),blackPoint=params.getArray("BlackPoint");var range=params.getArray("Range");return new LabCS(whitePoint,blackPoint,range);default:throw new _util.FormatError("Unimplemented ColorSpace object: ".concat(mode))}}throw new _util.FormatError("Unrecognized ColorSpace object: ".concat(cs))}},{key:"isDefaultDecode",value:function(decode,numComps){if(!Array.isArray(decode))return!0;if(2*numComps!==decode.length)return(0,_util.warn)("The decode map is not the correct length"),!0;for(var i=0,ii=decode.length;i<ii;i+=2)if(0!==decode[i]||1!==decode[i+1])return!1;return!0}},{key:"singletons",get:function(){return(0,_util.shadow)(this,"singletons",{get gray(){return(0,_util.shadow)(this,"gray",new DeviceGrayCS)},get rgb(){return(0,_util.shadow)(this,"rgb",new DeviceRgbCS)},get cmyk(){return(0,_util.shadow)(this,"cmyk",new DeviceCmykCS)}})}}]),ColorSpace}();exports.ColorSpace=ColorSpace;var AlternateCS=function(_ColorSpace){_inherits(AlternateCS,_ColorSpace);var _super23=_createSuper(AlternateCS);function AlternateCS(numComps,base,tintFn){var _this27;return _classCallCheck(this,AlternateCS),(_this27=_super23.call(this,"Alternate",numComps)).base=base,_this27.tintFn=tintFn,_this27.tmpBuf=new Float32Array(base.numComps),_this27}return _createClass(AlternateCS,[{key:"getRgbItem",value:function(src,srcOffset,dest,destOffset){var tmpBuf=this.tmpBuf;this.tintFn(src,srcOffset,tmpBuf,0),this.base.getRgbItem(tmpBuf,0,dest,destOffset)}},{key:"getRgbBuffer",value:function(src,srcOffset,count,dest,destOffset,bits,alpha01){var i,j,tintFn=this.tintFn,base=this.base,scale=1/((1<<bits)-1),baseNumComps=base.numComps,usesZeroToOneRange=base.usesZeroToOneRange,isPassthrough=(base.isPassthrough(8)||!usesZeroToOneRange)&&0===alpha01,pos=isPassthrough?destOffset:0,baseBuf=isPassthrough?dest:new Uint8ClampedArray(baseNumComps*count),numComps=this.numComps,scaled=new Float32Array(numComps),tinted=new Float32Array(baseNumComps);for(i=0;i<count;i++){for(j=0;j<numComps;j++)scaled[j]=src[srcOffset++]*scale;if(tintFn(scaled,0,tinted,0),usesZeroToOneRange)for(j=0;j<baseNumComps;j++)baseBuf[pos++]=255*tinted[j];else base.getRgbItem(tinted,0,baseBuf,pos),pos+=baseNumComps}isPassthrough||base.getRgbBuffer(baseBuf,0,count,dest,destOffset,8,alpha01)}},{key:"getOutputLength",value:function(inputLength,alpha01){return this.base.getOutputLength(inputLength*this.base.numComps/this.numComps,alpha01)}}]),AlternateCS}(ColorSpace),PatternCS=function(_ColorSpace2){_inherits(PatternCS,_ColorSpace2);var _super24=_createSuper(PatternCS);function PatternCS(baseCS){var _this28;return _classCallCheck(this,PatternCS),(_this28=_super24.call(this,"Pattern",null)).base=baseCS,_this28}return _createClass(PatternCS,[{key:"isDefaultDecode",value:function(decodeMap,bpc){(0,_util.unreachable)("Should not call PatternCS.isDefaultDecode")}}]),PatternCS}(ColorSpace),IndexedCS=function(_ColorSpace3){_inherits(IndexedCS,_ColorSpace3);var _super25=_createSuper(IndexedCS);function IndexedCS(base,highVal,lookup){var _this29;_classCallCheck(this,IndexedCS),(_this29=_super25.call(this,"Indexed",1)).base=base,_this29.highVal=highVal;var length=base.numComps*highVal;if(_this29.lookup=new Uint8Array(length),(0,_primitives.isStream)(lookup)){var bytes=lookup.getBytes(length);_this29.lookup.set(bytes)}else{if("string"!=typeof lookup)throw new _util.FormatError("IndexedCS - unrecognized lookup table: ".concat(lookup));for(var i=0;i<length;++i)_this29.lookup[i]=255&lookup.charCodeAt(i)}return _this29}return _createClass(IndexedCS,[{key:"getRgbItem",value:function(src,srcOffset,dest,destOffset){var numComps=this.base.numComps,start=src[srcOffset]*numComps;this.base.getRgbBuffer(this.lookup,start,1,dest,destOffset,8,0)}},{key:"getRgbBuffer",value:function(src,srcOffset,count,dest,destOffset,bits,alpha01){for(var base=this.base,numComps=base.numComps,outputDelta=base.getOutputLength(numComps,alpha01),lookup=this.lookup,i=0;i<count;++i){var lookupPos=src[srcOffset++]*numComps;base.getRgbBuffer(lookup,lookupPos,1,dest,destOffset,8,alpha01),destOffset+=outputDelta}}},{key:"getOutputLength",value:function(inputLength,alpha01){return this.base.getOutputLength(inputLength*this.base.numComps,alpha01)}},{key:"isDefaultDecode",value:function(decodeMap,bpc){return!Array.isArray(decodeMap)||(2!==decodeMap.length?((0,_util.warn)("Decode map length is not correct"),!0):!Number.isInteger(bpc)||bpc<1?((0,_util.warn)("Bits per component is not correct"),!0):0===decodeMap[0]&&decodeMap[1]===(1<<bpc)-1)}}]),IndexedCS}(ColorSpace),DeviceGrayCS=function(_ColorSpace4){_inherits(DeviceGrayCS,_ColorSpace4);var _super26=_createSuper(DeviceGrayCS);function DeviceGrayCS(){return _classCallCheck(this,DeviceGrayCS),_super26.call(this,"DeviceGray",1)}return _createClass(DeviceGrayCS,[{key:"getRgbItem",value:function(src,srcOffset,dest,destOffset){var c=255*src[srcOffset];dest[destOffset]=dest[destOffset+1]=dest[destOffset+2]=c}},{key:"getRgbBuffer",value:function(src,srcOffset,count,dest,destOffset,bits,alpha01){for(var scale=255/((1<<bits)-1),j=srcOffset,q=destOffset,i=0;i<count;++i){var c=scale*src[j++];dest[q++]=c,dest[q++]=c,dest[q++]=c,q+=alpha01}}},{key:"getOutputLength",value:function(inputLength,alpha01){return inputLength*(3+alpha01)}}]),DeviceGrayCS}(ColorSpace),DeviceRgbCS=function(_ColorSpace5){_inherits(DeviceRgbCS,_ColorSpace5);var _super27=_createSuper(DeviceRgbCS);function DeviceRgbCS(){return _classCallCheck(this,DeviceRgbCS),_super27.call(this,"DeviceRGB",3)}return _createClass(DeviceRgbCS,[{key:"getRgbItem",value:function(src,srcOffset,dest,destOffset){dest[destOffset]=255*src[srcOffset],dest[destOffset+1]=255*src[srcOffset+1],dest[destOffset+2]=255*src[srcOffset+2]}},{key:"getRgbBuffer",value:function(src,srcOffset,count,dest,destOffset,bits,alpha01){if(8!==bits||0!==alpha01)for(var scale=255/((1<<bits)-1),j=srcOffset,q=destOffset,i=0;i<count;++i)dest[q++]=scale*src[j++],dest[q++]=scale*src[j++],dest[q++]=scale*src[j++],q+=alpha01;else dest.set(src.subarray(srcOffset,srcOffset+3*count),destOffset)}},{key:"getOutputLength",value:function(inputLength,alpha01){return inputLength*(3+alpha01)/3|0}},{key:"isPassthrough",value:function(bits){return 8===bits}}]),DeviceRgbCS}(ColorSpace),DeviceCmykCS=function(){function convertToRgb(src,srcOffset,srcScale,dest,destOffset){var c=src[srcOffset]*srcScale,m=src[srcOffset+1]*srcScale,y=src[srcOffset+2]*srcScale,k=src[srcOffset+3]*srcScale;dest[destOffset]=255+c*(-4.387332384609988*c+54.48615194189176*m+18.82290502165302*y+212.25662451639585*k-285.2331026137004)+m*(1.7149763477362134*m-5.6096736904047315*y+-17.873870861415444*k-5.497006427196366)+y*(-2.5217340131683033*y-21.248923337353073*k+17.5119270841813)+k*(-21.86122147463605*k-189.48180835922747),dest[destOffset+1]=255+c*(8.841041422036149*c+60.118027045597366*m+6.871425592049007*y+31.159100130055922*k-79.2970844816548)+m*(-15.310361306967817*m+17.575251261109482*y+131.35250912493976*k-190.9453302588951)+y*(4.444339102852739*y+9.8632861493405*k-24.86741582555878)+k*(-20.737325471181034*k-187.80453709719578),dest[destOffset+2]=255+c*(.8842522430003296*c+8.078677503112928*m+30.89978309703729*y-.23883238689178934*k-14.183576799673286)+m*(10.49593273432072*m+63.02378494754052*y+50.606957656360734*k-112.23884253719248)+y*(.03296041114873217*y+115.60384449646641*k-193.58209356861505)+k*(-22.33816807309886*k-180.12613974708367)}return function(_ColorSpace6){_inherits(DeviceCmykCS,_ColorSpace6);var _super28=_createSuper(DeviceCmykCS);function DeviceCmykCS(){return _classCallCheck(this,DeviceCmykCS),_super28.call(this,"DeviceCMYK",4)}return _createClass(DeviceCmykCS,[{key:"getRgbItem",value:function(src,srcOffset,dest,destOffset){convertToRgb(src,srcOffset,1,dest,destOffset)}},{key:"getRgbBuffer",value:function(src,srcOffset,count,dest,destOffset,bits,alpha01){for(var scale=1/((1<<bits)-1),i=0;i<count;i++)convertToRgb(src,srcOffset,scale,dest,destOffset),srcOffset+=4,destOffset+=3+alpha01}},{key:"getOutputLength",value:function(inputLength,alpha01){return inputLength/4*(3+alpha01)|0}}]),DeviceCmykCS}(ColorSpace)}(),CalGrayCS=function(){function convertToRgb(cs,src,srcOffset,dest,destOffset,scale){var A=src[srcOffset]*scale,AG=Math.pow(A,cs.G),L=cs.YW*AG,val=Math.max(295.8*Math.pow(L,.3333333333333333)-40.8,0);dest[destOffset]=val,dest[destOffset+1]=val,dest[destOffset+2]=val}return function(_ColorSpace7){_inherits(CalGrayCS,_ColorSpace7);var _super29=_createSuper(CalGrayCS);function CalGrayCS(whitePoint,blackPoint,gamma){var _this30;if(_classCallCheck(this,CalGrayCS),_this30=_super29.call(this,"CalGray",1),!whitePoint)throw new _util.FormatError("WhitePoint missing - required for color space CalGray");if(blackPoint=blackPoint||[0,0,0],gamma=gamma||1,_this30.XW=whitePoint[0],_this30.YW=whitePoint[1],_this30.ZW=whitePoint[2],_this30.XB=blackPoint[0],_this30.YB=blackPoint[1],_this30.ZB=blackPoint[2],_this30.G=gamma,_this30.XW<0||_this30.ZW<0||1!==_this30.YW)throw new _util.FormatError("Invalid WhitePoint components for ".concat(_this30.name)+", no fallback available");return(_this30.XB<0||_this30.YB<0||_this30.ZB<0)&&((0,_util.info)("Invalid BlackPoint for ".concat(_this30.name,", falling back to default.")),_this30.XB=_this30.YB=_this30.ZB=0),0===_this30.XB&&0===_this30.YB&&0===_this30.ZB||(0,_util.warn)("".concat(_this30.name,", BlackPoint: XB: ").concat(_this30.XB,", YB: ").concat(_this30.YB,", ")+"ZB: ".concat(_this30.ZB,", only default values are supported.")),_this30.G<1&&((0,_util.info)("Invalid Gamma: ".concat(_this30.G," for ").concat(_this30.name,", ")+"falling back to default."),_this30.G=1),_this30}return _createClass(CalGrayCS,[{key:"getRgbItem",value:function(src,srcOffset,dest,destOffset){convertToRgb(this,src,srcOffset,dest,destOffset,1)}},{key:"getRgbBuffer",value:function(src,srcOffset,count,dest,destOffset,bits,alpha01){for(var scale=1/((1<<bits)-1),i=0;i<count;++i)convertToRgb(this,src,srcOffset,dest,destOffset,scale),srcOffset+=1,destOffset+=3+alpha01}},{key:"getOutputLength",value:function(inputLength,alpha01){return inputLength*(3+alpha01)}}]),CalGrayCS}(ColorSpace)}(),CalRGBCS=function(){var BRADFORD_SCALE_MATRIX=new Float32Array([.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0685,1.0296]),BRADFORD_SCALE_INVERSE_MATRIX=new Float32Array([.9869929,-.1470543,.1599627,.4323053,.5183603,.0492912,-.0085287,.0400428,.9684867]),SRGB_D65_XYZ_TO_RGB_MATRIX=new Float32Array([3.2404542,-1.5371385,-.4985314,-.969266,1.8760108,.041556,.0556434,-.2040259,1.0572252]),FLAT_WHITEPOINT_MATRIX=new Float32Array([1,1,1]),tempNormalizeMatrix=new Float32Array(3),tempConvertMatrix1=new Float32Array(3),tempConvertMatrix2=new Float32Array(3),DECODE_L_CONSTANT=Math.pow(24/116,3)/8;function matrixProduct(a,b,result){result[0]=a[0]*b[0]+a[1]*b[1]+a[2]*b[2],result[1]=a[3]*b[0]+a[4]*b[1]+a[5]*b[2],result[2]=a[6]*b[0]+a[7]*b[1]+a[8]*b[2]}function sRGBTransferFunction(color){return color<=.0031308?adjustToRange(0,1,12.92*color):color>=.99554525?1:adjustToRange(0,1,1.055*Math.pow(color,1/2.4)-.055)}function adjustToRange(min,max,value){return Math.max(min,Math.min(max,value))}function decodeL(L){return L<0?-decodeL(-L):L>8?Math.pow((L+16)/116,3):L*DECODE_L_CONSTANT}function convertToRgb(cs,src,srcOffset,dest,destOffset,scale){var A=adjustToRange(0,1,src[srcOffset]*scale),B=adjustToRange(0,1,src[srcOffset+1]*scale),C=adjustToRange(0,1,src[srcOffset+2]*scale),AGR=1===A?1:Math.pow(A,cs.GR),BGG=1===B?1:Math.pow(B,cs.GG),CGB=1===C?1:Math.pow(C,cs.GB),X=cs.MXA*AGR+cs.MXB*BGG+cs.MXC*CGB,Y=cs.MYA*AGR+cs.MYB*BGG+cs.MYC*CGB,Z=cs.MZA*AGR+cs.MZB*BGG+cs.MZC*CGB,XYZ=tempConvertMatrix1;XYZ[0]=X,XYZ[1]=Y,XYZ[2]=Z;var XYZ_Flat=tempConvertMatrix2;!function(sourceWhitePoint,XYZ_In,result){if(1===sourceWhitePoint[0]&&1===sourceWhitePoint[2])return result[0]=XYZ_In[0],result[1]=XYZ_In[1],void(result[2]=XYZ_In[2]);var LMS=result;matrixProduct(BRADFORD_SCALE_MATRIX,XYZ_In,LMS);var LMS_Flat=tempNormalizeMatrix;!function(sourceWhitePoint,LMS,result){result[0]=1*LMS[0]/sourceWhitePoint[0],result[1]=1*LMS[1]/sourceWhitePoint[1],result[2]=1*LMS[2]/sourceWhitePoint[2]}(sourceWhitePoint,LMS,LMS_Flat),matrixProduct(BRADFORD_SCALE_INVERSE_MATRIX,LMS_Flat,result)}(cs.whitePoint,XYZ,XYZ_Flat);var XYZ_Black=tempConvertMatrix1;!function(sourceBlackPoint,XYZ_Flat,result){if(0===sourceBlackPoint[0]&&0===sourceBlackPoint[1]&&0===sourceBlackPoint[2])return result[0]=XYZ_Flat[0],result[1]=XYZ_Flat[1],void(result[2]=XYZ_Flat[2]);var zeroDecodeL=decodeL(0),X_Scale=(1-zeroDecodeL)/(1-decodeL(sourceBlackPoint[0])),X_Offset=1-X_Scale,Y_Scale=(1-zeroDecodeL)/(1-decodeL(sourceBlackPoint[1])),Y_Offset=1-Y_Scale,Z_Scale=(1-zeroDecodeL)/(1-decodeL(sourceBlackPoint[2])),Z_Offset=1-Z_Scale;result[0]=XYZ_Flat[0]*X_Scale+X_Offset,result[1]=XYZ_Flat[1]*Y_Scale+Y_Offset,result[2]=XYZ_Flat[2]*Z_Scale+Z_Offset}(cs.blackPoint,XYZ_Flat,XYZ_Black);var XYZ_D65=tempConvertMatrix2;!function(sourceWhitePoint,XYZ_In,result){var LMS=result;matrixProduct(BRADFORD_SCALE_MATRIX,XYZ_In,LMS);var LMS_D65=tempNormalizeMatrix;!function(sourceWhitePoint,LMS,result){result[0]=.95047*LMS[0]/sourceWhitePoint[0],result[1]=1*LMS[1]/sourceWhitePoint[1],result[2]=1.08883*LMS[2]/sourceWhitePoint[2]}(sourceWhitePoint,LMS,LMS_D65),matrixProduct(BRADFORD_SCALE_INVERSE_MATRIX,LMS_D65,result)}(FLAT_WHITEPOINT_MATRIX,XYZ_Black,XYZ_D65);var SRGB=tempConvertMatrix1;matrixProduct(SRGB_D65_XYZ_TO_RGB_MATRIX,XYZ_D65,SRGB),dest[destOffset]=255*sRGBTransferFunction(SRGB[0]),dest[destOffset+1]=255*sRGBTransferFunction(SRGB[1]),dest[destOffset+2]=255*sRGBTransferFunction(SRGB[2])}return function(_ColorSpace8){_inherits(CalRGBCS,_ColorSpace8);var _super30=_createSuper(CalRGBCS);function CalRGBCS(whitePoint,blackPoint,gamma,matrix){var _this31;if(_classCallCheck(this,CalRGBCS),_this31=_super30.call(this,"CalRGB",3),!whitePoint)throw new _util.FormatError("WhitePoint missing - required for color space CalRGB");blackPoint=blackPoint||new Float32Array(3),gamma=gamma||new Float32Array([1,1,1]),matrix=matrix||new Float32Array([1,0,0,0,1,0,0,0,1]);var XW=whitePoint[0],YW=whitePoint[1],ZW=whitePoint[2];_this31.whitePoint=whitePoint;var XB=blackPoint[0],YB=blackPoint[1],ZB=blackPoint[2];if(_this31.blackPoint=blackPoint,_this31.GR=gamma[0],_this31.GG=gamma[1],_this31.GB=gamma[2],_this31.MXA=matrix[0],_this31.MYA=matrix[1],_this31.MZA=matrix[2],_this31.MXB=matrix[3],_this31.MYB=matrix[4],_this31.MZB=matrix[5],_this31.MXC=matrix[6],_this31.MYC=matrix[7],_this31.MZC=matrix[8],XW<0||ZW<0||1!==YW)throw new _util.FormatError("Invalid WhitePoint components for ".concat(_this31.name)+", no fallback available");return(XB<0||YB<0||ZB<0)&&((0,_util.info)("Invalid BlackPoint for ".concat(_this31.name," [").concat(XB,", ").concat(YB,", ").concat(ZB,"], ")+"falling back to default."),_this31.blackPoint=new Float32Array(3)),(_this31.GR<0||_this31.GG<0||_this31.GB<0)&&((0,_util.info)("Invalid Gamma [".concat(_this31.GR,", ").concat(_this31.GG,", ").concat(_this31.GB,"] for ")+"".concat(_this31.name,", falling back to default.")),_this31.GR=_this31.GG=_this31.GB=1),_this31}return _createClass(CalRGBCS,[{key:"getRgbItem",value:function(src,srcOffset,dest,destOffset){convertToRgb(this,src,srcOffset,dest,destOffset,1)}},{key:"getRgbBuffer",value:function(src,srcOffset,count,dest,destOffset,bits,alpha01){for(var scale=1/((1<<bits)-1),i=0;i<count;++i)convertToRgb(this,src,srcOffset,dest,destOffset,scale),srcOffset+=3,destOffset+=3+alpha01}},{key:"getOutputLength",value:function(inputLength,alpha01){return inputLength*(3+alpha01)/3|0}}]),CalRGBCS}(ColorSpace)}(),LabCS=function(){function fn_g(x){return x>=6/29?x*x*x:108/841*(x-4/29)}function decode(value,high1,low2,high2){return low2+value*(high2-low2)/high1}function convertToRgb(cs,src,srcOffset,maxVal,dest,destOffset){var Ls=src[srcOffset],as=src[srcOffset+1],bs=src[srcOffset+2];!1!==maxVal&&(Ls=decode(Ls,maxVal,0,100),as=decode(as,maxVal,cs.amin,cs.amax),bs=decode(bs,maxVal,cs.bmin,cs.bmax)),as>cs.amax?as=cs.amax:as<cs.amin&&(as=cs.amin),bs>cs.bmax?bs=cs.bmax:bs<cs.bmin&&(bs=cs.bmin);var r,g,b,M=(Ls+16)/116,L=M+as/500,N=M-bs/200,X=cs.XW*fn_g(L),Y=cs.YW*fn_g(M),Z=cs.ZW*fn_g(N);cs.ZW<1?(r=3.1339*X+-1.617*Y+-.4906*Z,g=-.9785*X+1.916*Y+.0333*Z,b=.072*X+-.229*Y+1.4057*Z):(r=3.2406*X+-1.5372*Y+-.4986*Z,g=-.9689*X+1.8758*Y+.0415*Z,b=.0557*X+-.204*Y+1.057*Z),dest[destOffset]=255*Math.sqrt(r),dest[destOffset+1]=255*Math.sqrt(g),dest[destOffset+2]=255*Math.sqrt(b)}return function(_ColorSpace9){_inherits(LabCS,_ColorSpace9);var _super31=_createSuper(LabCS);function LabCS(whitePoint,blackPoint,range){var _this32;if(_classCallCheck(this,LabCS),_this32=_super31.call(this,"Lab",3),!whitePoint)throw new _util.FormatError("WhitePoint missing - required for color space Lab");if(blackPoint=blackPoint||[0,0,0],range=range||[-100,100,-100,100],_this32.XW=whitePoint[0],_this32.YW=whitePoint[1],_this32.ZW=whitePoint[2],_this32.amin=range[0],_this32.amax=range[1],_this32.bmin=range[2],_this32.bmax=range[3],_this32.XB=blackPoint[0],_this32.YB=blackPoint[1],_this32.ZB=blackPoint[2],_this32.XW<0||_this32.ZW<0||1!==_this32.YW)throw new _util.FormatError("Invalid WhitePoint components, no fallback available");return(_this32.XB<0||_this32.YB<0||_this32.ZB<0)&&((0,_util.info)("Invalid BlackPoint, falling back to default"),_this32.XB=_this32.YB=_this32.ZB=0),(_this32.amin>_this32.amax||_this32.bmin>_this32.bmax)&&((0,_util.info)("Invalid Range, falling back to defaults"),_this32.amin=-100,_this32.amax=100,_this32.bmin=-100,_this32.bmax=100),_this32}return _createClass(LabCS,[{key:"getRgbItem",value:function(src,srcOffset,dest,destOffset){convertToRgb(this,src,srcOffset,!1,dest,destOffset)}},{key:"getRgbBuffer",value:function(src,srcOffset,count,dest,destOffset,bits,alpha01){for(var maxVal=(1<<bits)-1,i=0;i<count;i++)convertToRgb(this,src,srcOffset,maxVal,dest,destOffset),srcOffset+=3,destOffset+=3+alpha01}},{key:"getOutputLength",value:function(inputLength,alpha01){return inputLength*(3+alpha01)/3|0}},{key:"isDefaultDecode",value:function(decodeMap,bpc){return!0}},{key:"usesZeroToOneRange",get:function(){return(0,_util.shadow)(this,"usesZeroToOneRange",!1)}}]),LabCS}(ColorSpace)}()},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.LocalTilingPatternCache=exports.LocalImageCache=exports.LocalGStateCache=exports.LocalFunctionCache=exports.LocalColorSpaceCache=exports.GlobalImageCache=void 0;var _util=__w_pdfjs_require__(2),_primitives=__w_pdfjs_require__(5),BaseLocalCache=function(){function BaseLocalCache(options){_classCallCheck(this,BaseLocalCache),this.constructor===BaseLocalCache&&(0,_util.unreachable)("Cannot initialize BaseLocalCache."),options&&options.onlyRefs||(this._nameRefMap=new Map,this._imageMap=new Map),this._imageCache=new _primitives.RefSetCache}return _createClass(BaseLocalCache,[{key:"getByName",value:function(name){var ref=this._nameRefMap.get(name);return ref?this.getByRef(ref):this._imageMap.get(name)||null}},{key:"getByRef",value:function(ref){return this._imageCache.get(ref)||null}},{key:"set",value:function(name,ref,data){(0,_util.unreachable)("Abstract method `set` called.")}}]),BaseLocalCache}(),LocalImageCache=function(_BaseLocalCache){_inherits(LocalImageCache,_BaseLocalCache);var _super32=_createSuper(LocalImageCache);function LocalImageCache(){return _classCallCheck(this,LocalImageCache),_super32.apply(this,arguments)}return _createClass(LocalImageCache,[{key:"set",value:function(name){var ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,data=arguments.length>2?arguments[2]:void 0;if(!name)throw new Error('LocalImageCache.set - expected "name" argument.');if(ref){if(this._imageCache.has(ref))return;return this._nameRefMap.set(name,ref),void this._imageCache.put(ref,data)}this._imageMap.has(name)||this._imageMap.set(name,data)}}]),LocalImageCache}(BaseLocalCache);exports.LocalImageCache=LocalImageCache;var LocalColorSpaceCache=function(_BaseLocalCache2){_inherits(LocalColorSpaceCache,_BaseLocalCache2);var _super33=_createSuper(LocalColorSpaceCache);function LocalColorSpaceCache(){return _classCallCheck(this,LocalColorSpaceCache),_super33.apply(this,arguments)}return _createClass(LocalColorSpaceCache,[{key:"set",value:function(){var name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,data=arguments.length>2?arguments[2]:void 0;if(!name&&!ref)throw new Error('LocalColorSpaceCache.set - expected "name" and/or "ref" argument.');if(ref){if(this._imageCache.has(ref))return;return name&&this._nameRefMap.set(name,ref),void this._imageCache.put(ref,data)}this._imageMap.has(name)||this._imageMap.set(name,data)}}]),LocalColorSpaceCache}(BaseLocalCache);exports.LocalColorSpaceCache=LocalColorSpaceCache;var LocalFunctionCache=function(_BaseLocalCache3){_inherits(LocalFunctionCache,_BaseLocalCache3);var _super34=_createSuper(LocalFunctionCache);function LocalFunctionCache(options){return _classCallCheck(this,LocalFunctionCache),_super34.call(this,{onlyRefs:!0})}return _createClass(LocalFunctionCache,[{key:"getByName",value:function(name){(0,_util.unreachable)("Should not call `getByName` method.")}},{key:"set",value:function(){var ref=arguments.length>1?arguments[1]:void 0,data=arguments.length>2?arguments[2]:void 0;if(!ref)throw new Error('LocalFunctionCache.set - expected "ref" argument.');this._imageCache.has(ref)||this._imageCache.put(ref,data)}}]),LocalFunctionCache}(BaseLocalCache);exports.LocalFunctionCache=LocalFunctionCache;var LocalGStateCache=function(_BaseLocalCache4){_inherits(LocalGStateCache,_BaseLocalCache4);var _super35=_createSuper(LocalGStateCache);function LocalGStateCache(){return _classCallCheck(this,LocalGStateCache),_super35.apply(this,arguments)}return _createClass(LocalGStateCache,[{key:"set",value:function(name){var ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,data=arguments.length>2?arguments[2]:void 0;if(!name)throw new Error('LocalGStateCache.set - expected "name" argument.');if(ref){if(this._imageCache.has(ref))return;return this._nameRefMap.set(name,ref),void this._imageCache.put(ref,data)}this._imageMap.has(name)||this._imageMap.set(name,data)}}]),LocalGStateCache}(BaseLocalCache);exports.LocalGStateCache=LocalGStateCache;var LocalTilingPatternCache=function(_BaseLocalCache5){_inherits(LocalTilingPatternCache,_BaseLocalCache5);var _super36=_createSuper(LocalTilingPatternCache);function LocalTilingPatternCache(){return _classCallCheck(this,LocalTilingPatternCache),_super36.apply(this,arguments)}return _createClass(LocalTilingPatternCache,[{key:"set",value:function(name){var ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,data=arguments.length>2?arguments[2]:void 0;if(!name)throw new Error('LocalTilingPatternCache.set - expected "name" argument.');if(ref){if(this._imageCache.has(ref))return;return this._nameRefMap.set(name,ref),void this._imageCache.put(ref,data)}this._imageMap.has(name)||this._imageMap.set(name,data)}}]),LocalTilingPatternCache}(BaseLocalCache);exports.LocalTilingPatternCache=LocalTilingPatternCache;var GlobalImageCache=function(){function GlobalImageCache(){_classCallCheck(this,GlobalImageCache),this._refCache=new _primitives.RefSetCache,this._imageCache=new _primitives.RefSetCache}return _createClass(GlobalImageCache,[{key:"shouldCache",value:function(ref,pageIndex){var pageIndexSet=this._refCache.get(ref);return!((pageIndexSet?pageIndexSet.size+(pageIndexSet.has(pageIndex)?0:1):1)<GlobalImageCache.NUM_PAGES_THRESHOLD||!this._imageCache.has(ref)&&this._imageCache.size>=GlobalImageCache.MAX_IMAGES_TO_CACHE)}},{key:"addPageIndex",value:function(ref,pageIndex){var pageIndexSet=this._refCache.get(ref);pageIndexSet||(pageIndexSet=new Set,this._refCache.put(ref,pageIndexSet)),pageIndexSet.add(pageIndex)}},{key:"getData",value:function(ref,pageIndex){var pageIndexSet=this._refCache.get(ref);return pageIndexSet?pageIndexSet.size<GlobalImageCache.NUM_PAGES_THRESHOLD?null:this._imageCache.has(ref)?(pageIndexSet.add(pageIndex),this._imageCache.get(ref)):null:null}},{key:"setData",value:function(ref,data){if(!this._refCache.has(ref))throw new Error('GlobalImageCache.setData - expected "addPageIndex" to have been called.');this._imageCache.has(ref)||(this._imageCache.size>=GlobalImageCache.MAX_IMAGES_TO_CACHE?(0,_util.info)("GlobalImageCache.setData - ignoring image above MAX_IMAGES_TO_CACHE."):this._imageCache.put(ref,data))}},{key:"clear",value:function(){var onlyData=arguments.length>0&&void 0!==arguments[0]&&arguments[0];onlyData||this._refCache.clear(),this._imageCache.clear()}}],[{key:"NUM_PAGES_THRESHOLD",get:function(){return(0,_util.shadow)(this,"NUM_PAGES_THRESHOLD",2)}},{key:"MAX_IMAGES_TO_CACHE",get:function(){return(0,_util.shadow)(this,"MAX_IMAGES_TO_CACHE",10)}}]),GlobalImageCache}();exports.GlobalImageCache=GlobalImageCache},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.getQuadPoints=getQuadPoints,exports.MarkupAnnotation=exports.AnnotationFactory=exports.AnnotationBorderStyle=exports.Annotation=void 0;var _util=__w_pdfjs_require__(2),_obj=__w_pdfjs_require__(10),_core_utils=__w_pdfjs_require__(8),_default_appearance=__w_pdfjs_require__(26),_primitives=__w_pdfjs_require__(5),_colorspace=__w_pdfjs_require__(23),_operator_list=__w_pdfjs_require__(44),_stream=__w_pdfjs_require__(12),_writer=__w_pdfjs_require__(46),AnnotationFactory=function(){function AnnotationFactory(){_classCallCheck(this,AnnotationFactory)}return _createClass(AnnotationFactory,null,[{key:"create",value:function(xref,ref,pdfManager,idFactory){var _this33=this;return pdfManager.ensureCatalog("acroForm").then((function(acroForm){return pdfManager.ensure(_this33,"_create",[xref,ref,pdfManager,idFactory,acroForm])}))}},{key:"_create",value:function(xref,ref,pdfManager,idFactory,acroForm){var dict=xref.fetchIfRef(ref);if((0,_primitives.isDict)(dict)){var id=(0,_primitives.isRef)(ref)?ref.toString():"annot_".concat(idFactory.createObjId()),subtype=dict.get("Subtype"),parameters={xref:xref,ref:ref,dict:dict,subtype:subtype=(0,_primitives.isName)(subtype)?subtype.name:null,id:id,pdfManager:pdfManager,acroForm:acroForm instanceof _primitives.Dict?acroForm:_primitives.Dict.empty};switch(subtype){case"Link":return new LinkAnnotation(parameters);case"Text":return new TextAnnotation(parameters);case"Widget":var fieldType=(0,_core_utils.getInheritableProperty)({dict:dict,key:"FT"});switch(fieldType=(0,_primitives.isName)(fieldType)?fieldType.name:null){case"Tx":return new TextWidgetAnnotation(parameters);case"Btn":return new ButtonWidgetAnnotation(parameters);case"Ch":return new ChoiceWidgetAnnotation(parameters)}return(0,_util.warn)('Unimplemented widget field type "'+fieldType+'", falling back to base field type.'),new WidgetAnnotation(parameters);case"Popup":return new PopupAnnotation(parameters);case"FreeText":return new FreeTextAnnotation(parameters);case"Line":return new LineAnnotation(parameters);case"Square":return new SquareAnnotation(parameters);case"Circle":return new CircleAnnotation(parameters);case"PolyLine":return new PolylineAnnotation(parameters);case"Polygon":return new PolygonAnnotation(parameters);case"Caret":return new CaretAnnotation(parameters);case"Ink":return new InkAnnotation(parameters);case"Highlight":return new HighlightAnnotation(parameters);case"Underline":return new UnderlineAnnotation(parameters);case"Squiggly":return new SquigglyAnnotation(parameters);case"StrikeOut":return new StrikeOutAnnotation(parameters);case"Stamp":return new StampAnnotation(parameters);case"FileAttachment":return new FileAttachmentAnnotation(parameters);default:return subtype?(0,_util.warn)('Unimplemented annotation type "'+subtype+'", falling back to base annotation.'):(0,_util.warn)("Annotation is missing the required /Subtype."),new Annotation(parameters)}}}}]),AnnotationFactory}();function getQuadPoints(dict,rect){if(!dict.has("QuadPoints"))return null;var quadPoints=dict.getArray("QuadPoints");if(!Array.isArray(quadPoints)||0===quadPoints.length||quadPoints.length%8>0)return null;for(var quadPointsLists=[],i=0,ii=quadPoints.length/8;i<ii;i++){quadPointsLists.push([]);for(var j=8*i,jj=8*i+8;j<jj;j+=2){var x=quadPoints[j],y=quadPoints[j+1];if(null!==rect&&(x<rect[0]||x>rect[2]||y<rect[1]||y>rect[3]))return null;quadPointsLists[i].push({x:x,y:y})}}return quadPointsLists.map((function(quadPointsList){var _quadPointsList$reduc=quadPointsList.reduce((function(_ref31,quadPoint){var _ref32=_slicedToArray(_ref31,4),mX=_ref32[0],MX=_ref32[1],mY=_ref32[2],MY=_ref32[3];return[Math.min(mX,quadPoint.x),Math.max(MX,quadPoint.x),Math.min(mY,quadPoint.y),Math.max(MY,quadPoint.y)]}),[Number.MAX_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MIN_VALUE]),_quadPointsList$reduc2=_slicedToArray(_quadPointsList$reduc,4),minX=_quadPointsList$reduc2[0],maxX=_quadPointsList$reduc2[1],minY=_quadPointsList$reduc2[2],maxY=_quadPointsList$reduc2[3];return[{x:minX,y:maxY},{x:maxX,y:maxY},{x:minX,y:minY},{x:maxX,y:minY}]}))}function getTransformMatrix(rect,bbox,matrix){var _util$Util$getAxialAl2=_slicedToArray(_util.Util.getAxialAlignedBoundingBox(bbox,matrix),4),minX=_util$Util$getAxialAl2[0],minY=_util$Util$getAxialAl2[1],maxX=_util$Util$getAxialAl2[2],maxY=_util$Util$getAxialAl2[3];if(minX===maxX||minY===maxY)return[1,0,0,1,rect[0],rect[1]];var xRatio=(rect[2]-rect[0])/(maxX-minX),yRatio=(rect[3]-rect[1])/(maxY-minY);return[xRatio,0,0,yRatio,rect[0]-minX*xRatio,rect[1]-minY*yRatio]}exports.AnnotationFactory=AnnotationFactory;var Annotation=function(){function Annotation(params){_classCallCheck(this,Annotation);var dict=params.dict;this.setContents(dict.get("Contents")),this.setModificationDate(dict.get("M")),this.setFlags(dict.get("F")),this.setRectangle(dict.getArray("Rect")),this.setColor(dict.getArray("C")),this.setBorderStyle(dict),this.setAppearance(dict),this._streams=[],this.appearance&&this._streams.push(this.appearance),this.data={annotationFlags:this.flags,borderStyle:this.borderStyle,color:this.color,contents:this.contents,hasAppearance:!!this.appearance,id:params.id,modificationDate:this.modificationDate,rect:this.rectangle,subtype:params.subtype},this._fallbackFontDict=null}var _save;return _createClass(Annotation,[{key:"_hasFlag",value:function(flags,flag){return!!(flags&flag)}},{key:"_isViewable",value:function(flags){return!this._hasFlag(flags,_util.AnnotationFlag.INVISIBLE)&&!this._hasFlag(flags,_util.AnnotationFlag.NOVIEW)}},{key:"_isPrintable",value:function(flags){return this._hasFlag(flags,_util.AnnotationFlag.PRINT)&&!this._hasFlag(flags,_util.AnnotationFlag.INVISIBLE)}},{key:"isHidden",value:function(annotationStorage){var data=annotationStorage&&annotationStorage[this.data.id];return data&&"hidden"in data?data.hidden:this._hasFlag(this.flags,_util.AnnotationFlag.HIDDEN)}},{key:"viewable",get:function(){return null!==this.data.quadPoints&&(0===this.flags||this._isViewable(this.flags))}},{key:"printable",get:function(){return null!==this.data.quadPoints&&0!==this.flags&&this._isPrintable(this.flags)}},{key:"setContents",value:function(contents){this.contents=(0,_util.stringToPDFString)(contents||"")}},{key:"setModificationDate",value:function(modificationDate){this.modificationDate=(0,_util.isString)(modificationDate)?modificationDate:null}},{key:"setFlags",value:function(flags){this.flags=Number.isInteger(flags)&&flags>0?flags:0}},{key:"hasFlag",value:function(flag){return this._hasFlag(this.flags,flag)}},{key:"setRectangle",value:function(rectangle){Array.isArray(rectangle)&&4===rectangle.length?this.rectangle=_util.Util.normalizeRect(rectangle):this.rectangle=[0,0,0,0]}},{key:"setColor",value:function(color){var rgbColor=new Uint8ClampedArray(3);if(Array.isArray(color))switch(color.length){case 0:this.color=null;break;case 1:_colorspace.ColorSpace.singletons.gray.getRgbItem(color,0,rgbColor,0),this.color=rgbColor;break;case 3:_colorspace.ColorSpace.singletons.rgb.getRgbItem(color,0,rgbColor,0),this.color=rgbColor;break;case 4:_colorspace.ColorSpace.singletons.cmyk.getRgbItem(color,0,rgbColor,0),this.color=rgbColor;break;default:this.color=rgbColor}else this.color=rgbColor}},{key:"setBorderStyle",value:function(borderStyle){if(this.borderStyle=new AnnotationBorderStyle,(0,_primitives.isDict)(borderStyle))if(borderStyle.has("BS")){var dict=borderStyle.get("BS"),dictType=dict.get("Type");dictType&&!(0,_primitives.isName)(dictType,"Border")||(this.borderStyle.setWidth(dict.get("W"),this.rectangle),this.borderStyle.setStyle(dict.get("S")),this.borderStyle.setDashArray(dict.getArray("D")))}else if(borderStyle.has("Border")){var array=borderStyle.getArray("Border");Array.isArray(array)&&array.length>=3&&(this.borderStyle.setHorizontalCornerRadius(array[0]),this.borderStyle.setVerticalCornerRadius(array[1]),this.borderStyle.setWidth(array[2],this.rectangle),4===array.length&&this.borderStyle.setDashArray(array[3]))}else this.borderStyle.setWidth(0)}},{key:"setAppearance",value:function(dict){this.appearance=null;var appearanceStates=dict.get("AP");if((0,_primitives.isDict)(appearanceStates)){var normalAppearanceState=appearanceStates.get("N");if((0,_primitives.isStream)(normalAppearanceState))this.appearance=normalAppearanceState;else if((0,_primitives.isDict)(normalAppearanceState)){var as=dict.get("AS");(0,_primitives.isName)(as)&&normalAppearanceState.has(as.name)&&(this.appearance=normalAppearanceState.get(as.name))}}}},{key:"loadResources",value:function(keys){return this.appearance.dict.getAsync("Resources").then((function(resources){if(resources)return new _obj.ObjectLoader(resources,keys,resources.xref).load().then((function(){return resources}))}))}},{key:"getOperatorList",value:function(evaluator,task,renderForms,annotationStorage){var _this34=this;if(!this.appearance)return Promise.resolve(new _operator_list.OperatorList);var appearance=this.appearance,data=this.data,appearanceDict=appearance.dict,resourcesPromise=this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"]),bbox=appearanceDict.getArray("BBox")||[0,0,1,1],matrix=appearanceDict.getArray("Matrix")||[1,0,0,1,0,0],transform=getTransformMatrix(data.rect,bbox,matrix);return resourcesPromise.then((function(resources){var opList=new _operator_list.OperatorList;return opList.addOp(_util.OPS.beginAnnotation,[data.rect,transform,matrix]),evaluator.getOperatorList({stream:appearance,task:task,resources:resources,operatorList:opList,fallbackFontDict:_this34._fallbackFontDict}).then((function(){return opList.addOp(_util.OPS.endAnnotation,[]),_this34.reset(),opList}))}))}},{key:"save",value:(_save=_asyncToGenerator(regeneratorRuntime.mark((function _callee13(evaluator,task,annotationStorage){return regeneratorRuntime.wrap((function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:return _context13.abrupt("return",null);case 1:case"end":return _context13.stop()}}),_callee13)}))),function(_x13,_x14,_x15){return _save.apply(this,arguments)})},{key:"getFieldObject",value:function(){return null}},{key:"reset",value:function(){var _step32,_iterator32=_createForOfIteratorHelper(this._streams);try{for(_iterator32.s();!(_step32=_iterator32.n()).done;)_step32.value.reset()}catch(err){_iterator32.e(err)}finally{_iterator32.f()}}}]),Annotation}();exports.Annotation=Annotation;var AnnotationBorderStyle=function(){function AnnotationBorderStyle(){_classCallCheck(this,AnnotationBorderStyle),this.width=1,this.style=_util.AnnotationBorderStyleType.SOLID,this.dashArray=[3],this.horizontalCornerRadius=0,this.verticalCornerRadius=0}return _createClass(AnnotationBorderStyle,[{key:"setWidth",value:function(width){var rect=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0];if((0,_primitives.isName)(width))this.width=0;else if(Number.isInteger(width)){if(width>0){var maxWidth=(rect[2]-rect[0])/2,maxHeight=(rect[3]-rect[1])/2;maxWidth>0&&maxHeight>0&&(width>maxWidth||width>maxHeight)&&((0,_util.warn)("AnnotationBorderStyle.setWidth - ignoring width: ".concat(width)),width=1)}this.width=width}}},{key:"setStyle",value:function(style){if((0,_primitives.isName)(style))switch(style.name){case"S":this.style=_util.AnnotationBorderStyleType.SOLID;break;case"D":this.style=_util.AnnotationBorderStyleType.DASHED;break;case"B":this.style=_util.AnnotationBorderStyleType.BEVELED;break;case"I":this.style=_util.AnnotationBorderStyleType.INSET;break;case"U":this.style=_util.AnnotationBorderStyleType.UNDERLINE}}},{key:"setDashArray",value:function(dashArray){if(Array.isArray(dashArray)&&dashArray.length>0){var _step33,isValid=!0,allZeros=!0,_iterator33=_createForOfIteratorHelper(dashArray);try{for(_iterator33.s();!(_step33=_iterator33.n()).done;){var element=_step33.value;if(!(+element>=0)){isValid=!1;break}element>0&&(allZeros=!1)}}catch(err){_iterator33.e(err)}finally{_iterator33.f()}isValid&&!allZeros?this.dashArray=dashArray:this.width=0}else dashArray&&(this.width=0)}},{key:"setHorizontalCornerRadius",value:function(radius){Number.isInteger(radius)&&(this.horizontalCornerRadius=radius)}},{key:"setVerticalCornerRadius",value:function(radius){Number.isInteger(radius)&&(this.verticalCornerRadius=radius)}}]),AnnotationBorderStyle}();exports.AnnotationBorderStyle=AnnotationBorderStyle;var MarkupAnnotation=function(_Annotation){_inherits(MarkupAnnotation,_Annotation);var _super37=_createSuper(MarkupAnnotation);function MarkupAnnotation(parameters){var _this35;_classCallCheck(this,MarkupAnnotation),_this35=_super37.call(this,parameters);var dict=parameters.dict;if(dict.has("IRT")){var rawIRT=dict.getRaw("IRT");_this35.data.inReplyTo=(0,_primitives.isRef)(rawIRT)?rawIRT.toString():null;var rt=dict.get("RT");_this35.data.replyType=(0,_primitives.isName)(rt)?rt.name:_util.AnnotationReplyType.REPLY}if(_this35.data.replyType===_util.AnnotationReplyType.GROUP){var parent=dict.get("IRT");_this35.data.title=(0,_util.stringToPDFString)(parent.get("T")||""),_this35.setContents(parent.get("Contents")),_this35.data.contents=_this35.contents,parent.has("CreationDate")?(_this35.setCreationDate(parent.get("CreationDate")),_this35.data.creationDate=_this35.creationDate):_this35.data.creationDate=null,parent.has("M")?(_this35.setModificationDate(parent.get("M")),_this35.data.modificationDate=_this35.modificationDate):_this35.data.modificationDate=null,_this35.data.hasPopup=parent.has("Popup"),parent.has("C")?(_this35.setColor(parent.getArray("C")),_this35.data.color=_this35.color):_this35.data.color=null}else _this35.data.title=(0,_util.stringToPDFString)(dict.get("T")||""),_this35.setCreationDate(dict.get("CreationDate")),_this35.data.creationDate=_this35.creationDate,_this35.data.hasPopup=dict.has("Popup"),dict.has("C")||(_this35.data.color=null);return _this35}return _createClass(MarkupAnnotation,[{key:"setCreationDate",value:function(creationDate){this.creationDate=(0,_util.isString)(creationDate)?creationDate:null}},{key:"_setDefaultAppearance",value:function(_ref33){var xref=_ref33.xref,extra=_ref33.extra,strokeColor=_ref33.strokeColor,fillColor=_ref33.fillColor,blendMode=_ref33.blendMode,pointsCallback=_ref33.pointsCallback,minX=Number.MAX_VALUE,minY=Number.MAX_VALUE,maxX=Number.MIN_VALUE,maxY=Number.MIN_VALUE,buffer=["q"];extra&&buffer.push(extra),strokeColor&&buffer.push("".concat(strokeColor[0]," ").concat(strokeColor[1]," ").concat(strokeColor[2]," RG")),fillColor&&buffer.push("".concat(fillColor[0]," ").concat(fillColor[1]," ").concat(fillColor[2]," rg"));var _step34,_iterator34=_createForOfIteratorHelper(this.data.quadPoints);try{for(_iterator34.s();!(_step34=_iterator34.n()).done;){var _pointsCallback2=_slicedToArray(pointsCallback(buffer,_step34.value),4),mX=_pointsCallback2[0],MX=_pointsCallback2[1],mY=_pointsCallback2[2],MY=_pointsCallback2[3];minX=Math.min(minX,mX),maxX=Math.max(maxX,MX),minY=Math.min(minY,mY),maxY=Math.max(maxY,MY)}}catch(err){_iterator34.e(err)}finally{_iterator34.f()}buffer.push("Q");var formDict=new _primitives.Dict(xref),appearanceStreamDict=new _primitives.Dict(xref);appearanceStreamDict.set("Subtype",_primitives.Name.get("Form"));var appearanceStream=new _stream.StringStream(buffer.join(" "));appearanceStream.dict=appearanceStreamDict,formDict.set("Fm0",appearanceStream);var gsDict=new _primitives.Dict(xref);blendMode&&gsDict.set("BM",_primitives.Name.get(blendMode));var stateDict=new _primitives.Dict(xref);stateDict.set("GS0",gsDict);var resources=new _primitives.Dict(xref);resources.set("ExtGState",stateDict),resources.set("XObject",formDict);var appearanceDict=new _primitives.Dict(xref);appearanceDict.set("Resources",resources);var bbox=this.data.rect=[minX,minY,maxX,maxY];appearanceDict.set("BBox",bbox),this.appearance=new _stream.StringStream("/GS0 gs /Fm0 Do"),this.appearance.dict=appearanceDict,this._streams.push(this.appearance,appearanceStream)}}]),MarkupAnnotation}(Annotation);exports.MarkupAnnotation=MarkupAnnotation;var WidgetAnnotation=function(_Annotation2){_inherits(WidgetAnnotation,_Annotation2);var _getFontData2,_getAppearance2,_save2,_super38=_createSuper(WidgetAnnotation);function WidgetAnnotation(params){var _this36;_classCallCheck(this,WidgetAnnotation),_this36=_super38.call(this,params);var dict=params.dict,data=_this36.data;_this36.ref=params.ref,data.annotationType=_util.AnnotationType.WIDGET,data.fieldName=_this36._constructFieldName(dict),data.actions=(0,_core_utils.collectActions)(params.xref,dict,_util.AnnotationActionEventType);var fieldValue=(0,_core_utils.getInheritableProperty)({dict:dict,key:"V",getArray:!0});data.fieldValue=_this36._decodeFormValue(fieldValue);var defaultFieldValue=(0,_core_utils.getInheritableProperty)({dict:dict,key:"DV",getArray:!0});data.defaultFieldValue=_this36._decodeFormValue(defaultFieldValue),data.alternativeText=(0,_util.stringToPDFString)(dict.get("TU")||"");var defaultAppearance=(0,_core_utils.getInheritableProperty)({dict:dict,key:"DA"})||params.acroForm.get("DA")||"";data.defaultAppearance=(0,_util.isString)(defaultAppearance)?defaultAppearance:"",data.defaultAppearanceData=(0,_default_appearance.parseDefaultAppearance)(data.defaultAppearance);var fieldType=(0,_core_utils.getInheritableProperty)({dict:dict,key:"FT"});data.fieldType=(0,_primitives.isName)(fieldType)?fieldType.name:null;var localResources=(0,_core_utils.getInheritableProperty)({dict:dict,key:"DR"}),acroFormResources=params.acroForm.get("DR"),appearanceResources=_this36.appearance&&_this36.appearance.dict.get("Resources");return _this36._fieldResources={localResources:localResources,acroFormResources:acroFormResources,appearanceResources:appearanceResources,mergedResources:_primitives.Dict.merge({xref:params.xref,dictArray:[localResources,appearanceResources,acroFormResources],mergeSubDicts:!0})},data.fieldFlags=(0,_core_utils.getInheritableProperty)({dict:dict,key:"Ff"}),(!Number.isInteger(data.fieldFlags)||data.fieldFlags<0)&&(data.fieldFlags=0),data.readOnly=_this36.hasFieldFlag(_util.AnnotationFieldFlag.READONLY),data.hidden=_this36._hasFlag(data.annotationFlags,_util.AnnotationFlag.HIDDEN),"Sig"===data.fieldType&&(data.fieldValue=null,_this36.setFlags(_util.AnnotationFlag.HIDDEN),data.hidden=!0),_this36}return _createClass(WidgetAnnotation,[{key:"_constructFieldName",value:function(dict){if(!dict.has("T")&&!dict.has("Parent"))return(0,_util.warn)("Unknown field name, falling back to empty field name."),"";if(!dict.has("Parent"))return(0,_util.stringToPDFString)(dict.get("T"));var fieldName=[];dict.has("T")&&fieldName.unshift((0,_util.stringToPDFString)(dict.get("T")));for(var loopDict=dict;loopDict.has("Parent")&&(loopDict=loopDict.get("Parent"),(0,_primitives.isDict)(loopDict));)loopDict.has("T")&&fieldName.unshift((0,_util.stringToPDFString)(loopDict.get("T")));return fieldName.join(".")}},{key:"_decodeFormValue",value:function(formValue){return Array.isArray(formValue)?formValue.filter((function(item){return(0,_util.isString)(item)})).map((function(item){return(0,_util.stringToPDFString)(item)})):(0,_primitives.isName)(formValue)?(0,_util.stringToPDFString)(formValue.name):(0,_util.isString)(formValue)?(0,_util.stringToPDFString)(formValue):null}},{key:"hasFieldFlag",value:function(flag){return!!(this.data.fieldFlags&flag)}},{key:"getOperatorList",value:function(evaluator,task,renderForms,annotationStorage){var _this37=this;return renderForms?Promise.resolve(new _operator_list.OperatorList):this._hasText?this._getAppearance(evaluator,task,annotationStorage).then((function(content){if(_this37.appearance&&null===content)return _get(_getPrototypeOf(WidgetAnnotation.prototype),"getOperatorList",_this37).call(_this37,evaluator,task,renderForms,annotationStorage);var operatorList=new _operator_list.OperatorList;if(!_this37.data.defaultAppearance||null===content)return operatorList;var matrix=[1,0,0,1,0,0],bbox=[0,0,_this37.data.rect[2]-_this37.data.rect[0],_this37.data.rect[3]-_this37.data.rect[1]],transform=getTransformMatrix(_this37.data.rect,bbox,matrix);operatorList.addOp(_util.OPS.beginAnnotation,[_this37.data.rect,transform,matrix]);var stream=new _stream.StringStream(content);return evaluator.getOperatorList({stream:stream,task:task,resources:_this37._fieldResources.mergedResources,operatorList:operatorList}).then((function(){return operatorList.addOp(_util.OPS.endAnnotation,[]),operatorList}))})):_get(_getPrototypeOf(WidgetAnnotation.prototype),"getOperatorList",this).call(this,evaluator,task,renderForms,annotationStorage)}},{key:"save",value:(_save2=_asyncToGenerator(regeneratorRuntime.mark((function _callee14(evaluator,task,annotationStorage){var value,appearance,xref,dict,bbox,xfa,newRef,AP,encrypt,originalTransform,newTransform,appearanceDict,bufferOriginal,bufferNew;return regeneratorRuntime.wrap((function(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:if((value=annotationStorage[this.data.id]&&annotationStorage[this.data.id].value)!==this.data.fieldValue&&void 0!==value){_context14.next=3;break}return _context14.abrupt("return",null);case 3:return _context14.next=5,this._getAppearance(evaluator,task,annotationStorage);case 5:if(null!==(appearance=_context14.sent)){_context14.next=8;break}return _context14.abrupt("return",null);case 8:if(xref=evaluator.xref,dict=xref.fetchIfRef(this.ref),(0,_primitives.isDict)(dict)){_context14.next=12;break}return _context14.abrupt("return",null);case 12:return bbox=[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]],xfa={path:(0,_util.stringToPDFString)(dict.get("T")||""),value:value},newRef=xref.getNewRef(),(AP=new _primitives.Dict(xref)).set("N",newRef),encrypt=xref.encrypt,originalTransform=null,newTransform=null,encrypt&&(originalTransform=encrypt.createCipherTransform(this.ref.num,this.ref.gen),newTransform=encrypt.createCipherTransform(newRef.num,newRef.gen),appearance=newTransform.encryptString(appearance)),dict.set("V",(0,_util.isAscii)(value)?value:(0,_util.stringToUTF16BEString)(value)),dict.set("AP",AP),dict.set("M","D:".concat((0,_util.getModificationDate)())),(appearanceDict=new _primitives.Dict(xref)).set("Length",appearance.length),appearanceDict.set("Subtype",_primitives.Name.get("Form")),appearanceDict.set("Resources",this._getSaveFieldResources(xref)),appearanceDict.set("BBox",bbox),bufferOriginal=["".concat(this.ref.num," ").concat(this.ref.gen," obj\n")],(0,_writer.writeDict)(dict,bufferOriginal,originalTransform),bufferOriginal.push("\nendobj\n"),bufferNew=["".concat(newRef.num," ").concat(newRef.gen," obj\n")],(0,_writer.writeDict)(appearanceDict,bufferNew,newTransform),bufferNew.push(" stream\n"),bufferNew.push(appearance),bufferNew.push("\nendstream\nendobj\n"),_context14.abrupt("return",[{ref:this.ref,data:bufferOriginal.join(""),xfa:xfa},{ref:newRef,data:bufferNew.join(""),xfa:null}]);case 38:case"end":return _context14.stop()}}),_callee14,this)}))),function(_x16,_x17,_x18){return _save2.apply(this,arguments)})},{key:"_getAppearance",value:(_getAppearance2=_asyncToGenerator(regeneratorRuntime.mark((function _callee15(evaluator,task,annotationStorage){var isPassword,value,defaultPadding,hPadding,totalHeight,totalWidth,font,fontSize,descent,vPadding,defaultAppearance,alignment,encodedString,renderedText;return regeneratorRuntime.wrap((function(_context15){for(;;)switch(_context15.prev=_context15.next){case 0:if(isPassword=this.hasFieldFlag(_util.AnnotationFieldFlag.PASSWORD),annotationStorage&&!isPassword){_context15.next=3;break}return _context15.abrupt("return",null);case 3:if(void 0!==(value=annotationStorage[this.data.id]&&annotationStorage[this.data.id].value)){_context15.next=6;break}return _context15.abrupt("return",null);case 6:if(""!==value){_context15.next=8;break}return _context15.abrupt("return","");case 8:return hPadding=defaultPadding=2,totalHeight=this.data.rect[3]-this.data.rect[1],totalWidth=this.data.rect[2]-this.data.rect[0],this.data.defaultAppearance||(this.data.defaultAppearance="/Helvetica 0 Tf 0 g",this.data.defaultAppearanceData=(0,_default_appearance.parseDefaultAppearance)(this.data.defaultAppearance)),_context15.next=15,this._getFontData(evaluator,task);case 15:if(font=_context15.sent,fontSize=this._computeFontSize(font,totalHeight),descent=font.descent,isNaN(descent)&&(descent=0),vPadding=defaultPadding+Math.abs(descent)*fontSize,defaultAppearance=this.data.defaultAppearance,alignment=this.data.textAlignment,!this.data.multiLine){_context15.next=24;break}return _context15.abrupt("return",this._getMultilineAppearance(defaultAppearance,value,font,fontSize,totalWidth,totalHeight,alignment,hPadding,vPadding));case 24:if(encodedString=font.encodeString(value).join(""),!this.data.comb){_context15.next=27;break}return _context15.abrupt("return",this._getCombAppearance(defaultAppearance,font,encodedString,totalWidth,hPadding,vPadding));case 27:if(!(0===alignment||alignment>2)){_context15.next=29;break}return _context15.abrupt("return","/Tx BMC q BT "+defaultAppearance+" 1 0 0 1 ".concat(hPadding," ").concat(vPadding," Tm (").concat((0,_util.escapeString)(encodedString),") Tj")+" ET Q EMC");case 29:return renderedText=this._renderText(encodedString,font,fontSize,totalWidth,alignment,hPadding,vPadding),_context15.abrupt("return","/Tx BMC q BT "+defaultAppearance+" 1 0 0 1 0 0 Tm ".concat(renderedText)+" ET Q EMC");case 31:case"end":return _context15.stop()}}),_callee15,this)}))),function(_x19,_x20,_x21){return _getAppearance2.apply(this,arguments)})},{key:"_getFontData",value:(_getFontData2=_asyncToGenerator(regeneratorRuntime.mark((function _callee16(evaluator,task){var operatorList,initialState,_this$data$defaultApp,fontName,fontSize;return regeneratorRuntime.wrap((function(_context16){for(;;)switch(_context16.prev=_context16.next){case 0:return operatorList=new _operator_list.OperatorList,initialState={font:null,clone:function(){return this}},_this$data$defaultApp=this.data.defaultAppearanceData,fontName=_this$data$defaultApp.fontName,fontSize=_this$data$defaultApp.fontSize,_context16.next=5,evaluator.handleSetFont(this._fieldResources.mergedResources,[fontName,fontSize],null,operatorList,task,initialState,null);case 5:return _context16.abrupt("return",initialState.font);case 6:case"end":return _context16.stop()}}),_callee16,this)}))),function(_x22,_x23){return _getFontData2.apply(this,arguments)})},{key:"_computeFontSize",value:function(font,height){var fontSize=this.data.defaultAppearanceData.fontSize;if(!fontSize){var capHeight,_this$data$defaultApp2=this.data.defaultAppearanceData,fontColor=_this$data$defaultApp2.fontColor,fontName=_this$data$defaultApp2.fontName;if(font.capHeight)capHeight=font.capHeight;else{var glyphs=font.charsToGlyphs(font.encodeString("M").join(""));capHeight=1===glyphs.length&&glyphs[0].width?glyphs[0].width/1e3*.7:.7}fontSize=Math.max(1,Math.floor(height/(1.5*capHeight))),this.data.defaultAppearance=(0,_default_appearance.createDefaultAppearance)({fontSize:fontSize,fontName:fontName,fontColor:fontColor})}return fontSize}},{key:"_renderText",value:function(text,font,fontSize,totalWidth,alignment,hPadding,vPadding){var _step35,shift,scale=fontSize/1e3,width=0,_iterator35=_createForOfIteratorHelper(font.charsToGlyphs(text));try{for(_iterator35.s();!(_step35=_iterator35.n()).done;)width+=_step35.value.width*scale}catch(err){_iterator35.e(err)}finally{_iterator35.f()}return shift=(shift=1===alignment?(totalWidth-width)/2:2===alignment?totalWidth-width-hPadding:hPadding).toFixed(2),vPadding=vPadding.toFixed(2),"".concat(shift," ").concat(vPadding," Td (").concat((0,_util.escapeString)(text),") Tj")}},{key:"_getSaveFieldResources",value:function(xref){var _this$_fieldResources=this._fieldResources,localResources=_this$_fieldResources.localResources,appearanceResources=_this$_fieldResources.appearanceResources,acroFormResources=_this$_fieldResources.acroFormResources,fontNameStr=this.data.defaultAppearanceData&&this.data.defaultAppearanceData.fontName.name;if(!fontNameStr)return localResources||_primitives.Dict.empty;for(var _i24=0,_arr2=[localResources,appearanceResources];_i24<_arr2.length;_i24++){var resources=_arr2[_i24];if(resources instanceof _primitives.Dict){var localFont=resources.get("Font");if(localFont instanceof _primitives.Dict&&localFont.has(fontNameStr))return resources}}if(acroFormResources instanceof _primitives.Dict){var acroFormFont=acroFormResources.get("Font");if(acroFormFont instanceof _primitives.Dict&&acroFormFont.has(fontNameStr)){var subFontDict=new _primitives.Dict(xref);subFontDict.set(fontNameStr,acroFormFont.getRaw(fontNameStr));var subResourcesDict=new _primitives.Dict(xref);return subResourcesDict.set("Font",subFontDict),_primitives.Dict.merge({xref:xref,dictArray:[subResourcesDict,localResources],mergeSubDicts:!0})}}return localResources||_primitives.Dict.empty}},{key:"getFieldObject",value:function(){return"Sig"===this.data.fieldType?{id:this.data.id,value:null,type:"signature"}:null}}]),WidgetAnnotation}(Annotation),TextWidgetAnnotation=function(_WidgetAnnotation){_inherits(TextWidgetAnnotation,_WidgetAnnotation);var _super39=_createSuper(TextWidgetAnnotation);function TextWidgetAnnotation(params){var _this38;_classCallCheck(this,TextWidgetAnnotation),(_this38=_super39.call(this,params))._hasText=!0;var dict=params.dict;(0,_util.isString)(_this38.data.fieldValue)||(_this38.data.fieldValue="");var alignment=(0,_core_utils.getInheritableProperty)({dict:dict,key:"Q"});(!Number.isInteger(alignment)||alignment<0||alignment>2)&&(alignment=null),_this38.data.textAlignment=alignment;var maximumLength=(0,_core_utils.getInheritableProperty)({dict:dict,key:"MaxLen"});return(!Number.isInteger(maximumLength)||maximumLength<0)&&(maximumLength=null),_this38.data.maxLen=maximumLength,_this38.data.multiLine=_this38.hasFieldFlag(_util.AnnotationFieldFlag.MULTILINE),_this38.data.comb=_this38.hasFieldFlag(_util.AnnotationFieldFlag.COMB)&&!_this38.hasFieldFlag(_util.AnnotationFieldFlag.MULTILINE)&&!_this38.hasFieldFlag(_util.AnnotationFieldFlag.PASSWORD)&&!_this38.hasFieldFlag(_util.AnnotationFieldFlag.FILESELECT)&&null!==_this38.data.maxLen,_this38}return _createClass(TextWidgetAnnotation,[{key:"_getCombAppearance",value:function(defaultAppearance,font,text,width,hPadding,vPadding){var _step36,combWidth=(width/this.data.maxLen).toFixed(2),buf=[],_iterator36=_createForOfIteratorHelper(font.getCharPositions(text));try{for(_iterator36.s();!(_step36=_iterator36.n()).done;){var _step36$value=_slicedToArray(_step36.value,2),start=_step36$value[0],end=_step36$value[1];buf.push("(".concat((0,_util.escapeString)(text.substring(start,end)),") Tj"))}}catch(err){_iterator36.e(err)}finally{_iterator36.f()}var renderedComb=buf.join(" ".concat(combWidth," 0 Td "));return"/Tx BMC q BT "+defaultAppearance+" 1 0 0 1 ".concat(hPadding," ").concat(vPadding," Tm ").concat(renderedComb)+" ET Q EMC"}},{key:"_getMultilineAppearance",value:function(defaultAppearance,text,font,fontSize,width,height,alignment,hPadding,vPadding){var _step37,buf=[],totalWidth=width-2*hPadding,_iterator37=_createForOfIteratorHelper(text.split(/\r\n|\r|\n/));try{for(_iterator37.s();!(_step37=_iterator37.n()).done;){var _step38,line=_step37.value,_iterator38=_createForOfIteratorHelper(this._splitLine(line,font,fontSize,totalWidth));try{for(_iterator38.s();!(_step38=_iterator38.n()).done;){var chunk=_step38.value,padding=0===buf.length?hPadding:0;buf.push(this._renderText(chunk,font,fontSize,width,alignment,padding,-fontSize))}}catch(err){_iterator38.e(err)}finally{_iterator38.f()}}}catch(err){_iterator37.e(err)}finally{_iterator37.f()}var renderedText=buf.join("\n");return"/Tx BMC q BT "+defaultAppearance+" 1 0 0 1 0 ".concat(height," Tm ").concat(renderedText)+" ET Q EMC"}},{key:"_splitLine",value:function(line,font,fontSize,width){line=font.encodeString(line).join("");var glyphs=font.charsToGlyphs(line);if(glyphs.length<=1)return[line];for(var positions=font.getCharPositions(line),scale=fontSize/1e3,chunks=[],lastSpacePosInStringStart=-1,lastSpacePosInStringEnd=-1,lastSpacePos=-1,startChunk=0,currentWidth=0,i=0,ii=glyphs.length;i<ii;i++){var _positions$i=_slicedToArray(positions[i],2),start=_positions$i[0],end=_positions$i[1],glyph=glyphs[i],glyphWidth=glyph.width*scale;" "===glyph.unicode?currentWidth+glyphWidth>width?(chunks.push(line.substring(startChunk,start)),startChunk=start,currentWidth=glyphWidth,lastSpacePosInStringStart=-1,lastSpacePos=-1):(currentWidth+=glyphWidth,lastSpacePosInStringStart=start,lastSpacePosInStringEnd=end,lastSpacePos=i):currentWidth+glyphWidth>width?-1!==lastSpacePosInStringStart?(chunks.push(line.substring(startChunk,lastSpacePosInStringEnd)),startChunk=lastSpacePosInStringEnd,i=lastSpacePos+1,lastSpacePosInStringStart=-1,currentWidth=0):(chunks.push(line.substring(startChunk,start)),startChunk=start,currentWidth=glyphWidth):currentWidth+=glyphWidth}return startChunk<line.length&&chunks.push(line.substring(startChunk,line.length)),chunks}},{key:"getFieldObject",value:function(){return{id:this.data.id,value:this.data.fieldValue,defaultValue:this.data.defaultFieldValue,multiline:this.data.multiLine,password:this.hasFieldFlag(_util.AnnotationFieldFlag.PASSWORD),charLimit:this.data.maxLen,comb:this.data.comb,editable:!this.data.readOnly,hidden:this.data.hidden,name:this.data.fieldName,rect:this.data.rect,actions:this.data.actions,type:"text"}}}]),TextWidgetAnnotation}(WidgetAnnotation),ButtonWidgetAnnotation=function(_WidgetAnnotation2){_inherits(ButtonWidgetAnnotation,_WidgetAnnotation2);var _saveRadioButton2,_saveCheckbox2,_save3,_super40=_createSuper(ButtonWidgetAnnotation);function ButtonWidgetAnnotation(params){var _this39;return _classCallCheck(this,ButtonWidgetAnnotation),(_this39=_super40.call(this,params)).checkedAppearance=null,_this39.uncheckedAppearance=null,_this39.data.checkBox=!_this39.hasFieldFlag(_util.AnnotationFieldFlag.RADIO)&&!_this39.hasFieldFlag(_util.AnnotationFieldFlag.PUSHBUTTON),_this39.data.radioButton=_this39.hasFieldFlag(_util.AnnotationFieldFlag.RADIO)&&!_this39.hasFieldFlag(_util.AnnotationFieldFlag.PUSHBUTTON),_this39.data.pushButton=_this39.hasFieldFlag(_util.AnnotationFieldFlag.PUSHBUTTON),_this39.data.isTooltipOnly=!1,_this39.data.checkBox?_this39._processCheckBox(params):_this39.data.radioButton?_this39._processRadioButton(params):_this39.data.pushButton?_this39._processPushButton(params):(0,_util.warn)("Invalid field flags for button widget annotation"),_this39}return _createClass(ButtonWidgetAnnotation,[{key:"getOperatorList",value:function(evaluator,task,renderForms,annotationStorage){if(this.data.pushButton)return _get(_getPrototypeOf(ButtonWidgetAnnotation.prototype),"getOperatorList",this).call(this,evaluator,task,!1,annotationStorage);if(annotationStorage){var appearance,value=annotationStorage[this.data.id]&&annotationStorage[this.data.id].value;if(void 0===value)return _get(_getPrototypeOf(ButtonWidgetAnnotation.prototype),"getOperatorList",this).call(this,evaluator,task,renderForms,annotationStorage);if(appearance=value?this.checkedAppearance:this.uncheckedAppearance){var savedAppearance=this.appearance;this.appearance=appearance;var operatorList=_get(_getPrototypeOf(ButtonWidgetAnnotation.prototype),"getOperatorList",this).call(this,evaluator,task,renderForms,annotationStorage);return this.appearance=savedAppearance,operatorList}return Promise.resolve(new _operator_list.OperatorList)}return _get(_getPrototypeOf(ButtonWidgetAnnotation.prototype),"getOperatorList",this).call(this,evaluator,task,renderForms,annotationStorage)}},{key:"save",value:(_save3=_asyncToGenerator(regeneratorRuntime.mark((function _callee17(evaluator,task,annotationStorage){return regeneratorRuntime.wrap((function(_context17){for(;;)switch(_context17.prev=_context17.next){case 0:if(!this.data.checkBox){_context17.next=2;break}return _context17.abrupt("return",this._saveCheckbox(evaluator,task,annotationStorage));case 2:if(!this.data.radioButton){_context17.next=4;break}return _context17.abrupt("return",this._saveRadioButton(evaluator,task,annotationStorage));case 4:return _context17.abrupt("return",null);case 5:case"end":return _context17.stop()}}),_callee17,this)}))),function(_x24,_x25,_x26){return _save3.apply(this,arguments)})},{key:"_saveCheckbox",value:(_saveCheckbox2=_asyncToGenerator(regeneratorRuntime.mark((function _callee18(evaluator,task,annotationStorage){var value,dict,xfa,name,encrypt,originalTransform,buffer;return regeneratorRuntime.wrap((function(_context18){for(;;)switch(_context18.prev=_context18.next){case 0:if(void 0!==(value=annotationStorage[this.data.id]&&annotationStorage[this.data.id].value)){_context18.next=3;break}return _context18.abrupt("return",null);case 3:if((this.data.fieldValue&&"Off"!==this.data.fieldValue)!==value){_context18.next=6;break}return _context18.abrupt("return",null);case 6:if(dict=evaluator.xref.fetchIfRef(this.ref),(0,_primitives.isDict)(dict)){_context18.next=9;break}return _context18.abrupt("return",null);case 9:return xfa={path:(0,_util.stringToPDFString)(dict.get("T")||""),value:value?this.data.exportValue:""},name=_primitives.Name.get(value?this.data.exportValue:"Off"),dict.set("V",name),dict.set("AS",name),dict.set("M","D:".concat((0,_util.getModificationDate)())),encrypt=evaluator.xref.encrypt,originalTransform=null,encrypt&&(originalTransform=encrypt.createCipherTransform(this.ref.num,this.ref.gen)),buffer=["".concat(this.ref.num," ").concat(this.ref.gen," obj\n")],(0,_writer.writeDict)(dict,buffer,originalTransform),buffer.push("\nendobj\n"),_context18.abrupt("return",[{ref:this.ref,data:buffer.join(""),xfa:xfa}]);case 21:case"end":return _context18.stop()}}),_callee18,this)}))),function(_x27,_x28,_x29){return _saveCheckbox2.apply(this,arguments)})},{key:"_saveRadioButton",value:(_saveRadioButton2=_asyncToGenerator(regeneratorRuntime.mark((function _callee19(evaluator,task,annotationStorage){var value,dict,xfa,name,parentBuffer,encrypt,parent,parentTransform,originalTransform,buffer,newRefs;return regeneratorRuntime.wrap((function(_context19){for(;;)switch(_context19.prev=_context19.next){case 0:if(void 0!==(value=annotationStorage[this.data.id]&&annotationStorage[this.data.id].value)){_context19.next=3;break}return _context19.abrupt("return",null);case 3:if(this.data.fieldValue===this.data.buttonValue!==value){_context19.next=6;break}return _context19.abrupt("return",null);case 6:if(dict=evaluator.xref.fetchIfRef(this.ref),(0,_primitives.isDict)(dict)){_context19.next=9;break}return _context19.abrupt("return",null);case 9:return xfa={path:(0,_util.stringToPDFString)(dict.get("T")||""),value:value?this.data.buttonValue:""},name=_primitives.Name.get(value?this.data.buttonValue:"Off"),parentBuffer=null,encrypt=evaluator.xref.encrypt,value&&((0,_primitives.isRef)(this.parent)?(parent=evaluator.xref.fetch(this.parent),parentTransform=null,encrypt&&(parentTransform=encrypt.createCipherTransform(this.parent.num,this.parent.gen)),parent.set("V",name),parentBuffer=["".concat(this.parent.num," ").concat(this.parent.gen," obj\n")],(0,_writer.writeDict)(parent,parentBuffer,parentTransform),parentBuffer.push("\nendobj\n")):(0,_primitives.isDict)(this.parent)&&this.parent.set("V",name)),dict.set("AS",name),dict.set("M","D:".concat((0,_util.getModificationDate)())),originalTransform=null,encrypt&&(originalTransform=encrypt.createCipherTransform(this.ref.num,this.ref.gen)),buffer=["".concat(this.ref.num," ").concat(this.ref.gen," obj\n")],(0,_writer.writeDict)(dict,buffer,originalTransform),buffer.push("\nendobj\n"),newRefs=[{ref:this.ref,data:buffer.join(""),xfa:xfa}],null!==parentBuffer&&newRefs.push({ref:this.parent,data:parentBuffer.join(""),xfa:null}),_context19.abrupt("return",newRefs);case 24:case"end":return _context19.stop()}}),_callee19,this)}))),function(_x30,_x31,_x32){return _saveRadioButton2.apply(this,arguments)})},{key:"_processCheckBox",value:function(params){var customAppearance=params.dict.get("AP");if((0,_primitives.isDict)(customAppearance)){var normalAppearance=customAppearance.get("N");if((0,_primitives.isDict)(normalAppearance)){var exportValues=normalAppearance.getKeys();exportValues.includes("Off")||exportValues.push("Off"),2===exportValues.length&&(this.data.exportValue="Off"===exportValues[0]?exportValues[1]:exportValues[0],this.checkedAppearance=normalAppearance.get(this.data.exportValue),this.uncheckedAppearance=normalAppearance.get("Off")||null,this._streams.push(this.checkedAppearance),this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance),this._fallbackFontDict=this.fallbackFontDict)}}}},{key:"_processRadioButton",value:function(params){this.data.fieldValue=this.data.buttonValue=null;var fieldParent=params.dict.get("Parent");if((0,_primitives.isDict)(fieldParent)){this.parent=params.dict.getRaw("Parent");var fieldParentValue=fieldParent.get("V");(0,_primitives.isName)(fieldParentValue)&&(this.data.fieldValue=this._decodeFormValue(fieldParentValue))}var appearanceStates=params.dict.get("AP");if((0,_primitives.isDict)(appearanceStates)){var normalAppearance=appearanceStates.get("N");if((0,_primitives.isDict)(normalAppearance)){var _step39,_iterator39=_createForOfIteratorHelper(normalAppearance.getKeys());try{for(_iterator39.s();!(_step39=_iterator39.n()).done;){var key=_step39.value;if("Off"!==key){this.data.buttonValue=this._decodeFormValue(key);break}}}catch(err){_iterator39.e(err)}finally{_iterator39.f()}this.checkedAppearance=normalAppearance.get(this.data.buttonValue),this.uncheckedAppearance=normalAppearance.get("Off")||null,this._streams.push(this.checkedAppearance),this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance),this._fallbackFontDict=this.fallbackFontDict}}}},{key:"_processPushButton",value:function(params){params.dict.has("A")||params.dict.has("AA")||this.data.alternativeText?(this.data.isTooltipOnly=!params.dict.has("A")&&!params.dict.has("AA"),_obj.Catalog.parseDestDictionary({destDict:params.dict,resultObj:this.data,docBaseUrl:params.pdfManager.docBaseUrl})):(0,_util.warn)("Push buttons without action dictionaries are not supported")}},{key:"getFieldObject",value:function(){var exportValues,type="button";return this.data.checkBox?(type="checkbox",exportValues=this.data.exportValue):this.data.radioButton&&(type="radiobutton",exportValues=this.data.buttonValue),{id:this.data.id,value:this.data.fieldValue||"Off",defaultValue:this.data.defaultFieldValue,exportValues:exportValues,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,hidden:this.data.hidden,actions:this.data.actions,type:type}}},{key:"fallbackFontDict",get:function(){var dict=new _primitives.Dict;return dict.set("BaseFont",_primitives.Name.get("ZapfDingbats")),dict.set("Type",_primitives.Name.get("FallbackType")),dict.set("Subtype",_primitives.Name.get("FallbackType")),dict.set("Encoding",_primitives.Name.get("ZapfDingbatsEncoding")),(0,_util.shadow)(this,"fallbackFontDict",dict)}}]),ButtonWidgetAnnotation}(WidgetAnnotation),ChoiceWidgetAnnotation=function(_WidgetAnnotation3){_inherits(ChoiceWidgetAnnotation,_WidgetAnnotation3);var _super41=_createSuper(ChoiceWidgetAnnotation);function ChoiceWidgetAnnotation(params){var _this40;_classCallCheck(this,ChoiceWidgetAnnotation),(_this40=_super41.call(this,params)).data.options=[];var options=(0,_core_utils.getInheritableProperty)({dict:params.dict,key:"Opt"});if(Array.isArray(options))for(var xref=params.xref,i=0,ii=options.length;i<ii;i++){var option=xref.fetchIfRef(options[i]),isOptionArray=Array.isArray(option);_this40.data.options[i]={exportValue:_this40._decodeFormValue(isOptionArray?xref.fetchIfRef(option[0]):option),displayValue:_this40._decodeFormValue(isOptionArray?xref.fetchIfRef(option[1]):option)}}return(0,_util.isString)(_this40.data.fieldValue)?_this40.data.fieldValue=[_this40.data.fieldValue]:_this40.data.fieldValue||(_this40.data.fieldValue=[]),_this40.data.combo=_this40.hasFieldFlag(_util.AnnotationFieldFlag.COMBO),_this40.data.multiSelect=_this40.hasFieldFlag(_util.AnnotationFieldFlag.MULTISELECT),_this40._hasText=!0,_this40}return _createClass(ChoiceWidgetAnnotation,[{key:"getFieldObject",value:function(){var type=this.data.combo?"combobox":"listbox",value=this.data.fieldValue.length>0?this.data.fieldValue[0]:null;return{id:this.data.id,value:value,defaultValue:this.data.defaultFieldValue,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,numItems:this.data.fieldValue.length,multipleSelection:this.data.multiSelect,hidden:this.data.hidden,actions:this.data.actions,type:type}}}]),ChoiceWidgetAnnotation}(WidgetAnnotation),TextAnnotation=function(_MarkupAnnotation){_inherits(TextAnnotation,_MarkupAnnotation);var _super42=_createSuper(TextAnnotation);function TextAnnotation(parameters){var _this41;_classCallCheck(this,TextAnnotation),_this41=_super42.call(this,parameters);var dict=parameters.dict;return _this41.data.annotationType=_util.AnnotationType.TEXT,_this41.data.hasAppearance?_this41.data.name="NoIcon":(_this41.data.rect[1]=_this41.data.rect[3]-22,_this41.data.rect[2]=_this41.data.rect[0]+22,_this41.data.name=dict.has("Name")?dict.get("Name").name:"Note"),dict.has("State")?(_this41.data.state=dict.get("State")||null,_this41.data.stateModel=dict.get("StateModel")||null):(_this41.data.state=null,_this41.data.stateModel=null),_this41}return _createClass(TextAnnotation)}(MarkupAnnotation),LinkAnnotation=function(_Annotation3){_inherits(LinkAnnotation,_Annotation3);var _super43=_createSuper(LinkAnnotation);function LinkAnnotation(params){var _this42;_classCallCheck(this,LinkAnnotation),(_this42=_super43.call(this,params)).data.annotationType=_util.AnnotationType.LINK;var quadPoints=getQuadPoints(params.dict,_this42.rectangle);return quadPoints&&(_this42.data.quadPoints=quadPoints),_obj.Catalog.parseDestDictionary({destDict:params.dict,resultObj:_this42.data,docBaseUrl:params.pdfManager.docBaseUrl}),_this42}return _createClass(LinkAnnotation)}(Annotation),PopupAnnotation=function(_Annotation4){_inherits(PopupAnnotation,_Annotation4);var _super44=_createSuper(PopupAnnotation);function PopupAnnotation(parameters){var _this43;_classCallCheck(this,PopupAnnotation),(_this43=_super44.call(this,parameters)).data.annotationType=_util.AnnotationType.POPUP;var parentItem=parameters.dict.get("Parent");if(!parentItem)return(0,_util.warn)("Popup annotation has a missing or invalid parent annotation."),_possibleConstructorReturn(_this43);var parentSubtype=parentItem.get("Subtype");_this43.data.parentType=(0,_primitives.isName)(parentSubtype)?parentSubtype.name:null;var rawParent=parameters.dict.getRaw("Parent");_this43.data.parentId=(0,_primitives.isRef)(rawParent)?rawParent.toString():null;var parentRect=parentItem.getArray("Rect");Array.isArray(parentRect)&&4===parentRect.length?_this43.data.parentRect=_util.Util.normalizeRect(parentRect):_this43.data.parentRect=[0,0,0,0];var rt=parentItem.get("RT");if((0,_primitives.isName)(rt,_util.AnnotationReplyType.GROUP)&&(parentItem=parentItem.get("IRT")),parentItem.has("M")?(_this43.setModificationDate(parentItem.get("M")),_this43.data.modificationDate=_this43.modificationDate):_this43.data.modificationDate=null,parentItem.has("C")?(_this43.setColor(parentItem.getArray("C")),_this43.data.color=_this43.color):_this43.data.color=null,!_this43.viewable){var parentFlags=parentItem.get("F");_this43._isViewable(parentFlags)&&_this43.setFlags(parentFlags)}return _this43.data.title=(0,_util.stringToPDFString)(parentItem.get("T")||""),_this43.data.contents=(0,_util.stringToPDFString)(parentItem.get("Contents")||""),_this43}return _createClass(PopupAnnotation)}(Annotation),FreeTextAnnotation=function(_MarkupAnnotation2){_inherits(FreeTextAnnotation,_MarkupAnnotation2);var _super45=_createSuper(FreeTextAnnotation);function FreeTextAnnotation(parameters){var _this44;return _classCallCheck(this,FreeTextAnnotation),(_this44=_super45.call(this,parameters)).data.annotationType=_util.AnnotationType.FREETEXT,_this44}return _createClass(FreeTextAnnotation)}(MarkupAnnotation),LineAnnotation=function(_MarkupAnnotation3){_inherits(LineAnnotation,_MarkupAnnotation3);var _super46=_createSuper(LineAnnotation);function LineAnnotation(parameters){var _this45;return _classCallCheck(this,LineAnnotation),(_this45=_super46.call(this,parameters)).data.annotationType=_util.AnnotationType.LINE,_this45.data.lineCoordinates=_util.Util.normalizeRect(parameters.dict.getArray("L")),_this45}return _createClass(LineAnnotation)}(MarkupAnnotation),SquareAnnotation=function(_MarkupAnnotation4){_inherits(SquareAnnotation,_MarkupAnnotation4);var _super47=_createSuper(SquareAnnotation);function SquareAnnotation(parameters){var _this46;return _classCallCheck(this,SquareAnnotation),(_this46=_super47.call(this,parameters)).data.annotationType=_util.AnnotationType.SQUARE,_this46}return _createClass(SquareAnnotation)}(MarkupAnnotation),CircleAnnotation=function(_MarkupAnnotation5){_inherits(CircleAnnotation,_MarkupAnnotation5);var _super48=_createSuper(CircleAnnotation);function CircleAnnotation(parameters){var _this47;return _classCallCheck(this,CircleAnnotation),(_this47=_super48.call(this,parameters)).data.annotationType=_util.AnnotationType.CIRCLE,_this47}return _createClass(CircleAnnotation)}(MarkupAnnotation),PolylineAnnotation=function(_MarkupAnnotation6){_inherits(PolylineAnnotation,_MarkupAnnotation6);var _super49=_createSuper(PolylineAnnotation);function PolylineAnnotation(parameters){var _this48;_classCallCheck(this,PolylineAnnotation),(_this48=_super49.call(this,parameters)).data.annotationType=_util.AnnotationType.POLYLINE,_this48.data.vertices=[];var rawVertices=parameters.dict.getArray("Vertices");if(!Array.isArray(rawVertices))return _possibleConstructorReturn(_this48);for(var i=0,ii=rawVertices.length;i<ii;i+=2)_this48.data.vertices.push({x:rawVertices[i],y:rawVertices[i+1]});return _this48}return _createClass(PolylineAnnotation)}(MarkupAnnotation),PolygonAnnotation=function(_PolylineAnnotation){_inherits(PolygonAnnotation,_PolylineAnnotation);var _super50=_createSuper(PolygonAnnotation);function PolygonAnnotation(parameters){var _this49;return _classCallCheck(this,PolygonAnnotation),(_this49=_super50.call(this,parameters)).data.annotationType=_util.AnnotationType.POLYGON,_this49}return _createClass(PolygonAnnotation)}(PolylineAnnotation),CaretAnnotation=function(_MarkupAnnotation7){_inherits(CaretAnnotation,_MarkupAnnotation7);var _super51=_createSuper(CaretAnnotation);function CaretAnnotation(parameters){var _this50;return _classCallCheck(this,CaretAnnotation),(_this50=_super51.call(this,parameters)).data.annotationType=_util.AnnotationType.CARET,_this50}return _createClass(CaretAnnotation)}(MarkupAnnotation),InkAnnotation=function(_MarkupAnnotation8){_inherits(InkAnnotation,_MarkupAnnotation8);var _super52=_createSuper(InkAnnotation);function InkAnnotation(parameters){var _this51;_classCallCheck(this,InkAnnotation),(_this51=_super52.call(this,parameters)).data.annotationType=_util.AnnotationType.INK,_this51.data.inkLists=[];var rawInkLists=parameters.dict.getArray("InkList");if(!Array.isArray(rawInkLists))return _possibleConstructorReturn(_this51);for(var xref=parameters.xref,i=0,ii=rawInkLists.length;i<ii;++i){_this51.data.inkLists.push([]);for(var j=0,jj=rawInkLists[i].length;j<jj;j+=2)_this51.data.inkLists[i].push({x:xref.fetchIfRef(rawInkLists[i][j]),y:xref.fetchIfRef(rawInkLists[i][j+1])})}return _this51}return _createClass(InkAnnotation)}(MarkupAnnotation),HighlightAnnotation=function(_MarkupAnnotation9){_inherits(HighlightAnnotation,_MarkupAnnotation9);var _super53=_createSuper(HighlightAnnotation);function HighlightAnnotation(parameters){var _this52;if(_classCallCheck(this,HighlightAnnotation),(_this52=_super53.call(this,parameters)).data.annotationType=_util.AnnotationType.HIGHLIGHT,_this52.data.quadPoints=getQuadPoints(parameters.dict,null)){if(!_this52.appearance){var fillColor=_this52.color?Array.from(_this52.color).map((function(c){return c/255})):[1,1,0];_this52._setDefaultAppearance({xref:parameters.xref,fillColor:fillColor,blendMode:"Multiply",pointsCallback:function(buffer,points){return buffer.push("".concat(points[0].x," ").concat(points[0].y," m")),buffer.push("".concat(points[1].x," ").concat(points[1].y," l")),buffer.push("".concat(points[3].x," ").concat(points[3].y," l")),buffer.push("".concat(points[2].x," ").concat(points[2].y," l")),buffer.push("f"),[points[0].x,points[1].x,points[3].y,points[1].y]}})}}else _this52.data.hasPopup=!1;return _this52}return _createClass(HighlightAnnotation)}(MarkupAnnotation),UnderlineAnnotation=function(_MarkupAnnotation10){_inherits(UnderlineAnnotation,_MarkupAnnotation10);var _super54=_createSuper(UnderlineAnnotation);function UnderlineAnnotation(parameters){var _this53;if(_classCallCheck(this,UnderlineAnnotation),(_this53=_super54.call(this,parameters)).data.annotationType=_util.AnnotationType.UNDERLINE,_this53.data.quadPoints=getQuadPoints(parameters.dict,null)){if(!_this53.appearance){var strokeColor=_this53.color?Array.from(_this53.color).map((function(c){return c/255})):[0,0,0];_this53._setDefaultAppearance({xref:parameters.xref,extra:"[] 0 d 1 w",strokeColor:strokeColor,pointsCallback:function(buffer,points){return buffer.push("".concat(points[2].x," ").concat(points[2].y," m")),buffer.push("".concat(points[3].x," ").concat(points[3].y," l")),buffer.push("S"),[points[0].x,points[1].x,points[3].y,points[1].y]}})}}else _this53.data.hasPopup=!1;return _this53}return _createClass(UnderlineAnnotation)}(MarkupAnnotation),SquigglyAnnotation=function(_MarkupAnnotation11){_inherits(SquigglyAnnotation,_MarkupAnnotation11);var _super55=_createSuper(SquigglyAnnotation);function SquigglyAnnotation(parameters){var _this54;if(_classCallCheck(this,SquigglyAnnotation),(_this54=_super55.call(this,parameters)).data.annotationType=_util.AnnotationType.SQUIGGLY,_this54.data.quadPoints=getQuadPoints(parameters.dict,null)){if(!_this54.appearance){var strokeColor=_this54.color?Array.from(_this54.color).map((function(c){return c/255})):[0,0,0];_this54._setDefaultAppearance({xref:parameters.xref,extra:"[] 0 d 1 w",strokeColor:strokeColor,pointsCallback:function(buffer,points){var dy=(points[0].y-points[2].y)/6,shift=dy,x=points[2].x,y=points[2].y,xEnd=points[3].x;buffer.push("".concat(x," ").concat(y+shift," m"));do{x+=2,shift=0===shift?dy:0,buffer.push("".concat(x," ").concat(y+shift," l"))}while(x<xEnd);return buffer.push("S"),[points[2].x,xEnd,y-2*dy,y+2*dy]}})}}else _this54.data.hasPopup=!1;return _this54}return _createClass(SquigglyAnnotation)}(MarkupAnnotation),StrikeOutAnnotation=function(_MarkupAnnotation12){_inherits(StrikeOutAnnotation,_MarkupAnnotation12);var _super56=_createSuper(StrikeOutAnnotation);function StrikeOutAnnotation(parameters){var _this55;if(_classCallCheck(this,StrikeOutAnnotation),(_this55=_super56.call(this,parameters)).data.annotationType=_util.AnnotationType.STRIKEOUT,_this55.data.quadPoints=getQuadPoints(parameters.dict,null)){if(!_this55.appearance){var strokeColor=_this55.color?Array.from(_this55.color).map((function(c){return c/255})):[0,0,0];_this55._setDefaultAppearance({xref:parameters.xref,extra:"[] 0 d 1 w",strokeColor:strokeColor,pointsCallback:function(buffer,points){return buffer.push("".concat((points[0].x+points[2].x)/2)+" ".concat((points[0].y+points[2].y)/2," m")),buffer.push("".concat((points[1].x+points[3].x)/2)+" ".concat((points[1].y+points[3].y)/2," l")),buffer.push("S"),[points[0].x,points[1].x,points[3].y,points[1].y]}})}}else _this55.data.hasPopup=!1;return _this55}return _createClass(StrikeOutAnnotation)}(MarkupAnnotation),StampAnnotation=function(_MarkupAnnotation13){_inherits(StampAnnotation,_MarkupAnnotation13);var _super57=_createSuper(StampAnnotation);function StampAnnotation(parameters){var _this56;return _classCallCheck(this,StampAnnotation),(_this56=_super57.call(this,parameters)).data.annotationType=_util.AnnotationType.STAMP,_this56}return _createClass(StampAnnotation)}(MarkupAnnotation),FileAttachmentAnnotation=function(_MarkupAnnotation14){_inherits(FileAttachmentAnnotation,_MarkupAnnotation14);var _super58=_createSuper(FileAttachmentAnnotation);function FileAttachmentAnnotation(parameters){var _this57;_classCallCheck(this,FileAttachmentAnnotation),_this57=_super58.call(this,parameters);var file=new _obj.FileSpec(parameters.dict.get("FS"),parameters.xref);return _this57.data.annotationType=_util.AnnotationType.FILEATTACHMENT,_this57.data.file=file.serializable,_this57}return _createClass(FileAttachmentAnnotation)}(MarkupAnnotation)},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDefaultAppearance=function(_ref34){var colorCmd,fontSize=_ref34.fontSize,fontName=_ref34.fontName,fontColor=_ref34.fontColor;return colorCmd=fontColor.every((function(c){return 0===c}))?"0 g":Array.from(fontColor).map((function(c){return(c/255).toFixed(2)})).join(" ")+" rg","/".concat((0,_core_utils.escapePDFName)(fontName.name)," ").concat(fontSize," Tf ").concat(colorCmd)},exports.parseDefaultAppearance=function(str){return new DefaultAppearanceEvaluator(str).parse()};var _primitives=__w_pdfjs_require__(5),_util=__w_pdfjs_require__(2),_colorspace=__w_pdfjs_require__(23),_core_utils=__w_pdfjs_require__(8),_evaluator=__w_pdfjs_require__(27),_stream=__w_pdfjs_require__(12),DefaultAppearanceEvaluator=function(_evaluator$EvaluatorP){_inherits(DefaultAppearanceEvaluator,_evaluator$EvaluatorP);var _super59=_createSuper(DefaultAppearanceEvaluator);function DefaultAppearanceEvaluator(str){return _classCallCheck(this,DefaultAppearanceEvaluator),_super59.call(this,new _stream.StringStream(str))}return _createClass(DefaultAppearanceEvaluator,[{key:"parse",value:function(){var operation={fn:0,args:[]},result={fontSize:0,fontName:_primitives.Name.get(""),fontColor:new Uint8ClampedArray([0,0,0])};try{for(;operation.args.length=0,this.read(operation);)if(0===this.savedStatesDepth){var fn=operation.fn,args=operation.args;switch(0|fn){case _util.OPS.setFont:var _args21=_slicedToArray(args,2),fontName=_args21[0],fontSize=_args21[1];(0,_primitives.isName)(fontName)&&(result.fontName=fontName),"number"==typeof fontSize&&fontSize>0&&(result.fontSize=fontSize);break;case _util.OPS.setFillRGBColor:_colorspace.ColorSpace.singletons.rgb.getRgbItem(args,0,result.fontColor,0);break;case _util.OPS.setFillGray:_colorspace.ColorSpace.singletons.gray.getRgbItem(args,0,result.fontColor,0);break;case _util.OPS.setFillColorSpace:_colorspace.ColorSpace.singletons.cmyk.getRgbItem(args,0,result.fontColor,0)}}}catch(reason){(0,_util.warn)('parseDefaultAppearance - ignoring errors: "'.concat(reason,'".'))}return result}}]),DefaultAppearanceEvaluator}(_evaluator.EvaluatorPreprocessor)},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.PartialEvaluator=exports.EvaluatorPreprocessor=void 0;var _util=__w_pdfjs_require__(2),_cmap=__w_pdfjs_require__(28),_primitives=__w_pdfjs_require__(5),_fonts=__w_pdfjs_require__(29),_encodings=__w_pdfjs_require__(32),_core_utils=__w_pdfjs_require__(8),_unicode=__w_pdfjs_require__(35),_standard_fonts=__w_pdfjs_require__(34),_pattern=__w_pdfjs_require__(38),_function=__w_pdfjs_require__(39),_parser=__w_pdfjs_require__(11),_image_utils=__w_pdfjs_require__(24),_bidi=__w_pdfjs_require__(41),_colorspace=__w_pdfjs_require__(23),_stream=__w_pdfjs_require__(12),_glyphlist=__w_pdfjs_require__(33),_metrics=__w_pdfjs_require__(42),_murmurhash=__w_pdfjs_require__(43),_operator_list=__w_pdfjs_require__(44),_image=__w_pdfjs_require__(45),DefaultPartialEvaluatorOptions=Object.freeze({maxImageSize:-1,disableFontFace:!1,ignoreErrors:!1,isEvalSupported:!0,fontExtraProperties:!1}),PatternType_TILING=1,PatternType_SHADING=2,deferred=Promise.resolve();function normalizeBlendMode(value){var parsingArray=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Array.isArray(value)){for(var i=0,ii=value.length;i<ii;i++){var maybeBM=normalizeBlendMode(value[i],!0);if(maybeBM)return maybeBM}return(0,_util.warn)("Unsupported blend mode Array: ".concat(value)),"source-over"}if(!(0,_primitives.isName)(value))return parsingArray?null:"source-over";switch(value.name){case"Normal":case"Compatible":return"source-over";case"Multiply":return"multiply";case"Screen":return"screen";case"Overlay":return"overlay";case"Darken":return"darken";case"Lighten":return"lighten";case"ColorDodge":return"color-dodge";case"ColorBurn":return"color-burn";case"HardLight":return"hard-light";case"SoftLight":return"soft-light";case"Difference":return"difference";case"Exclusion":return"exclusion";case"Hue":return"hue";case"Saturation":return"saturation";case"Color":return"color";case"Luminosity":return"luminosity"}return parsingArray?null:((0,_util.warn)("Unsupported blend mode: ".concat(value.name)),"source-over")}var TimeSlotManager=function(){function TimeSlotManager(){_classCallCheck(this,TimeSlotManager),this.reset()}return _createClass(TimeSlotManager,[{key:"check",value:function(){return!(++this.checked<TimeSlotManager.CHECK_TIME_EVERY)&&(this.checked=0,this.endTime<=Date.now())}},{key:"reset",value:function(){this.endTime=Date.now()+TimeSlotManager.TIME_SLOT_DURATION_MS,this.checked=0}}],[{key:"TIME_SLOT_DURATION_MS",get:function(){return(0,_util.shadow)(this,"TIME_SLOT_DURATION_MS",20)}},{key:"CHECK_TIME_EVERY",get:function(){return(0,_util.shadow)(this,"CHECK_TIME_EVERY",100)}}]),TimeSlotManager}(),PartialEvaluator=function(){function PartialEvaluator(_ref35){var xref=_ref35.xref,handler=_ref35.handler,pageIndex=_ref35.pageIndex,idFactory=_ref35.idFactory,fontCache=_ref35.fontCache,builtInCMapCache=_ref35.builtInCMapCache,globalImageCache=_ref35.globalImageCache,_ref35$options=_ref35.options,options=void 0===_ref35$options?null:_ref35$options;_classCallCheck(this,PartialEvaluator),this.xref=xref,this.handler=handler,this.pageIndex=pageIndex,this.idFactory=idFactory,this.fontCache=fontCache,this.builtInCMapCache=builtInCMapCache,this.globalImageCache=globalImageCache,this.options=options||DefaultPartialEvaluatorOptions,this.parsingType3Font=!1,this._fetchBuiltInCMapBound=this.fetchBuiltInCMap.bind(this)}var _translateFont,_parseMarkedContentProps,_setGState,_buildPaintImageXObject,_buildFormXObject,_fetchBuiltInCMap;return _createClass(PartialEvaluator,[{key:"_pdfFunctionFactory",get:function(){var pdfFunctionFactory=new _function.PDFFunctionFactory({xref:this.xref,isEvalSupported:this.options.isEvalSupported});return(0,_util.shadow)(this,"_pdfFunctionFactory",pdfFunctionFactory)}},{key:"clone",value:function(){var newOptions=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultPartialEvaluatorOptions,newEvaluator=Object.create(this);return newEvaluator.options=newOptions,newEvaluator}},{key:"hasBlendModes",value:function(resources,nonBlendModesSet){if(!(resources instanceof _primitives.Dict))return!1;if(resources.objId&&nonBlendModesSet.has(resources.objId))return!1;var processed=new _primitives.RefSet(nonBlendModesSet);resources.objId&&processed.put(resources.objId);for(var nodes=[resources],xref=this.xref;nodes.length;){var node=nodes.shift(),graphicStates=node.get("ExtGState");if(graphicStates instanceof _primitives.Dict){var _step40,_iterator40=_createForOfIteratorHelper(graphicStates.getRawValues());try{for(_iterator40.s();!(_step40=_iterator40.n()).done;){var graphicState=_step40.value;if(graphicState instanceof _primitives.Ref){if(processed.has(graphicState))continue;try{graphicState=xref.fetch(graphicState)}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;processed.put(graphicState),(0,_util.info)('hasBlendModes - ignoring ExtGState: "'.concat(ex,'".'));continue}}if(graphicState instanceof _primitives.Dict){graphicState.objId&&processed.put(graphicState.objId);var bm=graphicState.get("BM");if(bm instanceof _primitives.Name){if("Normal"!==bm.name)return!0}else if(void 0!==bm&&Array.isArray(bm)){var _step41,_iterator41=_createForOfIteratorHelper(bm);try{for(_iterator41.s();!(_step41=_iterator41.n()).done;){var element=_step41.value;if(element instanceof _primitives.Name&&"Normal"!==element.name)return!0}}catch(err){_iterator41.e(err)}finally{_iterator41.f()}}}}}catch(err){_iterator40.e(err)}finally{_iterator40.f()}}var xObjects=node.get("XObject");if(xObjects instanceof _primitives.Dict){var _step42,_iterator42=_createForOfIteratorHelper(xObjects.getRawValues());try{for(_iterator42.s();!(_step42=_iterator42.n()).done;){var xObject=_step42.value;if(xObject instanceof _primitives.Ref){if(processed.has(xObject))continue;try{xObject=xref.fetch(xObject)}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;processed.put(xObject),(0,_util.info)('hasBlendModes - ignoring XObject: "'.concat(ex,'".'));continue}}if((0,_primitives.isStream)(xObject)){xObject.dict.objId&&processed.put(xObject.dict.objId);var xResources=xObject.dict.get("Resources");xResources instanceof _primitives.Dict&&(xResources.objId&&processed.has(xResources.objId)||(nodes.push(xResources),xResources.objId&&processed.put(xResources.objId)))}}}catch(err){_iterator42.e(err)}finally{_iterator42.f()}}}return processed.forEach((function(ref){nonBlendModesSet.put(ref)})),!1}},{key:"fetchBuiltInCMap",value:(_fetchBuiltInCMap=_asyncToGenerator(regeneratorRuntime.mark((function _callee20(name){var cachedData,readableStream,reader,data;return regeneratorRuntime.wrap((function(_context20){for(;;)switch(_context20.prev=_context20.next){case 0:if(!(cachedData=this.builtInCMapCache.get(name))){_context20.next=3;break}return _context20.abrupt("return",cachedData);case 3:return readableStream=this.handler.sendWithStream("FetchBuiltInCMap",{name:name}),reader=readableStream.getReader(),_context20.next=7,new Promise((function(resolve,reject){!function pump(){reader.read().then((function(_ref36){var value=_ref36.value;_ref36.done||(resolve(value),pump())}),reject)}()}));case 7:return(data=_context20.sent).compressionType!==_util.CMapCompressionType.NONE&&this.builtInCMapCache.set(name,data),_context20.abrupt("return",data);case 10:case"end":return _context20.stop()}}),_callee20,this)}))),function(_x33){return _fetchBuiltInCMap.apply(this,arguments)})},{key:"buildFormXObject",value:(_buildFormXObject=_asyncToGenerator(regeneratorRuntime.mark((function _callee21(resources,xobj,smask,operatorList,task,initialState,localColorSpaceCache){var dict,matrix,bbox,optionalContent,group,groupOptions,groupSubtype,colorSpace,cs,cachedColorSpace;return regeneratorRuntime.wrap((function(_context21){for(;;)switch(_context21.prev=_context21.next){case 0:if(dict=xobj.dict,matrix=dict.getArray("Matrix"),bbox=dict.getArray("BBox"),bbox=Array.isArray(bbox)&&4===bbox.length?_util.Util.normalizeRect(bbox):null,optionalContent=null,!dict.has("OC")){_context21.next=10;break}return _context21.next=8,this.parseMarkedContentProps(dict.get("OC"),resources);case 8:optionalContent=_context21.sent,operatorList.addOp(_util.OPS.beginMarkedContentProps,["OC",optionalContent]);case 10:if(!(group=dict.get("Group"))){_context21.next=30;break}if(groupOptions={matrix:matrix,bbox:bbox,smask:smask,isolated:!1,knockout:!1},groupSubtype=group.get("S"),colorSpace=null,!(0,_primitives.isName)(groupSubtype,"Transparency")){_context21.next=28;break}if(groupOptions.isolated=group.get("I")||!1,groupOptions.knockout=group.get("K")||!1,!group.has("CS")){_context21.next=28;break}if(cs=group.getRaw("CS"),!(cachedColorSpace=_colorspace.ColorSpace.getCached(cs,this.xref,localColorSpaceCache))){_context21.next=25;break}colorSpace=cachedColorSpace,_context21.next=28;break;case 25:return _context21.next=27,this.parseColorSpace({cs:cs,resources:resources,localColorSpaceCache:localColorSpaceCache});case 27:colorSpace=_context21.sent;case 28:smask&&smask.backdrop&&(colorSpace=colorSpace||_colorspace.ColorSpace.singletons.rgb,smask.backdrop=colorSpace.getRgb(smask.backdrop,0)),operatorList.addOp(_util.OPS.beginGroup,[groupOptions]);case 30:return operatorList.addOp(_util.OPS.paintFormXObjectBegin,[matrix,bbox]),_context21.abrupt("return",this.getOperatorList({stream:xobj,task:task,resources:dict.get("Resources")||resources,operatorList:operatorList,initialState:initialState}).then((function(){operatorList.addOp(_util.OPS.paintFormXObjectEnd,[]),group&&operatorList.addOp(_util.OPS.endGroup,[groupOptions]),optionalContent&&operatorList.addOp(_util.OPS.endMarkedContent,[])})));case 32:case"end":return _context21.stop()}}),_callee21,this)}))),function(_x34,_x35,_x36,_x37,_x38,_x39,_x40){return _buildFormXObject.apply(this,arguments)})},{key:"_sendImgData",value:function(objId,imgData){var cacheGlobally=arguments.length>2&&void 0!==arguments[2]&&arguments[2],transfers=imgData?[imgData.data.buffer]:null;return this.parsingType3Font||cacheGlobally?this.handler.send("commonobj",[objId,"Image",imgData],transfers):this.handler.send("obj",[objId,this.pageIndex,"Image",imgData],transfers)}},{key:"buildPaintImageXObject",value:(_buildPaintImageXObject=_asyncToGenerator(regeneratorRuntime.mark((function _callee22(_ref37){var resources,image,_ref37$isInline,isInline,operatorList,cacheKey,localImageCache,localColorSpaceCache,dict,imageRef,w,h,maxImageSize,imgData,args,width,height,bitStrideLength,imgArray,decode,softMask,mask,imageObj,objId,cacheGlobally,_this58=this;return regeneratorRuntime.wrap((function(_context22){for(;;)switch(_context22.prev=_context22.next){case 0:if(resources=_ref37.resources,image=_ref37.image,_ref37$isInline=_ref37.isInline,isInline=void 0!==_ref37$isInline&&_ref37$isInline,operatorList=_ref37.operatorList,cacheKey=_ref37.cacheKey,localImageCache=_ref37.localImageCache,localColorSpaceCache=_ref37.localColorSpaceCache,dict=image.dict,imageRef=dict.objId,w=dict.get("Width","W"),h=dict.get("Height","H"),w&&(0,_util.isNum)(w)&&h&&(0,_util.isNum)(h)){_context22.next=8;break}return(0,_util.warn)("Image dimensions are missing, or not numbers."),_context22.abrupt("return",void 0);case 8:if(!(-1!==(maxImageSize=this.options.maxImageSize)&&w*h>maxImageSize)){_context22.next=12;break}return(0,_util.warn)("Image exceeded maximum allowed size and was removed."),_context22.abrupt("return",void 0);case 12:if(!dict.get("ImageMask","IM")){_context22.next=25;break}return width=dict.get("Width","W"),height=dict.get("Height","H"),bitStrideLength=width+7>>3,imgArray=image.getBytes(bitStrideLength*height,!0),decode=dict.getArray("Decode","D"),(imgData=_image.PDFImage.createMask({imgArray:imgArray,width:width,height:height,imageIsFromDecodeStream:image instanceof _stream.DecodeStream,inverseDecode:!!decode&&decode[0]>0})).cached=!!cacheKey,args=[imgData],operatorList.addOp(_util.OPS.paintImageMaskXObject,args),cacheKey&&localImageCache.set(cacheKey,imageRef,{fn:_util.OPS.paintImageMaskXObject,args:args}),_context22.abrupt("return",void 0);case 25:if(softMask=dict.get("SMask","SM")||!1,mask=dict.get("Mask")||!1,!isInline||softMask||mask||!(w+h<200)){_context22.next=33;break}return imageObj=new _image.PDFImage({xref:this.xref,res:resources,image:image,isInline:isInline,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache}),imgData=imageObj.createImageData(!0),operatorList.addOp(_util.OPS.paintInlineImageXObject,[imgData]),_context22.abrupt("return",void 0);case 33:return objId="img_".concat(this.idFactory.createObjId()),cacheGlobally=!1,this.parsingType3Font?objId="".concat(this.idFactory.getDocId(),"_type3_").concat(objId):imageRef&&(cacheGlobally=this.globalImageCache.shouldCache(imageRef,this.pageIndex))&&(objId="".concat(this.idFactory.getDocId(),"_").concat(objId)),operatorList.addDependency(objId),args=[objId,w,h],_image.PDFImage.buildImage({xref:this.xref,res:resources,image:image,isInline:isInline,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache}).then((function(imageObj){return imgData=imageObj.createImageData(!1),_this58._sendImgData(objId,imgData,cacheGlobally)})).catch((function(reason){return(0,_util.warn)('Unable to decode image "'.concat(objId,'": "').concat(reason,'".')),_this58._sendImgData(objId,null,cacheGlobally)})),operatorList.addOp(_util.OPS.paintImageXObject,args),cacheKey&&(localImageCache.set(cacheKey,imageRef,{fn:_util.OPS.paintImageXObject,args:args}),imageRef&&((0,_util.assert)(!isInline,"Cannot cache an inline image globally."),this.globalImageCache.addPageIndex(imageRef,this.pageIndex),cacheGlobally&&this.globalImageCache.setData(imageRef,{objId:objId,fn:_util.OPS.paintImageXObject,args:args}))),_context22.abrupt("return",void 0);case 41:case"end":return _context22.stop()}}),_callee22,this)}))),function(_x41){return _buildPaintImageXObject.apply(this,arguments)})},{key:"handleSMask",value:function(smask,resources,operatorList,task,stateManager,localColorSpaceCache){var smaskContent=smask.get("G"),smaskOptions={subtype:smask.get("S").name,backdrop:smask.get("BC")},transferObj=smask.get("TR");if((0,_function.isPDFFunction)(transferObj)){for(var transferFn=this._pdfFunctionFactory.create(transferObj),transferMap=new Uint8Array(256),tmp=new Float32Array(1),i=0;i<256;i++)tmp[0]=i/255,transferFn(tmp,0,tmp,0),transferMap[i]=255*tmp[0]|0;smaskOptions.transferMap=transferMap}return this.buildFormXObject(resources,smaskContent,smaskOptions,operatorList,task,stateManager.state.clone(),localColorSpaceCache)}},{key:"handleTransferFunction",value:function(tr){var transferArray;if(Array.isArray(tr))transferArray=tr;else{if(!(0,_function.isPDFFunction)(tr))return null;transferArray=[tr]}var _step43,transferMaps=[],numFns=0,numEffectfulFns=0,_iterator43=_createForOfIteratorHelper(transferArray);try{for(_iterator43.s();!(_step43=_iterator43.n()).done;){var entry=_step43.value,transferObj=this.xref.fetchIfRef(entry);if(numFns++,(0,_primitives.isName)(transferObj,"Identity"))transferMaps.push(null);else{if(!(0,_function.isPDFFunction)(transferObj))return null;for(var transferFn=this._pdfFunctionFactory.create(transferObj),transferMap=new Uint8Array(256),tmp=new Float32Array(1),j=0;j<256;j++)tmp[0]=j/255,transferFn(tmp,0,tmp,0),transferMap[j]=255*tmp[0]|0;transferMaps.push(transferMap),numEffectfulFns++}}}catch(err){_iterator43.e(err)}finally{_iterator43.f()}return 1!==numFns&&4!==numFns||0===numEffectfulFns?null:transferMaps}},{key:"handleTilingType",value:function(fn,color,resources,pattern,patternDict,operatorList,task,cacheKey,localTilingPatternCache){var _this59=this,tilingOpList=new _operator_list.OperatorList,patternResources=_primitives.Dict.merge({xref:this.xref,dictArray:[patternDict.get("Resources"),resources]});return this.getOperatorList({stream:pattern,task:task,resources:patternResources,operatorList:tilingOpList}).then((function(){var operatorListIR=tilingOpList.getIR(),tilingPatternIR=(0,_pattern.getTilingPatternIR)(operatorListIR,patternDict,color);operatorList.addDependencies(tilingOpList.dependencies),operatorList.addOp(fn,tilingPatternIR),cacheKey&&localTilingPatternCache.set(cacheKey,patternDict.objId,{operatorListIR:operatorListIR,dict:patternDict})})).catch((function(reason){if(!(reason instanceof _util.AbortException)){if(_this59.options.ignoreErrors)return _this59.handler.send("UnsupportedFeature",{featureId:_util.UNSUPPORTED_FEATURES.errorTilingPattern}),void(0,_util.warn)('handleTilingType - ignoring pattern: "'.concat(reason,'".'));throw reason}}))}},{key:"handleSetFont",value:function(resources,fontArgs,fontRef,operatorList,task,state){var fontName,_this60=this,fallbackFontDict=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return fontArgs&&(fontName=(fontArgs=fontArgs.slice())[0].name),this.loadFont(fontName,fontRef,resources,fallbackFontDict).then((function(translated){return translated.font.isType3Font?translated.loadType3Data(_this60,resources,task).then((function(){return operatorList.addDependencies(translated.type3Dependencies),translated})).catch((function(reason){return _this60.handler.send("UnsupportedFeature",{featureId:_util.UNSUPPORTED_FEATURES.errorFontLoadType3}),new TranslatedFont({loadedName:"g_font_error",font:new _fonts.ErrorFont("Type3 font load error: ".concat(reason)),dict:translated.font,extraProperties:_this60.options.fontExtraProperties})})):translated})).then((function(translated){return state.font=translated.font,translated.send(_this60.handler),translated.loadedName}))}},{key:"handleText",value:function(chars,state){var font=state.font,glyphs=font.charsToGlyphs(chars);return font.data&&(state.textRenderingMode&_util.TextRenderingMode.ADD_TO_PATH_FLAG||"Pattern"===state.fillColorSpace.name||font.disableFontFace||this.options.disableFontFace)&&PartialEvaluator.buildFontPaths(font,glyphs,this.handler),glyphs}},{key:"ensureStateFont",value:function(state){if(!state.font){var reason=new _util.FormatError("Missing setFont (Tf) operator before text rendering operator.");if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:_util.UNSUPPORTED_FEATURES.errorFontState}),void(0,_util.warn)('ensureStateFont: "'.concat(reason,'".'));throw reason}}},{key:"setGState",value:(_setGState=_asyncToGenerator(regeneratorRuntime.mark((function _callee23(_ref38){var resources,gState,operatorList,cacheKey,task,stateManager,localGStateCache,localColorSpaceCache,gStateRef,isSimpleGState,gStateObj,gStateKeys,promise,_loop4,i,ii,_this61=this;return regeneratorRuntime.wrap((function(_context23){for(;;)switch(_context23.prev=_context23.next){case 0:for(resources=_ref38.resources,gState=_ref38.gState,operatorList=_ref38.operatorList,cacheKey=_ref38.cacheKey,task=_ref38.task,stateManager=_ref38.stateManager,localGStateCache=_ref38.localGStateCache,localColorSpaceCache=_ref38.localColorSpaceCache,gStateRef=gState.objId,isSimpleGState=!0,gStateObj=[],gStateKeys=gState.getKeys(),promise=Promise.resolve(),_loop4=function(){var key=gStateKeys[i],value=gState.get(key);switch(key){case"Type":break;case"LW":case"LC":case"LJ":case"ML":case"D":case"RI":case"FL":case"CA":case"ca":gStateObj.push([key,value]);break;case"Font":isSimpleGState=!1,promise=promise.then((function(){return _this61.handleSetFont(resources,null,value[0],operatorList,task,stateManager.state).then((function(loadedName){operatorList.addDependency(loadedName),gStateObj.push([key,[loadedName,value[1]]])}))}));break;case"BM":gStateObj.push([key,normalizeBlendMode(value)]);break;case"SMask":if((0,_primitives.isName)(value,"None")){gStateObj.push([key,!1]);break}(0,_primitives.isDict)(value)?(isSimpleGState=!1,promise=promise.then((function(){return _this61.handleSMask(value,resources,operatorList,task,stateManager,localColorSpaceCache)})),gStateObj.push([key,!0])):(0,_util.warn)("Unsupported SMask type");break;case"TR":var transferMaps=_this61.handleTransferFunction(value);gStateObj.push([key,transferMaps]);break;case"OP":case"op":case"OPM":case"BG":case"BG2":case"UCR":case"UCR2":case"TR2":case"HT":case"SM":case"SA":case"AIS":case"TK":(0,_util.info)("graphic state operator "+key);break;default:(0,_util.info)("Unknown graphic state operator "+key)}},i=0,ii=gStateKeys.length;i<ii;i++)_loop4();return _context23.abrupt("return",promise.then((function(){gStateObj.length>0&&operatorList.addOp(_util.OPS.setGState,[gStateObj]),isSimpleGState&&localGStateCache.set(cacheKey,gStateRef,gStateObj)})));case 9:case"end":return _context23.stop()}}),_callee23)}))),function(_x42){return _setGState.apply(this,arguments)})},{key:"loadFont",value:function(fontName,font,resources){var _ref39,fontRef,_this62=this,fallbackFontDict=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,errorFont=(_ref39=_asyncToGenerator(regeneratorRuntime.mark((function _callee24(){return regeneratorRuntime.wrap((function(_context24){for(;;)switch(_context24.prev=_context24.next){case 0:return _context24.abrupt("return",new TranslatedFont({loadedName:"g_font_error",font:new _fonts.ErrorFont('Font "'.concat(fontName,'" is not available.')),dict:font,extraProperties:_this62.options.fontExtraProperties}));case 1:case"end":return _context24.stop()}}),_callee24)}))),function(){return _ref39.apply(this,arguments)}),xref=this.xref;if(font){if(!(0,_primitives.isRef)(font))throw new _util.FormatError('The "font" object should be a reference.');fontRef=font}else{var fontRes=resources.get("Font");fontRes&&(fontRef=fontRes.getRaw(fontName))}if(!fontRef){var partialMsg='Font "'.concat(fontName||font&&font.toString(),'" is not available');if(!this.options.ignoreErrors&&!this.parsingType3Font)return(0,_util.warn)("".concat(partialMsg,".")),errorFont();this.handler.send("UnsupportedFeature",{featureId:_util.UNSUPPORTED_FEATURES.errorFontMissing}),(0,_util.warn)("".concat(partialMsg," -- attempting to fallback to a default font.")),fontRef=fallbackFontDict||PartialEvaluator.fallbackFontDict}if(this.fontCache.has(fontRef))return this.fontCache.get(fontRef);if(font=xref.fetchIfRef(fontRef),!(0,_primitives.isDict)(font))return errorFont();if(font.cacheKey&&this.fontCache.has(font.cacheKey))return this.fontCache.get(font.cacheKey);var preEvaluatedFont,fontCapability=(0,_util.createPromiseCapability)();try{preEvaluatedFont=this.preEvaluateFont(font)}catch(reason){return(0,_util.warn)('loadFont - ignoring preEvaluateFont errors: "'.concat(reason,'".')),errorFont()}var fontID,_preEvaluatedFont=preEvaluatedFont,descriptor=_preEvaluatedFont.descriptor,hash=_preEvaluatedFont.hash,fontRefIsRef=(0,_primitives.isRef)(fontRef);if(fontRefIsRef&&(fontID="f".concat(fontRef.toString())),hash&&(0,_primitives.isDict)(descriptor)){descriptor.fontAliases||(descriptor.fontAliases=Object.create(null));var fontAliases=descriptor.fontAliases;if(fontAliases[hash]){var aliasFontRef=fontAliases[hash].aliasRef;if(fontRefIsRef&&aliasFontRef&&this.fontCache.has(aliasFontRef))return this.fontCache.putAlias(fontRef,aliasFontRef),this.fontCache.get(fontRef)}else fontAliases[hash]={fontID:this.idFactory.createFontId()};fontRefIsRef&&(fontAliases[hash].aliasRef=fontRef),fontID=fontAliases[hash].fontID}return fontRefIsRef?this.fontCache.put(fontRef,fontCapability.promise):(fontID||(fontID=this.idFactory.createFontId()),font.cacheKey="cacheKey_".concat(fontID),this.fontCache.put(font.cacheKey,fontCapability.promise)),(0,_util.assert)(fontID&&fontID.startsWith("f"),'The "fontID" must be (correctly) defined.'),font.loadedName="".concat(this.idFactory.getDocId(),"_").concat(fontID),this.translateFont(preEvaluatedFont).then((function(translatedFont){void 0!==translatedFont.fontType&&(xref.stats.fontTypes[translatedFont.fontType]=!0),fontCapability.resolve(new TranslatedFont({loadedName:font.loadedName,font:translatedFont,dict:font,extraProperties:_this62.options.fontExtraProperties}))})).catch((function(reason){_this62.handler.send("UnsupportedFeature",{featureId:_util.UNSUPPORTED_FEATURES.errorFontTranslate});try{var fontFile3=descriptor&&descriptor.get("FontFile3"),subtype=fontFile3&&fontFile3.get("Subtype"),fontType=(0,_fonts.getFontType)(preEvaluatedFont.type,subtype&&subtype.name);xref.stats.fontTypes[fontType]=!0}catch(ex){}fontCapability.resolve(new TranslatedFont({loadedName:font.loadedName,font:new _fonts.ErrorFont(reason instanceof Error?reason.message:reason),dict:font,extraProperties:_this62.options.fontExtraProperties}))})),fontCapability.promise}},{key:"buildPath",value:function(operatorList,fn,args){var parsingText=arguments.length>3&&void 0!==arguments[3]&&arguments[3],lastIndex=operatorList.length-1;if(args||(args=[]),lastIndex<0||operatorList.fnArray[lastIndex]!==_util.OPS.constructPath)parsingText&&((0,_util.warn)('Encountered path operator "'.concat(fn,'" inside of a text object.')),operatorList.addOp(_util.OPS.save,null)),operatorList.addOp(_util.OPS.constructPath,[[fn],args]),parsingText&&operatorList.addOp(_util.OPS.restore,null);else{var opArgs=operatorList.argsArray[lastIndex];opArgs[0].push(fn),Array.prototype.push.apply(opArgs[1],args)}}},{key:"parseColorSpace",value:function(_ref40){var _this63=this,cs=_ref40.cs,resources=_ref40.resources,localColorSpaceCache=_ref40.localColorSpaceCache;return _colorspace.ColorSpace.parseAsync({cs:cs,xref:this.xref,resources:resources,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache}).catch((function(reason){if(reason instanceof _util.AbortException)return null;if(_this63.options.ignoreErrors)return _this63.handler.send("UnsupportedFeature",{featureId:_util.UNSUPPORTED_FEATURES.errorColorSpace}),(0,_util.warn)('parseColorSpace - ignoring ColorSpace: "'.concat(reason,'".')),null;throw reason}))}},{key:"handleColorN",value:function(operatorList,fn,args,cs,patterns,resources,task,localColorSpaceCache,localTilingPatternCache){var patternName=args.pop();if(patternName instanceof _primitives.Name){var name=patternName.name,localTilingPattern=localTilingPatternCache.getByName(name);if(localTilingPattern)try{var color=cs.base?cs.base.getRgb(args,0):null,tilingPatternIR=(0,_pattern.getTilingPatternIR)(localTilingPattern.operatorListIR,localTilingPattern.dict,color);return void operatorList.addOp(fn,tilingPatternIR)}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex}var pattern=patterns.get(name);if(pattern){var dict=(0,_primitives.isStream)(pattern)?pattern.dict:pattern,typeNum=dict.get("PatternType");if(typeNum===PatternType_TILING){var _color=cs.base?cs.base.getRgb(args,0):null;return this.handleTilingType(fn,_color,resources,pattern,dict,operatorList,task,name,localTilingPatternCache)}if(typeNum===PatternType_SHADING){var shading=dict.get("Shading"),matrix=dict.getArray("Matrix");return pattern=_pattern.Pattern.parseShading(shading,matrix,this.xref,resources,this.handler,this._pdfFunctionFactory,localColorSpaceCache),void operatorList.addOp(fn,pattern.getIR())}throw new _util.FormatError("Unknown PatternType: ".concat(typeNum))}}throw new _util.FormatError("Unknown PatternName: ".concat(patternName))}},{key:"parseMarkedContentProps",value:(_parseMarkedContentProps=_asyncToGenerator(regeneratorRuntime.mark((function _callee25(contentProperties,resources){var optionalContent,properties,optionalContentType,optionalContentGroups,groupIds,expression;return regeneratorRuntime.wrap((function(_context25){for(;;)switch(_context25.prev=_context25.next){case 0:if(!(0,_primitives.isName)(contentProperties)){_context25.next=5;break}properties=resources.get("Properties"),optionalContent=properties.get(contentProperties.name),_context25.next=10;break;case 5:if(!(0,_primitives.isDict)(contentProperties)){_context25.next=9;break}optionalContent=contentProperties,_context25.next=10;break;case 9:throw new _util.FormatError("Optional content properties malformed.");case 10:if("OCG"!==(optionalContentType=optionalContent.get("Type").name)){_context25.next=15;break}return _context25.abrupt("return",{type:optionalContentType,id:optionalContent.objId});case 15:if("OCMD"!==optionalContentType){_context25.next=27;break}if(optionalContentGroups=optionalContent.get("OCGs"),!Array.isArray(optionalContentGroups)&&!(0,_primitives.isDict)(optionalContentGroups)){_context25.next=25;break}return groupIds=[],Array.isArray(optionalContentGroups)?optionalContent.get("OCGs").forEach((function(ocg){groupIds.push(ocg.toString())})):groupIds.push(optionalContentGroups.objId),expression=null,optionalContent.get("VE")&&(expression=!0),_context25.abrupt("return",{type:optionalContentType,ids:groupIds,policy:(0,_primitives.isName)(optionalContent.get("P"))?optionalContent.get("P").name:null,expression:expression});case 25:if(!(0,_primitives.isRef)(optionalContentGroups)){_context25.next=27;break}return _context25.abrupt("return",{type:optionalContentType,id:optionalContentGroups.toString()});case 27:return _context25.abrupt("return",null);case 28:case"end":return _context25.stop()}}),_callee25)}))),function(_x43,_x44){return _parseMarkedContentProps.apply(this,arguments)})},{key:"getOperatorList",value:function(_ref41){var _this64=this,stream=_ref41.stream,task=_ref41.task,resources=_ref41.resources,operatorList=_ref41.operatorList,_ref41$initialState=_ref41.initialState,initialState=void 0===_ref41$initialState?null:_ref41$initialState,_ref41$fallbackFontDi=_ref41.fallbackFontDict,fallbackFontDict=void 0===_ref41$fallbackFontDi?null:_ref41$fallbackFontDi;if(resources=resources||_primitives.Dict.empty,initialState=initialState||new EvalState,!operatorList)throw new Error('getOperatorList: missing "operatorList" parameter');var self=this,xref=this.xref,parsingText=!1,localImageCache=new _image_utils.LocalImageCache,localColorSpaceCache=new _image_utils.LocalColorSpaceCache,localGStateCache=new _image_utils.LocalGStateCache,localTilingPatternCache=new _image_utils.LocalTilingPatternCache,xobjs=resources.get("XObject")||_primitives.Dict.empty,patterns=resources.get("Pattern")||_primitives.Dict.empty,stateManager=new StateManager(initialState),preprocessor=new EvaluatorPreprocessor(stream,xref,stateManager),timeSlotManager=new TimeSlotManager;function closePendingRestoreOPS(argument){for(var i=0,ii=preprocessor.savedStatesDepth;i<ii;i++)operatorList.addOp(_util.OPS.restore,[])}return new Promise((function promiseBody(resolve,reject){var next=function(promise){Promise.all([promise,operatorList.ready]).then((function(){try{promiseBody(resolve,reject)}catch(ex){reject(ex)}}),reject)};task.ensureNotTerminated(),timeSlotManager.reset();for(var stop,i,ii,cs,name,operation={};!(stop=timeSlotManager.check())&&(operation.args=null,preprocessor.read(operation));){var args=operation.args,fn=operation.fn;switch(0|fn){case _util.OPS.paintXObject:if(name=args[0].name){var localImage=localImageCache.getByName(name);if(localImage){operatorList.addOp(localImage.fn,localImage.args),args=null;continue}}return void next(new Promise((function(resolveXObject,rejectXObject){if(!name)throw new _util.FormatError("XObject must be referred to by name.");var xobj=xobjs.getRaw(name);if(xobj instanceof _primitives.Ref){var _localImage=localImageCache.getByRef(xobj);if(_localImage)return operatorList.addOp(_localImage.fn,_localImage.args),void resolveXObject();var globalImage=self.globalImageCache.getData(xobj,self.pageIndex);if(globalImage)return operatorList.addDependency(globalImage.objId),operatorList.addOp(globalImage.fn,globalImage.args),void resolveXObject();xobj=xref.fetch(xobj)}if(!(0,_primitives.isStream)(xobj))throw new _util.FormatError("XObject should be a stream");var type=xobj.dict.get("Subtype");if(!(0,_primitives.isName)(type))throw new _util.FormatError("XObject should have a Name subtype");if("Form"===type.name)return stateManager.save(),void self.buildFormXObject(resources,xobj,null,operatorList,task,stateManager.state.clone(),localColorSpaceCache).then((function(){stateManager.restore(),resolveXObject()}),rejectXObject);if("Image"!==type.name){if("PS"!==type.name)throw new _util.FormatError("Unhandled XObject subtype ".concat(type.name));(0,_util.info)("Ignored XObject subtype PS"),resolveXObject()}else self.buildPaintImageXObject({resources:resources,image:xobj,operatorList:operatorList,cacheKey:name,localImageCache:localImageCache,localColorSpaceCache:localColorSpaceCache}).then(resolveXObject,rejectXObject)})).catch((function(reason){if(!(reason instanceof _util.AbortException)){if(self.options.ignoreErrors)return self.handler.send("UnsupportedFeature",{featureId:_util.UNSUPPORTED_FEATURES.errorXObject}),void(0,_util.warn)('getOperatorList - ignoring XObject: "'.concat(reason,'".'));throw reason}})));case _util.OPS.setFont:var fontSize=args[1];return void next(self.handleSetFont(resources,args,null,operatorList,task,stateManager.state,fallbackFontDict).then((function(loadedName){operatorList.addDependency(loadedName),operatorList.addOp(_util.OPS.setFont,[loadedName,fontSize])})));case _util.OPS.beginText:parsingText=!0;break;case _util.OPS.endText:parsingText=!1;break;case _util.OPS.endInlineImage:var cacheKey=args[0].cacheKey;if(cacheKey){var _localImage2=localImageCache.getByName(cacheKey);if(_localImage2){operatorList.addOp(_localImage2.fn,_localImage2.args),args=null;continue}}return void next(self.buildPaintImageXObject({resources:resources,image:args[0],isInline:!0,operatorList:operatorList,cacheKey:cacheKey,localImageCache:localImageCache,localColorSpaceCache:localColorSpaceCache}));case _util.OPS.showText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue}args[0]=self.handleText(args[0],stateManager.state);break;case _util.OPS.showSpacedText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue}var arr=args[0],combinedGlyphs=[],arrLength=arr.length,state=stateManager.state;for(i=0;i<arrLength;++i){var arrItem=arr[i];(0,_util.isString)(arrItem)?Array.prototype.push.apply(combinedGlyphs,self.handleText(arrItem,state)):(0,_util.isNum)(arrItem)&&combinedGlyphs.push(arrItem)}args[0]=combinedGlyphs,fn=_util.OPS.showText;break;case _util.OPS.nextLineShowText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue}operatorList.addOp(_util.OPS.nextLine),args[0]=self.handleText(args[0],stateManager.state),fn=_util.OPS.showText;break;case _util.OPS.nextLineSetSpacingShowText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue}operatorList.addOp(_util.OPS.nextLine),operatorList.addOp(_util.OPS.setWordSpacing,[args.shift()]),operatorList.addOp(_util.OPS.setCharSpacing,[args.shift()]),args[0]=self.handleText(args[0],stateManager.state),fn=_util.OPS.showText;break;case _util.OPS.setTextRenderingMode:stateManager.state.textRenderingMode=args[0];break;case _util.OPS.setFillColorSpace:var cachedColorSpace=_colorspace.ColorSpace.getCached(args[0],xref,localColorSpaceCache);if(cachedColorSpace){stateManager.state.fillColorSpace=cachedColorSpace;continue}return void next(self.parseColorSpace({cs:args[0],resources:resources,localColorSpaceCache:localColorSpaceCache}).then((function(colorSpace){colorSpace&&(stateManager.state.fillColorSpace=colorSpace)})));case _util.OPS.setStrokeColorSpace:var _cachedColorSpace=_colorspace.ColorSpace.getCached(args[0],xref,localColorSpaceCache);if(_cachedColorSpace){stateManager.state.strokeColorSpace=_cachedColorSpace;continue}return void next(self.parseColorSpace({cs:args[0],resources:resources,localColorSpaceCache:localColorSpaceCache}).then((function(colorSpace){colorSpace&&(stateManager.state.strokeColorSpace=colorSpace)})));case _util.OPS.setFillColor:args=(cs=stateManager.state.fillColorSpace).getRgb(args,0),fn=_util.OPS.setFillRGBColor;break;case _util.OPS.setStrokeColor:args=(cs=stateManager.state.strokeColorSpace).getRgb(args,0),fn=_util.OPS.setStrokeRGBColor;break;case _util.OPS.setFillGray:stateManager.state.fillColorSpace=_colorspace.ColorSpace.singletons.gray,args=_colorspace.ColorSpace.singletons.gray.getRgb(args,0),fn=_util.OPS.setFillRGBColor;break;case _util.OPS.setStrokeGray:stateManager.state.strokeColorSpace=_colorspace.ColorSpace.singletons.gray,args=_colorspace.ColorSpace.singletons.gray.getRgb(args,0),fn=_util.OPS.setStrokeRGBColor;break;case _util.OPS.setFillCMYKColor:stateManager.state.fillColorSpace=_colorspace.ColorSpace.singletons.cmyk,args=_colorspace.ColorSpace.singletons.cmyk.getRgb(args,0),fn=_util.OPS.setFillRGBColor;break;case _util.OPS.setStrokeCMYKColor:stateManager.state.strokeColorSpace=_colorspace.ColorSpace.singletons.cmyk,args=_colorspace.ColorSpace.singletons.cmyk.getRgb(args,0),fn=_util.OPS.setStrokeRGBColor;break;case _util.OPS.setFillRGBColor:stateManager.state.fillColorSpace=_colorspace.ColorSpace.singletons.rgb,args=_colorspace.ColorSpace.singletons.rgb.getRgb(args,0);break;case _util.OPS.setStrokeRGBColor:stateManager.state.strokeColorSpace=_colorspace.ColorSpace.singletons.rgb,args=_colorspace.ColorSpace.singletons.rgb.getRgb(args,0);break;case _util.OPS.setFillColorN:if("Pattern"===(cs=stateManager.state.fillColorSpace).name)return void next(self.handleColorN(operatorList,_util.OPS.setFillColorN,args,cs,patterns,resources,task,localColorSpaceCache,localTilingPatternCache));args=cs.getRgb(args,0),fn=_util.OPS.setFillRGBColor;break;case _util.OPS.setStrokeColorN:if("Pattern"===(cs=stateManager.state.strokeColorSpace).name)return void next(self.handleColorN(operatorList,_util.OPS.setStrokeColorN,args,cs,patterns,resources,task,localColorSpaceCache,localTilingPatternCache));args=cs.getRgb(args,0),fn=_util.OPS.setStrokeRGBColor;break;case _util.OPS.shadingFill:var shadingRes=resources.get("Shading");if(!shadingRes)throw new _util.FormatError("No shading resource found");var shading=shadingRes.get(args[0].name);if(!shading)throw new _util.FormatError("No shading object found");args=[_pattern.Pattern.parseShading(shading,null,xref,resources,self.handler,self._pdfFunctionFactory,localColorSpaceCache).getIR()],fn=_util.OPS.shadingFill;break;case _util.OPS.setGState:if(name=args[0].name){var localGStateObj=localGStateCache.getByName(name);if(localGStateObj){localGStateObj.length>0&&operatorList.addOp(_util.OPS.setGState,[localGStateObj]),args=null;continue}}return void next(new Promise((function(resolveGState,rejectGState){if(!name)throw new _util.FormatError("GState must be referred to by name.");var extGState=resources.get("ExtGState");if(!(extGState instanceof _primitives.Dict))throw new _util.FormatError("ExtGState should be a dictionary.");var gState=extGState.get(name);if(!(gState instanceof _primitives.Dict))throw new _util.FormatError("GState should be a dictionary.");self.setGState({resources:resources,gState:gState,operatorList:operatorList,cacheKey:name,task:task,stateManager:stateManager,localGStateCache:localGStateCache,localColorSpaceCache:localColorSpaceCache}).then(resolveGState,rejectGState)})).catch((function(reason){if(!(reason instanceof _util.AbortException)){if(self.options.ignoreErrors)return self.handler.send("UnsupportedFeature",{featureId:_util.UNSUPPORTED_FEATURES.errorExtGState}),void(0,_util.warn)('getOperatorList - ignoring ExtGState: "'.concat(reason,'".'));throw reason}})));case _util.OPS.moveTo:case _util.OPS.lineTo:case _util.OPS.curveTo:case _util.OPS.curveTo2:case _util.OPS.curveTo3:case _util.OPS.closePath:case _util.OPS.rectangle:self.buildPath(operatorList,fn,args,parsingText);continue;case _util.OPS.markPoint:case _util.OPS.markPointProps:case _util.OPS.beginCompat:case _util.OPS.endCompat:continue;case _util.OPS.beginMarkedContentProps:if(!(0,_primitives.isName)(args[0])){(0,_util.warn)("Expected name for beginMarkedContentProps arg0=".concat(args[0]));continue}if("OC"===args[0].name)return void next(self.parseMarkedContentProps(args[1],resources).then((function(data){operatorList.addOp(_util.OPS.beginMarkedContentProps,["OC",data])})).catch((function(reason){if(!(reason instanceof _util.AbortException)){if(self.options.ignoreErrors)return self.handler.send("UnsupportedFeature",{featureId:_util.UNSUPPORTED_FEATURES.errorMarkedContent}),void(0,_util.warn)('getOperatorList - ignoring beginMarkedContentProps: "'.concat(reason,'".'));throw reason}})));args=[args[0].name];break;case _util.OPS.beginMarkedContent:case _util.OPS.endMarkedContent:default:if(null!==args){for(i=0,ii=args.length;i<ii&&!(args[i]instanceof _primitives.Dict);i++);if(i<ii){(0,_util.warn)("getOperatorList - ignoring operator: "+fn);continue}}}operatorList.addOp(fn,args)}stop?next(deferred):(closePendingRestoreOPS(),resolve())})).catch((function(reason){if(!(reason instanceof _util.AbortException)){if(_this64.options.ignoreErrors)return _this64.handler.send("UnsupportedFeature",{featureId:_util.UNSUPPORTED_FEATURES.errorOperatorList}),(0,_util.warn)('getOperatorList - ignoring errors during "'.concat(task.name,'" ')+'task: "'.concat(reason,'".')),void closePendingRestoreOPS();throw reason}}))}},{key:"getTextContent",value:function(_ref42){var _this65=this,stream=_ref42.stream,task=_ref42.task,resources=_ref42.resources,_ref42$stateManager=_ref42.stateManager,stateManager=void 0===_ref42$stateManager?null:_ref42$stateManager,_ref42$normalizeWhite=_ref42.normalizeWhitespace,normalizeWhitespace=void 0!==_ref42$normalizeWhite&&_ref42$normalizeWhite,_ref42$combineTextIte=_ref42.combineTextItems,combineTextItems=void 0!==_ref42$combineTextIte&&_ref42$combineTextIte,sink=_ref42.sink,_ref42$seenStyles=_ref42.seenStyles,seenStyles=void 0===_ref42$seenStyles?Object.create(null):_ref42$seenStyles;resources=resources||_primitives.Dict.empty,stateManager=stateManager||new StateManager(new TextState);var textState,WhitespaceRegexp=/\s/g,textContent={items:[],styles:Object.create(null)},textContentItem={initialized:!1,str:[],width:0,height:0,vertical:!1,lastAdvanceWidth:0,lastAdvanceHeight:0,textAdvanceScale:0,spaceWidth:0,fakeSpaceMin:1/0,fakeMultiSpaceMin:1/0,fakeMultiSpaceMax:-0,textRunBreakAllowed:!1,transform:null,fontName:null},self=this,xref=this.xref,xobjs=null,emptyXObjectCache=new _image_utils.LocalImageCache,emptyGStateCache=new _image_utils.LocalGStateCache,preprocessor=new EvaluatorPreprocessor(stream,xref,stateManager);function ensureTextContentItem(){if(textContentItem.initialized)return textContentItem;var font=textState.font;font.loadedName in seenStyles||(seenStyles[font.loadedName]=!0,textContent.styles[font.loadedName]={fontFamily:font.fallbackName,ascent:font.ascent,descent:font.descent,vertical:font.vertical}),textContentItem.fontName=font.loadedName;var tsm=[textState.fontSize*textState.textHScale,0,0,textState.fontSize,0,textState.textRise];if(font.isType3Font&&textState.fontSize<=1&&!(0,_util.isArrayEqual)(textState.fontMatrix,_util.FONT_IDENTITY_MATRIX)){var glyphHeight=font.bbox[3]-font.bbox[1];glyphHeight>0&&(tsm[3]*=glyphHeight*textState.fontMatrix[3])}var trm=_util.Util.transform(textState.ctm,_util.Util.transform(textState.textMatrix,tsm));textContentItem.transform=trm,font.vertical?(textContentItem.width=Math.sqrt(trm[0]*trm[0]+trm[1]*trm[1]),textContentItem.height=0,textContentItem.vertical=!0):(textContentItem.width=0,textContentItem.height=Math.sqrt(trm[2]*trm[2]+trm[3]*trm[3]),textContentItem.vertical=!1);var a=textState.textLineMatrix[0],b=textState.textLineMatrix[1],scaleLineX=Math.sqrt(a*a+b*b);a=textState.ctm[0],b=textState.ctm[1];var scaleCtmX=Math.sqrt(a*a+b*b);textContentItem.textAdvanceScale=scaleCtmX*scaleLineX,textContentItem.lastAdvanceWidth=0,textContentItem.lastAdvanceHeight=0;var spaceWidth=font.spaceWidth/1e3*textState.fontSize;return spaceWidth?(textContentItem.spaceWidth=spaceWidth,textContentItem.fakeSpaceMin=.3*spaceWidth,textContentItem.fakeMultiSpaceMin=1.5*spaceWidth,textContentItem.fakeMultiSpaceMax=4*spaceWidth,textContentItem.textRunBreakAllowed=!font.isMonospace):(textContentItem.spaceWidth=0,textContentItem.fakeSpaceMin=1/0,textContentItem.fakeMultiSpaceMin=1/0,textContentItem.fakeMultiSpaceMax=0,textContentItem.textRunBreakAllowed=!1),textContentItem.initialized=!0,textContentItem}function replaceWhitespace(str){for(var code,i=0,ii=str.length;i<ii&&(code=str.charCodeAt(i))>=32&&code<=127;)i++;return i<ii?str.replace(WhitespaceRegexp," "):str}function handleSetFont(fontName,fontRef){return self.loadFont(fontName,fontRef,resources).then((function(translated){textState.font=translated.font,textState.fontMatrix=translated.font.fontMatrix||_util.FONT_IDENTITY_MATRIX}))}function buildTextContentItem(chars){for(var font=textState.font,textChunk=ensureTextContentItem(),width=0,height=0,glyphs=font.charsToGlyphs(chars),i=0;i<glyphs.length;i++){var glyph=glyphs[i],glyphWidth=null;glyphWidth=font.vertical&&glyph.vmetric?glyph.vmetric[0]:glyph.width;var glyphUnicode=glyph.unicode,NormalizedUnicodes=(0,_unicode.getNormalizedUnicodes)();void 0!==NormalizedUnicodes[glyphUnicode]&&(glyphUnicode=NormalizedUnicodes[glyphUnicode]),glyphUnicode=(0,_unicode.reverseIfRtl)(glyphUnicode);var charSpacing=textState.charSpacing;if(glyph.isSpace){var wordSpacing=textState.wordSpacing;charSpacing+=wordSpacing,wordSpacing>0&&addFakeSpaces(wordSpacing,textChunk.str)}var tx=0,ty=0;font.vertical?height+=ty=glyphWidth*textState.fontMatrix[0]*textState.fontSize+charSpacing:width+=tx=(glyphWidth*textState.fontMatrix[0]*textState.fontSize+charSpacing)*textState.textHScale,textState.translateTextMatrix(tx,ty),textChunk.str.push(glyphUnicode)}return font.vertical?(textChunk.lastAdvanceHeight=height,textChunk.height+=Math.abs(height)):(textChunk.lastAdvanceWidth=width,textChunk.width+=width),textChunk}function addFakeSpaces(width,strBuf){if(!(width<textContentItem.fakeSpaceMin))if(width<textContentItem.fakeMultiSpaceMin)strBuf.push(" ");else for(var fakeSpaces=Math.round(width/textContentItem.spaceWidth);fakeSpaces-- >0;)strBuf.push(" ")}function flushTextContentItem(){var textChunk,str,bidiResult;textContentItem.initialized&&(textContentItem.vertical?textContentItem.height*=textContentItem.textAdvanceScale:textContentItem.width*=textContentItem.textAdvanceScale,textContent.items.push((str=(textChunk=textContentItem).str.join(""),bidiResult=(0,_bidi.bidi)(str,-1,textChunk.vertical),{str:normalizeWhitespace?replaceWhitespace(bidiResult.str):bidiResult.str,dir:bidiResult.dir,width:textChunk.width,height:textChunk.height,transform:textChunk.transform,fontName:textChunk.fontName})),textContentItem.initialized=!1,textContentItem.str.length=0)}function enqueueChunk(){var length=textContent.items.length;length>0&&(sink.enqueue(textContent,length),textContent.items=[],textContent.styles=Object.create(null))}var timeSlotManager=new TimeSlotManager;return new Promise((function promiseBody(resolve,reject){var next=function(promise){enqueueChunk(),Promise.all([promise,sink.ready]).then((function(){try{promiseBody(resolve,reject)}catch(ex){reject(ex)}}),reject)};task.ensureNotTerminated(),timeSlotManager.reset();for(var stop,operation={},args=[];!(stop=timeSlotManager.check())&&(args.length=0,operation.args=args,preprocessor.read(operation));){textState=stateManager.state;var advance,fn=operation.fn;switch(args=operation.args,0|fn){case _util.OPS.setFont:var fontNameArg=args[0].name,fontSizeArg=args[1];if(textState.font&&fontNameArg===textState.fontName&&fontSizeArg===textState.fontSize)break;return flushTextContentItem(),textState.fontName=fontNameArg,textState.fontSize=fontSizeArg,void next(handleSetFont(fontNameArg,null));case _util.OPS.setTextRise:flushTextContentItem(),textState.textRise=args[0];break;case _util.OPS.setHScale:flushTextContentItem(),textState.textHScale=args[0]/100;break;case _util.OPS.setLeading:flushTextContentItem(),textState.leading=args[0];break;case _util.OPS.moveText:var isSameTextLine=!!textState.font&&0===(textState.font.vertical?args[0]:args[1]);if(advance=args[0]-args[1],combineTextItems&&isSameTextLine&&textContentItem.initialized&&advance>0&&advance<=textContentItem.fakeMultiSpaceMax){textState.translateTextLineMatrix(args[0],args[1]),textContentItem.width+=args[0]-textContentItem.lastAdvanceWidth,textContentItem.height+=args[1]-textContentItem.lastAdvanceHeight,addFakeSpaces(args[0]-textContentItem.lastAdvanceWidth-(args[1]-textContentItem.lastAdvanceHeight),textContentItem.str);break}flushTextContentItem(),textState.translateTextLineMatrix(args[0],args[1]),textState.textMatrix=textState.textLineMatrix.slice();break;case _util.OPS.setLeadingMoveText:flushTextContentItem(),textState.leading=-args[1],textState.translateTextLineMatrix(args[0],args[1]),textState.textMatrix=textState.textLineMatrix.slice();break;case _util.OPS.nextLine:flushTextContentItem(),textState.carriageReturn();break;case _util.OPS.setTextMatrix:if(advance=textState.calcTextLineMatrixAdvance(args[0],args[1],args[2],args[3],args[4],args[5]),combineTextItems&&null!==advance&&textContentItem.initialized&&advance.value>0&&advance.value<=textContentItem.fakeMultiSpaceMax){textState.translateTextLineMatrix(advance.width,advance.height),textContentItem.width+=advance.width-textContentItem.lastAdvanceWidth,textContentItem.height+=advance.height-textContentItem.lastAdvanceHeight,addFakeSpaces(advance.width-textContentItem.lastAdvanceWidth-(advance.height-textContentItem.lastAdvanceHeight),textContentItem.str);break}flushTextContentItem(),textState.setTextMatrix(args[0],args[1],args[2],args[3],args[4],args[5]),textState.setTextLineMatrix(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util.OPS.setCharSpacing:textState.charSpacing=args[0];break;case _util.OPS.setWordSpacing:textState.wordSpacing=args[0];break;case _util.OPS.beginText:flushTextContentItem(),textState.textMatrix=_util.IDENTITY_MATRIX.slice(),textState.textLineMatrix=_util.IDENTITY_MATRIX.slice();break;case _util.OPS.showSpacedText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue}for(var offset,items=args[0],j=0,jj=items.length;j<jj;j++)if("string"==typeof items[j])buildTextContentItem(items[j]);else if((0,_util.isNum)(items[j])){ensureTextContentItem(),advance=items[j]*textState.fontSize/1e3;var breakTextRun=!1;textState.font.vertical?(offset=advance,textState.translateTextMatrix(0,offset),(breakTextRun=textContentItem.textRunBreakAllowed&&advance>textContentItem.fakeMultiSpaceMax)||(textContentItem.height+=offset)):(offset=(advance=-advance)*textState.textHScale,textState.translateTextMatrix(offset,0),(breakTextRun=textContentItem.textRunBreakAllowed&&advance>textContentItem.fakeMultiSpaceMax)||(textContentItem.width+=offset)),breakTextRun?flushTextContentItem():advance>0&&addFakeSpaces(advance,textContentItem.str)}break;case _util.OPS.showText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue}buildTextContentItem(args[0]);break;case _util.OPS.nextLineShowText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue}flushTextContentItem(),textState.carriageReturn(),buildTextContentItem(args[0]);break;case _util.OPS.nextLineSetSpacingShowText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue}flushTextContentItem(),textState.wordSpacing=args[0],textState.charSpacing=args[1],textState.carriageReturn(),buildTextContentItem(args[2]);break;case _util.OPS.paintXObject:flushTextContentItem(),xobjs||(xobjs=resources.get("XObject")||_primitives.Dict.empty);var name=args[0].name;if(name&&emptyXObjectCache.getByName(name))break;return void next(new Promise((function(resolveXObject,rejectXObject){if(!name)throw new _util.FormatError("XObject must be referred to by name.");var xobj=xobjs.getRaw(name);if(xobj instanceof _primitives.Ref){if(emptyXObjectCache.getByRef(xobj))return void resolveXObject();xobj=xref.fetch(xobj)}if(!(0,_primitives.isStream)(xobj))throw new _util.FormatError("XObject should be a stream");var type=xobj.dict.get("Subtype");if(!(0,_primitives.isName)(type))throw new _util.FormatError("XObject should have a Name subtype");if("Form"!==type.name)return emptyXObjectCache.set(name,xobj.dict.objId,!0),void resolveXObject();var currentState=stateManager.state.clone(),xObjStateManager=new StateManager(currentState),matrix=xobj.dict.getArray("Matrix");Array.isArray(matrix)&&6===matrix.length&&xObjStateManager.transform(matrix),enqueueChunk();var sinkWrapper={enqueueInvoked:!1,enqueue:function(chunk,size){this.enqueueInvoked=!0,sink.enqueue(chunk,size)},get desiredSize(){return sink.desiredSize},get ready(){return sink.ready}};self.getTextContent({stream:xobj,task:task,resources:xobj.dict.get("Resources")||resources,stateManager:xObjStateManager,normalizeWhitespace:normalizeWhitespace,combineTextItems:combineTextItems,sink:sinkWrapper,seenStyles:seenStyles}).then((function(){sinkWrapper.enqueueInvoked||emptyXObjectCache.set(name,xobj.dict.objId,!0),resolveXObject()}),rejectXObject)})).catch((function(reason){if(!(reason instanceof _util.AbortException)){if(!self.options.ignoreErrors)throw reason;(0,_util.warn)('getTextContent - ignoring XObject: "'.concat(reason,'".'))}})));case _util.OPS.setGState:if((name=args[0].name)&&emptyGStateCache.getByName(name))break;return void next(new Promise((function(resolveGState,rejectGState){if(!name)throw new _util.FormatError("GState must be referred to by name.");var extGState=resources.get("ExtGState");if(!(extGState instanceof _primitives.Dict))throw new _util.FormatError("ExtGState should be a dictionary.");var gState=extGState.get(name);if(!(gState instanceof _primitives.Dict))throw new _util.FormatError("GState should be a dictionary.");var gStateFont=gState.get("Font");if(!gStateFont)return emptyGStateCache.set(name,gState.objId,!0),void resolveGState();flushTextContentItem(),textState.fontName=null,textState.fontSize=gStateFont[1],handleSetFont(null,gStateFont[0]).then(resolveGState,rejectGState)})).catch((function(reason){if(!(reason instanceof _util.AbortException)){if(!self.options.ignoreErrors)throw reason;(0,_util.warn)('getTextContent - ignoring ExtGState: "'.concat(reason,'".'))}})))}if(textContent.items.length>=sink.desiredSize){stop=!0;break}}stop?next(deferred):(flushTextContentItem(),enqueueChunk(),resolve())})).catch((function(reason){if(!(reason instanceof _util.AbortException)){if(_this65.options.ignoreErrors)return(0,_util.warn)('getTextContent - ignoring errors during "'.concat(task.name,'" ')+'task: "'.concat(reason,'".')),flushTextContentItem(),void enqueueChunk();throw reason}}))}},{key:"extractDataStructures",value:function(dict,baseDict,properties){var cidToGidBytes,_this66=this,xref=this.xref,toUnicode=dict.get("ToUnicode")||baseDict.get("ToUnicode"),toUnicodePromise=toUnicode?this.readToUnicode(toUnicode):Promise.resolve(void 0);if(properties.composite){var cidSystemInfo=dict.get("CIDSystemInfo");(0,_primitives.isDict)(cidSystemInfo)&&(properties.cidSystemInfo={registry:(0,_util.stringToPDFString)(cidSystemInfo.get("Registry")),ordering:(0,_util.stringToPDFString)(cidSystemInfo.get("Ordering")),supplement:cidSystemInfo.get("Supplement")});var cidToGidMap=dict.get("CIDToGIDMap");(0,_primitives.isStream)(cidToGidMap)&&(cidToGidBytes=cidToGidMap.getBytes())}var encoding,differences=[],baseEncodingName=null;if(dict.has("Encoding")){if(encoding=dict.get("Encoding"),(0,_primitives.isDict)(encoding)){if(baseEncodingName=encoding.get("BaseEncoding"),baseEncodingName=(0,_primitives.isName)(baseEncodingName)?baseEncodingName.name:null,encoding.has("Differences"))for(var diffEncoding=encoding.get("Differences"),index=0,j=0,jj=diffEncoding.length;j<jj;j++){var data=xref.fetchIfRef(diffEncoding[j]);if((0,_util.isNum)(data))index=data;else{if(!(0,_primitives.isName)(data))throw new _util.FormatError("Invalid entry in 'Differences' array: ".concat(data));differences[index++]=data.name}}}else{if(!(0,_primitives.isName)(encoding))throw new _util.FormatError("Encoding is not a Name nor a Dict");baseEncodingName=encoding.name}"MacRomanEncoding"!==baseEncodingName&&"MacExpertEncoding"!==baseEncodingName&&"WinAnsiEncoding"!==baseEncodingName&&(baseEncodingName=null)}if(baseEncodingName)properties.defaultEncoding=(0,_encodings.getEncoding)(baseEncodingName).slice();else{var isSymbolicFont=!!(properties.flags&_fonts.FontFlags.Symbolic),isNonsymbolicFont=!!(properties.flags&_fonts.FontFlags.Nonsymbolic);encoding=_encodings.StandardEncoding,"TrueType"!==properties.type||isNonsymbolicFont||(encoding=_encodings.WinAnsiEncoding),isSymbolicFont&&(encoding=_encodings.MacRomanEncoding,properties.file||(/Symbol/i.test(properties.name)?encoding=_encodings.SymbolSetEncoding:/Dingbats|Wingdings/i.test(properties.name)&&(encoding=_encodings.ZapfDingbatsEncoding))),properties.defaultEncoding=encoding}return properties.differences=differences,properties.baseEncodingName=baseEncodingName,properties.hasEncoding=!!baseEncodingName||differences.length>0,properties.dict=dict,toUnicodePromise.then((function(readToUnicode){return properties.toUnicode=readToUnicode,_this66.buildToUnicode(properties)})).then((function(builtToUnicode){return properties.toUnicode=builtToUnicode,cidToGidBytes&&(properties.cidToGidMap=_this66.readCidToGidMap(cidToGidBytes,builtToUnicode)),properties}))}},{key:"_buildSimpleFontToUnicode",value:function(properties){var forceGlyphs=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,_util.assert)(!properties.composite,"Must be a simple font.");var toUnicode=[],encoding=properties.defaultEncoding.slice(),baseEncodingName=properties.baseEncodingName,differences=properties.differences;for(var charcode in differences){var glyphName=differences[charcode];".notdef"!==glyphName&&(encoding[charcode]=glyphName)}var glyphsUnicodeMap=(0,_glyphlist.getGlyphsUnicode)();for(var _charcode in encoding){var _glyphName=encoding[_charcode];if(""!==_glyphName)if(void 0!==glyphsUnicodeMap[_glyphName])toUnicode[_charcode]=String.fromCharCode(glyphsUnicodeMap[_glyphName]);else{var code=0;switch(_glyphName[0]){case"G":3===_glyphName.length&&(code=parseInt(_glyphName.substring(1),16));break;case"g":5===_glyphName.length&&(code=parseInt(_glyphName.substring(1),16));break;case"C":case"c":if(_glyphName.length>=3&&_glyphName.length<=4){var codeStr=_glyphName.substring(1);if(forceGlyphs){code=parseInt(codeStr,16);break}if(code=+codeStr,Number.isNaN(code)&&Number.isInteger(parseInt(codeStr,16)))return this._buildSimpleFontToUnicode(properties,!0)}break;default:var unicode=(0,_unicode.getUnicodeForGlyph)(_glyphName,glyphsUnicodeMap);-1!==unicode&&(code=unicode)}if(code>0&&code<=1114111&&Number.isInteger(code)){if(baseEncodingName&&code===+_charcode){var baseEncoding=(0,_encodings.getEncoding)(baseEncodingName);if(baseEncoding&&(_glyphName=baseEncoding[_charcode])){toUnicode[_charcode]=String.fromCharCode(glyphsUnicodeMap[_glyphName]);continue}}toUnicode[_charcode]=String.fromCodePoint(code)}}}return new _fonts.ToUnicodeMap(toUnicode)}},{key:"buildToUnicode",value:function(properties){if(properties.hasIncludedToUnicodeMap=!!properties.toUnicode&&properties.toUnicode.length>0,properties.hasIncludedToUnicodeMap)return!properties.composite&&properties.hasEncoding&&(properties.fallbackToUnicode=this._buildSimpleFontToUnicode(properties)),Promise.resolve(properties.toUnicode);if(!properties.composite)return Promise.resolve(this._buildSimpleFontToUnicode(properties));if(properties.composite&&(properties.cMap.builtInCMap&&!(properties.cMap instanceof _cmap.IdentityCMap)||"Adobe"===properties.cidSystemInfo.registry&&("GB1"===properties.cidSystemInfo.ordering||"CNS1"===properties.cidSystemInfo.ordering||"Japan1"===properties.cidSystemInfo.ordering||"Korea1"===properties.cidSystemInfo.ordering))){var registry=properties.cidSystemInfo.registry,ordering=properties.cidSystemInfo.ordering,ucs2CMapName=_primitives.Name.get(registry+"-"+ordering+"-UCS2");return _cmap.CMapFactory.create({encoding:ucs2CMapName,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then((function(ucs2CMap){var cMap=properties.cMap,toUnicode=[];return cMap.forEach((function(charcode,cid){if(cid>65535)throw new _util.FormatError("Max size of CID is 65,535");var ucs2=ucs2CMap.lookup(cid);ucs2&&(toUnicode[charcode]=String.fromCharCode((ucs2.charCodeAt(0)<<8)+ucs2.charCodeAt(1)))})),new _fonts.ToUnicodeMap(toUnicode)}))}return Promise.resolve(new _fonts.IdentityToUnicodeMap(properties.firstChar,properties.lastChar))}},{key:"readToUnicode",value:function(toUnicode){var _this67=this,cmapObj=toUnicode;return(0,_primitives.isName)(cmapObj)?_cmap.CMapFactory.create({encoding:cmapObj,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then((function(cmap){return cmap instanceof _cmap.IdentityCMap?new _fonts.IdentityToUnicodeMap(0,65535):new _fonts.ToUnicodeMap(cmap.getMap())})):(0,_primitives.isStream)(cmapObj)?_cmap.CMapFactory.create({encoding:cmapObj,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then((function(cmap){if(cmap instanceof _cmap.IdentityCMap)return new _fonts.IdentityToUnicodeMap(0,65535);var map=new Array(cmap.length);return cmap.forEach((function(charCode,token){for(var str=[],k=0;k<token.length;k+=2){var w1=token.charCodeAt(k)<<8|token.charCodeAt(k+1);if(55296==(63488&w1)){k+=2;var w2=token.charCodeAt(k)<<8|token.charCodeAt(k+1);str.push(((1023&w1)<<10)+(1023&w2)+65536)}else str.push(w1)}map[charCode]=String.fromCodePoint.apply(String,str)})),new _fonts.ToUnicodeMap(map)}),(function(reason){if(reason instanceof _util.AbortException)return null;if(_this67.options.ignoreErrors)return _this67.handler.send("UnsupportedFeature",{featureId:_util.UNSUPPORTED_FEATURES.errorFontToUnicode}),(0,_util.warn)('readToUnicode - ignoring ToUnicode data: "'.concat(reason,'".')),null;throw reason})):Promise.resolve(null)}},{key:"readCidToGidMap",value:function(glyphsData,toUnicode){for(var result=[],j=0,jj=glyphsData.length;j<jj;j++){var glyphID=glyphsData[j++]<<8|glyphsData[j],code=j>>1;(0!==glyphID||toUnicode.has(code))&&(result[code]=glyphID)}return result}},{key:"extractWidths",value:function(dict,descriptor,properties){var defaultVMetrics,i,ii,j,jj,start,code,widths,xref=this.xref,glyphsWidths=[],defaultWidth=0,glyphsVMetrics=[];if(properties.composite){if(defaultWidth=dict.has("DW")?dict.get("DW"):1e3,widths=dict.get("W"))for(i=0,ii=widths.length;i<ii;i++)if(start=xref.fetchIfRef(widths[i++]),code=xref.fetchIfRef(widths[i]),Array.isArray(code))for(j=0,jj=code.length;j<jj;j++)glyphsWidths[start++]=xref.fetchIfRef(code[j]);else{var width=xref.fetchIfRef(widths[++i]);for(j=start;j<=code;j++)glyphsWidths[j]=width}if(properties.vertical){var vmetrics=dict.getArray("DW2")||[880,-1e3];if(defaultVMetrics=[vmetrics[1],.5*defaultWidth,vmetrics[0]],vmetrics=dict.get("W2"))for(i=0,ii=vmetrics.length;i<ii;i++)if(start=xref.fetchIfRef(vmetrics[i++]),code=xref.fetchIfRef(vmetrics[i]),Array.isArray(code))for(j=0,jj=code.length;j<jj;j++)glyphsVMetrics[start++]=[xref.fetchIfRef(code[j++]),xref.fetchIfRef(code[j++]),xref.fetchIfRef(code[j])];else{var vmetric=[xref.fetchIfRef(vmetrics[++i]),xref.fetchIfRef(vmetrics[++i]),xref.fetchIfRef(vmetrics[++i])];for(j=start;j<=code;j++)glyphsVMetrics[j]=vmetric}}}else{var firstChar=properties.firstChar;if(widths=dict.get("Widths")){for(j=firstChar,i=0,ii=widths.length;i<ii;i++)glyphsWidths[j++]=xref.fetchIfRef(widths[i]);defaultWidth=parseFloat(descriptor.get("MissingWidth"))||0}else{var baseFontName=dict.get("BaseFont");if((0,_primitives.isName)(baseFontName)){var metrics=this.getBaseFontMetrics(baseFontName.name);glyphsWidths=this.buildCharCodeToWidth(metrics.widths,properties),defaultWidth=metrics.defaultWidth}}}var isMonospace=!0,firstWidth=defaultWidth;for(var glyph in glyphsWidths){var glyphWidth=glyphsWidths[glyph];if(glyphWidth)if(firstWidth){if(firstWidth!==glyphWidth){isMonospace=!1;break}}else firstWidth=glyphWidth}isMonospace&&(properties.flags|=_fonts.FontFlags.FixedPitch),properties.defaultWidth=defaultWidth,properties.widths=glyphsWidths,properties.defaultVMetrics=defaultVMetrics,properties.vmetrics=glyphsVMetrics}},{key:"isSerifFont",value:function(baseFontName){var fontNameWoStyle=baseFontName.split("-")[0];return fontNameWoStyle in(0,_standard_fonts.getSerifFonts)()||-1!==fontNameWoStyle.search(/serif/gi)}},{key:"getBaseFontMetrics",value:function(name){var defaultWidth=0,widths=[],monospace=!1,lookupName=(0,_standard_fonts.getStdFontMap)()[name]||name,Metrics=(0,_metrics.getMetrics)();lookupName in Metrics||(lookupName=this.isSerifFont(name)?"Times-Roman":"Helvetica");var glyphWidths=Metrics[lookupName];return(0,_util.isNum)(glyphWidths)?(defaultWidth=glyphWidths,monospace=!0):widths=glyphWidths(),{defaultWidth:defaultWidth,monospace:monospace,widths:widths}}},{key:"buildCharCodeToWidth",value:function(widthsByGlyphName,properties){for(var widths=Object.create(null),differences=properties.differences,encoding=properties.defaultEncoding,charCode=0;charCode<256;charCode++)charCode in differences&&widthsByGlyphName[differences[charCode]]?widths[charCode]=widthsByGlyphName[differences[charCode]]:charCode in encoding&&widthsByGlyphName[encoding[charCode]]&&(widths[charCode]=widthsByGlyphName[encoding[charCode]]);return widths}},{key:"preEvaluateFont",value:function(dict){var baseDict=dict,type=dict.get("Subtype");if(!(0,_primitives.isName)(type))throw new _util.FormatError("invalid font Subtype");var uint8array,composite=!1;if("Type0"===type.name){var df=dict.get("DescendantFonts");if(!df)throw new _util.FormatError("Descendant fonts are not specified");if(!((dict=Array.isArray(df)?this.xref.fetchIfRef(df[0]):df)instanceof _primitives.Dict))throw new _util.FormatError("Descendant font is not a dictionary.");if(type=dict.get("Subtype"),!(0,_primitives.isName)(type))throw new _util.FormatError("invalid font Subtype");composite=!0}var descriptor=dict.get("FontDescriptor");if(descriptor){var hash=new _murmurhash.MurmurHash3_64,encoding=baseDict.getRaw("Encoding");if((0,_primitives.isName)(encoding))hash.update(encoding.name);else if((0,_primitives.isRef)(encoding))hash.update(encoding.toString());else if((0,_primitives.isDict)(encoding)){var _step44,_iterator44=_createForOfIteratorHelper(encoding.getRawValues());try{for(_iterator44.s();!(_step44=_iterator44.n()).done;){var entry=_step44.value;if((0,_primitives.isName)(entry))hash.update(entry.name);else if((0,_primitives.isRef)(entry))hash.update(entry.toString());else if(Array.isArray(entry)){for(var diffLength=entry.length,diffBuf=new Array(diffLength),j=0;j<diffLength;j++){var diffEntry=entry[j];(0,_primitives.isName)(diffEntry)?diffBuf[j]=diffEntry.name:((0,_util.isNum)(diffEntry)||(0,_primitives.isRef)(diffEntry))&&(diffBuf[j]=diffEntry.toString())}hash.update(diffBuf.join())}}}catch(err){_iterator44.e(err)}finally{_iterator44.f()}}var firstChar=dict.get("FirstChar")||0,lastChar=dict.get("LastChar")||(composite?65535:255);hash.update("".concat(firstChar,"-").concat(lastChar));var toUnicode=dict.get("ToUnicode")||baseDict.get("ToUnicode");if((0,_primitives.isStream)(toUnicode)){var stream=toUnicode.str||toUnicode;uint8array=stream.buffer?new Uint8Array(stream.buffer.buffer,0,stream.bufferLength):new Uint8Array(stream.bytes.buffer,stream.start,stream.end-stream.start),hash.update(uint8array)}else(0,_primitives.isName)(toUnicode)&&hash.update(toUnicode.name);var widths=dict.get("Widths")||baseDict.get("Widths");widths&&(uint8array=new Uint8Array(new Uint32Array(widths).buffer),hash.update(uint8array))}return{descriptor:descriptor,dict:dict,baseDict:baseDict,composite:composite,type:type.name,hash:hash?hash.hexdigest():""}}},{key:"translateFont",value:(_translateFont=_asyncToGenerator(regeneratorRuntime.mark((function _callee26(preEvaluatedFont){var baseDict,dict,composite,descriptor,type,maxCharIndex,properties,firstChar,lastChar,baseFontName,metrics,fontNameWoStyle,flags,widths,fontName,baseFont,fontNameStr,baseFontStr,fontFile,subtype,length1,length2,length3,cidEncoding,cMap,_this68=this;return regeneratorRuntime.wrap((function(_context26){for(;;)switch(_context26.prev=_context26.next){case 0:if(baseDict=preEvaluatedFont.baseDict,dict=preEvaluatedFont.dict,composite=preEvaluatedFont.composite,descriptor=preEvaluatedFont.descriptor,type=preEvaluatedFont.type,maxCharIndex=composite?65535:255,firstChar=dict.get("FirstChar")||0,lastChar=dict.get("LastChar")||maxCharIndex,descriptor){_context26.next=25;break}if("Type3"!==type){_context26.next=15;break}(descriptor=new _primitives.Dict(null)).set("FontName",_primitives.Name.get(type)),descriptor.set("FontBBox",dict.getArray("FontBBox")||[0,0,0,0]),_context26.next=25;break;case 15:if(baseFontName=dict.get("BaseFont"),(0,_primitives.isName)(baseFontName)){_context26.next=18;break}throw new _util.FormatError("Base font is not specified");case 18:return baseFontName=baseFontName.name.replace(/[,_]/g,"-"),metrics=this.getBaseFontMetrics(baseFontName),fontNameWoStyle=baseFontName.split("-")[0],flags=(this.isSerifFont(fontNameWoStyle)?_fonts.FontFlags.Serif:0)|(metrics.monospace?_fonts.FontFlags.FixedPitch:0)|((0,_standard_fonts.getSymbolsFonts)()[fontNameWoStyle]?_fonts.FontFlags.Symbolic:_fonts.FontFlags.Nonsymbolic),properties={type:type,name:baseFontName,widths:metrics.widths,defaultWidth:metrics.defaultWidth,flags:flags,firstChar:firstChar,lastChar:lastChar},widths=dict.get("Widths"),_context26.abrupt("return",this.extractDataStructures(dict,dict,properties).then((function(newProperties){if(widths){for(var glyphWidths=[],j=firstChar,_i25=0,ii=widths.length;_i25<ii;_i25++)glyphWidths[j++]=_this68.xref.fetchIfRef(widths[_i25]);newProperties.widths=glyphWidths}else newProperties.widths=_this68.buildCharCodeToWidth(metrics.widths,newProperties);return new _fonts.Font(baseFontName,null,newProperties)})));case 25:if(fontName=descriptor.get("FontName"),baseFont=dict.get("BaseFont"),(0,_util.isString)(fontName)&&(fontName=_primitives.Name.get(fontName)),(0,_util.isString)(baseFont)&&(baseFont=_primitives.Name.get(baseFont)),"Type3"!==type&&(fontNameStr=fontName&&fontName.name,baseFontStr=baseFont&&baseFont.name,fontNameStr!==baseFontStr&&((0,_util.info)("The FontDescriptor's FontName is \"".concat(fontNameStr,'" but ')+"should be the same as the Font's BaseFont \"".concat(baseFontStr,'".')),fontNameStr&&baseFontStr&&baseFontStr.startsWith(fontNameStr)&&(fontName=baseFont))),fontName=fontName||baseFont,(0,_primitives.isName)(fontName)){_context26.next=33;break}throw new _util.FormatError("invalid font name");case 33:if((fontFile=descriptor.get("FontFile","FontFile2","FontFile3"))&&fontFile.dict&&((subtype=fontFile.dict.get("Subtype"))&&(subtype=subtype.name),length1=fontFile.dict.get("Length1"),length2=fontFile.dict.get("Length2"),length3=fontFile.dict.get("Length3")),properties={type:type,name:fontName.name,subtype:subtype,file:fontFile,length1:length1,length2:length2,length3:length3,loadedName:baseDict.loadedName,composite:composite,fixedPitch:!1,fontMatrix:dict.getArray("FontMatrix")||_util.FONT_IDENTITY_MATRIX,firstChar:firstChar||0,lastChar:lastChar||maxCharIndex,bbox:descriptor.getArray("FontBBox"),ascent:descriptor.get("Ascent"),descent:descriptor.get("Descent"),xHeight:descriptor.get("XHeight"),capHeight:descriptor.get("CapHeight"),flags:descriptor.get("Flags"),italicAngle:descriptor.get("ItalicAngle"),isType3Font:!1},!composite){_context26.next=44;break}return cidEncoding=baseDict.get("Encoding"),(0,_primitives.isName)(cidEncoding)&&(properties.cidEncoding=cidEncoding.name),_context26.next=41,_cmap.CMapFactory.create({encoding:cidEncoding,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null});case 41:cMap=_context26.sent,properties.cMap=cMap,properties.vertical=properties.cMap.vertical;case 44:return _context26.abrupt("return",this.extractDataStructures(dict,baseDict,properties).then((function(newProperties){return _this68.extractWidths(dict,descriptor,newProperties),"Type3"===type&&(newProperties.isType3Font=!0),new _fonts.Font(fontName.name,fontFile,newProperties)})));case 45:case"end":return _context26.stop()}}),_callee26,this)}))),function(_x45){return _translateFont.apply(this,arguments)})}],[{key:"buildFontPaths",value:function(font,glyphs,handler){function buildPath(fontChar){font.renderer.hasBuiltPath(fontChar)||handler.send("commonobj",["".concat(font.loadedName,"_path_").concat(fontChar),"FontPath",font.renderer.getPathJs(fontChar)])}var _step45,_iterator45=_createForOfIteratorHelper(glyphs);try{for(_iterator45.s();!(_step45=_iterator45.n()).done;){var glyph=_step45.value;buildPath(glyph.fontChar);var accent=glyph.accent;accent&&accent.fontChar&&buildPath(accent.fontChar)}}catch(err){_iterator45.e(err)}finally{_iterator45.f()}}},{key:"fallbackFontDict",get:function(){var dict=new _primitives.Dict;return dict.set("BaseFont",_primitives.Name.get("PDFJS-FallbackFont")),dict.set("Type",_primitives.Name.get("FallbackType")),dict.set("Subtype",_primitives.Name.get("FallbackType")),dict.set("Encoding",_primitives.Name.get("WinAnsiEncoding")),(0,_util.shadow)(this,"fallbackFontDict",dict)}}]),PartialEvaluator}();exports.PartialEvaluator=PartialEvaluator;var TranslatedFont=function(){function TranslatedFont(_ref43){var loadedName=_ref43.loadedName,font=_ref43.font,dict=_ref43.dict,_ref43$extraPropertie=_ref43.extraProperties,extraProperties=void 0!==_ref43$extraPropertie&&_ref43$extraPropertie;_classCallCheck(this,TranslatedFont),this.loadedName=loadedName,this.font=font,this.dict=dict,this._extraProperties=extraProperties,this.type3Loaded=null,this.type3Dependencies=font.isType3Font?new Set:null,this.sent=!1}return _createClass(TranslatedFont,[{key:"send",value:function(handler){this.sent||(this.sent=!0,handler.send("commonobj",[this.loadedName,"Font",this.font.exportData(this._extraProperties)]))}},{key:"fallback",value:function(handler){if(this.font.data){this.font.disableFontFace=!0;var glyphs=this.font.glyphCacheValues;PartialEvaluator.buildFontPaths(this.font,glyphs,handler)}}},{key:"loadType3Data",value:function(evaluator,resources,task){var _this69=this;if(this.type3Loaded)return this.type3Loaded;if(!this.font.isType3Font)throw new Error("Must be a Type3 font.");var type3Options=Object.create(evaluator.options);type3Options.ignoreErrors=!1;var type3Evaluator=evaluator.clone(type3Options);type3Evaluator.parsingType3Font=!0;var _step46,translatedFont=this.font,type3Dependencies=this.type3Dependencies,loadCharProcsPromise=Promise.resolve(),charProcs=this.dict.get("CharProcs"),fontResources=this.dict.get("Resources")||resources,charProcOperatorList=Object.create(null),_iterator46=_createForOfIteratorHelper(charProcs.getKeys());try{var _loop5=function(){var key=_step46.value;loadCharProcsPromise=loadCharProcsPromise.then((function(){var glyphStream=charProcs.get(key),operatorList=new _operator_list.OperatorList;return type3Evaluator.getOperatorList({stream:glyphStream,task:task,resources:fontResources,operatorList:operatorList}).then((function(){operatorList.fnArray[0]===_util.OPS.setCharWidthAndBounds&&_this69._removeType3ColorOperators(operatorList),charProcOperatorList[key]=operatorList.getIR();var _step47,_iterator47=_createForOfIteratorHelper(operatorList.dependencies);try{for(_iterator47.s();!(_step47=_iterator47.n()).done;){var dependency=_step47.value;type3Dependencies.add(dependency)}}catch(err){_iterator47.e(err)}finally{_iterator47.f()}})).catch((function(reason){(0,_util.warn)('Type3 font resource "'.concat(key,'" is not available.'));var dummyOperatorList=new _operator_list.OperatorList;charProcOperatorList[key]=dummyOperatorList.getIR()}))}))};for(_iterator46.s();!(_step46=_iterator46.n()).done;)_loop5()}catch(err){_iterator46.e(err)}finally{_iterator46.f()}return this.type3Loaded=loadCharProcsPromise.then((function(){translatedFont.charProcOperatorList=charProcOperatorList})),this.type3Loaded}},{key:"_removeType3ColorOperators",value:function(operatorList){for(var i=1,ii=operatorList.length;i<ii;){switch(operatorList.fnArray[i]){case _util.OPS.setStrokeColorSpace:case _util.OPS.setFillColorSpace:case _util.OPS.setStrokeColor:case _util.OPS.setStrokeColorN:case _util.OPS.setFillColor:case _util.OPS.setFillColorN:case _util.OPS.setStrokeGray:case _util.OPS.setFillGray:case _util.OPS.setStrokeRGBColor:case _util.OPS.setFillRGBColor:case _util.OPS.setStrokeCMYKColor:case _util.OPS.setFillCMYKColor:case _util.OPS.shadingFill:case _util.OPS.setRenderingIntent:operatorList.fnArray.splice(i,1),operatorList.argsArray.splice(i,1),ii--;continue;case _util.OPS.setGState:for(var _gStateObj=_slicedToArray(operatorList.argsArray[i],1)[0],j=0,jj=_gStateObj.length;j<jj;){switch(_slicedToArray(_gStateObj[j],1)[0]){case"TR":case"TR2":case"HT":case"BG":case"BG2":case"UCR":case"UCR2":_gStateObj.splice(j,1),jj--;continue}j++}}i++}}}]),TranslatedFont}(),StateManager=function(){function StateManager(){var initialState=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new EvalState;_classCallCheck(this,StateManager),this.state=initialState,this.stateStack=[]}return _createClass(StateManager,[{key:"save",value:function(){var old=this.state;this.stateStack.push(this.state),this.state=old.clone()}},{key:"restore",value:function(){var prev=this.stateStack.pop();prev&&(this.state=prev)}},{key:"transform",value:function(args){this.state.ctm=_util.Util.transform(this.state.ctm,args)}}]),StateManager}(),TextState=function(){function TextState(){_classCallCheck(this,TextState),this.ctm=new Float32Array(_util.IDENTITY_MATRIX),this.fontName=null,this.fontSize=0,this.font=null,this.fontMatrix=_util.FONT_IDENTITY_MATRIX,this.textMatrix=_util.IDENTITY_MATRIX.slice(),this.textLineMatrix=_util.IDENTITY_MATRIX.slice(),this.charSpacing=0,this.wordSpacing=0,this.leading=0,this.textHScale=1,this.textRise=0}return _createClass(TextState,[{key:"setTextMatrix",value:function(a,b,c,d,e,f){var m=this.textMatrix;m[0]=a,m[1]=b,m[2]=c,m[3]=d,m[4]=e,m[5]=f}},{key:"setTextLineMatrix",value:function(a,b,c,d,e,f){var m=this.textLineMatrix;m[0]=a,m[1]=b,m[2]=c,m[3]=d,m[4]=e,m[5]=f}},{key:"translateTextMatrix",value:function(x,y){var m=this.textMatrix;m[4]=m[0]*x+m[2]*y+m[4],m[5]=m[1]*x+m[3]*y+m[5]}},{key:"translateTextLineMatrix",value:function(x,y){var m=this.textLineMatrix;m[4]=m[0]*x+m[2]*y+m[4],m[5]=m[1]*x+m[3]*y+m[5]}},{key:"calcTextLineMatrixAdvance",value:function(a,b,c,d,e,f){var font=this.font;if(!font)return null;var m=this.textLineMatrix;if(a!==m[0]||b!==m[1]||c!==m[2]||d!==m[3])return null;var txDiff=e-m[4],tyDiff=f-m[5];if(font.vertical&&0!==txDiff||!font.vertical&&0!==tyDiff)return null;var tx,ty,denominator=a*d-b*c;return font.vertical?(tx=-tyDiff*c/denominator,ty=tyDiff*a/denominator):(tx=txDiff*d/denominator,ty=-txDiff*b/denominator),{width:tx,height:ty,value:font.vertical?ty:tx}}},{key:"calcRenderMatrix",value:function(ctm){var tsm=[this.fontSize*this.textHScale,0,0,this.fontSize,0,this.textRise];return _util.Util.transform(ctm,_util.Util.transform(this.textMatrix,tsm))}},{key:"carriageReturn",value:function(){this.translateTextLineMatrix(0,-this.leading),this.textMatrix=this.textLineMatrix.slice()}},{key:"clone",value:function(){var clone=Object.create(this);return clone.textMatrix=this.textMatrix.slice(),clone.textLineMatrix=this.textLineMatrix.slice(),clone.fontMatrix=this.fontMatrix.slice(),clone}}]),TextState}(),EvalState=function(){function EvalState(){_classCallCheck(this,EvalState),this.ctm=new Float32Array(_util.IDENTITY_MATRIX),this.font=null,this.textRenderingMode=_util.TextRenderingMode.FILL,this.fillColorSpace=_colorspace.ColorSpace.singletons.gray,this.strokeColorSpace=_colorspace.ColorSpace.singletons.gray}return _createClass(EvalState,[{key:"clone",value:function(){return Object.create(this)}}]),EvalState}(),EvaluatorPreprocessor=function(){function EvaluatorPreprocessor(stream,xref){var stateManager=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new StateManager;_classCallCheck(this,EvaluatorPreprocessor),this.parser=new _parser.Parser({lexer:new _parser.Lexer(stream,EvaluatorPreprocessor.opMap),xref:xref}),this.stateManager=stateManager,this.nonProcessedArgs=[],this._numInvalidPathOPS=0}return _createClass(EvaluatorPreprocessor,[{key:"savedStatesDepth",get:function(){return this.stateManager.stateStack.length}},{key:"read",value:function(operation){for(var args=operation.args;;){var obj=this.parser.getObj();if(obj instanceof _primitives.Cmd){var cmd=obj.cmd,opSpec=EvaluatorPreprocessor.opMap[cmd];if(!opSpec){(0,_util.warn)('Unknown command "'.concat(cmd,'".'));continue}var fn=opSpec.id,numArgs=opSpec.numArgs,argsLength=null!==args?args.length:0;if(opSpec.variableArgs)argsLength>numArgs&&(0,_util.info)("Command ".concat(cmd,": expected [0, ").concat(numArgs,"] args, ")+"but received ".concat(argsLength," args."));else{if(argsLength!==numArgs){for(var nonProcessedArgs=this.nonProcessedArgs;argsLength>numArgs;)nonProcessedArgs.push(args.shift()),argsLength--;for(;argsLength<numArgs&&0!==nonProcessedArgs.length;)null===args&&(args=[]),args.unshift(nonProcessedArgs.pop()),argsLength++}if(argsLength<numArgs){var partialMsg="command ".concat(cmd,": expected ").concat(numArgs," args, ")+"but received ".concat(argsLength," args.");if(fn>=_util.OPS.moveTo&&fn<=_util.OPS.endPath&&++this._numInvalidPathOPS>EvaluatorPreprocessor.MAX_INVALID_PATH_OPS)throw new _util.FormatError("Invalid ".concat(partialMsg));(0,_util.warn)("Skipping ".concat(partialMsg)),null!==args&&(args.length=0);continue}}return this.preprocessCommand(fn,args),operation.fn=fn,operation.args=args,!0}if(obj===_primitives.EOF)return!1;if(null!==obj&&(null===args&&(args=[]),args.push(obj),args.length>33))throw new _util.FormatError("Too many arguments")}}},{key:"preprocessCommand",value:function(fn,args){switch(0|fn){case _util.OPS.save:this.stateManager.save();break;case _util.OPS.restore:this.stateManager.restore();break;case _util.OPS.transform:this.stateManager.transform(args)}}}],[{key:"opMap",get:function(){var getOPMap=(0,_core_utils.getLookupTableFactory)((function(t){t.w={id:_util.OPS.setLineWidth,numArgs:1,variableArgs:!1},t.J={id:_util.OPS.setLineCap,numArgs:1,variableArgs:!1},t.j={id:_util.OPS.setLineJoin,numArgs:1,variableArgs:!1},t.M={id:_util.OPS.setMiterLimit,numArgs:1,variableArgs:!1},t.d={id:_util.OPS.setDash,numArgs:2,variableArgs:!1},t.ri={id:_util.OPS.setRenderingIntent,numArgs:1,variableArgs:!1},t.i={id:_util.OPS.setFlatness,numArgs:1,variableArgs:!1},t.gs={id:_util.OPS.setGState,numArgs:1,variableArgs:!1},t.q={id:_util.OPS.save,numArgs:0,variableArgs:!1},t.Q={id:_util.OPS.restore,numArgs:0,variableArgs:!1},t.cm={id:_util.OPS.transform,numArgs:6,variableArgs:!1},t.m={id:_util.OPS.moveTo,numArgs:2,variableArgs:!1},t.l={id:_util.OPS.lineTo,numArgs:2,variableArgs:!1},t.c={id:_util.OPS.curveTo,numArgs:6,variableArgs:!1},t.v={id:_util.OPS.curveTo2,numArgs:4,variableArgs:!1},t.y={id:_util.OPS.curveTo3,numArgs:4,variableArgs:!1},t.h={id:_util.OPS.closePath,numArgs:0,variableArgs:!1},t.re={id:_util.OPS.rectangle,numArgs:4,variableArgs:!1},t.S={id:_util.OPS.stroke,numArgs:0,variableArgs:!1},t.s={id:_util.OPS.closeStroke,numArgs:0,variableArgs:!1},t.f={id:_util.OPS.fill,numArgs:0,variableArgs:!1},t.F={id:_util.OPS.fill,numArgs:0,variableArgs:!1},t["f*"]={id:_util.OPS.eoFill,numArgs:0,variableArgs:!1},t.B={id:_util.OPS.fillStroke,numArgs:0,variableArgs:!1},t["B*"]={id:_util.OPS.eoFillStroke,numArgs:0,variableArgs:!1},t.b={id:_util.OPS.closeFillStroke,numArgs:0,variableArgs:!1},t["b*"]={id:_util.OPS.closeEOFillStroke,numArgs:0,variableArgs:!1},t.n={id:_util.OPS.endPath,numArgs:0,variableArgs:!1},t.W={id:_util.OPS.clip,numArgs:0,variableArgs:!1},t["W*"]={id:_util.OPS.eoClip,numArgs:0,variableArgs:!1},t.BT={id:_util.OPS.beginText,numArgs:0,variableArgs:!1},t.ET={id:_util.OPS.endText,numArgs:0,variableArgs:!1},t.Tc={id:_util.OPS.setCharSpacing,numArgs:1,variableArgs:!1},t.Tw={id:_util.OPS.setWordSpacing,numArgs:1,variableArgs:!1},t.Tz={id:_util.OPS.setHScale,numArgs:1,variableArgs:!1},t.TL={id:_util.OPS.setLeading,numArgs:1,variableArgs:!1},t.Tf={id:_util.OPS.setFont,numArgs:2,variableArgs:!1},t.Tr={id:_util.OPS.setTextRenderingMode,numArgs:1,variableArgs:!1},t.Ts={id:_util.OPS.setTextRise,numArgs:1,variableArgs:!1},t.Td={id:_util.OPS.moveText,numArgs:2,variableArgs:!1},t.TD={id:_util.OPS.setLeadingMoveText,numArgs:2,variableArgs:!1},t.Tm={id:_util.OPS.setTextMatrix,numArgs:6,variableArgs:!1},t["T*"]={id:_util.OPS.nextLine,numArgs:0,variableArgs:!1},t.Tj={id:_util.OPS.showText,numArgs:1,variableArgs:!1},t.TJ={id:_util.OPS.showSpacedText,numArgs:1,variableArgs:!1},t["'"]={id:_util.OPS.nextLineShowText,numArgs:1,variableArgs:!1},t['"']={id:_util.OPS.nextLineSetSpacingShowText,numArgs:3,variableArgs:!1},t.d0={id:_util.OPS.setCharWidth,numArgs:2,variableArgs:!1},t.d1={id:_util.OPS.setCharWidthAndBounds,numArgs:6,variableArgs:!1},t.CS={id:_util.OPS.setStrokeColorSpace,numArgs:1,variableArgs:!1},t.cs={id:_util.OPS.setFillColorSpace,numArgs:1,variableArgs:!1},t.SC={id:_util.OPS.setStrokeColor,numArgs:4,variableArgs:!0},t.SCN={id:_util.OPS.setStrokeColorN,numArgs:33,variableArgs:!0},t.sc={id:_util.OPS.setFillColor,numArgs:4,variableArgs:!0},t.scn={id:_util.OPS.setFillColorN,numArgs:33,variableArgs:!0},t.G={id:_util.OPS.setStrokeGray,numArgs:1,variableArgs:!1},t.g={id:_util.OPS.setFillGray,numArgs:1,variableArgs:!1},t.RG={id:_util.OPS.setStrokeRGBColor,numArgs:3,variableArgs:!1},t.rg={id:_util.OPS.setFillRGBColor,numArgs:3,variableArgs:!1},t.K={id:_util.OPS.setStrokeCMYKColor,numArgs:4,variableArgs:!1},t.k={id:_util.OPS.setFillCMYKColor,numArgs:4,variableArgs:!1},t.sh={id:_util.OPS.shadingFill,numArgs:1,variableArgs:!1},t.BI={id:_util.OPS.beginInlineImage,numArgs:0,variableArgs:!1},t.ID={id:_util.OPS.beginImageData,numArgs:0,variableArgs:!1},t.EI={id:_util.OPS.endInlineImage,numArgs:1,variableArgs:!1},t.Do={id:_util.OPS.paintXObject,numArgs:1,variableArgs:!1},t.MP={id:_util.OPS.markPoint,numArgs:1,variableArgs:!1},t.DP={id:_util.OPS.markPointProps,numArgs:2,variableArgs:!1},t.BMC={id:_util.OPS.beginMarkedContent,numArgs:1,variableArgs:!1},t.BDC={id:_util.OPS.beginMarkedContentProps,numArgs:2,variableArgs:!1},t.EMC={id:_util.OPS.endMarkedContent,numArgs:0,variableArgs:!1},t.BX={id:_util.OPS.beginCompat,numArgs:0,variableArgs:!1},t.EX={id:_util.OPS.endCompat,numArgs:0,variableArgs:!1},t.BM=null,t.BD=null,t.true=null,t.fa=null,t.fal=null,t.fals=null,t.false=null,t.nu=null,t.nul=null,t.null=null}));return(0,_util.shadow)(this,"opMap",getOPMap())}},{key:"MAX_INVALID_PATH_OPS",get:function(){return(0,_util.shadow)(this,"MAX_INVALID_PATH_OPS",20)}}]),EvaluatorPreprocessor}();exports.EvaluatorPreprocessor=EvaluatorPreprocessor},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.IdentityCMap=exports.CMapFactory=exports.CMap=void 0;var _util=__w_pdfjs_require__(2),_primitives=__w_pdfjs_require__(5),_parser=__w_pdfjs_require__(11),_core_utils=__w_pdfjs_require__(8),_stream=__w_pdfjs_require__(12),BUILT_IN_CMAPS=["Adobe-GB1-UCS2","Adobe-CNS1-UCS2","Adobe-Japan1-UCS2","Adobe-Korea1-UCS2","78-EUC-H","78-EUC-V","78-H","78-RKSJ-H","78-RKSJ-V","78-V","78ms-RKSJ-H","78ms-RKSJ-V","83pv-RKSJ-H","90ms-RKSJ-H","90ms-RKSJ-V","90msp-RKSJ-H","90msp-RKSJ-V","90pv-RKSJ-H","90pv-RKSJ-V","Add-H","Add-RKSJ-H","Add-RKSJ-V","Add-V","Adobe-CNS1-0","Adobe-CNS1-1","Adobe-CNS1-2","Adobe-CNS1-3","Adobe-CNS1-4","Adobe-CNS1-5","Adobe-CNS1-6","Adobe-GB1-0","Adobe-GB1-1","Adobe-GB1-2","Adobe-GB1-3","Adobe-GB1-4","Adobe-GB1-5","Adobe-Japan1-0","Adobe-Japan1-1","Adobe-Japan1-2","Adobe-Japan1-3","Adobe-Japan1-4","Adobe-Japan1-5","Adobe-Japan1-6","Adobe-Korea1-0","Adobe-Korea1-1","Adobe-Korea1-2","B5-H","B5-V","B5pc-H","B5pc-V","CNS-EUC-H","CNS-EUC-V","CNS1-H","CNS1-V","CNS2-H","CNS2-V","ETHK-B5-H","ETHK-B5-V","ETen-B5-H","ETen-B5-V","ETenms-B5-H","ETenms-B5-V","EUC-H","EUC-V","Ext-H","Ext-RKSJ-H","Ext-RKSJ-V","Ext-V","GB-EUC-H","GB-EUC-V","GB-H","GB-V","GBK-EUC-H","GBK-EUC-V","GBK2K-H","GBK2K-V","GBKp-EUC-H","GBKp-EUC-V","GBT-EUC-H","GBT-EUC-V","GBT-H","GBT-V","GBTpc-EUC-H","GBTpc-EUC-V","GBpc-EUC-H","GBpc-EUC-V","H","HKdla-B5-H","HKdla-B5-V","HKdlb-B5-H","HKdlb-B5-V","HKgccs-B5-H","HKgccs-B5-V","HKm314-B5-H","HKm314-B5-V","HKm471-B5-H","HKm471-B5-V","HKscs-B5-H","HKscs-B5-V","Hankaku","Hiragana","KSC-EUC-H","KSC-EUC-V","KSC-H","KSC-Johab-H","KSC-Johab-V","KSC-V","KSCms-UHC-H","KSCms-UHC-HW-H","KSCms-UHC-HW-V","KSCms-UHC-V","KSCpc-EUC-H","KSCpc-EUC-V","Katakana","NWP-H","NWP-V","RKSJ-H","RKSJ-V","Roman","UniCNS-UCS2-H","UniCNS-UCS2-V","UniCNS-UTF16-H","UniCNS-UTF16-V","UniCNS-UTF32-H","UniCNS-UTF32-V","UniCNS-UTF8-H","UniCNS-UTF8-V","UniGB-UCS2-H","UniGB-UCS2-V","UniGB-UTF16-H","UniGB-UTF16-V","UniGB-UTF32-H","UniGB-UTF32-V","UniGB-UTF8-H","UniGB-UTF8-V","UniJIS-UCS2-H","UniJIS-UCS2-HW-H","UniJIS-UCS2-HW-V","UniJIS-UCS2-V","UniJIS-UTF16-H","UniJIS-UTF16-V","UniJIS-UTF32-H","UniJIS-UTF32-V","UniJIS-UTF8-H","UniJIS-UTF8-V","UniJIS2004-UTF16-H","UniJIS2004-UTF16-V","UniJIS2004-UTF32-H","UniJIS2004-UTF32-V","UniJIS2004-UTF8-H","UniJIS2004-UTF8-V","UniJISPro-UCS2-HW-V","UniJISPro-UCS2-V","UniJISPro-UTF8-V","UniJISX0213-UTF32-H","UniJISX0213-UTF32-V","UniJISX02132004-UTF32-H","UniJISX02132004-UTF32-V","UniKS-UCS2-H","UniKS-UCS2-V","UniKS-UTF16-H","UniKS-UTF16-V","UniKS-UTF32-H","UniKS-UTF32-V","UniKS-UTF8-H","UniKS-UTF8-V","V","WP-Symbol"],MAX_MAP_RANGE=Math.pow(2,24)-1,CMap=function(){function CMap(){var builtInCMap=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_classCallCheck(this,CMap),this.codespaceRanges=[[],[],[],[]],this.numCodespaceRanges=0,this._map=[],this.name="",this.vertical=!1,this.useCMap=null,this.builtInCMap=builtInCMap}return _createClass(CMap,[{key:"addCodespaceRange",value:function(n,low,high){this.codespaceRanges[n-1].push(low,high),this.numCodespaceRanges++}},{key:"mapCidRange",value:function(low,high,dstLow){if(high-low>MAX_MAP_RANGE)throw new Error("mapCidRange - ignoring data above MAX_MAP_RANGE.");for(;low<=high;)this._map[low++]=dstLow++}},{key:"mapBfRange",value:function(low,high,dstLow){if(high-low>MAX_MAP_RANGE)throw new Error("mapBfRange - ignoring data above MAX_MAP_RANGE.");for(var lastByte=dstLow.length-1;low<=high;)this._map[low++]=dstLow,dstLow=dstLow.substring(0,lastByte)+String.fromCharCode(dstLow.charCodeAt(lastByte)+1)}},{key:"mapBfRangeToArray",value:function(low,high,array){if(high-low>MAX_MAP_RANGE)throw new Error("mapBfRangeToArray - ignoring data above MAX_MAP_RANGE.");for(var ii=array.length,i=0;low<=high&&i<ii;)this._map[low]=array[i++],++low}},{key:"mapOne",value:function(src,dst){this._map[src]=dst}},{key:"lookup",value:function(code){return this._map[code]}},{key:"contains",value:function(code){return void 0!==this._map[code]}},{key:"forEach",value:function(callback){var map=this._map,length=map.length;if(length<=65536)for(var _i26=0;_i26<length;_i26++)void 0!==map[_i26]&&callback(_i26,map[_i26]);else for(var _i27 in map)callback(_i27,map[_i27])}},{key:"charCodeOf",value:function(value){var map=this._map;if(map.length<=65536)return map.indexOf(value);for(var charCode in map)if(map[charCode]===value)return 0|charCode;return-1}},{key:"getMap",value:function(){return this._map}},{key:"readCharCode",value:function(str,offset,out){for(var c=0,codespaceRanges=this.codespaceRanges,n=0,nn=codespaceRanges.length;n<nn;n++){c=(c<<8|str.charCodeAt(offset+n))>>>0;for(var codespaceRange=codespaceRanges[n],k=0,kk=codespaceRange.length;k<kk;){var low=codespaceRange[k++],high=codespaceRange[k++];if(c>=low&&c<=high)return out.charcode=c,void(out.length=n+1)}}out.charcode=0,out.length=1}},{key:"getCharCodeLength",value:function(charCode){for(var codespaceRanges=this.codespaceRanges,n=0,nn=codespaceRanges.length;n<nn;n++)for(var codespaceRange=codespaceRanges[n],k=0,kk=codespaceRange.length;k<kk;){var low=codespaceRange[k++],high=codespaceRange[k++];if(charCode>=low&&charCode<=high)return n+1}return 1}},{key:"length",get:function(){return this._map.length}},{key:"isIdentityCMap",get:function(){if("Identity-H"!==this.name&&"Identity-V"!==this.name)return!1;if(65536!==this._map.length)return!1;for(var _i28=0;_i28<65536;_i28++)if(this._map[_i28]!==_i28)return!1;return!0}}]),CMap}();exports.CMap=CMap;var IdentityCMap=function(_CMap){_inherits(IdentityCMap,_CMap);var _super60=_createSuper(IdentityCMap);function IdentityCMap(vertical,n){var _this70;return _classCallCheck(this,IdentityCMap),(_this70=_super60.call(this)).vertical=vertical,_this70.addCodespaceRange(n,0,65535),_this70}return _createClass(IdentityCMap,[{key:"mapCidRange",value:function(low,high,dstLow){(0,_util.unreachable)("should not call mapCidRange")}},{key:"mapBfRange",value:function(low,high,dstLow){(0,_util.unreachable)("should not call mapBfRange")}},{key:"mapBfRangeToArray",value:function(low,high,array){(0,_util.unreachable)("should not call mapBfRangeToArray")}},{key:"mapOne",value:function(src,dst){(0,_util.unreachable)("should not call mapCidOne")}},{key:"lookup",value:function(code){return Number.isInteger(code)&&code<=65535?code:void 0}},{key:"contains",value:function(code){return Number.isInteger(code)&&code<=65535}},{key:"forEach",value:function(callback){for(var _i29=0;_i29<=65535;_i29++)callback(_i29,_i29)}},{key:"charCodeOf",value:function(value){return Number.isInteger(value)&&value<=65535?value:-1}},{key:"getMap",value:function(){for(var map=new Array(65536),_i30=0;_i30<=65535;_i30++)map[_i30]=_i30;return map}},{key:"length",get:function(){return 65536}},{key:"isIdentityCMap",get:function(){(0,_util.unreachable)("should not access .isIdentityCMap")}}]),IdentityCMap}(CMap);exports.IdentityCMap=IdentityCMap;var BinaryCMapReader=function(){function hexToInt(a,size){for(var n=0,i=0;i<=size;i++)n=n<<8|a[i];return n>>>0}function hexToStr(a,size){return 1===size?String.fromCharCode(a[0],a[1]):3===size?String.fromCharCode(a[0],a[1],a[2],a[3]):String.fromCharCode.apply(null,a.subarray(0,size+1))}function addHex(a,b,size){for(var c=0,i=size;i>=0;i--)c+=a[i]+b[i],a[i]=255&c,c>>=8}function incHex(a,size){for(var c=1,i=size;i>=0&&c>0;i--)c+=a[i],a[i]=255&c,c>>=8}function BinaryCMapStream(data){this.buffer=data,this.pos=0,this.end=data.length,this.tmpBuf=new Uint8Array(19)}function BinaryCMapReader(){}return BinaryCMapStream.prototype={readByte:function(){return this.pos>=this.end?-1:this.buffer[this.pos++]},readNumber:function(){var last,n=0;do{var b=this.readByte();if(b<0)throw new _util.FormatError("unexpected EOF in bcmap");last=!(128&b),n=n<<7|127&b}while(!last);return n},readSigned:function(){var n=this.readNumber();return 1&n?~(n>>>1):n>>>1},readHex:function(num,size){num.set(this.buffer.subarray(this.pos,this.pos+size+1)),this.pos+=size+1},readHexNumber:function(num,size){var last,stack=this.tmpBuf,sp=0;do{var b=this.readByte();if(b<0)throw new _util.FormatError("unexpected EOF in bcmap");last=!(128&b),stack[sp++]=127&b}while(!last);for(var i=size,buffer=0,bufferSize=0;i>=0;){for(;bufferSize<8&&stack.length>0;)buffer=stack[--sp]<<bufferSize|buffer,bufferSize+=7;num[i]=255&buffer,i--,buffer>>=8,bufferSize-=8}},readHexSigned:function(num,size){this.readHexNumber(num,size);for(var sign=1&num[size]?255:0,c=0,i=0;i<=size;i++)c=(1&c)<<8|num[i],num[i]=c>>1^sign},readString:function(){for(var len=this.readNumber(),s="",i=0;i<len;i++)s+=String.fromCharCode(this.readNumber());return s}},BinaryCMapReader.prototype={process:function(data,cMap,extend){return new Promise((function(resolve,reject){var stream=new BinaryCMapStream(data),header=stream.readByte();cMap.vertical=!!(1&header);for(var code,b,useCMap=null,start=new Uint8Array(16),end=new Uint8Array(16),char=new Uint8Array(16),charCode=new Uint8Array(16),tmp=new Uint8Array(16);(b=stream.readByte())>=0;){var type=b>>5;if(7!==type){var sequence=!!(16&b),dataSize=15&b;if(dataSize+1>16)throw new Error("processBinaryCMap: Invalid dataSize.");var i,subitemsCount=stream.readNumber();switch(type){case 0:for(stream.readHex(start,dataSize),stream.readHexNumber(end,dataSize),addHex(end,start,dataSize),cMap.addCodespaceRange(dataSize+1,hexToInt(start,dataSize),hexToInt(end,dataSize)),i=1;i<subitemsCount;i++)incHex(end,dataSize),stream.readHexNumber(start,dataSize),addHex(start,end,dataSize),stream.readHexNumber(end,dataSize),addHex(end,start,dataSize),cMap.addCodespaceRange(dataSize+1,hexToInt(start,dataSize),hexToInt(end,dataSize));break;case 1:for(stream.readHex(start,dataSize),stream.readHexNumber(end,dataSize),addHex(end,start,dataSize),stream.readNumber(),i=1;i<subitemsCount;i++)incHex(end,dataSize),stream.readHexNumber(start,dataSize),addHex(start,end,dataSize),stream.readHexNumber(end,dataSize),addHex(end,start,dataSize),stream.readNumber();break;case 2:for(stream.readHex(char,dataSize),code=stream.readNumber(),cMap.mapOne(hexToInt(char,dataSize),code),i=1;i<subitemsCount;i++)incHex(char,dataSize),sequence||(stream.readHexNumber(tmp,dataSize),addHex(char,tmp,dataSize)),code=stream.readSigned()+(code+1),cMap.mapOne(hexToInt(char,dataSize),code);break;case 3:for(stream.readHex(start,dataSize),stream.readHexNumber(end,dataSize),addHex(end,start,dataSize),code=stream.readNumber(),cMap.mapCidRange(hexToInt(start,dataSize),hexToInt(end,dataSize),code),i=1;i<subitemsCount;i++)incHex(end,dataSize),sequence?start.set(end):(stream.readHexNumber(start,dataSize),addHex(start,end,dataSize)),stream.readHexNumber(end,dataSize),addHex(end,start,dataSize),code=stream.readNumber(),cMap.mapCidRange(hexToInt(start,dataSize),hexToInt(end,dataSize),code);break;case 4:for(stream.readHex(char,1),stream.readHex(charCode,dataSize),cMap.mapOne(hexToInt(char,1),hexToStr(charCode,dataSize)),i=1;i<subitemsCount;i++)incHex(char,1),sequence||(stream.readHexNumber(tmp,1),addHex(char,tmp,1)),incHex(charCode,dataSize),stream.readHexSigned(tmp,dataSize),addHex(charCode,tmp,dataSize),cMap.mapOne(hexToInt(char,1),hexToStr(charCode,dataSize));break;case 5:for(stream.readHex(start,1),stream.readHexNumber(end,1),addHex(end,start,1),stream.readHex(charCode,dataSize),cMap.mapBfRange(hexToInt(start,1),hexToInt(end,1),hexToStr(charCode,dataSize)),i=1;i<subitemsCount;i++)incHex(end,1),sequence?start.set(end):(stream.readHexNumber(start,1),addHex(start,end,1)),stream.readHexNumber(end,1),addHex(end,start,1),stream.readHex(charCode,dataSize),cMap.mapBfRange(hexToInt(start,1),hexToInt(end,1),hexToStr(charCode,dataSize));break;default:return void reject(new Error("processBinaryCMap: Unknown type: "+type))}}else switch(31&b){case 0:stream.readString();break;case 1:useCMap=stream.readString()}}resolve(useCMap?extend(useCMap):cMap)}))}},BinaryCMapReader}(),CMapFactory=function(){function strToInt(str){for(var a=0,i=0;i<str.length;i++)a=a<<8|str.charCodeAt(i);return a>>>0}function expectString(obj){if(!(0,_util.isString)(obj))throw new _util.FormatError("Malformed CMap: expected string.")}function expectInt(obj){if(!Number.isInteger(obj))throw new _util.FormatError("Malformed CMap: expected int.")}function parseBfChar(cMap,lexer){for(;;){var obj=lexer.getObj();if((0,_primitives.isEOF)(obj))break;if((0,_primitives.isCmd)(obj,"endbfchar"))return;expectString(obj);var src=strToInt(obj);expectString(obj=lexer.getObj());var dst=obj;cMap.mapOne(src,dst)}}function parseBfRange(cMap,lexer){for(;;){var obj=lexer.getObj();if((0,_primitives.isEOF)(obj))break;if((0,_primitives.isCmd)(obj,"endbfrange"))return;expectString(obj);var low=strToInt(obj);expectString(obj=lexer.getObj());var high=strToInt(obj);if(obj=lexer.getObj(),Number.isInteger(obj)||(0,_util.isString)(obj)){var dstLow=Number.isInteger(obj)?String.fromCharCode(obj):obj;cMap.mapBfRange(low,high,dstLow)}else{if(!(0,_primitives.isCmd)(obj,"["))break;obj=lexer.getObj();for(var array=[];!(0,_primitives.isCmd)(obj,"]")&&!(0,_primitives.isEOF)(obj);)array.push(obj),obj=lexer.getObj();cMap.mapBfRangeToArray(low,high,array)}}throw new _util.FormatError("Invalid bf range.")}function parseCidChar(cMap,lexer){for(;;){var obj=lexer.getObj();if((0,_primitives.isEOF)(obj))break;if((0,_primitives.isCmd)(obj,"endcidchar"))return;expectString(obj);var src=strToInt(obj);expectInt(obj=lexer.getObj());var dst=obj;cMap.mapOne(src,dst)}}function parseCidRange(cMap,lexer){for(;;){var obj=lexer.getObj();if((0,_primitives.isEOF)(obj))break;if((0,_primitives.isCmd)(obj,"endcidrange"))return;expectString(obj);var low=strToInt(obj);expectString(obj=lexer.getObj());var high=strToInt(obj);expectInt(obj=lexer.getObj());var dstLow=obj;cMap.mapCidRange(low,high,dstLow)}}function parseCodespaceRange(cMap,lexer){for(;;){var obj=lexer.getObj();if((0,_primitives.isEOF)(obj))break;if((0,_primitives.isCmd)(obj,"endcodespacerange"))return;if(!(0,_util.isString)(obj))break;var low=strToInt(obj);if(obj=lexer.getObj(),!(0,_util.isString)(obj))break;var high=strToInt(obj);cMap.addCodespaceRange(obj.length,low,high)}throw new _util.FormatError("Invalid codespace range.")}function parseWMode(cMap,lexer){var obj=lexer.getObj();Number.isInteger(obj)&&(cMap.vertical=!!obj)}function parseCMapName(cMap,lexer){var obj=lexer.getObj();(0,_primitives.isName)(obj)&&(0,_util.isString)(obj.name)&&(cMap.name=obj.name)}function parseCMap(cMap,lexer,fetchBuiltInCMap,useCMap){var previous,embeddedUseCMap;objLoop:for(;;)try{var obj=lexer.getObj();if((0,_primitives.isEOF)(obj))break;if((0,_primitives.isName)(obj))"WMode"===obj.name?parseWMode(cMap,lexer):"CMapName"===obj.name&&parseCMapName(cMap,lexer),previous=obj;else if((0,_primitives.isCmd)(obj))switch(obj.cmd){case"endcmap":break objLoop;case"usecmap":(0,_primitives.isName)(previous)&&(embeddedUseCMap=previous.name);break;case"begincodespacerange":parseCodespaceRange(cMap,lexer);break;case"beginbfchar":parseBfChar(cMap,lexer);break;case"begincidchar":parseCidChar(cMap,lexer);break;case"beginbfrange":parseBfRange(cMap,lexer);break;case"begincidrange":parseCidRange(cMap,lexer)}}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util.warn)("Invalid cMap data: "+ex);continue}return!useCMap&&embeddedUseCMap&&(useCMap=embeddedUseCMap),useCMap?extendCMap(cMap,fetchBuiltInCMap,useCMap):Promise.resolve(cMap)}function extendCMap(cMap,fetchBuiltInCMap,useCMap){return createBuiltInCMap(useCMap,fetchBuiltInCMap).then((function(newCMap){if(cMap.useCMap=newCMap,0===cMap.numCodespaceRanges){for(var useCodespaceRanges=cMap.useCMap.codespaceRanges,i=0;i<useCodespaceRanges.length;i++)cMap.codespaceRanges[i]=useCodespaceRanges[i].slice();cMap.numCodespaceRanges=cMap.useCMap.numCodespaceRanges}return cMap.useCMap.forEach((function(key,value){cMap.contains(key)||cMap.mapOne(key,cMap.useCMap.lookup(key))})),cMap}))}function createBuiltInCMap(name,fetchBuiltInCMap){return"Identity-H"===name?Promise.resolve(new IdentityCMap(!1,2)):"Identity-V"===name?Promise.resolve(new IdentityCMap(!0,2)):BUILT_IN_CMAPS.includes(name)?fetchBuiltInCMap?fetchBuiltInCMap(name).then((function(data){var cMapData=data.cMapData,compressionType=data.compressionType,cMap=new CMap(!0);if(compressionType===_util.CMapCompressionType.BINARY)return(new BinaryCMapReader).process(cMapData,cMap,(function(useCMap){return extendCMap(cMap,fetchBuiltInCMap,useCMap)}));if(compressionType===_util.CMapCompressionType.NONE){var lexer=new _parser.Lexer(new _stream.Stream(cMapData));return parseCMap(cMap,lexer,fetchBuiltInCMap,null)}return Promise.reject(new Error("TODO: Only BINARY/NONE CMap compression is currently supported."))})):Promise.reject(new Error("Built-in CMap parameters are not provided.")):Promise.reject(new Error("Unknown CMap name: "+name))}return{create:function(params){return _asyncToGenerator(regeneratorRuntime.mark((function _callee27(){var encoding,fetchBuiltInCMap,useCMap,cMap,lexer;return regeneratorRuntime.wrap((function(_context27){for(;;)switch(_context27.prev=_context27.next){case 0:if(encoding=params.encoding,fetchBuiltInCMap=params.fetchBuiltInCMap,useCMap=params.useCMap,!(0,_primitives.isName)(encoding)){_context27.next=7;break}return _context27.abrupt("return",createBuiltInCMap(encoding.name,fetchBuiltInCMap));case 7:if(!(0,_primitives.isStream)(encoding)){_context27.next=11;break}return cMap=new CMap,lexer=new _parser.Lexer(encoding),_context27.abrupt("return",parseCMap(cMap,lexer,fetchBuiltInCMap,useCMap).then((function(parsedCMap){return parsedCMap.isIdentityCMap?createBuiltInCMap(parsedCMap.name,fetchBuiltInCMap):parsedCMap})));case 11:throw new Error("Encoding required.");case 12:case"end":return _context27.stop()}}),_callee27)})))()}}}();exports.CMapFactory=CMapFactory},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFontType=getFontType,exports.ToUnicodeMap=exports.SEAC_ANALYSIS_ENABLED=exports.IdentityToUnicodeMap=exports.FontFlags=exports.Font=exports.ErrorFont=void 0;var _util=__w_pdfjs_require__(2),_cff_parser=__w_pdfjs_require__(30),_glyphlist=__w_pdfjs_require__(33),_encodings=__w_pdfjs_require__(32),_standard_fonts=__w_pdfjs_require__(34),_unicode=__w_pdfjs_require__(35),_core_utils=__w_pdfjs_require__(8),_font_renderer=__w_pdfjs_require__(36),_cmap=__w_pdfjs_require__(28),_stream=__w_pdfjs_require__(12),_type1_parser=__w_pdfjs_require__(37),PRIVATE_USE_AREAS=[[57344,63743],[1048576,1114109]];exports.SEAC_ANALYSIS_ENABLED=!0;var EXPORT_DATA_PROPERTIES=["ascent","bbox","black","bold","charProcOperatorList","composite","data","defaultVMetrics","defaultWidth","descent","fallbackName","fontMatrix","fontType","isMonospace","isSerifFont","isType3Font","italic","loadedName","mimetype","missingFile","name","remeasure","subtype","type","vertical"],EXPORT_DATA_EXTRA_PROPERTIES=["cMap","defaultEncoding","differences","isSymbolicFont","seacMap","toFontChar","toUnicode","vmetrics","widths"],FontFlags={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144};exports.FontFlags=FontFlags;var MacStandardGlyphOrdering=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function adjustWidths(properties){if(properties.fontMatrix&&properties.fontMatrix[0]!==_util.FONT_IDENTITY_MATRIX[0]){var scale=.001/properties.fontMatrix[0],glyphsWidths=properties.widths;for(var glyph in glyphsWidths)glyphsWidths[glyph]*=scale;properties.defaultWidth*=scale}}function getFontType(type,subtype){switch(type){case"Type1":return"Type1C"===subtype?_util.FontType.TYPE1C:_util.FontType.TYPE1;case"CIDFontType0":return"CIDFontType0C"===subtype?_util.FontType.CIDFONTTYPE0C:_util.FontType.CIDFONTTYPE0;case"OpenType":return _util.FontType.OPENTYPE;case"TrueType":return _util.FontType.TRUETYPE;case"CIDFontType2":return _util.FontType.CIDFONTTYPE2;case"MMType1":return _util.FontType.MMTYPE1;case"Type0":return _util.FontType.TYPE0;default:return _util.FontType.UNKNOWN}}function recoverGlyphName(name,glyphsUnicodeMap){if(void 0!==glyphsUnicodeMap[name])return name;var unicode=(0,_unicode.getUnicodeForGlyph)(name,glyphsUnicodeMap);if(-1!==unicode)for(var key in glyphsUnicodeMap)if(glyphsUnicodeMap[key]===unicode)return key;return(0,_util.info)("Unable to recover a standard glyph name for: "+name),name}var Glyph=function(){function Glyph(fontChar,unicode,accent,width,vmetric,operatorListId,isSpace,isInFont){this.fontChar=fontChar,this.unicode=unicode,this.accent=accent,this.width=width,this.vmetric=vmetric,this.operatorListId=operatorListId,this.isSpace=isSpace,this.isInFont=isInFont}return Glyph.prototype.matchesForCache=function(fontChar,unicode,accent,width,vmetric,operatorListId,isSpace,isInFont){return this.fontChar===fontChar&&this.unicode===unicode&&this.accent===accent&&this.width===width&&this.vmetric===vmetric&&this.operatorListId===operatorListId&&this.isSpace===isSpace&&this.isInFont===isInFont},Glyph}(),ToUnicodeMap=function(){function ToUnicodeMap(){var cmap=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._map=cmap}return ToUnicodeMap.prototype={get length(){return this._map.length},forEach:function(callback){for(var charCode in this._map)callback(charCode,this._map[charCode].charCodeAt(0))},has:function(i){return void 0!==this._map[i]},get:function(i){return this._map[i]},charCodeOf:function(value){var map=this._map;if(map.length<=65536)return map.indexOf(value);for(var charCode in map)if(map[charCode]===value)return 0|charCode;return-1},amend:function(map){for(var charCode in map)this._map[charCode]=map[charCode]}},ToUnicodeMap}();exports.ToUnicodeMap=ToUnicodeMap;var IdentityToUnicodeMap=function(){function IdentityToUnicodeMap(firstChar,lastChar){this.firstChar=firstChar,this.lastChar=lastChar}return IdentityToUnicodeMap.prototype={get length(){return this.lastChar+1-this.firstChar},forEach:function(callback){for(var i=this.firstChar,ii=this.lastChar;i<=ii;i++)callback(i,i)},has:function(i){return this.firstChar<=i&&i<=this.lastChar},get:function(i){if(this.firstChar<=i&&i<=this.lastChar)return String.fromCharCode(i)},charCodeOf:function(v){return Number.isInteger(v)&&v>=this.firstChar&&v<=this.lastChar?v:-1},amend:function(map){(0,_util.unreachable)("Should not call amend()")}},IdentityToUnicodeMap}();exports.IdentityToUnicodeMap=IdentityToUnicodeMap;var OpenTypeFileBuilder=function(){function writeInt16(dest,offset,num){dest[offset]=num>>8&255,dest[offset+1]=255&num}function writeInt32(dest,offset,num){dest[offset]=num>>24&255,dest[offset+1]=num>>16&255,dest[offset+2]=num>>8&255,dest[offset+3]=255&num}function writeData(dest,offset,data){var i,ii;if(data instanceof Uint8Array)dest.set(data,offset);else if("string"==typeof data)for(i=0,ii=data.length;i<ii;i++)dest[offset++]=255&data.charCodeAt(i);else for(i=0,ii=data.length;i<ii;i++)dest[offset++]=255&data[i]}function OpenTypeFileBuilder(sfnt){this.sfnt=sfnt,this.tables=Object.create(null)}return OpenTypeFileBuilder.getSearchParams=function(entriesCount,entrySize){for(var maxPower2=1,log2=0;(maxPower2^entriesCount)>maxPower2;)maxPower2<<=1,log2++;var searchRange=maxPower2*entrySize;return{range:searchRange,entry:log2,rangeShift:entrySize*entriesCount-searchRange}},OpenTypeFileBuilder.prototype={toArray:function(){var sfnt=this.sfnt,tables=this.tables,tablesNames=Object.keys(tables);tablesNames.sort();var i,j,jj,table,tableName,numTables=tablesNames.length,offset=12+16*numTables,tableOffsets=[offset];for(i=0;i<numTables;i++)offset+=((table=tables[tablesNames[i]]).length+3&-4)>>>0,tableOffsets.push(offset);var file=new Uint8Array(offset);for(i=0;i<numTables;i++)table=tables[tablesNames[i]],writeData(file,tableOffsets[i],table);"true"===sfnt&&(sfnt=(0,_util.string32)(65536)),file[0]=255&sfnt.charCodeAt(0),file[1]=255&sfnt.charCodeAt(1),file[2]=255&sfnt.charCodeAt(2),file[3]=255&sfnt.charCodeAt(3),writeInt16(file,4,numTables);var searchParams=OpenTypeFileBuilder.getSearchParams(numTables,16);for(writeInt16(file,6,searchParams.range),writeInt16(file,8,searchParams.entry),writeInt16(file,10,searchParams.rangeShift),offset=12,i=0;i<numTables;i++){tableName=tablesNames[i],file[offset]=255&tableName.charCodeAt(0),file[offset+1]=255&tableName.charCodeAt(1),file[offset+2]=255&tableName.charCodeAt(2),file[offset+3]=255&tableName.charCodeAt(3);var checksum=0;for(j=tableOffsets[i],jj=tableOffsets[i+1];j<jj;j+=4)checksum=checksum+(0,_core_utils.readUint32)(file,j)>>>0;writeInt32(file,offset+4,checksum),writeInt32(file,offset+8,tableOffsets[i]),writeInt32(file,offset+12,tables[tableName].length),offset+=16}return file},addTable:function(tag,data){if(tag in this.tables)throw new Error("Table "+tag+" already exists");this.tables[tag]=data}},OpenTypeFileBuilder}(),Font=function(){function Font(name,file,properties){var charCode;this.name=name,this.loadedName=properties.loadedName,this.isType3Font=properties.isType3Font,this.missingFile=!1,this.glyphCache=Object.create(null),this.isSerifFont=!!(properties.flags&FontFlags.Serif),this.isSymbolicFont=!!(properties.flags&FontFlags.Symbolic),this.isMonospace=!!(properties.flags&FontFlags.FixedPitch);var type=properties.type,subtype=properties.subtype;this.type=type,this.subtype=subtype;var fallbackName="sans-serif";if(this.isMonospace?fallbackName="monospace":this.isSerifFont&&(fallbackName="serif"),this.fallbackName=fallbackName,this.differences=properties.differences,this.widths=properties.widths,this.defaultWidth=properties.defaultWidth,this.composite=properties.composite,this.cMap=properties.cMap,this.capHeight=properties.capHeight/1e3,this.ascent=properties.ascent/1e3,this.descent=properties.descent/1e3,this.fontMatrix=properties.fontMatrix,this.bbox=properties.bbox,this.defaultEncoding=properties.defaultEncoding,this.toUnicode=properties.toUnicode,this.fallbackToUnicode=properties.fallbackToUnicode||new ToUnicodeMap,this.toFontChar=[],"Type3"!==properties.type){if(this.cidEncoding=properties.cidEncoding,this.vertical=!!properties.vertical,this.vertical&&(this.vmetrics=properties.vmetrics,this.defaultVMetrics=properties.defaultVMetrics),!file||file.isEmpty)return file&&(0,_util.warn)('Font file is empty in "'+name+'" ('+this.loadedName+")"),void this.fallbackToSystemFont(properties);var _getFontFileType=function(file,_ref44){var fileType,fileSubtype,type=_ref44.type,subtype=_ref44.subtype,composite=_ref44.composite;return function(file){var header=file.peekBytes(4);return 65536===(0,_core_utils.readUint32)(header,0)||"true"===(0,_util.bytesToString)(header)}(file)||isTrueTypeCollectionFile(file)?fileType=composite?"CIDFontType2":"TrueType":function(file){var header=file.peekBytes(4);return"OTTO"===(0,_util.bytesToString)(header)}(file)?fileType=composite?"CIDFontType2":"OpenType":function(file){var header=file.peekBytes(2);return 37===header[0]&&33===header[1]||128===header[0]&&1===header[1]}(file)?fileType=composite?"CIDFontType0":"MMType1"===type?"MMType1":"Type1":function(file){var header=file.peekBytes(4);return header[0]>=1&&header[3]>=1&&header[3]<=4}(file)?composite?(fileType="CIDFontType0",fileSubtype="CIDFontType0C"):(fileType="MMType1"===type?"MMType1":"Type1",fileSubtype="Type1C"):((0,_util.warn)("getFontFileType: Unable to detect correct font file Type/Subtype."),fileType=type,fileSubtype=subtype),[fileType,fileSubtype]}(file,properties),_getFontFileType2=_slicedToArray(_getFontFileType,2);type=_getFontFileType2[0],subtype=_getFontFileType2[1],type===this.type&&subtype===this.subtype||(0,_util.info)("Inconsistent font file Type/SubType, expected: "+"".concat(this.type,"/").concat(this.subtype," but found: ").concat(type,"/").concat(subtype,"."));try{var data;switch(type){case"MMType1":(0,_util.info)("MMType1 font ("+name+"), falling back to Type1.");case"Type1":case"CIDFontType0":this.mimetype="font/opentype";var cff="Type1C"===subtype||"CIDFontType0C"===subtype?new CFFFont(file,properties):new Type1Font(name,file,properties);adjustWidths(properties),data=this.convert(name,cff,properties);break;case"OpenType":case"TrueType":case"CIDFontType2":this.mimetype="font/opentype",data=this.checkAndRepair(name,file,properties),this.isOpenType&&(adjustWidths(properties),type="OpenType");break;default:throw new _util.FormatError("Font ".concat(type," is not supported"))}}catch(e){return(0,_util.warn)(e),void this.fallbackToSystemFont(properties)}this.data=data,this.fontType=getFontType(type,subtype),this.fontMatrix=properties.fontMatrix,this.widths=properties.widths,this.defaultWidth=properties.defaultWidth,this.toUnicode=properties.toUnicode,this.seacMap=properties.seacMap}else{for(charCode=0;charCode<256;charCode++)this.toFontChar[charCode]=this.differences[charCode]||properties.defaultEncoding[charCode];this.fontType=_util.FontType.TYPE3}}function int16(b0,b1){return(b0<<8)+b1}function signedInt16(b0,b1){var value=(b0<<8)+b1;return 32768&value?value-65536:value}function string16(value){return String.fromCharCode(value>>8&255,255&value)}function safeString16(value){return value>32767?value=32767:value<-32768&&(value=-32768),String.fromCharCode(value>>8&255,255&value)}function isTrueTypeCollectionFile(file){var header=file.peekBytes(4);return"ttcf"===(0,_util.bytesToString)(header)}function buildToFontChar(encoding,glyphsUnicodeMap,differences){for(var unicode,toFontChar=[],i=0,ii=encoding.length;i<ii;i++)-1!==(unicode=(0,_unicode.getUnicodeForGlyph)(encoding[i],glyphsUnicodeMap))&&(toFontChar[i]=unicode);for(var charCode in differences)-1!==(unicode=(0,_unicode.getUnicodeForGlyph)(differences[charCode],glyphsUnicodeMap))&&(toFontChar[+charCode]=unicode);return toFontChar}function adjustMapping(charCodeToGlyphId,hasGlyph,newGlyphZeroId){var newMap=Object.create(null),toFontChar=[],privateUseAreaIndex=0,nextAvailableFontCharCode=PRIVATE_USE_AREAS[privateUseAreaIndex][0],privateUseOffetEnd=PRIVATE_USE_AREAS[privateUseAreaIndex][1];for(var originalCharCode in charCodeToGlyphId){var glyphId=charCodeToGlyphId[originalCharCode|=0];if(hasGlyph(glyphId)){if(nextAvailableFontCharCode>privateUseOffetEnd){if(++privateUseAreaIndex>=PRIVATE_USE_AREAS.length){(0,_util.warn)("Ran out of space in font private use area.");break}nextAvailableFontCharCode=PRIVATE_USE_AREAS[privateUseAreaIndex][0],privateUseOffetEnd=PRIVATE_USE_AREAS[privateUseAreaIndex][1]}var fontCharCode=nextAvailableFontCharCode++;0===glyphId&&(glyphId=newGlyphZeroId),newMap[fontCharCode]=glyphId,toFontChar[originalCharCode]=fontCharCode}}return{toFontChar:toFontChar,charCodeToGlyphId:newMap,nextAvailableFontCharCode:nextAvailableFontCharCode}}function createCmapTable(glyphs,numGlyphs){var i,ii,j,jj,ranges=function(glyphs,numGlyphs){var codes=[];for(var charCode in glyphs)glyphs[charCode]>=numGlyphs||codes.push({fontCharCode:0|charCode,glyphId:glyphs[charCode]});0===codes.length&&codes.push({fontCharCode:0,glyphId:0}),codes.sort((function(a,b){return a.fontCharCode-b.fontCharCode}));for(var ranges=[],length=codes.length,n=0;n<length;){var start=codes[n].fontCharCode,codeIndices=[codes[n].glyphId];++n;for(var end=start;n<length&&end+1===codes[n].fontCharCode&&(codeIndices.push(codes[n].glyphId),++n,65535!=++end););ranges.push([start,end,codeIndices])}return ranges}(glyphs,numGlyphs),numTables=ranges[ranges.length-1][1]>65535?2:1,cmap="\0\0"+string16(numTables)+"\0\0"+(0,_util.string32)(4+8*numTables);for(i=ranges.length-1;i>=0&&!(ranges[i][0]<=65535);--i);var bmpLength=i+1;ranges[i][0]<65535&&65535===ranges[i][1]&&(ranges[i][1]=65534);var range,start,end,codes,trailingRangesCount=ranges[i][1]<65535?1:0,segCount=bmpLength+trailingRangesCount,searchParams=OpenTypeFileBuilder.getSearchParams(segCount,2),startCount="",endCount="",idDeltas="",idRangeOffsets="",glyphsIds="",bias=0;for(i=0,ii=bmpLength;i<ii;i++){start=(range=ranges[i])[0],end=range[1],startCount+=string16(start),endCount+=string16(end);var contiguous=!0;for(j=1,jj=(codes=range[2]).length;j<jj;++j)if(codes[j]!==codes[j-1]+1){contiguous=!1;break}if(contiguous)idDeltas+=string16(codes[0]-start&65535),idRangeOffsets+=string16(0);else{var offset=2*(segCount-i)+2*bias;for(bias+=end-start+1,idDeltas+=string16(0),idRangeOffsets+=string16(offset),j=0,jj=codes.length;j<jj;++j)glyphsIds+=string16(codes[j])}}trailingRangesCount>0&&(endCount+="ÿÿ",startCount+="ÿÿ",idDeltas+="\0",idRangeOffsets+="\0\0");var format314="\0\0"+string16(2*segCount)+string16(searchParams.range)+string16(searchParams.entry)+string16(searchParams.rangeShift)+endCount+"\0\0"+startCount+idDeltas+idRangeOffsets+glyphsIds,format31012="",header31012="";if(numTables>1){for(cmap+="\0\0\n"+(0,_util.string32)(4+8*numTables+4+format314.length),format31012="",i=0,ii=ranges.length;i<ii;i++){start=(range=ranges[i])[0];var code=(codes=range[2])[0];for(j=1,jj=codes.length;j<jj;++j)codes[j]!==codes[j-1]+1&&(end=range[0]+j-1,format31012+=(0,_util.string32)(start)+(0,_util.string32)(end)+(0,_util.string32)(code),start=end+1,code=codes[j]);format31012+=(0,_util.string32)(start)+(0,_util.string32)(range[1])+(0,_util.string32)(code)}header31012="\0\f\0\0"+(0,_util.string32)(format31012.length+16)+"\0\0\0\0"+(0,_util.string32)(format31012.length/12)}return cmap+"\0"+string16(format314.length+4)+format314+header31012+format31012}function createOS2Table(properties,charstrings,override){override=override||{unitsPerEm:0,yMax:0,yMin:0,ascent:0,descent:0};var ulUnicodeRange1=0,ulUnicodeRange2=0,ulUnicodeRange3=0,ulUnicodeRange4=0,firstCharIndex=null,lastCharIndex=0;if(charstrings){for(var code in charstrings){(firstCharIndex>(code|=0)||!firstCharIndex)&&(firstCharIndex=code),lastCharIndex<code&&(lastCharIndex=code);var position=(0,_unicode.getUnicodeRangeFor)(code);if(position<32)ulUnicodeRange1|=1<<position;else if(position<64)ulUnicodeRange2|=1<<position-32;else if(position<96)ulUnicodeRange3|=1<<position-64;else{if(!(position<123))throw new _util.FormatError("Unicode ranges Bits > 123 are reserved for internal usage");ulUnicodeRange4|=1<<position-96}}lastCharIndex>65535&&(lastCharIndex=65535)}else firstCharIndex=0,lastCharIndex=255;var bbox=properties.bbox||[0,0,0,0],unitsPerEm=override.unitsPerEm||1/(properties.fontMatrix||_util.FONT_IDENTITY_MATRIX)[0],scale=properties.ascentScaled?1:unitsPerEm/1e3,typoAscent=override.ascent||Math.round(scale*(properties.ascent||bbox[3])),typoDescent=override.descent||Math.round(scale*(properties.descent||bbox[1]));typoDescent>0&&properties.descent>0&&bbox[1]<0&&(typoDescent=-typoDescent);var winAscent=override.yMax||typoAscent,winDescent=-override.yMin||-typoDescent;return"\0$ô\0\0\0»\0\0\0»\0\0ß\x001\0\0\0\0"+String.fromCharCode(properties.fixedPitch?9:0)+"\0\0\0\0\0\0"+(0,_util.string32)(ulUnicodeRange1)+(0,_util.string32)(ulUnicodeRange2)+(0,_util.string32)(ulUnicodeRange3)+(0,_util.string32)(ulUnicodeRange4)+"*21*"+string16(properties.italicAngle?1:0)+string16(firstCharIndex||properties.firstChar)+string16(lastCharIndex||properties.lastChar)+string16(typoAscent)+string16(typoDescent)+"\0d"+string16(winAscent)+string16(winDescent)+"\0\0\0\0\0\0\0\0"+string16(properties.xHeight)+string16(properties.capHeight)+string16(0)+string16(firstCharIndex||properties.firstChar)+"\0"}function createPostTable(properties){var angle=Math.floor(properties.italicAngle*Math.pow(2,16));return"\0\0\0"+(0,_util.string32)(angle)+"\0\0\0\0"+(0,_util.string32)(properties.fixedPitch)+"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"}function createNameTable(name,proto){proto||(proto=[[],[]]);var i,ii,j,jj,str,strings=[proto[0][0]||"Original licence",proto[0][1]||name,proto[0][2]||"Unknown",proto[0][3]||"uniqueID",proto[0][4]||name,proto[0][5]||"Version 0.11",proto[0][6]||"",proto[0][7]||"Unknown",proto[0][8]||"Unknown",proto[0][9]||"Unknown"],stringsUnicode=[];for(i=0,ii=strings.length;i<ii;i++){var strBufUnicode=[];for(j=0,jj=(str=proto[1][i]||strings[i]).length;j<jj;j++)strBufUnicode.push(string16(str.charCodeAt(j)));stringsUnicode.push(strBufUnicode.join(""))}var names=[strings,stringsUnicode],platforms=["\0","\0"],encodings=["\0\0","\0"],languages=["\0\0","\t"],namesRecordCount=strings.length*platforms.length,nameTable="\0\0"+string16(namesRecordCount)+string16(12*namesRecordCount+6),strOffset=0;for(i=0,ii=platforms.length;i<ii;i++){var strs=names[i];for(j=0,jj=strs.length;j<jj;j++)str=strs[j],nameTable+=platforms[i]+encodings[i]+languages[i]+string16(j)+string16(str.length)+string16(strOffset),strOffset+=str.length}return nameTable+=strings.join("")+stringsUnicode.join("")}return Font.prototype={name:null,font:null,mimetype:null,disableFontFace:!1,get renderer(){var renderer=_font_renderer.FontRendererFactory.create(this,!0);return(0,_util.shadow)(this,"renderer",renderer)},exportData:function(){var property,value,_step48,extraProperties=arguments.length>0&&void 0!==arguments[0]&&arguments[0],exportDataProperties=extraProperties?[].concat(EXPORT_DATA_PROPERTIES,EXPORT_DATA_EXTRA_PROPERTIES):EXPORT_DATA_PROPERTIES,data=Object.create(null),_iterator48=_createForOfIteratorHelper(exportDataProperties);try{for(_iterator48.s();!(_step48=_iterator48.n()).done;)void 0!==(value=this[property=_step48.value])&&(data[property]=value)}catch(err){_iterator48.e(err)}finally{_iterator48.f()}return data},fallbackToSystemFont:function(properties){var _this71=this;this.missingFile=!0;var name=this.name,type=this.type,subtype=this.subtype,fontName=name.replace(/[,_]/g,"-").replace(/\s/g,""),stdFontMap=(0,_standard_fonts.getStdFontMap)(),nonStdFontMap=(0,_standard_fonts.getNonStdFontMap)(),isStandardFont=!!stdFontMap[fontName],isMappedToStandardFont=!(!nonStdFontMap[fontName]||!stdFontMap[nonStdFontMap[fontName]]);fontName=stdFontMap[fontName]||nonStdFontMap[fontName]||fontName,this.bold=-1!==fontName.search(/bold/gi),this.italic=-1!==fontName.search(/oblique/gi)||-1!==fontName.search(/italic/gi),this.black=-1!==name.search(/Black/g);var isNarrow=-1!==name.search(/Narrow/g);if(this.remeasure=(!isStandardFont||isNarrow)&&Object.keys(this.widths).length>0,(isStandardFont||isMappedToStandardFont)&&"CIDFontType2"===type&&this.cidEncoding.startsWith("Identity-")){var GlyphMapForStandardFonts=(0,_standard_fonts.getGlyphMapForStandardFonts)(),cidToGidMap=properties.cidToGidMap,map=[];for(var charCode in GlyphMapForStandardFonts)map[+charCode]=GlyphMapForStandardFonts[charCode];if(/Arial-?Black/i.test(name)){var SupplementalGlyphMapForArialBlack=(0,_standard_fonts.getSupplementalGlyphMapForArialBlack)();for(var _charCode in SupplementalGlyphMapForArialBlack)map[+_charCode]=SupplementalGlyphMapForArialBlack[_charCode]}else if(/Calibri/i.test(name)){var SupplementalGlyphMapForCalibri=(0,_standard_fonts.getSupplementalGlyphMapForCalibri)();for(var _charCode2 in SupplementalGlyphMapForCalibri)map[+_charCode2]=SupplementalGlyphMapForCalibri[_charCode2]}if(cidToGidMap)for(var _charCode3 in map){var cid=map[_charCode3];void 0!==cidToGidMap[cid]&&(map[+_charCode3]=cidToGidMap[cid])}this.toUnicode instanceof IdentityToUnicodeMap||this.toUnicode.forEach((function(charCode,unicodeCharCode){map[+charCode]=unicodeCharCode})),this.toFontChar=map,this.toUnicode=new ToUnicodeMap(map)}else if(/Symbol/i.test(fontName))this.toFontChar=buildToFontChar(_encodings.SymbolSetEncoding,(0,_glyphlist.getGlyphsUnicode)(),this.differences);else if(/Dingbats/i.test(fontName))/Wingdings/i.test(name)&&(0,_util.warn)("Non-embedded Wingdings font, falling back to ZapfDingbats."),this.toFontChar=buildToFontChar(_encodings.ZapfDingbatsEncoding,(0,_glyphlist.getDingbatsGlyphsUnicode)(),this.differences);else if(isStandardFont)this.toFontChar=buildToFontChar(this.defaultEncoding,(0,_glyphlist.getGlyphsUnicode)(),this.differences);else{var glyphsUnicodeMap=(0,_glyphlist.getGlyphsUnicode)(),_map=[];if(this.toUnicode.forEach((function(charCode,unicodeCharCode){if(!_this71.composite){var glyphName=_this71.differences[charCode]||_this71.defaultEncoding[charCode],unicode=(0,_unicode.getUnicodeForGlyph)(glyphName,glyphsUnicodeMap);-1!==unicode&&(unicodeCharCode=unicode)}_map[+charCode]=unicodeCharCode})),this.composite&&this.toUnicode instanceof IdentityToUnicodeMap&&/Verdana/i.test(name)){var _GlyphMapForStandardFonts=(0,_standard_fonts.getGlyphMapForStandardFonts)();for(var _charCode4 in _GlyphMapForStandardFonts)_map[+_charCode4]=_GlyphMapForStandardFonts[_charCode4]}this.toFontChar=_map}this.loadedName=fontName.split("-")[0],this.fontType=getFontType(type,subtype)},checkAndRepair:function(name,font,properties){var VALID_TABLES=["OS/2","cmap","head","hhea","hmtx","maxp","name","post","loca","glyf","fpgm","prep","cvt ","CFF "];function readTables(file,numTables){var tables=Object.create(null);tables["OS/2"]=null,tables.cmap=null,tables.head=null,tables.hhea=null,tables.hmtx=null,tables.maxp=null,tables.name=null,tables.post=null;for(var _i31=0;_i31<numTables;_i31++){var table=readTableEntry(file);VALID_TABLES.includes(table.tag)&&0!==table.length&&(tables[table.tag]=table)}return tables}function readTableEntry(file){var tag=(0,_util.bytesToString)(file.getBytes(4)),checksum=file.getInt32()>>>0,offset=file.getInt32()>>>0,length=file.getInt32()>>>0,previousPosition=file.pos;file.pos=file.start?file.start:0,file.skip(offset);var data=file.getBytes(length);return file.pos=previousPosition,"head"===tag&&(data[8]=data[9]=data[10]=data[11]=0,data[17]|=32),{tag:tag,checksum:checksum,length:length,offset:offset,data:data}}function readOpenTypeHeader(ttf){return{version:(0,_util.bytesToString)(ttf.getBytes(4)),numTables:ttf.getUint16(),searchRange:ttf.getUint16(),entrySelector:ttf.getUint16(),rangeShift:ttf.getUint16()}}function sanitizeGlyph(source,sourceStart,sourceEnd,dest,destStart,hintsValid){var glyphProfile={length:0,sizeOfInstructions:0};if(sourceEnd-sourceStart<=12)return glyphProfile;var bytes,index,value,glyf=source.subarray(sourceStart,sourceEnd),contoursCount=signedInt16(glyf[0],glyf[1]);if(contoursCount<0)return value=contoursCount=-1,(bytes=glyf)[1+(index=0)]=value,bytes[index]=value>>>8,dest.set(glyf,destStart),glyphProfile.length=glyf.length,glyphProfile;var i,j=10,flagsCount=0;for(i=0;i<contoursCount;i++)flagsCount=1+(glyf[j]<<8|glyf[j+1]),j+=2;var instructionsStart=j,instructionsLength=glyf[j]<<8|glyf[j+1];glyphProfile.sizeOfInstructions=instructionsLength;var instructionsEnd=j+=2+instructionsLength,coordinatesLength=0;for(i=0;i<flagsCount;i++){var flag=glyf[j++];192&flag&&(glyf[j-1]=63&flag);var xLength=2;2&flag?xLength=1:16&flag&&(xLength=0);var yLength=2;4&flag?yLength=1:32&flag&&(yLength=0);var xyLength=xLength+yLength;if(coordinatesLength+=xyLength,8&flag){var repeat=glyf[j++];i+=repeat,coordinatesLength+=repeat*xyLength}}if(0===coordinatesLength)return glyphProfile;var glyphDataLength=j+coordinatesLength;return glyphDataLength>glyf.length?glyphProfile:!hintsValid&&instructionsLength>0?(dest.set(glyf.subarray(0,instructionsStart),destStart),dest.set([0,0],destStart+instructionsStart),dest.set(glyf.subarray(instructionsEnd,glyphDataLength),destStart+instructionsStart+2),glyphDataLength-=instructionsLength,glyf.length-glyphDataLength>3&&(glyphDataLength=glyphDataLength+3&-4),glyphProfile.length=glyphDataLength,glyphProfile):glyf.length-glyphDataLength>3?(glyphDataLength=glyphDataLength+3&-4,dest.set(glyf.subarray(0,glyphDataLength),destStart),glyphProfile.length=glyphDataLength,glyphProfile):(dest.set(glyf,destStart),glyphProfile.length=glyf.length,glyphProfile)}function readNameTable(nameTable){var start=(font.start?font.start:0)+nameTable.offset;font.pos=start;var names=[[],[]],length=nameTable.length,end=start+length;if(0!==font.getUint16()||length<6)return names;var i,ii,numRecords=font.getUint16(),stringsStart=font.getUint16(),records=[];for(i=0;i<numRecords&&font.pos+12<=end;i++){var r={platform:font.getUint16(),encoding:font.getUint16(),language:font.getUint16(),name:font.getUint16(),length:font.getUint16(),offset:font.getUint16()};(1===r.platform&&0===r.encoding&&0===r.language||3===r.platform&&1===r.encoding&&1033===r.language)&&records.push(r)}for(i=0,ii=records.length;i<ii;i++){var record=records[i];if(!(record.length<=0)){var pos=start+stringsStart+record.offset;if(!(pos+record.length>end)){font.pos=pos;var nameIndex=record.name;if(record.encoding){for(var str="",j=0,jj=record.length;j<jj;j+=2)str+=String.fromCharCode(font.getUint16());names[1][nameIndex]=str}else names[0][nameIndex]=(0,_util.bytesToString)(font.getBytes(record.length))}}}return names}var header,tables,cff,cffFile,TTOpsStackDeltas=[0,0,0,0,0,0,0,0,-2,-2,-2,-2,0,0,-2,-5,-1,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,-1,-1,1,-1,-999,0,1,0,-1,-2,0,-1,-2,-1,-1,0,-1,-1,0,0,-999,-999,-1,-1,-1,-1,-2,-999,-2,-2,-999,0,-2,-2,0,0,-2,0,-2,0,0,0,-2,-1,-1,1,1,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,0,-999,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,0,0,0,-2,-999,-999,-999,-999,-999,-1,-1,-2,-2,0,0,0,0,-1,-1,-999,-2,-2,0,0,-1,-2,-2,0,0,0,-1,-1,-1,-2];function sanitizeTTProgram(table,ttContext){for(var j,n,b,funcId,pc,data=table.data,i=0,lastEndf=0,lastDeff=0,stack=[],callstack=[],functionsCalled=[],tooComplexToFollowFunctions=ttContext.tooComplexToFollowFunctions,inFDEF=!1,ifLevel=0,inELSE=0,ii=data.length;i<ii;){var op=data[i++];if(64===op)if(n=data[i++],inFDEF||inELSE)i+=n;else for(j=0;j<n;j++)stack.push(data[i++]);else if(65===op)if(n=data[i++],inFDEF||inELSE)i+=2*n;else for(j=0;j<n;j++)b=data[i++],stack.push(b<<8|data[i++]);else if(176==(248&op))if(n=op-176+1,inFDEF||inELSE)i+=n;else for(j=0;j<n;j++)stack.push(data[i++]);else if(184==(248&op))if(n=op-184+1,inFDEF||inELSE)i+=2*n;else for(j=0;j<n;j++)b=data[i++],stack.push(b<<8|data[i++]);else if(43!==op||tooComplexToFollowFunctions)if(44!==op||tooComplexToFollowFunctions){if(45===op)if(inFDEF)inFDEF=!1,lastEndf=i;else{if(!(pc=callstack.pop()))return(0,_util.warn)("TT: ENDF bad stack"),void(ttContext.hintsValid=!1);funcId=functionsCalled.pop(),data=pc.data,i=pc.i,ttContext.functionsStackDeltas[funcId]=stack.length-pc.stackTop}else if(137===op)(inFDEF||inELSE)&&((0,_util.warn)("TT: nested IDEFs not allowed"),tooComplexToFollowFunctions=!0),inFDEF=!0,lastDeff=i;else if(88===op)++ifLevel;else if(27===op)inELSE=ifLevel;else if(89===op)inELSE===ifLevel&&(inELSE=0),--ifLevel;else if(28===op&&!inFDEF&&!inELSE){var offset=stack[stack.length-1];offset>0&&(i+=offset-1)}}else(inFDEF||inELSE)&&((0,_util.warn)("TT: nested FDEFs not allowed"),tooComplexToFollowFunctions=!0),inFDEF=!0,lastDeff=i,funcId=stack.pop(),ttContext.functionsDefined[funcId]={data:data,i:i};else if(!inFDEF&&!inELSE)if(funcId=stack[stack.length-1],isNaN(funcId))(0,_util.info)("TT: CALL empty stack (or invalid entry).");else if(ttContext.functionsUsed[funcId]=!0,funcId in ttContext.functionsStackDeltas){var newStackLength=stack.length+ttContext.functionsStackDeltas[funcId];if(newStackLength<0)return(0,_util.warn)("TT: CALL invalid functions stack delta."),void(ttContext.hintsValid=!1);stack.length=newStackLength}else if(funcId in ttContext.functionsDefined&&!functionsCalled.includes(funcId)){if(callstack.push({data:data,i:i,stackTop:stack.length-1}),functionsCalled.push(funcId),!(pc=ttContext.functionsDefined[funcId]))return(0,_util.warn)("TT: CALL non-existent function"),void(ttContext.hintsValid=!1);data=pc.data,i=pc.i}if(!inFDEF&&!inELSE){var stackDelta=0;for(op<=142?stackDelta=TTOpsStackDeltas[op]:op>=192&&op<=223?stackDelta=-1:op>=224&&(stackDelta=-2),op>=113&&op<=117&&(n=stack.pop(),isNaN(n)||(stackDelta=2*-n));stackDelta<0&&stack.length>0;)stack.pop(),stackDelta++;for(;stackDelta>0;)stack.push(NaN),stackDelta--}}ttContext.tooComplexToFollowFunctions=tooComplexToFollowFunctions;var content=[data];i>data.length&&content.push(new Uint8Array(i-data.length)),lastDeff>lastEndf&&((0,_util.warn)("TT: complementing a missing function tail"),content.push(new Uint8Array([34,45]))),function(table,content){if(content.length>1){var j,jj,newLength=0;for(j=0,jj=content.length;j<jj;j++)newLength+=content[j].length;newLength=newLength+3&-4;var result=new Uint8Array(newLength),pos=0;for(j=0,jj=content.length;j<jj;j++)result.set(content[j],pos),pos+=content[j].length;table.data=result,table.length=newLength}}(table,content)}if(isTrueTypeCollectionFile(font=new _stream.Stream(new Uint8Array(font.getBytes())))){var ttcData=function(ttc,fontName){for(var _readTrueTypeCollecti=function(ttc){var ttcTag=(0,_util.bytesToString)(ttc.getBytes(4));(0,_util.assert)("ttcf"===ttcTag,"Must be a TrueType Collection font.");for(var majorVersion=ttc.getUint16(),minorVersion=ttc.getUint16(),numFonts=ttc.getInt32()>>>0,offsetTable=[],_i32=0;_i32<numFonts;_i32++)offsetTable.push(ttc.getInt32()>>>0);var header={ttcTag:ttcTag,majorVersion:majorVersion,minorVersion:minorVersion,numFonts:numFonts,offsetTable:offsetTable};switch(majorVersion){case 1:return header;case 2:return header.dsigTag=ttc.getInt32()>>>0,header.dsigLength=ttc.getInt32()>>>0,header.dsigOffset=ttc.getInt32()>>>0,header}throw new _util.FormatError("Invalid TrueType Collection majorVersion: ".concat(majorVersion,"."))}(ttc),numFonts=_readTrueTypeCollecti.numFonts,offsetTable=_readTrueTypeCollecti.offsetTable,_i33=0;_i33<numFonts;_i33++){ttc.pos=(ttc.start||0)+offsetTable[_i33];var potentialHeader=readOpenTypeHeader(ttc),potentialTables=readTables(ttc,potentialHeader.numTables);if(!potentialTables.name)throw new _util.FormatError('TrueType Collection font must contain a "name" table.');for(var nameTable=readNameTable(potentialTables.name),j=0,jj=nameTable.length;j<jj;j++)for(var k=0,kk=nameTable[j].length;k<kk;k++){var nameEntry=nameTable[j][k];if(nameEntry&&nameEntry.replace(/\s/g,"")===fontName)return{header:potentialHeader,tables:potentialTables}}}throw new _util.FormatError('TrueType Collection does not contain "'.concat(fontName,'" font.'))}(font,this.name);header=ttcData.header,tables=ttcData.tables}else header=readOpenTypeHeader(font),tables=readTables(font,header.numTables);var isTrueType=!tables["CFF "];if(isTrueType){if(!tables.loca)throw new _util.FormatError('Required "loca" table is not found');tables.glyf||((0,_util.warn)('Required "glyf" table is not found -- trying to recover.'),tables.glyf={tag:"glyf",data:new Uint8Array(0)}),this.isOpenType=!1}else{var isComposite=properties.composite&&((properties.cidToGidMap||[]).length>0||!(properties.cMap instanceof _cmap.IdentityCMap));if("OTTO"===header.version&&!isComposite||!tables.head||!tables.hhea||!tables.maxp||!tables.post)return cffFile=new _stream.Stream(tables["CFF "].data),cff=new CFFFont(cffFile,properties),adjustWidths(properties),this.convert(name,cff,properties);delete tables.glyf,delete tables.loca,delete tables.fpgm,delete tables.prep,delete tables["cvt "],this.isOpenType=!0}if(!tables.maxp)throw new _util.FormatError('Required "maxp" table is not found');font.pos=(font.start||0)+tables.maxp.offset;var version=font.getInt32(),numGlyphs=font.getUint16(),numGlyphsOut=numGlyphs+1,dupFirstEntry=!0;numGlyphsOut>65535&&(dupFirstEntry=!1,numGlyphsOut=numGlyphs,(0,_util.warn)("Not enough space in glyfs to duplicate first glyph."));var maxFunctionDefs=0,maxSizeOfInstructions=0;version>=65536&&tables.maxp.length>=22&&(font.pos+=8,font.getUint16()>2&&(tables.maxp.data[14]=0,tables.maxp.data[15]=2),font.pos+=4,maxFunctionDefs=font.getUint16(),font.pos+=4,maxSizeOfInstructions=font.getUint16()),tables.maxp.data[4]=numGlyphsOut>>8,tables.maxp.data[5]=255&numGlyphsOut;var hintsValid=function(fpgm,prep,cvt,maxFunctionDefs){var ttContext={functionsDefined:[],functionsUsed:[],functionsStackDeltas:[],tooComplexToFollowFunctions:!1,hintsValid:!0};if(fpgm&&sanitizeTTProgram(fpgm,ttContext),prep&&sanitizeTTProgram(prep,ttContext),fpgm&&function(ttContext,maxFunctionDefs){if(!ttContext.tooComplexToFollowFunctions){if(ttContext.functionsDefined.length>maxFunctionDefs)return(0,_util.warn)("TT: more functions defined than expected"),void(ttContext.hintsValid=!1);for(var j=0,jj=ttContext.functionsUsed.length;j<jj;j++){if(j>maxFunctionDefs)return(0,_util.warn)("TT: invalid function id: "+j),void(ttContext.hintsValid=!1);if(ttContext.functionsUsed[j]&&!ttContext.functionsDefined[j])return(0,_util.warn)("TT: undefined function: "+j),void(ttContext.hintsValid=!1)}}}(ttContext,maxFunctionDefs),cvt&&1&cvt.length){var cvtData=new Uint8Array(cvt.length+1);cvtData.set(cvt.data),cvt.data=cvtData}return ttContext.hintsValid}(tables.fpgm,tables.prep,tables["cvt "],maxFunctionDefs);if(hintsValid||(delete tables.fpgm,delete tables.prep,delete tables["cvt "]),function(file,header,metrics,numGlyphs,dupFirstEntry){if(header){file.pos=(file.start?file.start:0)+header.offset,file.pos+=4,file.pos+=2,file.pos+=2,file.pos+=2,file.pos+=2,file.pos+=2,file.pos+=2,file.pos+=2,file.pos+=2,file.pos+=2,file.pos+=2,file.pos+=8,file.pos+=2;var numOfMetrics=file.getUint16();numOfMetrics>numGlyphs&&((0,_util.info)("The numOfMetrics ("+numOfMetrics+") should not be greater than the numGlyphs ("+numGlyphs+")"),numOfMetrics=numGlyphs,header.data[34]=(65280&numOfMetrics)>>8,header.data[35]=255&numOfMetrics);var numMissing=numGlyphs-numOfMetrics-(metrics.length-4*numOfMetrics>>1);if(numMissing>0){var entries=new Uint8Array(metrics.length+2*numMissing);entries.set(metrics.data),dupFirstEntry&&(entries[metrics.length]=metrics.data[2],entries[metrics.length+1]=metrics.data[3]),metrics.data=entries}}else metrics&&(metrics.data=null)}(font,tables.hhea,tables.hmtx,numGlyphsOut,dupFirstEntry),!tables.head)throw new _util.FormatError('Required "head" table is not found');!function(head,numGlyphs,locaLength){var b0,b1,b2,b3,data=head.data,version=(b0=data[0],b1=data[1],b2=data[2],b3=data[3],(b0<<24)+(b1<<16)+(b2<<8)+b3);version>>16!=1&&((0,_util.info)("Attempting to fix invalid version in head table: "+version),data[0]=0,data[1]=1,data[2]=0,data[3]=0);var indexToLocFormat=int16(data[50],data[51]);if(indexToLocFormat<0||indexToLocFormat>1){(0,_util.info)("Attempting to fix invalid indexToLocFormat in head table: "+indexToLocFormat);var numGlyphsPlusOne=numGlyphs+1;if(locaLength===numGlyphsPlusOne<<1)data[50]=0,data[51]=0;else{if(locaLength!==numGlyphsPlusOne<<2)throw new _util.FormatError("Could not fix indexToLocFormat: "+indexToLocFormat);data[50]=0,data[51]=1}}}(tables.head,numGlyphs,isTrueType?tables.loca.length:0);var missingGlyphs=Object.create(null);if(isTrueType){var isGlyphLocationsLong=int16(tables.head.data[50],tables.head.data[51]),glyphsInfo=function(loca,glyf,numGlyphs,isGlyphLocationsLong,hintsValid,dupFirstEntry,maxSizeOfInstructions){var itemSize,itemDecode,itemEncode;isGlyphLocationsLong?(itemSize=4,itemDecode=function(data,offset){return data[offset]<<24|data[offset+1]<<16|data[offset+2]<<8|data[offset+3]},itemEncode=function(data,offset,value){data[offset]=value>>>24&255,data[offset+1]=value>>16&255,data[offset+2]=value>>8&255,data[offset+3]=255&value}):(itemSize=2,itemDecode=function(data,offset){return data[offset]<<9|data[offset+1]<<1},itemEncode=function(data,offset,value){data[offset]=value>>9&255,data[offset+1]=value>>1&255});var numGlyphsOut=dupFirstEntry?numGlyphs+1:numGlyphs,locaDataSize=itemSize*(1+numGlyphsOut),locaData=new Uint8Array(locaDataSize);locaData.set(loca.data.subarray(0,locaDataSize)),loca.data=locaData;var i,j,oldGlyfData=glyf.data,oldGlyfDataLength=oldGlyfData.length,newGlyfData=new Uint8Array(oldGlyfDataLength),locaEntries=[];for(i=0,j=0;i<numGlyphs+1;i++,j+=itemSize){var offset=itemDecode(locaData,j);offset>oldGlyfDataLength&&(offset=oldGlyfDataLength),locaEntries.push({index:i,offset:offset,endOffset:0})}for(locaEntries.sort((function(a,b){return a.offset-b.offset})),i=0;i<numGlyphs;i++)locaEntries[i].endOffset=locaEntries[i+1].offset;locaEntries.sort((function(a,b){return a.index-b.index}));var missingGlyphs=Object.create(null),writeOffset=0;for(itemEncode(locaData,0,writeOffset),i=0,j=itemSize;i<numGlyphs;i++,j+=itemSize){var glyphProfile=sanitizeGlyph(oldGlyfData,locaEntries[i].offset,locaEntries[i].endOffset,newGlyfData,writeOffset,hintsValid),newLength=glyphProfile.length;0===newLength&&(missingGlyphs[i]=!0),glyphProfile.sizeOfInstructions>maxSizeOfInstructions&&(maxSizeOfInstructions=glyphProfile.sizeOfInstructions),itemEncode(locaData,j,writeOffset+=newLength)}if(0===writeOffset){var simpleGlyph=new Uint8Array([0,1,0,0,0,0,0,0,0,0,0,0,0,0,49,0]);for(i=0,j=itemSize;i<numGlyphsOut;i++,j+=itemSize)itemEncode(locaData,j,simpleGlyph.length);glyf.data=simpleGlyph}else if(dupFirstEntry){var firstEntryLength=itemDecode(locaData,itemSize);newGlyfData.length>firstEntryLength+writeOffset?glyf.data=newGlyfData.subarray(0,firstEntryLength+writeOffset):(glyf.data=new Uint8Array(firstEntryLength+writeOffset),glyf.data.set(newGlyfData.subarray(0,writeOffset))),glyf.data.set(newGlyfData.subarray(0,firstEntryLength),writeOffset),itemEncode(loca.data,locaData.length-itemSize,writeOffset+firstEntryLength)}else glyf.data=newGlyfData.subarray(0,writeOffset);return{missingGlyphs:missingGlyphs,maxSizeOfInstructions:maxSizeOfInstructions}}(tables.loca,tables.glyf,numGlyphs,isGlyphLocationsLong,hintsValid,dupFirstEntry,maxSizeOfInstructions);missingGlyphs=glyphsInfo.missingGlyphs,version>=65536&&tables.maxp.length>=22&&(tables.maxp.data[26]=glyphsInfo.maxSizeOfInstructions>>8,tables.maxp.data[27]=255&glyphsInfo.maxSizeOfInstructions)}if(!tables.hhea)throw new _util.FormatError('Required "hhea" table is not found');0===tables.hhea.data[10]&&0===tables.hhea.data[11]&&(tables.hhea.data[10]=255,tables.hhea.data[11]=255);var metricsOverride={unitsPerEm:int16(tables.head.data[18],tables.head.data[19]),yMax:int16(tables.head.data[42],tables.head.data[43]),yMin:signedInt16(tables.head.data[38],tables.head.data[39]),ascent:int16(tables.hhea.data[4],tables.hhea.data[5]),descent:signedInt16(tables.hhea.data[6],tables.hhea.data[7])};this.ascent=metricsOverride.ascent/metricsOverride.unitsPerEm,this.descent=metricsOverride.descent/metricsOverride.unitsPerEm,tables.post&&function(post,propertiesObj,maxpNumGlyphs){var start=(font.start?font.start:0)+post.offset;font.pos=start;var glyphNames,end=start+post.length,version=font.getInt32();font.skip(28);var i,valid=!0;switch(version){case 65536:glyphNames=MacStandardGlyphOrdering;break;case 131072:var numGlyphs=font.getUint16();if(numGlyphs!==maxpNumGlyphs){valid=!1;break}var glyphNameIndexes=[];for(i=0;i<numGlyphs;++i){var index=font.getUint16();if(index>=32768){valid=!1;break}glyphNameIndexes.push(index)}if(!valid)break;for(var customNames=[],strBuf=[];font.pos<end;){var stringLength=font.getByte();for(strBuf.length=stringLength,i=0;i<stringLength;++i)strBuf[i]=String.fromCharCode(font.getByte());customNames.push(strBuf.join(""))}for(glyphNames=[],i=0;i<numGlyphs;++i){var j=glyphNameIndexes[i];j<258?glyphNames.push(MacStandardGlyphOrdering[j]):glyphNames.push(customNames[j-258])}break;case 196608:break;default:(0,_util.warn)("Unknown/unsupported post table version "+version),valid=!1,propertiesObj.defaultEncoding&&(glyphNames=propertiesObj.defaultEncoding)}propertiesObj.glyphNames=glyphNames}(tables.post,properties,numGlyphs),tables.post={tag:"post",data:createPostTable(properties)};var charCodeToGlyphId=[];function hasGlyph(glyphId){return!missingGlyphs[glyphId]}if(properties.composite){var cidToGidMap=properties.cidToGidMap||[],isCidToGidMapEmpty=0===cidToGidMap.length;properties.cMap.forEach((function(charCode,cid){if(cid>65535)throw new _util.FormatError("Max size of CID is 65,535");var glyphId=-1;isCidToGidMapEmpty?glyphId=cid:void 0!==cidToGidMap[cid]&&(glyphId=cidToGidMap[cid]),glyphId>=0&&glyphId<numGlyphs&&hasGlyph(glyphId)&&(charCodeToGlyphId[charCode]=glyphId)}))}else{var cmapTable=function(cmap,file,isSymbolicFont,hasEncoding){if(!cmap)return(0,_util.warn)("No cmap table available."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};var segment,start=(file.start?file.start:0)+cmap.offset;file.pos=start,file.skip(2);for(var potentialTable,numTables=file.getUint16(),canBreak=!1,i=0;i<numTables;i++){var platformId=file.getUint16(),encodingId=file.getUint16(),offset=file.getInt32()>>>0,useTable=!1;if((!potentialTable||potentialTable.platformId!==platformId||potentialTable.encodingId!==encodingId)&&(0!==platformId||0!==encodingId&&1!==encodingId&&3!==encodingId?1===platformId&&0===encodingId?useTable=!0:3!==platformId||1!==encodingId||!hasEncoding&&potentialTable?isSymbolicFont&&3===platformId&&0===encodingId&&(useTable=!0,canBreak=!0):(useTable=!0,isSymbolicFont||(canBreak=!0)):useTable=!0,useTable&&(potentialTable={platformId:platformId,encodingId:encodingId,offset:offset}),canBreak))break}if(potentialTable&&(file.pos=start+potentialTable.offset),!potentialTable||-1===file.peekByte())return(0,_util.warn)("Could not find a preferred cmap table."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};var format=file.getUint16();file.skip(4);var j,glyphId,hasShortCmap=!1,mappings=[];if(0===format){for(j=0;j<256;j++){var index=file.getByte();index&&mappings.push({charCode:j,glyphId:index})}hasShortCmap=!0}else if(4===format){var segCount=file.getUint16()>>1;file.skip(6);var segIndex,segments=[];for(segIndex=0;segIndex<segCount;segIndex++)segments.push({end:file.getUint16()});for(file.skip(2),segIndex=0;segIndex<segCount;segIndex++)segments[segIndex].start=file.getUint16();for(segIndex=0;segIndex<segCount;segIndex++)segments[segIndex].delta=file.getUint16();var offsetsCount=0;for(segIndex=0;segIndex<segCount;segIndex++){segment=segments[segIndex];var rangeOffset=file.getUint16();if(rangeOffset){var offsetIndex=(rangeOffset>>1)-(segCount-segIndex);segment.offsetIndex=offsetIndex,offsetsCount=Math.max(offsetsCount,offsetIndex+segment.end-segment.start+1)}else segment.offsetIndex=-1}var offsets=[];for(j=0;j<offsetsCount;j++)offsets.push(file.getUint16());for(segIndex=0;segIndex<segCount;segIndex++){start=(segment=segments[segIndex]).start;var end=segment.end,delta=segment.delta;for(offsetIndex=segment.offsetIndex,j=start;j<=end;j++)65535!==j&&(glyphId=(glyphId=offsetIndex<0?j:offsets[offsetIndex+j-start])+delta&65535,mappings.push({charCode:j,glyphId:glyphId}))}}else{if(6!==format)return(0,_util.warn)("cmap table has unsupported format: "+format),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};var firstCode=file.getUint16(),entryCount=file.getUint16();for(j=0;j<entryCount;j++){glyphId=file.getUint16();var charCode=firstCode+j;mappings.push({charCode:charCode,glyphId:glyphId})}}for(mappings.sort((function(a,b){return a.charCode-b.charCode})),i=1;i<mappings.length;i++)mappings[i-1].charCode===mappings[i].charCode&&(mappings.splice(i,1),i--);return{platformId:potentialTable.platformId,encodingId:potentialTable.encodingId,mappings:mappings,hasShortCmap:hasShortCmap}}(tables.cmap,font,this.isSymbolicFont,properties.hasEncoding),cmapPlatformId=cmapTable.platformId,cmapEncodingId=cmapTable.encodingId,cmapMappings=cmapTable.mappings,cmapMappingsLength=cmapMappings.length,baseEncoding=[];if(!properties.hasEncoding||"MacRomanEncoding"!==properties.baseEncodingName&&"WinAnsiEncoding"!==properties.baseEncodingName||(baseEncoding=(0,_encodings.getEncoding)(properties.baseEncodingName)),properties.hasEncoding&&!this.isSymbolicFont&&(3===cmapPlatformId&&1===cmapEncodingId||1===cmapPlatformId&&0===cmapEncodingId))for(var glyphsUnicodeMap=(0,_glyphlist.getGlyphsUnicode)(),charCode=0;charCode<256;charCode++){var glyphName,standardGlyphName;if(glyphName=this.differences&&charCode in this.differences?this.differences[charCode]:charCode in baseEncoding&&""!==baseEncoding[charCode]?baseEncoding[charCode]:_encodings.StandardEncoding[charCode]){var unicodeOrCharCode;standardGlyphName=recoverGlyphName(glyphName,glyphsUnicodeMap),3===cmapPlatformId&&1===cmapEncodingId?unicodeOrCharCode=glyphsUnicodeMap[standardGlyphName]:1===cmapPlatformId&&0===cmapEncodingId&&(unicodeOrCharCode=_encodings.MacRomanEncoding.indexOf(standardGlyphName));for(var _i34=0;_i34<cmapMappingsLength;++_i34)if(cmapMappings[_i34].charCode===unicodeOrCharCode){charCodeToGlyphId[charCode]=cmapMappings[_i34].glyphId;break}}}else if(0===cmapPlatformId)for(var _i35=0;_i35<cmapMappingsLength;++_i35)charCodeToGlyphId[cmapMappings[_i35].charCode]=cmapMappings[_i35].glyphId;else for(var _i36=0;_i36<cmapMappingsLength;++_i36){var _charCode5=cmapMappings[_i36].charCode;3===cmapPlatformId&&_charCode5>=61440&&_charCode5<=61695&&(_charCode5&=255),charCodeToGlyphId[_charCode5]=cmapMappings[_i36].glyphId}if(properties.glyphNames&&baseEncoding.length)for(var _i37=0;_i37<256;++_i37)if(void 0===charCodeToGlyphId[_i37]&&baseEncoding[_i37]){glyphName=baseEncoding[_i37];var glyphId=properties.glyphNames.indexOf(glyphName);glyphId>0&&hasGlyph(glyphId)&&(charCodeToGlyphId[_i37]=glyphId)}}0===charCodeToGlyphId.length&&(charCodeToGlyphId[0]=0);var glyphZeroId=numGlyphsOut-1;dupFirstEntry||(glyphZeroId=0);var newMapping=adjustMapping(charCodeToGlyphId,hasGlyph,glyphZeroId);if(this.toFontChar=newMapping.toFontChar,tables.cmap={tag:"cmap",data:createCmapTable(newMapping.charCodeToGlyphId,numGlyphsOut)},tables["OS/2"]&&function(os2,file){file.pos=(file.start||0)+os2.offset;var version=file.getUint16();file.skip(60);var selection=file.getUint16();return!(version<4&&768&selection||file.getUint16()>file.getUint16()||(file.skip(6),0===file.getUint16()||(os2.data[8]=os2.data[9]=0,0)))}(tables["OS/2"],font)||(tables["OS/2"]={tag:"OS/2",data:createOS2Table(properties,newMapping.charCodeToGlyphId,metricsOverride)}),!isTrueType)try{cffFile=new _stream.Stream(tables["CFF "].data),(cff=new _cff_parser.CFFParser(cffFile,properties,!0).parse()).duplicateFirstGlyph();var compiler=new _cff_parser.CFFCompiler(cff);tables["CFF "].data=compiler.compile()}catch(e){(0,_util.warn)("Failed to compile font "+properties.loadedName)}if(tables.name){var namePrototype=readNameTable(tables.name);tables.name.data=createNameTable(name,namePrototype)}else tables.name={tag:"name",data:createNameTable(this.name)};var builder=new OpenTypeFileBuilder(header.version);for(var tableTag in tables)builder.addTable(tableTag,tables[tableTag].data);return builder.toArray()},convert:function(fontName,font,properties){properties.fixedPitch=!1,properties.builtInEncoding&&function(properties,builtInEncoding){if(!properties.hasIncludedToUnicodeMap&&!(properties.hasEncoding||builtInEncoding===properties.defaultEncoding||properties.toUnicode instanceof IdentityToUnicodeMap)){var toUnicode=[],glyphsUnicodeMap=(0,_glyphlist.getGlyphsUnicode)();for(var charCode in builtInEncoding){var glyphName=builtInEncoding[charCode],unicode=(0,_unicode.getUnicodeForGlyph)(glyphName,glyphsUnicodeMap);-1!==unicode&&(toUnicode[charCode]=String.fromCharCode(unicode))}properties.toUnicode.amend(toUnicode)}}(properties,properties.builtInEncoding);var glyphZeroId=1;font instanceof CFFFont&&(glyphZeroId=font.numGlyphs-1);var mapping=font.getGlyphMapping(properties),newMapping=adjustMapping(mapping,font.hasGlyphId.bind(font),glyphZeroId);this.toFontChar=newMapping.toFontChar;var numGlyphs=font.numGlyphs;function getCharCodes(charCodeToGlyphId,glyphId){var charCodes=null;for(var charCode in charCodeToGlyphId)glyphId===charCodeToGlyphId[charCode]&&(charCodes||(charCodes=[]),charCodes.push(0|charCode));return charCodes}function createCharCode(charCodeToGlyphId,glyphId){for(var charCode in charCodeToGlyphId)if(glyphId===charCodeToGlyphId[charCode])return 0|charCode;return newMapping.charCodeToGlyphId[newMapping.nextAvailableFontCharCode]=glyphId,newMapping.nextAvailableFontCharCode++}var seacs=font.seacs;if(seacs&&seacs.length){var matrix=properties.fontMatrix||_util.FONT_IDENTITY_MATRIX,charset=font.getCharset(),seacMap=Object.create(null);for(var glyphId in seacs){var seac=seacs[glyphId|=0],baseGlyphName=_encodings.StandardEncoding[seac[2]],accentGlyphName=_encodings.StandardEncoding[seac[3]],baseGlyphId=charset.indexOf(baseGlyphName),accentGlyphId=charset.indexOf(accentGlyphName);if(!(baseGlyphId<0||accentGlyphId<0)){var accentOffset={x:seac[0]*matrix[0]+seac[1]*matrix[2]+matrix[4],y:seac[0]*matrix[1]+seac[1]*matrix[3]+matrix[5]},charCodes=getCharCodes(mapping,glyphId);if(charCodes)for(var _i38=0,ii=charCodes.length;_i38<ii;_i38++){var charCode=charCodes[_i38],charCodeToGlyphId=newMapping.charCodeToGlyphId,baseFontCharCode=createCharCode(charCodeToGlyphId,baseGlyphId),accentFontCharCode=createCharCode(charCodeToGlyphId,accentGlyphId);seacMap[charCode]={baseFontCharCode:baseFontCharCode,accentFontCharCode:accentFontCharCode,accentOffset:accentOffset}}}}properties.seacMap=seacMap}var unitsPerEm=1/(properties.fontMatrix||_util.FONT_IDENTITY_MATRIX)[0],builder=new OpenTypeFileBuilder("OTTO");return builder.addTable("CFF ",font.data),builder.addTable("OS/2",createOS2Table(properties,newMapping.charCodeToGlyphId)),builder.addTable("cmap",createCmapTable(newMapping.charCodeToGlyphId,numGlyphs)),builder.addTable("head","\0\0\0\0\0\0\0\0\0\0_<õ\0\0"+safeString16(unitsPerEm)+"\0\0\0\0\v~'\0\0\0\0\v~'\0\0"+safeString16(properties.descent)+"ÿ"+safeString16(properties.ascent)+string16(properties.italicAngle?2:0)+"\0\0\0\0\0\0\0"),builder.addTable("hhea","\0\0\0"+safeString16(properties.ascent)+safeString16(properties.descent)+"\0\0ÿÿ\0\0\0\0\0\0"+safeString16(properties.capHeight)+safeString16(Math.tan(properties.italicAngle)*properties.xHeight)+"\0\0\0\0\0\0\0\0\0\0\0\0"+string16(numGlyphs)),builder.addTable("hmtx",function(){for(var charstrings=font.charstrings,cffWidths=font.cff?font.cff.widths:null,hmtx="\0\0\0\0",_i39=1,_ii5=numGlyphs;_i39<_ii5;_i39++){var width=0;if(charstrings){var charstring=charstrings[_i39-1];width="width"in charstring?charstring.width:0}else cffWidths&&(width=Math.ceil(cffWidths[_i39]||0));hmtx+=string16(width)+string16(0)}return hmtx}()),builder.addTable("maxp","\0\0P\0"+string16(numGlyphs)),builder.addTable("name",createNameTable(fontName)),builder.addTable("post",createPostTable(properties)),builder.toArray()},get spaceWidth(){for(var width,possibleSpaceReplacements=["space","minus","one","i","I"],i=0,ii=possibleSpaceReplacements.length;i<ii;i++){var glyphName=possibleSpaceReplacements[i];if(glyphName in this.widths){width=this.widths[glyphName];break}var glyphUnicode=(0,_glyphlist.getGlyphsUnicode)()[glyphName],charcode=0;if(this.composite&&this.cMap.contains(glyphUnicode)&&(charcode=this.cMap.lookup(glyphUnicode)),!charcode&&this.toUnicode&&(charcode=this.toUnicode.charCodeOf(glyphUnicode)),charcode<=0&&(charcode=glyphUnicode),width=this.widths[charcode])break}return width=width||this.defaultWidth,(0,_util.shadow)(this,"spaceWidth",width)},_charToGlyph:function(charcode){var fontCharCode,width,operatorListId,isSpace=arguments.length>1&&void 0!==arguments[1]&&arguments[1],widthCode=charcode;this.cMap&&this.cMap.contains(charcode)&&(widthCode=this.cMap.lookup(charcode)),width=this.widths[widthCode],width=(0,_util.isNum)(width)?width:this.defaultWidth;var vmetric=this.vmetrics&&this.vmetrics[widthCode],unicode=this.toUnicode.get(charcode)||this.fallbackToUnicode.get(charcode)||charcode;"number"==typeof unicode&&(unicode=String.fromCharCode(unicode));var isInFont=charcode in this.toFontChar;if(fontCharCode=this.toFontChar[charcode]||charcode,this.missingFile){var glyphName=this.differences[charcode]||this.defaultEncoding[charcode];".notdef"!==glyphName&&""!==glyphName||"Type1"!==this.type||(fontCharCode=32),fontCharCode=(0,_unicode.mapSpecialUnicodeValues)(fontCharCode)}this.isType3Font&&(operatorListId=fontCharCode);var accent=null;if(this.seacMap&&this.seacMap[charcode]){isInFont=!0;var seac=this.seacMap[charcode];fontCharCode=seac.baseFontCharCode,accent={fontChar:String.fromCodePoint(seac.accentFontCharCode),offset:seac.accentOffset}}var fontChar="";"number"==typeof fontCharCode&&(fontCharCode<=1114111?fontChar=String.fromCodePoint(fontCharCode):(0,_util.warn)("charToGlyph - invalid fontCharCode: ".concat(fontCharCode)));var glyph=this.glyphCache[charcode];return glyph&&glyph.matchesForCache(fontChar,unicode,accent,width,vmetric,operatorListId,isSpace,isInFont)||(glyph=new Glyph(fontChar,unicode,accent,width,vmetric,operatorListId,isSpace,isInFont),this.glyphCache[charcode]=glyph),glyph},charsToGlyphs:function(chars){var glyphs,glyph,charcode,charsCache=this.charsCache;if(charsCache&&(glyphs=charsCache[chars]))return glyphs;charsCache||(charsCache=this.charsCache=Object.create(null)),glyphs=[];var ii,charsCacheKey=chars,i=0;if(this.cMap)for(var c=Object.create(null);i<chars.length;){this.cMap.readCharCode(chars,i,c),charcode=c.charcode;var length=c.length;i+=length;var isSpace=1===length&&32===chars.charCodeAt(i-1);glyph=this._charToGlyph(charcode,isSpace),glyphs.push(glyph)}else for(i=0,ii=chars.length;i<ii;++i)charcode=chars.charCodeAt(i),glyph=this._charToGlyph(charcode,32===charcode),glyphs.push(glyph);return charsCache[charsCacheKey]=glyphs},getCharPositions:function(chars){var positions=[];if(this.cMap)for(var c=Object.create(null),_i40=0;_i40<chars.length;){this.cMap.readCharCode(chars,_i40,c);var length=c.length;positions.push([_i40,_i40+length]),_i40+=length}else for(var _i41=0,ii=chars.length;_i41<ii;++_i41)positions.push([_i41,_i41+1]);return positions},get glyphCacheValues(){return Object.values(this.glyphCache)},encodeString:function(str){for(var buffers=[],currentBuf=[],hasCurrentBufErrors=function(){return buffers.length%2==1},_i42=0,ii=str.length;_i42<ii;_i42++){var unicode=str.codePointAt(_i42);if(unicode>55295&&(unicode<57344||unicode>65533)&&_i42++,this.toUnicode){var char=String.fromCodePoint(unicode),charCode=this.toUnicode.charCodeOf(char);if(-1!==charCode){hasCurrentBufErrors()&&(buffers.push(currentBuf.join("")),currentBuf.length=0);for(var j=(this.cMap?this.cMap.getCharCodeLength(charCode):1)-1;j>=0;j--)currentBuf.push(String.fromCharCode(charCode>>8*j&255));continue}}hasCurrentBufErrors()||(buffers.push(currentBuf.join("")),currentBuf.length=0),currentBuf.push(String.fromCodePoint(unicode))}return buffers.push(currentBuf.join("")),buffers}},Font}();exports.Font=Font;var ErrorFont=function(){function ErrorFont(error){this.error=error,this.loadedName="g_font_error",this.missingFile=!0}return ErrorFont.prototype={charsToGlyphs:function(){return[]},encodeString:function(chars){return[chars]},exportData:function(){return{error:this.error}}},ErrorFont}();function type1FontGlyphMapping(properties,builtInEncoding,glyphNames){var glyphId,charCode,baseEncoding,charCodeToGlyphId=Object.create(null),isSymbolicFont=!!(properties.flags&FontFlags.Symbolic);if(properties.baseEncodingName)for(baseEncoding=(0,_encodings.getEncoding)(properties.baseEncodingName),charCode=0;charCode<baseEncoding.length;charCode++)glyphId=glyphNames.indexOf(baseEncoding[charCode]),charCodeToGlyphId[charCode]=glyphId>=0?glyphId:0;else if(isSymbolicFont)for(charCode in builtInEncoding)charCodeToGlyphId[charCode]=builtInEncoding[charCode];else for(baseEncoding=_encodings.StandardEncoding,charCode=0;charCode<baseEncoding.length;charCode++)glyphId=glyphNames.indexOf(baseEncoding[charCode]),charCodeToGlyphId[charCode]=glyphId>=0?glyphId:0;var glyphsUnicodeMap,differences=properties.differences;if(differences)for(charCode in differences){var glyphName=differences[charCode];if(-1===(glyphId=glyphNames.indexOf(glyphName))){glyphsUnicodeMap||(glyphsUnicodeMap=(0,_glyphlist.getGlyphsUnicode)());var standardGlyphName=recoverGlyphName(glyphName,glyphsUnicodeMap);standardGlyphName!==glyphName&&(glyphId=glyphNames.indexOf(standardGlyphName))}charCodeToGlyphId[charCode]=glyphId>=0?glyphId:0}return charCodeToGlyphId}exports.ErrorFont=ErrorFont;var Type1Font=function(){function findBlock(streamBytes,signature,startIndex){for(var j,streamBytesLength=streamBytes.length,signatureLength=signature.length,scanLength=streamBytesLength-signatureLength,i=startIndex,found=!1;i<scanLength;){for(j=0;j<signatureLength&&streamBytes[i+j]===signature[j];)j++;if(j>=signatureLength){for(i+=j;i<streamBytesLength&&(0,_core_utils.isWhiteSpace)(streamBytes[i]);)i++;found=!0;break}i++}return{found:found,length:i}}function Type1Font(name,file,properties){var headerBlockLength=properties.length1,pfbHeader=(properties.length2,file.peekBytes(6)),pfbHeaderPresent=128===pfbHeader[0]&&1===pfbHeader[1];pfbHeaderPresent&&(file.skip(6),headerBlockLength=pfbHeader[5]<<24|pfbHeader[4]<<16|pfbHeader[3]<<8|pfbHeader[2]);var headerBlock=function(stream,suggestedLength){var headerBytes,headerBytesLength,block,actualLength,EEXEC_SIGNATURE=[101,101,120,101,99],streamStartPos=stream.pos;try{headerBytesLength=(headerBytes=stream.getBytes(suggestedLength)).length}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex}if(headerBytesLength===suggestedLength&&(block=findBlock(headerBytes,EEXEC_SIGNATURE,suggestedLength-2*EEXEC_SIGNATURE.length)).found&&block.length===suggestedLength)return{stream:new _stream.Stream(headerBytes),length:suggestedLength};for((0,_util.warn)('Invalid "Length1" property in Type1 font -- trying to recover.'),stream.pos=streamStartPos;0!==(block=findBlock(stream.peekBytes(2048),EEXEC_SIGNATURE,0)).length;)if(stream.pos+=block.length,block.found){actualLength=stream.pos-streamStartPos;break}return stream.pos=streamStartPos,actualLength?{stream:new _stream.Stream(stream.getBytes(actualLength)),length:actualLength}:((0,_util.warn)('Unable to recover "Length1" property in Type1 font -- using as is.'),{stream:new _stream.Stream(stream.getBytes(suggestedLength)),length:suggestedLength})}(file,headerBlockLength);new _type1_parser.Type1Parser(headerBlock.stream,!1,!0).extractFontHeader(properties),pfbHeaderPresent&&((pfbHeader=file.getBytes(6))[5],pfbHeader[4],pfbHeader[3],pfbHeader[2]);var eexecBytes,eexecBlock=(eexecBytes=file.getBytes(),{stream:new _stream.Stream(eexecBytes),length:eexecBytes.length}),data=new _type1_parser.Type1Parser(eexecBlock.stream,!0,!0).extractFontProgram(properties);for(var key in data.properties)properties[key]=data.properties[key];var charstrings=data.charstrings,type2Charstrings=this.getType2Charstrings(charstrings),subrs=this.getType2Subrs(data.subrs);this.charstrings=charstrings,this.data=this.wrap(name,type2Charstrings,this.charstrings,subrs,properties),this.seacs=this.getSeacs(data.charstrings)}return Type1Font.prototype={get numGlyphs(){return this.charstrings.length+1},getCharset:function(){for(var charset=[".notdef"],charstrings=this.charstrings,glyphId=0;glyphId<charstrings.length;glyphId++)charset.push(charstrings[glyphId].glyphName);return charset},getGlyphMapping:function(properties){var charstrings=this.charstrings;if(properties.composite){for(var charCodeToGlyphId=Object.create(null),_glyphId=0,charstringsLen=charstrings.length;_glyphId<charstringsLen;_glyphId++)charCodeToGlyphId[properties.cMap.charCodeOf(_glyphId)]=_glyphId+1;return charCodeToGlyphId}var glyphId,glyphNames=[".notdef"];for(glyphId=0;glyphId<charstrings.length;glyphId++)glyphNames.push(charstrings[glyphId].glyphName);var encoding=properties.builtInEncoding;if(encoding){var builtInEncoding=Object.create(null);for(var charCode in encoding)(glyphId=glyphNames.indexOf(encoding[charCode]))>=0&&(builtInEncoding[charCode]=glyphId)}return type1FontGlyphMapping(properties,builtInEncoding,glyphNames)},hasGlyphId:function(id){return!(id<0||id>=this.numGlyphs)&&(0===id||this.charstrings[id-1].charstring.length>0)},getSeacs:function(charstrings){var i,ii,seacMap=[];for(i=0,ii=charstrings.length;i<ii;i++){var charstring=charstrings[i];charstring.seac&&(seacMap[i+1]=charstring.seac)}return seacMap},getType2Charstrings:function(type1Charstrings){for(var type2Charstrings=[],i=0,ii=type1Charstrings.length;i<ii;i++)type2Charstrings.push(type1Charstrings[i].charstring);return type2Charstrings},getType2Subrs:function(type1Subrs){var bias=0,count=type1Subrs.length;bias=count<1133?107:count<33769?1131:32768;var i,type2Subrs=[];for(i=0;i<bias;i++)type2Subrs.push([11]);for(i=0;i<count;i++)type2Subrs.push(type1Subrs[i]);return type2Subrs},wrap:function(name,glyphs,charstrings,subrs,properties){var cff=new _cff_parser.CFF;cff.header=new _cff_parser.CFFHeader(1,0,4,4),cff.names=[name];var topDict=new _cff_parser.CFFTopDict;topDict.setByName("version",391),topDict.setByName("Notice",392),topDict.setByName("FullName",393),topDict.setByName("FamilyName",394),topDict.setByName("Weight",395),topDict.setByName("Encoding",null),topDict.setByName("FontMatrix",properties.fontMatrix),topDict.setByName("FontBBox",properties.bbox),topDict.setByName("charset",null),topDict.setByName("CharStrings",null),topDict.setByName("Private",null),cff.topDict=topDict;var strings=new _cff_parser.CFFStrings;strings.add("Version 0.11"),strings.add("See original notice"),strings.add(name),strings.add(name),strings.add("Medium"),cff.strings=strings,cff.globalSubrIndex=new _cff_parser.CFFIndex;var i,ii,count=glyphs.length,charsetArray=[".notdef"];for(i=0;i<count;i++){var glyphName=charstrings[i].glyphName;-1===_cff_parser.CFFStandardStrings.indexOf(glyphName)&&strings.add(glyphName),charsetArray.push(glyphName)}cff.charset=new _cff_parser.CFFCharset(!1,0,charsetArray);var charStringsIndex=new _cff_parser.CFFIndex;for(charStringsIndex.add([139,14]),i=0;i<count;i++)charStringsIndex.add(glyphs[i]);cff.charStrings=charStringsIndex;var privateDict=new _cff_parser.CFFPrivateDict;privateDict.setByName("Subrs",null);var fields=["BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StemSnapH","StemSnapV","BlueShift","BlueFuzz","BlueScale","LanguageGroup","ExpansionFactor","ForceBold","StdHW","StdVW"];for(i=0,ii=fields.length;i<ii;i++){var field=fields[i];if(field in properties.privateData){var value=properties.privateData[field];if(Array.isArray(value))for(var j=value.length-1;j>0;j--)value[j]-=value[j-1];privateDict.setByName(field,value)}}cff.topDict.privateDict=privateDict;var subrIndex=new _cff_parser.CFFIndex;for(i=0,ii=subrs.length;i<ii;i++)subrIndex.add(subrs[i]);return privateDict.subrsIndex=subrIndex,new _cff_parser.CFFCompiler(cff).compile()}},Type1Font}(),CFFFont=function(){function CFFFont(file,properties){this.properties=properties;var parser=new _cff_parser.CFFParser(file,properties,!0);this.cff=parser.parse(),this.cff.duplicateFirstGlyph();var compiler=new _cff_parser.CFFCompiler(this.cff);this.seacs=this.cff.seacs;try{this.data=compiler.compile()}catch(e){(0,_util.warn)("Failed to compile font "+properties.loadedName),this.data=file}}return CFFFont.prototype={get numGlyphs(){return this.cff.charStrings.count},getCharset:function(){return this.cff.charset.charset},getGlyphMapping:function(){var charCodeToGlyphId,glyphId,cff=this.cff,properties=this.properties,charsets=cff.charset.charset;if(properties.composite){if(charCodeToGlyphId=Object.create(null),cff.isCIDFont)for(glyphId=0;glyphId<charsets.length;glyphId++){var cid=charsets[glyphId];charCodeToGlyphId[properties.cMap.charCodeOf(cid)]=glyphId}else for(glyphId=0;glyphId<cff.charStrings.count;glyphId++)charCodeToGlyphId[properties.cMap.charCodeOf(glyphId)]=glyphId;return charCodeToGlyphId}return charCodeToGlyphId=type1FontGlyphMapping(properties,cff.encoding?cff.encoding.encoding:null,charsets)},hasGlyphId:function(id){return this.cff.hasGlyphId(id)}},CFFFont}()},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.CFFTopDict=exports.CFFStrings=exports.CFFStandardStrings=exports.CFFPrivateDict=exports.CFFParser=exports.CFFIndex=exports.CFFHeader=exports.CFFFDSelect=exports.CFFCompiler=exports.CFFCharset=exports.CFF=void 0;var _util=__w_pdfjs_require__(2),_charsets=__w_pdfjs_require__(31),_encodings=__w_pdfjs_require__(32),CFFStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];exports.CFFStandardStrings=CFFStandardStrings;var CharstringValidationData,CharstringValidationData12,CFFParser=(CharstringValidationData=[null,{id:"hstem",min:2,stackClearing:!0,stem:!0},null,{id:"vstem",min:2,stackClearing:!0,stem:!0},{id:"vmoveto",min:1,stackClearing:!0},{id:"rlineto",min:2,resetStack:!0},{id:"hlineto",min:1,resetStack:!0},{id:"vlineto",min:1,resetStack:!0},{id:"rrcurveto",min:6,resetStack:!0},null,{id:"callsubr",min:1,undefStack:!0},{id:"return",min:0,undefStack:!0},null,null,{id:"endchar",min:0,stackClearing:!0},null,null,null,{id:"hstemhm",min:2,stackClearing:!0,stem:!0},{id:"hintmask",min:0,stackClearing:!0},{id:"cntrmask",min:0,stackClearing:!0},{id:"rmoveto",min:2,stackClearing:!0},{id:"hmoveto",min:1,stackClearing:!0},{id:"vstemhm",min:2,stackClearing:!0,stem:!0},{id:"rcurveline",min:8,resetStack:!0},{id:"rlinecurve",min:8,resetStack:!0},{id:"vvcurveto",min:4,resetStack:!0},{id:"hhcurveto",min:4,resetStack:!0},null,{id:"callgsubr",min:1,undefStack:!0},{id:"vhcurveto",min:4,resetStack:!0},{id:"hvcurveto",min:4,resetStack:!0}],CharstringValidationData12=[null,null,null,{id:"and",min:2,stackDelta:-1},{id:"or",min:2,stackDelta:-1},{id:"not",min:1,stackDelta:0},null,null,null,{id:"abs",min:1,stackDelta:0},{id:"add",min:2,stackDelta:-1,stackFn:function(stack,index){stack[index-2]=stack[index-2]+stack[index-1]}},{id:"sub",min:2,stackDelta:-1,stackFn:function(stack,index){stack[index-2]=stack[index-2]-stack[index-1]}},{id:"div",min:2,stackDelta:-1,stackFn:function(stack,index){stack[index-2]=stack[index-2]/stack[index-1]}},null,{id:"neg",min:1,stackDelta:0,stackFn:function(stack,index){stack[index-1]=-stack[index-1]}},{id:"eq",min:2,stackDelta:-1},null,null,{id:"drop",min:1,stackDelta:-1},null,{id:"put",min:2,stackDelta:-2},{id:"get",min:1,stackDelta:0},{id:"ifelse",min:4,stackDelta:-3},{id:"random",min:0,stackDelta:1},{id:"mul",min:2,stackDelta:-1,stackFn:function(stack,index){stack[index-2]=stack[index-2]*stack[index-1]}},null,{id:"sqrt",min:1,stackDelta:0},{id:"dup",min:1,stackDelta:1},{id:"exch",min:2,stackDelta:0},{id:"index",min:2,stackDelta:0},{id:"roll",min:3,stackDelta:-2},null,null,null,{id:"hflex",min:7,resetStack:!0},{id:"flex",min:13,resetStack:!0},{id:"hflex1",min:9,resetStack:!0},{id:"flex1",min:11,resetStack:!0}],function(){function CFFParser(file,properties,seacAnalysisEnabled){_classCallCheck(this,CFFParser),this.bytes=file.getBytes(),this.properties=properties,this.seacAnalysisEnabled=!!seacAnalysisEnabled}return _createClass(CFFParser,[{key:"parse",value:function(){var properties=this.properties,cff=new CFF;this.cff=cff;var header=this.parseHeader(),nameIndex=this.parseIndex(header.endPos),topDictIndex=this.parseIndex(nameIndex.endPos),stringIndex=this.parseIndex(topDictIndex.endPos),globalSubrIndex=this.parseIndex(stringIndex.endPos),topDictParsed=this.parseDict(topDictIndex.obj.get(0)),topDict=this.createDict(CFFTopDict,topDictParsed,cff.strings);cff.header=header.obj,cff.names=this.parseNameIndex(nameIndex.obj),cff.strings=this.parseStringIndex(stringIndex.obj),cff.topDict=topDict,cff.globalSubrIndex=globalSubrIndex.obj,this.parsePrivateDict(cff.topDict),cff.isCIDFont=topDict.hasName("ROS");var charStringOffset=topDict.getByName("CharStrings"),charStringIndex=this.parseIndex(charStringOffset).obj,fontMatrix=topDict.getByName("FontMatrix");fontMatrix&&(properties.fontMatrix=fontMatrix);var charset,encoding,fontBBox=topDict.getByName("FontBBox");if(fontBBox&&(properties.ascent=Math.max(fontBBox[3],fontBBox[1]),properties.descent=Math.min(fontBBox[1],fontBBox[3]),properties.ascentScaled=!0),cff.isCIDFont){for(var fdArrayIndex=this.parseIndex(topDict.getByName("FDArray")).obj,i=0,ii=fdArrayIndex.count;i<ii;++i){var dictRaw=fdArrayIndex.get(i),fontDict=this.createDict(CFFTopDict,this.parseDict(dictRaw),cff.strings);this.parsePrivateDict(fontDict),cff.fdArray.push(fontDict)}encoding=null,charset=this.parseCharsets(topDict.getByName("charset"),charStringIndex.count,cff.strings,!0),cff.fdSelect=this.parseFDSelect(topDict.getByName("FDSelect"),charStringIndex.count)}else charset=this.parseCharsets(topDict.getByName("charset"),charStringIndex.count,cff.strings,!1),encoding=this.parseEncoding(topDict.getByName("Encoding"),properties,cff.strings,charset.charset);cff.charset=charset,cff.encoding=encoding;var charStringsAndSeacs=this.parseCharStrings({charStrings:charStringIndex,localSubrIndex:topDict.privateDict.subrsIndex,globalSubrIndex:globalSubrIndex.obj,fdSelect:cff.fdSelect,fdArray:cff.fdArray,privateDict:topDict.privateDict});return cff.charStrings=charStringsAndSeacs.charStrings,cff.seacs=charStringsAndSeacs.seacs,cff.widths=charStringsAndSeacs.widths,cff}},{key:"parseHeader",value:function(){for(var bytes=this.bytes,bytesLength=bytes.length,offset=0;offset<bytesLength&&1!==bytes[offset];)++offset;if(offset>=bytesLength)throw new _util.FormatError("Invalid CFF header");0!==offset&&((0,_util.info)("cff data is shifted"),bytes=bytes.subarray(offset),this.bytes=bytes);var major=bytes[0],minor=bytes[1],hdrSize=bytes[2],offSize=bytes[3];return{obj:new CFFHeader(major,minor,hdrSize,offSize),endPos:hdrSize}}},{key:"parseDict",value:function(dict){var pos=0;function parseOperand(){var value=dict[pos++];return 30===value?function(){for(var str="",eof=15,lookup=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"],length=dict.length;pos<length;){var b=dict[pos++],b1=b>>4,b2=15&b;if(b1===eof)break;if(str+=lookup[b1],b2===eof)break;str+=lookup[b2]}return parseFloat(str)}():28===value?value=((value=dict[pos++])<<24|dict[pos++]<<16)>>16:29===value?value=(value=(value=(value=dict[pos++])<<8|dict[pos++])<<8|dict[pos++])<<8|dict[pos++]:value>=32&&value<=246?value-139:value>=247&&value<=250?256*(value-247)+dict[pos++]+108:value>=251&&value<=254?-256*(value-251)-dict[pos++]-108:((0,_util.warn)('CFFParser_parseDict: "'+value+'" is a reserved command.'),NaN)}var operands=[],entries=[];pos=0;for(var end=dict.length;pos<end;){var b=dict[pos];b<=21?(12===b&&(b=b<<8|dict[++pos]),entries.push([b,operands]),operands=[],++pos):operands.push(parseOperand())}return entries}},{key:"parseIndex",value:function(pos){var i,ii,cffIndex=new CFFIndex,bytes=this.bytes,count=bytes[pos++]<<8|bytes[pos++],offsets=[],end=pos;if(0!==count){var offsetSize=bytes[pos++],startPos=pos+(count+1)*offsetSize-1;for(i=0,ii=count+1;i<ii;++i){for(var offset=0,j=0;j<offsetSize;++j)offset<<=8,offset+=bytes[pos++];offsets.push(startPos+offset)}end=offsets[count]}for(i=0,ii=offsets.length-1;i<ii;++i){var offsetStart=offsets[i],offsetEnd=offsets[i+1];cffIndex.add(bytes.subarray(offsetStart,offsetEnd))}return{obj:cffIndex,endPos:end}}},{key:"parseNameIndex",value:function(index){for(var names=[],i=0,ii=index.count;i<ii;++i){var name=index.get(i);names.push((0,_util.bytesToString)(name))}return names}},{key:"parseStringIndex",value:function(index){for(var strings=new CFFStrings,i=0,ii=index.count;i<ii;++i){var data=index.get(i);strings.add((0,_util.bytesToString)(data))}return strings}},{key:"createDict",value:function(Type,dict,strings){for(var cffDict=new Type(strings),i=0,ii=dict.length;i<ii;++i){var pair=dict[i],key=pair[0],value=pair[1];cffDict.setByKey(key,value)}return cffDict}},{key:"parseCharString",value:function(state,data,localSubrIndex,globalSubrIndex){if(!data||state.callDepth>10)return!1;for(var stackSize=state.stackSize,stack=state.stack,length=data.length,j=0;j<length;){var value=data[j++],validationCommand=null;if(12===value){var q=data[j++];0===q?(data[j-2]=139,data[j-1]=22,stackSize=0):validationCommand=CharstringValidationData12[q]}else if(28===value)stack[stackSize]=(data[j]<<24|data[j+1]<<16)>>16,j+=2,stackSize++;else if(14===value){if(stackSize>=4&&(stackSize-=4,this.seacAnalysisEnabled))return state.seac=stack.slice(stackSize,stackSize+4),!1;validationCommand=CharstringValidationData[value]}else if(value>=32&&value<=246)stack[stackSize]=value-139,stackSize++;else if(value>=247&&value<=254)stack[stackSize]=value<251?(value-247<<8)+data[j]+108:-(value-251<<8)-data[j]-108,j++,stackSize++;else if(255===value)stack[stackSize]=(data[j]<<24|data[j+1]<<16|data[j+2]<<8|data[j+3])/65536,j+=4,stackSize++;else if(19===value||20===value)state.hints+=stackSize>>1,j+=state.hints+7>>3,stackSize%=2,validationCommand=CharstringValidationData[value];else{if(10===value||29===value){var subrsIndex;if(!(subrsIndex=10===value?localSubrIndex:globalSubrIndex))return validationCommand=CharstringValidationData[value],(0,_util.warn)("Missing subrsIndex for "+validationCommand.id),!1;var bias=32768;subrsIndex.count<1240?bias=107:subrsIndex.count<33900&&(bias=1131);var subrNumber=stack[--stackSize]+bias;if(subrNumber<0||subrNumber>=subrsIndex.count||isNaN(subrNumber))return validationCommand=CharstringValidationData[value],(0,_util.warn)("Out of bounds subrIndex for "+validationCommand.id),!1;if(state.stackSize=stackSize,state.callDepth++,!this.parseCharString(state,subrsIndex.get(subrNumber),localSubrIndex,globalSubrIndex))return!1;state.callDepth--,stackSize=state.stackSize;continue}if(11===value)return state.stackSize=stackSize,!0;validationCommand=CharstringValidationData[value]}if(validationCommand){if(validationCommand.stem&&(state.hints+=stackSize>>1,3===value||23===value?state.hasVStems=!0:!state.hasVStems||1!==value&&18!==value||((0,_util.warn)("CFF stem hints are in wrong order"),data[j-1]=1===value?3:23)),"min"in validationCommand&&!state.undefStack&&stackSize<validationCommand.min)return(0,_util.warn)("Not enough parameters for "+validationCommand.id+"; actual: "+stackSize+", expected: "+validationCommand.min),!1;state.firstStackClearing&&validationCommand.stackClearing&&(state.firstStackClearing=!1,(stackSize-=validationCommand.min)>=2&&validationCommand.stem?stackSize%=2:stackSize>1&&(0,_util.warn)("Found too many parameters for stack-clearing command"),stackSize>0&&stack[stackSize-1]>=0&&(state.width=stack[stackSize-1])),"stackDelta"in validationCommand?("stackFn"in validationCommand&&validationCommand.stackFn(stack,stackSize),stackSize+=validationCommand.stackDelta):validationCommand.stackClearing?stackSize=0:validationCommand.resetStack?(stackSize=0,state.undefStack=!1):validationCommand.undefStack&&(stackSize=0,state.undefStack=!0,state.firstStackClearing=!1)}}return state.stackSize=stackSize,!0}},{key:"parseCharStrings",value:function(_ref45){for(var charStrings=_ref45.charStrings,localSubrIndex=_ref45.localSubrIndex,globalSubrIndex=_ref45.globalSubrIndex,fdSelect=_ref45.fdSelect,fdArray=_ref45.fdArray,privateDict=_ref45.privateDict,seacs=[],widths=[],count=charStrings.count,i=0;i<count;i++){var charstring=charStrings.get(i),state={callDepth:0,stackSize:0,stack:[],undefStack:!0,hints:0,firstStackClearing:!0,seac:null,width:null,hasVStems:!1},valid=!0,localSubrToUse=null,privateDictToUse=privateDict;if(fdSelect&&fdArray.length){var fdIndex=fdSelect.getFDIndex(i);-1===fdIndex&&((0,_util.warn)("Glyph index is not in fd select."),valid=!1),fdIndex>=fdArray.length&&((0,_util.warn)("Invalid fd index for glyph index."),valid=!1),valid&&(localSubrToUse=(privateDictToUse=fdArray[fdIndex].privateDict).subrsIndex)}else localSubrIndex&&(localSubrToUse=localSubrIndex);if(valid&&(valid=this.parseCharString(state,charstring,localSubrToUse,globalSubrIndex)),null!==state.width){var nominalWidth=privateDictToUse.getByName("nominalWidthX");widths[i]=nominalWidth+state.width}else{var defaultWidth=privateDictToUse.getByName("defaultWidthX");widths[i]=defaultWidth}null!==state.seac&&(seacs[i]=state.seac),valid||charStrings.set(i,new Uint8Array([14]))}return{charStrings:charStrings,seacs:seacs,widths:widths}}},{key:"emptyPrivateDictionary",value:function(parentDict){var privateDict=this.createDict(CFFPrivateDict,[],parentDict.strings);parentDict.setByKey(18,[0,0]),parentDict.privateDict=privateDict}},{key:"parsePrivateDict",value:function(parentDict){if(parentDict.hasName("Private")){var privateOffset=parentDict.getByName("Private");if(Array.isArray(privateOffset)&&2===privateOffset.length){var size=privateOffset[0],offset=privateOffset[1];if(0===size||offset>=this.bytes.length)this.emptyPrivateDictionary(parentDict);else{var privateDictEnd=offset+size,dictData=this.bytes.subarray(offset,privateDictEnd),dict=this.parseDict(dictData),privateDict=this.createDict(CFFPrivateDict,dict,parentDict.strings);if(parentDict.privateDict=privateDict,privateDict.getByName("Subrs")){var subrsOffset=privateDict.getByName("Subrs"),relativeOffset=offset+subrsOffset;if(0===subrsOffset||relativeOffset>=this.bytes.length)this.emptyPrivateDictionary(parentDict);else{var subrsIndex=this.parseIndex(relativeOffset);privateDict.subrsIndex=subrsIndex.obj}}}}else parentDict.removeByName("Private")}else this.emptyPrivateDictionary(parentDict)}},{key:"parseCharsets",value:function(pos,length,strings,cid){if(0===pos)return new CFFCharset(!0,CFFCharsetPredefinedTypes.ISO_ADOBE,_charsets.ISOAdobeCharset);if(1===pos)return new CFFCharset(!0,CFFCharsetPredefinedTypes.EXPERT,_charsets.ExpertCharset);if(2===pos)return new CFFCharset(!0,CFFCharsetPredefinedTypes.EXPERT_SUBSET,_charsets.ExpertSubsetCharset);var id,count,i,bytes=this.bytes,start=pos,format=bytes[pos++],charset=[cid?0:".notdef"];switch(length-=1,format){case 0:for(i=0;i<length;i++)id=bytes[pos++]<<8|bytes[pos++],charset.push(cid?id:strings.get(id));break;case 1:for(;charset.length<=length;)for(id=bytes[pos++]<<8|bytes[pos++],count=bytes[pos++],i=0;i<=count;i++)charset.push(cid?id++:strings.get(id++));break;case 2:for(;charset.length<=length;)for(id=bytes[pos++]<<8|bytes[pos++],count=bytes[pos++]<<8|bytes[pos++],i=0;i<=count;i++)charset.push(cid?id++:strings.get(id++));break;default:throw new _util.FormatError("Unknown charset format")}var end=pos,raw=bytes.subarray(start,end);return new CFFCharset(!1,format,charset,raw)}},{key:"parseEncoding",value:function(pos,properties,strings,charset){var format,i,ii,encoding=Object.create(null),bytes=this.bytes,predefined=!1,raw=null;if(0===pos||1===pos){predefined=!0,format=pos;var baseEncoding=pos?_encodings.ExpertEncoding:_encodings.StandardEncoding;for(i=0,ii=charset.length;i<ii;i++){var index=baseEncoding.indexOf(charset[i]);-1!==index&&(encoding[index]=i)}}else{var dataStart=pos;switch(127&(format=bytes[pos++])){case 0:var glyphsCount=bytes[pos++];for(i=1;i<=glyphsCount;i++)encoding[bytes[pos++]]=i;break;case 1:var rangesCount=bytes[pos++],gid=1;for(i=0;i<rangesCount;i++)for(var start=bytes[pos++],left=bytes[pos++],j=start;j<=start+left;j++)encoding[j]=gid++;break;default:throw new _util.FormatError("Unknown encoding format: ".concat(format," in CFF"))}var dataEnd=pos;128&format&&(bytes[dataStart]&=127,function(){var supplementsCount=bytes[pos++];for(i=0;i<supplementsCount;i++){var code=bytes[pos++],sid=(bytes[pos++]<<8)+(255&bytes[pos++]);encoding[code]=charset.indexOf(strings.get(sid))}}()),raw=bytes.subarray(dataStart,dataEnd)}return new CFFEncoding(predefined,format&=127,encoding,raw)}},{key:"parseFDSelect",value:function(pos,length){var i,bytes=this.bytes,format=bytes[pos++],fdSelect=[];switch(format){case 0:for(i=0;i<length;++i){var id=bytes[pos++];fdSelect.push(id)}break;case 3:var rangesCount=bytes[pos++]<<8|bytes[pos++];for(i=0;i<rangesCount;++i){var first=bytes[pos++]<<8|bytes[pos++];0===i&&0!==first&&((0,_util.warn)("parseFDSelect: The first range must have a first GID of 0 -- trying to recover."),first=0);for(var fdIndex=bytes[pos++],next=bytes[pos]<<8|bytes[pos+1],j=first;j<next;++j)fdSelect.push(fdIndex)}pos+=2;break;default:throw new _util.FormatError('parseFDSelect: Unknown format "'.concat(format,'".'))}if(fdSelect.length!==length)throw new _util.FormatError("parseFDSelect: Invalid font data.");return new CFFFDSelect(format,fdSelect)}}]),CFFParser}());exports.CFFParser=CFFParser;var CFF=function(){function CFF(){_classCallCheck(this,CFF),this.header=null,this.names=[],this.topDict=null,this.strings=new CFFStrings,this.globalSubrIndex=null,this.encoding=null,this.charset=null,this.charStrings=null,this.fdArray=[],this.fdSelect=null,this.isCIDFont=!1}return _createClass(CFF,[{key:"duplicateFirstGlyph",value:function(){if(this.charStrings.count>=65535)(0,_util.warn)("Not enough space in charstrings to duplicate first glyph.");else{var glyphZero=this.charStrings.get(0);this.charStrings.add(glyphZero),this.isCIDFont&&this.fdSelect.fdSelect.push(this.fdSelect.fdSelect[0])}}},{key:"hasGlyphId",value:function(id){return!(id<0||id>=this.charStrings.count)&&this.charStrings.get(id).length>0}}]),CFF}();exports.CFF=CFF;var CFFHeader=_createClass((function CFFHeader(major,minor,hdrSize,offSize){_classCallCheck(this,CFFHeader),this.major=major,this.minor=minor,this.hdrSize=hdrSize,this.offSize=offSize}));exports.CFFHeader=CFFHeader;var CFFStrings=function(){function CFFStrings(){_classCallCheck(this,CFFStrings),this.strings=[]}return _createClass(CFFStrings,[{key:"get",value:function(index){return index>=0&&index<=390?CFFStandardStrings[index]:index-391<=this.strings.length?this.strings[index-391]:CFFStandardStrings[0]}},{key:"getSID",value:function(str){var index=CFFStandardStrings.indexOf(str);return-1!==index?index:-1!==(index=this.strings.indexOf(str))?index+391:-1}},{key:"add",value:function(value){this.strings.push(value)}},{key:"count",get:function(){return this.strings.length}}]),CFFStrings}();exports.CFFStrings=CFFStrings;var CFFIndex=function(){function CFFIndex(){_classCallCheck(this,CFFIndex),this.objects=[],this.length=0}return _createClass(CFFIndex,[{key:"add",value:function(data){this.length+=data.length,this.objects.push(data)}},{key:"set",value:function(index,data){this.length+=data.length-this.objects[index].length,this.objects[index]=data}},{key:"get",value:function(index){return this.objects[index]}},{key:"count",get:function(){return this.objects.length}}]),CFFIndex}();exports.CFFIndex=CFFIndex;var layout,tables,CFFDict=function(){function CFFDict(tables,strings){_classCallCheck(this,CFFDict),this.keyToNameMap=tables.keyToNameMap,this.nameToKeyMap=tables.nameToKeyMap,this.defaults=tables.defaults,this.types=tables.types,this.opcodes=tables.opcodes,this.order=tables.order,this.strings=strings,this.values=Object.create(null)}return _createClass(CFFDict,[{key:"setByKey",value:function(key,value){if(!(key in this.keyToNameMap))return!1;var valueLength=value.length;if(0===valueLength)return!0;for(var i=0;i<valueLength;i++)if(isNaN(value[i]))return(0,_util.warn)('Invalid CFFDict value: "'+value+'" for key "'+key+'".'),!0;var type=this.types[key];return"num"!==type&&"sid"!==type&&"offset"!==type||(value=value[0]),this.values[key]=value,!0}},{key:"setByName",value:function(name,value){if(!(name in this.nameToKeyMap))throw new _util.FormatError('Invalid dictionary name "'.concat(name,'"'));this.values[this.nameToKeyMap[name]]=value}},{key:"hasName",value:function(name){return this.nameToKeyMap[name]in this.values}},{key:"getByName",value:function(name){if(!(name in this.nameToKeyMap))throw new _util.FormatError("Invalid dictionary name ".concat(name,'"'));var key=this.nameToKeyMap[name];return key in this.values?this.values[key]:this.defaults[key]}},{key:"removeByName",value:function(name){delete this.values[this.nameToKeyMap[name]]}}],[{key:"createTables",value:function(layout){for(var tables={keyToNameMap:{},nameToKeyMap:{},defaults:{},types:{},opcodes:{},order:[]},i=0,ii=layout.length;i<ii;++i){var entry=layout[i],key=Array.isArray(entry[0])?(entry[0][0]<<8)+entry[0][1]:entry[0];tables.keyToNameMap[key]=entry[1],tables.nameToKeyMap[entry[1]]=key,tables.types[key]=entry[2],tables.defaults[key]=entry[3],tables.opcodes[key]=Array.isArray(entry[0])?entry[0]:[entry[0]],tables.order.push(key)}return tables}}]),CFFDict}(),CFFTopDict=(layout=[[[12,30],"ROS",["sid","sid","num"],null],[[12,20],"SyntheticBase","num",null],[0,"version","sid",null],[1,"Notice","sid",null],[[12,0],"Copyright","sid",null],[2,"FullName","sid",null],[3,"FamilyName","sid",null],[4,"Weight","sid",null],[[12,1],"isFixedPitch","num",0],[[12,2],"ItalicAngle","num",0],[[12,3],"UnderlinePosition","num",-100],[[12,4],"UnderlineThickness","num",50],[[12,5],"PaintType","num",0],[[12,6],"CharstringType","num",2],[[12,7],"FontMatrix",["num","num","num","num","num","num"],[.001,0,0,.001,0,0]],[13,"UniqueID","num",null],[5,"FontBBox",["num","num","num","num"],[0,0,0,0]],[[12,8],"StrokeWidth","num",0],[14,"XUID","array",null],[15,"charset","offset",0],[16,"Encoding","offset",0],[17,"CharStrings","offset",0],[18,"Private",["offset","offset"],null],[[12,21],"PostScript","sid",null],[[12,22],"BaseFontName","sid",null],[[12,23],"BaseFontBlend","delta",null],[[12,31],"CIDFontVersion","num",0],[[12,32],"CIDFontRevision","num",0],[[12,33],"CIDFontType","num",0],[[12,34],"CIDCount","num",8720],[[12,35],"UIDBase","num",null],[[12,37],"FDSelect","offset",null],[[12,36],"FDArray","offset",null],[[12,38],"FontName","sid",null]],tables=null,function(_CFFDict){_inherits(CFFTopDict,_CFFDict);var _super61=_createSuper(CFFTopDict);function CFFTopDict(strings){var _this72;return _classCallCheck(this,CFFTopDict),null===tables&&(tables=CFFDict.createTables(layout)),(_this72=_super61.call(this,tables,strings)).privateDict=null,_this72}return _createClass(CFFTopDict)}(CFFDict));exports.CFFTopDict=CFFTopDict;var CFFPrivateDict=function(){var layout=[[6,"BlueValues","delta",null],[7,"OtherBlues","delta",null],[8,"FamilyBlues","delta",null],[9,"FamilyOtherBlues","delta",null],[[12,9],"BlueScale","num",.039625],[[12,10],"BlueShift","num",7],[[12,11],"BlueFuzz","num",1],[10,"StdHW","num",null],[11,"StdVW","num",null],[[12,12],"StemSnapH","delta",null],[[12,13],"StemSnapV","delta",null],[[12,14],"ForceBold","num",0],[[12,17],"LanguageGroup","num",0],[[12,18],"ExpansionFactor","num",.06],[[12,19],"initialRandomSeed","num",0],[20,"defaultWidthX","num",0],[21,"nominalWidthX","num",0],[19,"Subrs","offset",null]],tables=null;return function(_CFFDict2){_inherits(CFFPrivateDict,_CFFDict2);var _super62=_createSuper(CFFPrivateDict);function CFFPrivateDict(strings){var _this73;return _classCallCheck(this,CFFPrivateDict),null===tables&&(tables=CFFDict.createTables(layout)),(_this73=_super62.call(this,tables,strings)).subrsIndex=null,_this73}return _createClass(CFFPrivateDict)}(CFFDict)}();exports.CFFPrivateDict=CFFPrivateDict;var CFFCharsetPredefinedTypes={ISO_ADOBE:0,EXPERT:1,EXPERT_SUBSET:2},CFFCharset=_createClass((function CFFCharset(predefined,format,charset,raw){_classCallCheck(this,CFFCharset),this.predefined=predefined,this.format=format,this.charset=charset,this.raw=raw}));exports.CFFCharset=CFFCharset;var CFFEncoding=_createClass((function CFFEncoding(predefined,format,encoding,raw){_classCallCheck(this,CFFEncoding),this.predefined=predefined,this.format=format,this.encoding=encoding,this.raw=raw})),CFFFDSelect=function(){function CFFFDSelect(format,fdSelect){_classCallCheck(this,CFFFDSelect),this.format=format,this.fdSelect=fdSelect}return _createClass(CFFFDSelect,[{key:"getFDIndex",value:function(glyphIndex){return glyphIndex<0||glyphIndex>=this.fdSelect.length?-1:this.fdSelect[glyphIndex]}}]),CFFFDSelect}();exports.CFFFDSelect=CFFFDSelect;var CFFOffsetTracker=function(){function CFFOffsetTracker(){_classCallCheck(this,CFFOffsetTracker),this.offsets=Object.create(null)}return _createClass(CFFOffsetTracker,[{key:"isTracking",value:function(key){return key in this.offsets}},{key:"track",value:function(key,location){if(key in this.offsets)throw new _util.FormatError("Already tracking location of ".concat(key));this.offsets[key]=location}},{key:"offset",value:function(value){for(var key in this.offsets)this.offsets[key]+=value}},{key:"setEntryLocation",value:function(key,values,output){if(!(key in this.offsets))throw new _util.FormatError("Not tracking location of ".concat(key));for(var data=output.data,dataOffset=this.offsets[key],i=0,ii=values.length;i<ii;++i){var offset0=5*i+dataOffset,offset1=offset0+1,offset2=offset0+2,offset3=offset0+3,offset4=offset0+4;if(29!==data[offset0]||0!==data[offset1]||0!==data[offset2]||0!==data[offset3]||0!==data[offset4])throw new _util.FormatError("writing to an offset that is not empty");var value=values[i];data[offset0]=29,data[offset1]=value>>24&255,data[offset2]=value>>16&255,data[offset3]=value>>8&255,data[offset4]=255&value}}}]),CFFOffsetTracker}(),CFFCompiler=function(){function CFFCompiler(cff){_classCallCheck(this,CFFCompiler),this.cff=cff}return _createClass(CFFCompiler,[{key:"compile",value:function(){var cff=this.cff,output={data:[],length:0,add:function(data){this.data=this.data.concat(data),this.length=this.data.length}},header=this.compileHeader(cff.header);output.add(header);var nameIndex=this.compileNameIndex(cff.names);if(output.add(nameIndex),cff.isCIDFont&&cff.topDict.hasName("FontMatrix")){var base=cff.topDict.getByName("FontMatrix");cff.topDict.removeByName("FontMatrix");for(var i=0,ii=cff.fdArray.length;i<ii;i++){var subDict=cff.fdArray[i],matrix=base.slice(0);subDict.hasName("FontMatrix")&&(matrix=_util.Util.transform(matrix,subDict.getByName("FontMatrix"))),subDict.setByName("FontMatrix",matrix)}}var xuid=cff.topDict.getByName("XUID");xuid&&xuid.length>16&&cff.topDict.removeByName("XUID"),cff.topDict.setByName("charset",0);var compiled=this.compileTopDicts([cff.topDict],output.length,cff.isCIDFont);output.add(compiled.output);var topDictTracker=compiled.trackers[0],stringIndex=this.compileStringIndex(cff.strings.strings);output.add(stringIndex);var globalSubrIndex=this.compileIndex(cff.globalSubrIndex);if(output.add(globalSubrIndex),cff.encoding&&cff.topDict.hasName("Encoding"))if(cff.encoding.predefined)topDictTracker.setEntryLocation("Encoding",[cff.encoding.format],output);else{var encoding=this.compileEncoding(cff.encoding);topDictTracker.setEntryLocation("Encoding",[output.length],output),output.add(encoding)}var charset=this.compileCharset(cff.charset,cff.charStrings.count,cff.strings,cff.isCIDFont);topDictTracker.setEntryLocation("charset",[output.length],output),output.add(charset);var charStrings=this.compileCharStrings(cff.charStrings);if(topDictTracker.setEntryLocation("CharStrings",[output.length],output),output.add(charStrings),cff.isCIDFont){topDictTracker.setEntryLocation("FDSelect",[output.length],output);var fdSelect=this.compileFDSelect(cff.fdSelect);output.add(fdSelect),compiled=this.compileTopDicts(cff.fdArray,output.length,!0),topDictTracker.setEntryLocation("FDArray",[output.length],output),output.add(compiled.output);var fontDictTrackers=compiled.trackers;this.compilePrivateDicts(cff.fdArray,fontDictTrackers,output)}return this.compilePrivateDicts([cff.topDict],[topDictTracker],output),output.add([0]),output.data}},{key:"encodeNumber",value:function(value){return Number.isInteger(value)?this.encodeInteger(value):this.encodeFloat(value)}},{key:"encodeFloat",value:function(num){var value=num.toString(),m=CFFCompiler.EncodeFloatRegExp.exec(value);if(m){var epsilon=parseFloat("1e"+((m[2]?+m[2]:0)+m[1].length));value=(Math.round(num*epsilon)/epsilon).toString()}var i,ii,nibbles="";for(i=0,ii=value.length;i<ii;++i){var a=value[i];nibbles+="e"===a?"-"===value[++i]?"c":"b":"."===a?"a":"-"===a?"e":a}var out=[30];for(i=0,ii=(nibbles+=1&nibbles.length?"f":"ff").length;i<ii;i+=2)out.push(parseInt(nibbles.substring(i,i+2),16));return out}},{key:"encodeInteger",value:function(value){return value>=-107&&value<=107?[value+139]:value>=108&&value<=1131?[247+((value-=108)>>8),255&value]:value>=-1131&&value<=-108?[251+((value=-value-108)>>8),255&value]:value>=-32768&&value<=32767?[28,value>>8&255,255&value]:[29,value>>24&255,value>>16&255,value>>8&255,255&value]}},{key:"compileHeader",value:function(header){return[header.major,header.minor,header.hdrSize,header.offSize]}},{key:"compileNameIndex",value:function(names){for(var nameIndex=new CFFIndex,i=0,ii=names.length;i<ii;++i){for(var name=names[i],length=Math.min(name.length,127),sanitizedName=new Array(length),j=0;j<length;j++){var char=name[j];(char<"!"||char>"~"||"["===char||"]"===char||"("===char||")"===char||"{"===char||"}"===char||"<"===char||">"===char||"/"===char||"%"===char)&&(char="_"),sanitizedName[j]=char}""===(sanitizedName=sanitizedName.join(""))&&(sanitizedName="Bad_Font_Name"),nameIndex.add((0,_util.stringToBytes)(sanitizedName))}return this.compileIndex(nameIndex)}},{key:"compileTopDicts",value:function(dicts,length,removeCidKeys){for(var fontDictTrackers=[],fdArrayIndex=new CFFIndex,i=0,ii=dicts.length;i<ii;++i){var fontDict=dicts[i];removeCidKeys&&(fontDict.removeByName("CIDFontVersion"),fontDict.removeByName("CIDFontRevision"),fontDict.removeByName("CIDFontType"),fontDict.removeByName("CIDCount"),fontDict.removeByName("UIDBase"));var fontDictTracker=new CFFOffsetTracker,fontDictData=this.compileDict(fontDict,fontDictTracker);fontDictTrackers.push(fontDictTracker),fdArrayIndex.add(fontDictData),fontDictTracker.offset(length)}return{trackers:fontDictTrackers,output:fdArrayIndex=this.compileIndex(fdArrayIndex,fontDictTrackers)}}},{key:"compilePrivateDicts",value:function(dicts,trackers,output){for(var i=0,ii=dicts.length;i<ii;++i){var fontDict=dicts[i],privateDict=fontDict.privateDict;if(!privateDict||!fontDict.hasName("Private"))throw new _util.FormatError("There must be a private dictionary.");var privateDictTracker=new CFFOffsetTracker,privateDictData=this.compileDict(privateDict,privateDictTracker),outputLength=output.length;if(privateDictTracker.offset(outputLength),privateDictData.length||(outputLength=0),trackers[i].setEntryLocation("Private",[privateDictData.length,outputLength],output),output.add(privateDictData),privateDict.subrsIndex&&privateDict.hasName("Subrs")){var subrs=this.compileIndex(privateDict.subrsIndex);privateDictTracker.setEntryLocation("Subrs",[privateDictData.length],output),output.add(subrs)}}}},{key:"compileDict",value:function(dict,offsetTracker){for(var out=[],order=dict.order,i=0;i<order.length;++i){var key=order[i];if(key in dict.values){var values=dict.values[key],types=dict.types[key];if(Array.isArray(types)||(types=[types]),Array.isArray(values)||(values=[values]),0!==values.length){for(var j=0,jj=types.length;j<jj;++j){var type=types[j],value=values[j];switch(type){case"num":case"sid":out=out.concat(this.encodeNumber(value));break;case"offset":var name=dict.keyToNameMap[key];offsetTracker.isTracking(name)||offsetTracker.track(name,out.length),out=out.concat([29,0,0,0,0]);break;case"array":case"delta":out=out.concat(this.encodeNumber(value));for(var k=1,kk=values.length;k<kk;++k)out=out.concat(this.encodeNumber(values[k]));break;default:throw new _util.FormatError("Unknown data type of ".concat(type))}}out=out.concat(dict.opcodes[key])}}}return out}},{key:"compileStringIndex",value:function(strings){for(var stringIndex=new CFFIndex,i=0,ii=strings.length;i<ii;++i)stringIndex.add((0,_util.stringToBytes)(strings[i]));return this.compileIndex(stringIndex)}},{key:"compileGlobalSubrIndex",value:function(){var globalSubrIndex=this.cff.globalSubrIndex;this.out.writeByteArray(this.compileIndex(globalSubrIndex))}},{key:"compileCharStrings",value:function(charStrings){for(var charStringsIndex=new CFFIndex,i=0;i<charStrings.count;i++){var glyph=charStrings.get(i);0!==glyph.length?charStringsIndex.add(glyph):charStringsIndex.add(new Uint8Array([139,14]))}return this.compileIndex(charStringsIndex)}},{key:"compileCharset",value:function(charset,numGlyphs,strings,isCIDFont){var out,numGlyphsLessNotDef=numGlyphs-1;if(isCIDFont)out=new Uint8Array([2,0,0,numGlyphsLessNotDef>>8&255,255&numGlyphsLessNotDef]);else{(out=new Uint8Array(1+2*numGlyphsLessNotDef))[0]=0;for(var charsetIndex=0,numCharsets=charset.charset.length,warned=!1,_i43=1;_i43<out.length;_i43+=2){var sid=0;if(charsetIndex<numCharsets){var name=charset.charset[charsetIndex++];-1===(sid=strings.getSID(name))&&(sid=0,warned||(warned=!0,(0,_util.warn)("Couldn't find ".concat(name," in CFF strings"))))}out[_i43]=sid>>8&255,out[_i43+1]=255&sid}}return this.compileTypedArray(out)}},{key:"compileEncoding",value:function(encoding){return this.compileTypedArray(encoding.raw)}},{key:"compileFDSelect",value:function(fdSelect){var out,i,format=fdSelect.format;switch(format){case 0:for((out=new Uint8Array(1+fdSelect.fdSelect.length))[0]=format,i=0;i<fdSelect.fdSelect.length;i++)out[i+1]=fdSelect.fdSelect[i];break;case 3:var lastFD=fdSelect.fdSelect[0],ranges=[format,0,0,0,0,lastFD];for(i=1;i<fdSelect.fdSelect.length;i++){var currentFD=fdSelect.fdSelect[i];currentFD!==lastFD&&(ranges.push(i>>8&255,255&i,currentFD),lastFD=currentFD)}var numRanges=(ranges.length-3)/3;ranges[1]=numRanges>>8&255,ranges[2]=255&numRanges,ranges.push(i>>8&255,255&i),out=new Uint8Array(ranges)}return this.compileTypedArray(out)}},{key:"compileTypedArray",value:function(data){for(var out=[],i=0,ii=data.length;i<ii;++i)out[i]=data[i];return out}},{key:"compileIndex",value:function(index){var trackers=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],objects=index.objects,count=objects.length;if(0===count)return[0,0,0];var i,offsetSize,data=[count>>8&255,255&count],lastOffset=1;for(i=0;i<count;++i)lastOffset+=objects[i].length;offsetSize=lastOffset<256?1:lastOffset<65536?2:lastOffset<16777216?3:4,data.push(offsetSize);var relativeOffset=1;for(i=0;i<count+1;i++)1===offsetSize?data.push(255&relativeOffset):2===offsetSize?data.push(relativeOffset>>8&255,255&relativeOffset):3===offsetSize?data.push(relativeOffset>>16&255,relativeOffset>>8&255,255&relativeOffset):data.push(relativeOffset>>>24&255,relativeOffset>>16&255,relativeOffset>>8&255,255&relativeOffset),objects[i]&&(relativeOffset+=objects[i].length);for(i=0;i<count;i++){trackers[i]&&trackers[i].offset(data.length);for(var j=0,jj=objects[i].length;j<jj;j++)data.push(objects[i][j])}return data}}],[{key:"EncodeFloatRegExp",get:function(){return(0,_util.shadow)(this,"EncodeFloatRegExp",/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/)}}]),CFFCompiler}();exports.CFFCompiler=CFFCompiler},function(__unused_webpack_module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.ISOAdobeCharset=exports.ExpertSubsetCharset=exports.ExpertCharset=void 0,exports.ISOAdobeCharset=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron"],exports.ExpertCharset=[".notdef","space","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],exports.ExpertSubsetCharset=[".notdef","space","dollaroldstyle","dollarsuperior","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","hyphensuperior","colonmonetary","onefitted","rupiah","centoldstyle","figuredash","hypheninferior","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior"]},function(__unused_webpack_module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEncoding=function(encodingName){switch(encodingName){case"WinAnsiEncoding":return WinAnsiEncoding;case"StandardEncoding":return StandardEncoding;case"MacRomanEncoding":return MacRomanEncoding;case"SymbolSetEncoding":return SymbolSetEncoding;case"ZapfDingbatsEncoding":return ZapfDingbatsEncoding;case"ExpertEncoding":return ExpertEncoding;case"MacExpertEncoding":return MacExpertEncoding;default:return null}},exports.ZapfDingbatsEncoding=exports.WinAnsiEncoding=exports.SymbolSetEncoding=exports.StandardEncoding=exports.MacRomanEncoding=exports.ExpertEncoding=void 0;var ExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];exports.ExpertEncoding=ExpertEncoding;var MacExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","centoldstyle","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","","threequartersemdash","","questionsmall","","","","","Ethsmall","","","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","","","","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hypheninferior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","asuperior","centsuperior","","","","","Aacutesmall","Agravesmall","Acircumflexsmall","Adieresissmall","Atildesmall","Aringsmall","Ccedillasmall","Eacutesmall","Egravesmall","Ecircumflexsmall","Edieresissmall","Iacutesmall","Igravesmall","Icircumflexsmall","Idieresissmall","Ntildesmall","Oacutesmall","Ogravesmall","Ocircumflexsmall","Odieresissmall","Otildesmall","Uacutesmall","Ugravesmall","Ucircumflexsmall","Udieresissmall","","eightsuperior","fourinferior","threeinferior","sixinferior","eightinferior","seveninferior","Scaronsmall","","centinferior","twoinferior","","Dieresissmall","","Caronsmall","osuperior","fiveinferior","","commainferior","periodinferior","Yacutesmall","","dollarinferior","","","Thornsmall","","nineinferior","zeroinferior","Zcaronsmall","AEsmall","Oslashsmall","questiondownsmall","oneinferior","Lslashsmall","","","","","","","Cedillasmall","","","","","","OEsmall","figuredash","hyphensuperior","","","","","exclamdownsmall","","Ydieresissmall","","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","ninesuperior","zerosuperior","","esuperior","rsuperior","tsuperior","","","isuperior","ssuperior","dsuperior","","","","","","lsuperior","Ogoneksmall","Brevesmall","Macronsmall","bsuperior","nsuperior","msuperior","commasuperior","periodsuperior","Dotaccentsmall","Ringsmall","","","",""],MacRomanEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","space","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron"];exports.MacRomanEncoding=MacRomanEncoding;var StandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls","","","",""];exports.StandardEncoding=StandardEncoding;var WinAnsiEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","bullet","Euro","bullet","quotesinglbase","florin","quotedblbase","ellipsis","dagger","daggerdbl","circumflex","perthousand","Scaron","guilsinglleft","OE","bullet","Zcaron","bullet","bullet","quoteleft","quoteright","quotedblleft","quotedblright","bullet","endash","emdash","tilde","trademark","scaron","guilsinglright","oe","bullet","zcaron","Ydieresis","space","exclamdown","cent","sterling","currency","yen","brokenbar","section","dieresis","copyright","ordfeminine","guillemotleft","logicalnot","hyphen","registered","macron","degree","plusminus","twosuperior","threesuperior","acute","mu","paragraph","periodcentered","cedilla","onesuperior","ordmasculine","guillemotright","onequarter","onehalf","threequarters","questiondown","Agrave","Aacute","Acircumflex","Atilde","Adieresis","Aring","AE","Ccedilla","Egrave","Eacute","Ecircumflex","Edieresis","Igrave","Iacute","Icircumflex","Idieresis","Eth","Ntilde","Ograve","Oacute","Ocircumflex","Otilde","Odieresis","multiply","Oslash","Ugrave","Uacute","Ucircumflex","Udieresis","Yacute","Thorn","germandbls","agrave","aacute","acircumflex","atilde","adieresis","aring","ae","ccedilla","egrave","eacute","ecircumflex","edieresis","igrave","iacute","icircumflex","idieresis","eth","ntilde","ograve","oacute","ocircumflex","otilde","odieresis","divide","oslash","ugrave","uacute","ucircumflex","udieresis","yacute","thorn","ydieresis"];exports.WinAnsiEncoding=WinAnsiEncoding;var SymbolSetEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","universal","numbersign","existential","percent","ampersand","suchthat","parenleft","parenright","asteriskmath","plus","comma","minus","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","congruent","Alpha","Beta","Chi","Delta","Epsilon","Phi","Gamma","Eta","Iota","theta1","Kappa","Lambda","Mu","Nu","Omicron","Pi","Theta","Rho","Sigma","Tau","Upsilon","sigma1","Omega","Xi","Psi","Zeta","bracketleft","therefore","bracketright","perpendicular","underscore","radicalex","alpha","beta","chi","delta","epsilon","phi","gamma","eta","iota","phi1","kappa","lambda","mu","nu","omicron","pi","theta","rho","sigma","tau","upsilon","omega1","omega","xi","psi","zeta","braceleft","bar","braceright","similar","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Euro","Upsilon1","minute","lessequal","fraction","infinity","florin","club","diamond","heart","spade","arrowboth","arrowleft","arrowup","arrowright","arrowdown","degree","plusminus","second","greaterequal","multiply","proportional","partialdiff","bullet","divide","notequal","equivalence","approxequal","ellipsis","arrowvertex","arrowhorizex","carriagereturn","aleph","Ifraktur","Rfraktur","weierstrass","circlemultiply","circleplus","emptyset","intersection","union","propersuperset","reflexsuperset","notsubset","propersubset","reflexsubset","element","notelement","angle","gradient","registerserif","copyrightserif","trademarkserif","product","radical","dotmath","logicalnot","logicaland","logicalor","arrowdblboth","arrowdblleft","arrowdblup","arrowdblright","arrowdbldown","lozenge","angleleft","registersans","copyrightsans","trademarksans","summation","parenlefttp","parenleftex","parenleftbt","bracketlefttp","bracketleftex","bracketleftbt","bracelefttp","braceleftmid","braceleftbt","braceex","","angleright","integral","integraltp","integralex","integralbt","parenrighttp","parenrightex","parenrightbt","bracketrighttp","bracketrightex","bracketrightbt","bracerighttp","bracerightmid","bracerightbt",""];exports.SymbolSetEncoding=SymbolSetEncoding;var ZapfDingbatsEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","a1","a2","a202","a3","a4","a5","a119","a118","a117","a11","a12","a13","a14","a15","a16","a105","a17","a18","a19","a20","a21","a22","a23","a24","a25","a26","a27","a28","a6","a7","a8","a9","a10","a29","a30","a31","a32","a33","a34","a35","a36","a37","a38","a39","a40","a41","a42","a43","a44","a45","a46","a47","a48","a49","a50","a51","a52","a53","a54","a55","a56","a57","a58","a59","a60","a61","a62","a63","a64","a65","a66","a67","a68","a69","a70","a71","a72","a73","a74","a203","a75","a204","a76","a77","a78","a79","a81","a82","a83","a84","a97","a98","a99","a100","","a89","a90","a93","a94","a91","a92","a205","a85","a206","a86","a87","a88","a95","a96","","","","","","","","","","","","","","","","","","","","a101","a102","a103","a104","a106","a107","a108","a112","a111","a110","a109","a120","a121","a122","a123","a124","a125","a126","a127","a128","a129","a130","a131","a132","a133","a134","a135","a136","a137","a138","a139","a140","a141","a142","a143","a144","a145","a146","a147","a148","a149","a150","a151","a152","a153","a154","a155","a156","a157","a158","a159","a160","a161","a163","a164","a196","a165","a192","a166","a167","a168","a169","a170","a171","a172","a173","a162","a174","a175","a176","a177","a178","a179","a193","a180","a199","a181","a200","a182","","a201","a183","a184","a197","a185","a194","a198","a186","a195","a187","a188","a189","a190","a191",""];exports.ZapfDingbatsEncoding=ZapfDingbatsEncoding},function(__unused_webpack_module,__webpack_exports__,__w_pdfjs_require__){__w_pdfjs_require__.r(__webpack_exports__),__w_pdfjs_require__.d(__webpack_exports__,{getDingbatsGlyphsUnicode:function(){return _getDingbatsGlyphsUnicode},getGlyphsUnicode:function(){return _getGlyphsUnicode}});var _core_utils_js__WEBPACK_IMPORTED_MODULE_0__=__w_pdfjs_require__(8),_getGlyphsUnicode=(0,_core_utils_js__WEBPACK_IMPORTED_MODULE_0__.getArrayLookupTableFactory)((function(){return["A",65,"AE",198,"AEacute",508,"AEmacron",482,"AEsmall",63462,"Aacute",193,"Aacutesmall",63457,"Abreve",258,"Abreveacute",7854,"Abrevecyrillic",1232,"Abrevedotbelow",7862,"Abrevegrave",7856,"Abrevehookabove",7858,"Abrevetilde",7860,"Acaron",461,"Acircle",9398,"Acircumflex",194,"Acircumflexacute",7844,"Acircumflexdotbelow",7852,"Acircumflexgrave",7846,"Acircumflexhookabove",7848,"Acircumflexsmall",63458,"Acircumflextilde",7850,"Acute",63177,"Acutesmall",63412,"Acyrillic",1040,"Adblgrave",512,"Adieresis",196,"Adieresiscyrillic",1234,"Adieresismacron",478,"Adieresissmall",63460,"Adotbelow",7840,"Adotmacron",480,"Agrave",192,"Agravesmall",63456,"Ahookabove",7842,"Aiecyrillic",1236,"Ainvertedbreve",514,"Alpha",913,"Alphatonos",902,"Amacron",256,"Amonospace",65313,"Aogonek",260,"Aring",197,"Aringacute",506,"Aringbelow",7680,"Aringsmall",63461,"Asmall",63329,"Atilde",195,"Atildesmall",63459,"Aybarmenian",1329,"B",66,"Bcircle",9399,"Bdotaccent",7682,"Bdotbelow",7684,"Becyrillic",1041,"Benarmenian",1330,"Beta",914,"Bhook",385,"Blinebelow",7686,"Bmonospace",65314,"Brevesmall",63220,"Bsmall",63330,"Btopbar",386,"C",67,"Caarmenian",1342,"Cacute",262,"Caron",63178,"Caronsmall",63221,"Ccaron",268,"Ccedilla",199,"Ccedillaacute",7688,"Ccedillasmall",63463,"Ccircle",9400,"Ccircumflex",264,"Cdot",266,"Cdotaccent",266,"Cedillasmall",63416,"Chaarmenian",1353,"Cheabkhasiancyrillic",1212,"Checyrillic",1063,"Chedescenderabkhasiancyrillic",1214,"Chedescendercyrillic",1206,"Chedieresiscyrillic",1268,"Cheharmenian",1347,"Chekhakassiancyrillic",1227,"Cheverticalstrokecyrillic",1208,"Chi",935,"Chook",391,"Circumflexsmall",63222,"Cmonospace",65315,"Coarmenian",1361,"Csmall",63331,"D",68,"DZ",497,"DZcaron",452,"Daarmenian",1332,"Dafrican",393,"Dcaron",270,"Dcedilla",7696,"Dcircle",9401,"Dcircumflexbelow",7698,"Dcroat",272,"Ddotaccent",7690,"Ddotbelow",7692,"Decyrillic",1044,"Deicoptic",1006,"Delta",8710,"Deltagreek",916,"Dhook",394,"Dieresis",63179,"DieresisAcute",63180,"DieresisGrave",63181,"Dieresissmall",63400,"Digammagreek",988,"Djecyrillic",1026,"Dlinebelow",7694,"Dmonospace",65316,"Dotaccentsmall",63223,"Dslash",272,"Dsmall",63332,"Dtopbar",395,"Dz",498,"Dzcaron",453,"Dzeabkhasiancyrillic",1248,"Dzecyrillic",1029,"Dzhecyrillic",1039,"E",69,"Eacute",201,"Eacutesmall",63465,"Ebreve",276,"Ecaron",282,"Ecedillabreve",7708,"Echarmenian",1333,"Ecircle",9402,"Ecircumflex",202,"Ecircumflexacute",7870,"Ecircumflexbelow",7704,"Ecircumflexdotbelow",7878,"Ecircumflexgrave",7872,"Ecircumflexhookabove",7874,"Ecircumflexsmall",63466,"Ecircumflextilde",7876,"Ecyrillic",1028,"Edblgrave",516,"Edieresis",203,"Edieresissmall",63467,"Edot",278,"Edotaccent",278,"Edotbelow",7864,"Efcyrillic",1060,"Egrave",200,"Egravesmall",63464,"Eharmenian",1335,"Ehookabove",7866,"Eightroman",8551,"Einvertedbreve",518,"Eiotifiedcyrillic",1124,"Elcyrillic",1051,"Elevenroman",8554,"Emacron",274,"Emacronacute",7702,"Emacrongrave",7700,"Emcyrillic",1052,"Emonospace",65317,"Encyrillic",1053,"Endescendercyrillic",1186,"Eng",330,"Enghecyrillic",1188,"Enhookcyrillic",1223,"Eogonek",280,"Eopen",400,"Epsilon",917,"Epsilontonos",904,"Ercyrillic",1056,"Ereversed",398,"Ereversedcyrillic",1069,"Escyrillic",1057,"Esdescendercyrillic",1194,"Esh",425,"Esmall",63333,"Eta",919,"Etarmenian",1336,"Etatonos",905,"Eth",208,"Ethsmall",63472,"Etilde",7868,"Etildebelow",7706,"Euro",8364,"Ezh",439,"Ezhcaron",494,"Ezhreversed",440,"F",70,"Fcircle",9403,"Fdotaccent",7710,"Feharmenian",1366,"Feicoptic",996,"Fhook",401,"Fitacyrillic",1138,"Fiveroman",8548,"Fmonospace",65318,"Fourroman",8547,"Fsmall",63334,"G",71,"GBsquare",13191,"Gacute",500,"Gamma",915,"Gammaafrican",404,"Gangiacoptic",1002,"Gbreve",286,"Gcaron",486,"Gcedilla",290,"Gcircle",9404,"Gcircumflex",284,"Gcommaaccent",290,"Gdot",288,"Gdotaccent",288,"Gecyrillic",1043,"Ghadarmenian",1346,"Ghemiddlehookcyrillic",1172,"Ghestrokecyrillic",1170,"Gheupturncyrillic",1168,"Ghook",403,"Gimarmenian",1331,"Gjecyrillic",1027,"Gmacron",7712,"Gmonospace",65319,"Grave",63182,"Gravesmall",63328,"Gsmall",63335,"Gsmallhook",667,"Gstroke",484,"H",72,"H18533",9679,"H18543",9642,"H18551",9643,"H22073",9633,"HPsquare",13259,"Haabkhasiancyrillic",1192,"Hadescendercyrillic",1202,"Hardsigncyrillic",1066,"Hbar",294,"Hbrevebelow",7722,"Hcedilla",7720,"Hcircle",9405,"Hcircumflex",292,"Hdieresis",7718,"Hdotaccent",7714,"Hdotbelow",7716,"Hmonospace",65320,"Hoarmenian",1344,"Horicoptic",1e3,"Hsmall",63336,"Hungarumlaut",63183,"Hungarumlautsmall",63224,"Hzsquare",13200,"I",73,"IAcyrillic",1071,"IJ",306,"IUcyrillic",1070,"Iacute",205,"Iacutesmall",63469,"Ibreve",300,"Icaron",463,"Icircle",9406,"Icircumflex",206,"Icircumflexsmall",63470,"Icyrillic",1030,"Idblgrave",520,"Idieresis",207,"Idieresisacute",7726,"Idieresiscyrillic",1252,"Idieresissmall",63471,"Idot",304,"Idotaccent",304,"Idotbelow",7882,"Iebrevecyrillic",1238,"Iecyrillic",1045,"Ifraktur",8465,"Igrave",204,"Igravesmall",63468,"Ihookabove",7880,"Iicyrillic",1048,"Iinvertedbreve",522,"Iishortcyrillic",1049,"Imacron",298,"Imacroncyrillic",1250,"Imonospace",65321,"Iniarmenian",1339,"Iocyrillic",1025,"Iogonek",302,"Iota",921,"Iotaafrican",406,"Iotadieresis",938,"Iotatonos",906,"Ismall",63337,"Istroke",407,"Itilde",296,"Itildebelow",7724,"Izhitsacyrillic",1140,"Izhitsadblgravecyrillic",1142,"J",74,"Jaarmenian",1345,"Jcircle",9407,"Jcircumflex",308,"Jecyrillic",1032,"Jheharmenian",1355,"Jmonospace",65322,"Jsmall",63338,"K",75,"KBsquare",13189,"KKsquare",13261,"Kabashkircyrillic",1184,"Kacute",7728,"Kacyrillic",1050,"Kadescendercyrillic",1178,"Kahookcyrillic",1219,"Kappa",922,"Kastrokecyrillic",1182,"Kaverticalstrokecyrillic",1180,"Kcaron",488,"Kcedilla",310,"Kcircle",9408,"Kcommaaccent",310,"Kdotbelow",7730,"Keharmenian",1364,"Kenarmenian",1343,"Khacyrillic",1061,"Kheicoptic",998,"Khook",408,"Kjecyrillic",1036,"Klinebelow",7732,"Kmonospace",65323,"Koppacyrillic",1152,"Koppagreek",990,"Ksicyrillic",1134,"Ksmall",63339,"L",76,"LJ",455,"LL",63167,"Lacute",313,"Lambda",923,"Lcaron",317,"Lcedilla",315,"Lcircle",9409,"Lcircumflexbelow",7740,"Lcommaaccent",315,"Ldot",319,"Ldotaccent",319,"Ldotbelow",7734,"Ldotbelowmacron",7736,"Liwnarmenian",1340,"Lj",456,"Ljecyrillic",1033,"Llinebelow",7738,"Lmonospace",65324,"Lslash",321,"Lslashsmall",63225,"Lsmall",63340,"M",77,"MBsquare",13190,"Macron",63184,"Macronsmall",63407,"Macute",7742,"Mcircle",9410,"Mdotaccent",7744,"Mdotbelow",7746,"Menarmenian",1348,"Mmonospace",65325,"Msmall",63341,"Mturned",412,"Mu",924,"N",78,"NJ",458,"Nacute",323,"Ncaron",327,"Ncedilla",325,"Ncircle",9411,"Ncircumflexbelow",7754,"Ncommaaccent",325,"Ndotaccent",7748,"Ndotbelow",7750,"Nhookleft",413,"Nineroman",8552,"Nj",459,"Njecyrillic",1034,"Nlinebelow",7752,"Nmonospace",65326,"Nowarmenian",1350,"Nsmall",63342,"Ntilde",209,"Ntildesmall",63473,"Nu",925,"O",79,"OE",338,"OEsmall",63226,"Oacute",211,"Oacutesmall",63475,"Obarredcyrillic",1256,"Obarreddieresiscyrillic",1258,"Obreve",334,"Ocaron",465,"Ocenteredtilde",415,"Ocircle",9412,"Ocircumflex",212,"Ocircumflexacute",7888,"Ocircumflexdotbelow",7896,"Ocircumflexgrave",7890,"Ocircumflexhookabove",7892,"Ocircumflexsmall",63476,"Ocircumflextilde",7894,"Ocyrillic",1054,"Odblacute",336,"Odblgrave",524,"Odieresis",214,"Odieresiscyrillic",1254,"Odieresissmall",63478,"Odotbelow",7884,"Ogoneksmall",63227,"Ograve",210,"Ogravesmall",63474,"Oharmenian",1365,"Ohm",8486,"Ohookabove",7886,"Ohorn",416,"Ohornacute",7898,"Ohorndotbelow",7906,"Ohorngrave",7900,"Ohornhookabove",7902,"Ohorntilde",7904,"Ohungarumlaut",336,"Oi",418,"Oinvertedbreve",526,"Omacron",332,"Omacronacute",7762,"Omacrongrave",7760,"Omega",8486,"Omegacyrillic",1120,"Omegagreek",937,"Omegaroundcyrillic",1146,"Omegatitlocyrillic",1148,"Omegatonos",911,"Omicron",927,"Omicrontonos",908,"Omonospace",65327,"Oneroman",8544,"Oogonek",490,"Oogonekmacron",492,"Oopen",390,"Oslash",216,"Oslashacute",510,"Oslashsmall",63480,"Osmall",63343,"Ostrokeacute",510,"Otcyrillic",1150,"Otilde",213,"Otildeacute",7756,"Otildedieresis",7758,"Otildesmall",63477,"P",80,"Pacute",7764,"Pcircle",9413,"Pdotaccent",7766,"Pecyrillic",1055,"Peharmenian",1354,"Pemiddlehookcyrillic",1190,"Phi",934,"Phook",420,"Pi",928,"Piwrarmenian",1363,"Pmonospace",65328,"Psi",936,"Psicyrillic",1136,"Psmall",63344,"Q",81,"Qcircle",9414,"Qmonospace",65329,"Qsmall",63345,"R",82,"Raarmenian",1356,"Racute",340,"Rcaron",344,"Rcedilla",342,"Rcircle",9415,"Rcommaaccent",342,"Rdblgrave",528,"Rdotaccent",7768,"Rdotbelow",7770,"Rdotbelowmacron",7772,"Reharmenian",1360,"Rfraktur",8476,"Rho",929,"Ringsmall",63228,"Rinvertedbreve",530,"Rlinebelow",7774,"Rmonospace",65330,"Rsmall",63346,"Rsmallinverted",641,"Rsmallinvertedsuperior",694,"S",83,"SF010000",9484,"SF020000",9492,"SF030000",9488,"SF040000",9496,"SF050000",9532,"SF060000",9516,"SF070000",9524,"SF080000",9500,"SF090000",9508,"SF100000",9472,"SF110000",9474,"SF190000",9569,"SF200000",9570,"SF210000",9558,"SF220000",9557,"SF230000",9571,"SF240000",9553,"SF250000",9559,"SF260000",9565,"SF270000",9564,"SF280000",9563,"SF360000",9566,"SF370000",9567,"SF380000",9562,"SF390000",9556,"SF400000",9577,"SF410000",9574,"SF420000",9568,"SF430000",9552,"SF440000",9580,"SF450000",9575,"SF460000",9576,"SF470000",9572,"SF480000",9573,"SF490000",9561,"SF500000",9560,"SF510000",9554,"SF520000",9555,"SF530000",9579,"SF540000",9578,"Sacute",346,"Sacutedotaccent",7780,"Sampigreek",992,"Scaron",352,"Scarondotaccent",7782,"Scaronsmall",63229,"Scedilla",350,"Schwa",399,"Schwacyrillic",1240,"Schwadieresiscyrillic",1242,"Scircle",9416,"Scircumflex",348,"Scommaaccent",536,"Sdotaccent",7776,"Sdotbelow",7778,"Sdotbelowdotaccent",7784,"Seharmenian",1357,"Sevenroman",8550,"Shaarmenian",1351,"Shacyrillic",1064,"Shchacyrillic",1065,"Sheicoptic",994,"Shhacyrillic",1210,"Shimacoptic",1004,"Sigma",931,"Sixroman",8549,"Smonospace",65331,"Softsigncyrillic",1068,"Ssmall",63347,"Stigmagreek",986,"T",84,"Tau",932,"Tbar",358,"Tcaron",356,"Tcedilla",354,"Tcircle",9417,"Tcircumflexbelow",7792,"Tcommaaccent",354,"Tdotaccent",7786,"Tdotbelow",7788,"Tecyrillic",1058,"Tedescendercyrillic",1196,"Tenroman",8553,"Tetsecyrillic",1204,"Theta",920,"Thook",428,"Thorn",222,"Thornsmall",63486,"Threeroman",8546,"Tildesmall",63230,"Tiwnarmenian",1359,"Tlinebelow",7790,"Tmonospace",65332,"Toarmenian",1337,"Tonefive",444,"Tonesix",388,"Tonetwo",423,"Tretroflexhook",430,"Tsecyrillic",1062,"Tshecyrillic",1035,"Tsmall",63348,"Twelveroman",8555,"Tworoman",8545,"U",85,"Uacute",218,"Uacutesmall",63482,"Ubreve",364,"Ucaron",467,"Ucircle",9418,"Ucircumflex",219,"Ucircumflexbelow",7798,"Ucircumflexsmall",63483,"Ucyrillic",1059,"Udblacute",368,"Udblgrave",532,"Udieresis",220,"Udieresisacute",471,"Udieresisbelow",7794,"Udieresiscaron",473,"Udieresiscyrillic",1264,"Udieresisgrave",475,"Udieresismacron",469,"Udieresissmall",63484,"Udotbelow",7908,"Ugrave",217,"Ugravesmall",63481,"Uhookabove",7910,"Uhorn",431,"Uhornacute",7912,"Uhorndotbelow",7920,"Uhorngrave",7914,"Uhornhookabove",7916,"Uhorntilde",7918,"Uhungarumlaut",368,"Uhungarumlautcyrillic",1266,"Uinvertedbreve",534,"Ukcyrillic",1144,"Umacron",362,"Umacroncyrillic",1262,"Umacrondieresis",7802,"Umonospace",65333,"Uogonek",370,"Upsilon",933,"Upsilon1",978,"Upsilonacutehooksymbolgreek",979,"Upsilonafrican",433,"Upsilondieresis",939,"Upsilondieresishooksymbolgreek",980,"Upsilonhooksymbol",978,"Upsilontonos",910,"Uring",366,"Ushortcyrillic",1038,"Usmall",63349,"Ustraightcyrillic",1198,"Ustraightstrokecyrillic",1200,"Utilde",360,"Utildeacute",7800,"Utildebelow",7796,"V",86,"Vcircle",9419,"Vdotbelow",7806,"Vecyrillic",1042,"Vewarmenian",1358,"Vhook",434,"Vmonospace",65334,"Voarmenian",1352,"Vsmall",63350,"Vtilde",7804,"W",87,"Wacute",7810,"Wcircle",9420,"Wcircumflex",372,"Wdieresis",7812,"Wdotaccent",7814,"Wdotbelow",7816,"Wgrave",7808,"Wmonospace",65335,"Wsmall",63351,"X",88,"Xcircle",9421,"Xdieresis",7820,"Xdotaccent",7818,"Xeharmenian",1341,"Xi",926,"Xmonospace",65336,"Xsmall",63352,"Y",89,"Yacute",221,"Yacutesmall",63485,"Yatcyrillic",1122,"Ycircle",9422,"Ycircumflex",374,"Ydieresis",376,"Ydieresissmall",63487,"Ydotaccent",7822,"Ydotbelow",7924,"Yericyrillic",1067,"Yerudieresiscyrillic",1272,"Ygrave",7922,"Yhook",435,"Yhookabove",7926,"Yiarmenian",1349,"Yicyrillic",1031,"Yiwnarmenian",1362,"Ymonospace",65337,"Ysmall",63353,"Ytilde",7928,"Yusbigcyrillic",1130,"Yusbigiotifiedcyrillic",1132,"Yuslittlecyrillic",1126,"Yuslittleiotifiedcyrillic",1128,"Z",90,"Zaarmenian",1334,"Zacute",377,"Zcaron",381,"Zcaronsmall",63231,"Zcircle",9423,"Zcircumflex",7824,"Zdot",379,"Zdotaccent",379,"Zdotbelow",7826,"Zecyrillic",1047,"Zedescendercyrillic",1176,"Zedieresiscyrillic",1246,"Zeta",918,"Zhearmenian",1338,"Zhebrevecyrillic",1217,"Zhecyrillic",1046,"Zhedescendercyrillic",1174,"Zhedieresiscyrillic",1244,"Zlinebelow",7828,"Zmonospace",65338,"Zsmall",63354,"Zstroke",437,"a",97,"aabengali",2438,"aacute",225,"aadeva",2310,"aagujarati",2694,"aagurmukhi",2566,"aamatragurmukhi",2622,"aarusquare",13059,"aavowelsignbengali",2494,"aavowelsigndeva",2366,"aavowelsigngujarati",2750,"abbreviationmarkarmenian",1375,"abbreviationsigndeva",2416,"abengali",2437,"abopomofo",12570,"abreve",259,"abreveacute",7855,"abrevecyrillic",1233,"abrevedotbelow",7863,"abrevegrave",7857,"abrevehookabove",7859,"abrevetilde",7861,"acaron",462,"acircle",9424,"acircumflex",226,"acircumflexacute",7845,"acircumflexdotbelow",7853,"acircumflexgrave",7847,"acircumflexhookabove",7849,"acircumflextilde",7851,"acute",180,"acutebelowcmb",791,"acutecmb",769,"acutecomb",769,"acutedeva",2388,"acutelowmod",719,"acutetonecmb",833,"acyrillic",1072,"adblgrave",513,"addakgurmukhi",2673,"adeva",2309,"adieresis",228,"adieresiscyrillic",1235,"adieresismacron",479,"adotbelow",7841,"adotmacron",481,"ae",230,"aeacute",509,"aekorean",12624,"aemacron",483,"afii00208",8213,"afii08941",8356,"afii10017",1040,"afii10018",1041,"afii10019",1042,"afii10020",1043,"afii10021",1044,"afii10022",1045,"afii10023",1025,"afii10024",1046,"afii10025",1047,"afii10026",1048,"afii10027",1049,"afii10028",1050,"afii10029",1051,"afii10030",1052,"afii10031",1053,"afii10032",1054,"afii10033",1055,"afii10034",1056,"afii10035",1057,"afii10036",1058,"afii10037",1059,"afii10038",1060,"afii10039",1061,"afii10040",1062,"afii10041",1063,"afii10042",1064,"afii10043",1065,"afii10044",1066,"afii10045",1067,"afii10046",1068,"afii10047",1069,"afii10048",1070,"afii10049",1071,"afii10050",1168,"afii10051",1026,"afii10052",1027,"afii10053",1028,"afii10054",1029,"afii10055",1030,"afii10056",1031,"afii10057",1032,"afii10058",1033,"afii10059",1034,"afii10060",1035,"afii10061",1036,"afii10062",1038,"afii10063",63172,"afii10064",63173,"afii10065",1072,"afii10066",1073,"afii10067",1074,"afii10068",1075,"afii10069",1076,"afii10070",1077,"afii10071",1105,"afii10072",1078,"afii10073",1079,"afii10074",1080,"afii10075",1081,"afii10076",1082,"afii10077",1083,"afii10078",1084,"afii10079",1085,"afii10080",1086,"afii10081",1087,"afii10082",1088,"afii10083",1089,"afii10084",1090,"afii10085",1091,"afii10086",1092,"afii10087",1093,"afii10088",1094,"afii10089",1095,"afii10090",1096,"afii10091",1097,"afii10092",1098,"afii10093",1099,"afii10094",1100,"afii10095",1101,"afii10096",1102,"afii10097",1103,"afii10098",1169,"afii10099",1106,"afii10100",1107,"afii10101",1108,"afii10102",1109,"afii10103",1110,"afii10104",1111,"afii10105",1112,"afii10106",1113,"afii10107",1114,"afii10108",1115,"afii10109",1116,"afii10110",1118,"afii10145",1039,"afii10146",1122,"afii10147",1138,"afii10148",1140,"afii10192",63174,"afii10193",1119,"afii10194",1123,"afii10195",1139,"afii10196",1141,"afii10831",63175,"afii10832",63176,"afii10846",1241,"afii299",8206,"afii300",8207,"afii301",8205,"afii57381",1642,"afii57388",1548,"afii57392",1632,"afii57393",1633,"afii57394",1634,"afii57395",1635,"afii57396",1636,"afii57397",1637,"afii57398",1638,"afii57399",1639,"afii57400",1640,"afii57401",1641,"afii57403",1563,"afii57407",1567,"afii57409",1569,"afii57410",1570,"afii57411",1571,"afii57412",1572,"afii57413",1573,"afii57414",1574,"afii57415",1575,"afii57416",1576,"afii57417",1577,"afii57418",1578,"afii57419",1579,"afii57420",1580,"afii57421",1581,"afii57422",1582,"afii57423",1583,"afii57424",1584,"afii57425",1585,"afii57426",1586,"afii57427",1587,"afii57428",1588,"afii57429",1589,"afii57430",1590,"afii57431",1591,"afii57432",1592,"afii57433",1593,"afii57434",1594,"afii57440",1600,"afii57441",1601,"afii57442",1602,"afii57443",1603,"afii57444",1604,"afii57445",1605,"afii57446",1606,"afii57448",1608,"afii57449",1609,"afii57450",1610,"afii57451",1611,"afii57452",1612,"afii57453",1613,"afii57454",1614,"afii57455",1615,"afii57456",1616,"afii57457",1617,"afii57458",1618,"afii57470",1607,"afii57505",1700,"afii57506",1662,"afii57507",1670,"afii57508",1688,"afii57509",1711,"afii57511",1657,"afii57512",1672,"afii57513",1681,"afii57514",1722,"afii57519",1746,"afii57534",1749,"afii57636",8362,"afii57645",1470,"afii57658",1475,"afii57664",1488,"afii57665",1489,"afii57666",1490,"afii57667",1491,"afii57668",1492,"afii57669",1493,"afii57670",1494,"afii57671",1495,"afii57672",1496,"afii57673",1497,"afii57674",1498,"afii57675",1499,"afii57676",1500,"afii57677",1501,"afii57678",1502,"afii57679",1503,"afii57680",1504,"afii57681",1505,"afii57682",1506,"afii57683",1507,"afii57684",1508,"afii57685",1509,"afii57686",1510,"afii57687",1511,"afii57688",1512,"afii57689",1513,"afii57690",1514,"afii57694",64298,"afii57695",64299,"afii57700",64331,"afii57705",64287,"afii57716",1520,"afii57717",1521,"afii57718",1522,"afii57723",64309,"afii57793",1460,"afii57794",1461,"afii57795",1462,"afii57796",1467,"afii57797",1464,"afii57798",1463,"afii57799",1456,"afii57800",1458,"afii57801",1457,"afii57802",1459,"afii57803",1474,"afii57804",1473,"afii57806",1465,"afii57807",1468,"afii57839",1469,"afii57841",1471,"afii57842",1472,"afii57929",700,"afii61248",8453,"afii61289",8467,"afii61352",8470,"afii61573",8236,"afii61574",8237,"afii61575",8238,"afii61664",8204,"afii63167",1645,"afii64937",701,"agrave",224,"agujarati",2693,"agurmukhi",2565,"ahiragana",12354,"ahookabove",7843,"aibengali",2448,"aibopomofo",12574,"aideva",2320,"aiecyrillic",1237,"aigujarati",2704,"aigurmukhi",2576,"aimatragurmukhi",2632,"ainarabic",1593,"ainfinalarabic",65226,"aininitialarabic",65227,"ainmedialarabic",65228,"ainvertedbreve",515,"aivowelsignbengali",2504,"aivowelsigndeva",2376,"aivowelsigngujarati",2760,"akatakana",12450,"akatakanahalfwidth",65393,"akorean",12623,"alef",1488,"alefarabic",1575,"alefdageshhebrew",64304,"aleffinalarabic",65166,"alefhamzaabovearabic",1571,"alefhamzaabovefinalarabic",65156,"alefhamzabelowarabic",1573,"alefhamzabelowfinalarabic",65160,"alefhebrew",1488,"aleflamedhebrew",64335,"alefmaddaabovearabic",1570,"alefmaddaabovefinalarabic",65154,"alefmaksuraarabic",1609,"alefmaksurafinalarabic",65264,"alefmaksurainitialarabic",65267,"alefmaksuramedialarabic",65268,"alefpatahhebrew",64302,"alefqamatshebrew",64303,"aleph",8501,"allequal",8780,"alpha",945,"alphatonos",940,"amacron",257,"amonospace",65345,"ampersand",38,"ampersandmonospace",65286,"ampersandsmall",63270,"amsquare",13250,"anbopomofo",12578,"angbopomofo",12580,"angbracketleft",12296,"angbracketright",12297,"angkhankhuthai",3674,"angle",8736,"anglebracketleft",12296,"anglebracketleftvertical",65087,"anglebracketright",12297,"anglebracketrightvertical",65088,"angleleft",9001,"angleright",9002,"angstrom",8491,"anoteleia",903,"anudattadeva",2386,"anusvarabengali",2434,"anusvaradeva",2306,"anusvaragujarati",2690,"aogonek",261,"apaatosquare",13056,"aparen",9372,"apostrophearmenian",1370,"apostrophemod",700,"apple",63743,"approaches",8784,"approxequal",8776,"approxequalorimage",8786,"approximatelyequal",8773,"araeaekorean",12686,"araeakorean",12685,"arc",8978,"arighthalfring",7834,"aring",229,"aringacute",507,"aringbelow",7681,"arrowboth",8596,"arrowdashdown",8675,"arrowdashleft",8672,"arrowdashright",8674,"arrowdashup",8673,"arrowdblboth",8660,"arrowdbldown",8659,"arrowdblleft",8656,"arrowdblright",8658,"arrowdblup",8657,"arrowdown",8595,"arrowdownleft",8601,"arrowdownright",8600,"arrowdownwhite",8681,"arrowheaddownmod",709,"arrowheadleftmod",706,"arrowheadrightmod",707,"arrowheadupmod",708,"arrowhorizex",63719,"arrowleft",8592,"arrowleftdbl",8656,"arrowleftdblstroke",8653,"arrowleftoverright",8646,"arrowleftwhite",8678,"arrowright",8594,"arrowrightdblstroke",8655,"arrowrightheavy",10142,"arrowrightoverleft",8644,"arrowrightwhite",8680,"arrowtableft",8676,"arrowtabright",8677,"arrowup",8593,"arrowupdn",8597,"arrowupdnbse",8616,"arrowupdownbase",8616,"arrowupleft",8598,"arrowupleftofdown",8645,"arrowupright",8599,"arrowupwhite",8679,"arrowvertex",63718,"asciicircum",94,"asciicircummonospace",65342,"asciitilde",126,"asciitildemonospace",65374,"ascript",593,"ascriptturned",594,"asmallhiragana",12353,"asmallkatakana",12449,"asmallkatakanahalfwidth",65383,"asterisk",42,"asteriskaltonearabic",1645,"asteriskarabic",1645,"asteriskmath",8727,"asteriskmonospace",65290,"asterisksmall",65121,"asterism",8258,"asuperior",63209,"asymptoticallyequal",8771,"at",64,"atilde",227,"atmonospace",65312,"atsmall",65131,"aturned",592,"aubengali",2452,"aubopomofo",12576,"audeva",2324,"augujarati",2708,"augurmukhi",2580,"aulengthmarkbengali",2519,"aumatragurmukhi",2636,"auvowelsignbengali",2508,"auvowelsigndeva",2380,"auvowelsigngujarati",2764,"avagrahadeva",2365,"aybarmenian",1377,"ayin",1506,"ayinaltonehebrew",64288,"ayinhebrew",1506,"b",98,"babengali",2476,"backslash",92,"backslashmonospace",65340,"badeva",2348,"bagujarati",2732,"bagurmukhi",2604,"bahiragana",12400,"bahtthai",3647,"bakatakana",12496,"bar",124,"barmonospace",65372,"bbopomofo",12549,"bcircle",9425,"bdotaccent",7683,"bdotbelow",7685,"beamedsixteenthnotes",9836,"because",8757,"becyrillic",1073,"beharabic",1576,"behfinalarabic",65168,"behinitialarabic",65169,"behiragana",12409,"behmedialarabic",65170,"behmeeminitialarabic",64671,"behmeemisolatedarabic",64520,"behnoonfinalarabic",64621,"bekatakana",12505,"benarmenian",1378,"bet",1489,"beta",946,"betasymbolgreek",976,"betdagesh",64305,"betdageshhebrew",64305,"bethebrew",1489,"betrafehebrew",64332,"bhabengali",2477,"bhadeva",2349,"bhagujarati",2733,"bhagurmukhi",2605,"bhook",595,"bihiragana",12403,"bikatakana",12499,"bilabialclick",664,"bindigurmukhi",2562,"birusquare",13105,"blackcircle",9679,"blackdiamond",9670,"blackdownpointingtriangle",9660,"blackleftpointingpointer",9668,"blackleftpointingtriangle",9664,"blacklenticularbracketleft",12304,"blacklenticularbracketleftvertical",65083,"blacklenticularbracketright",12305,"blacklenticularbracketrightvertical",65084,"blacklowerlefttriangle",9699,"blacklowerrighttriangle",9698,"blackrectangle",9644,"blackrightpointingpointer",9658,"blackrightpointingtriangle",9654,"blacksmallsquare",9642,"blacksmilingface",9787,"blacksquare",9632,"blackstar",9733,"blackupperlefttriangle",9700,"blackupperrighttriangle",9701,"blackuppointingsmalltriangle",9652,"blackuppointingtriangle",9650,"blank",9251,"blinebelow",7687,"block",9608,"bmonospace",65346,"bobaimaithai",3610,"bohiragana",12412,"bokatakana",12508,"bparen",9373,"bqsquare",13251,"braceex",63732,"braceleft",123,"braceleftbt",63731,"braceleftmid",63730,"braceleftmonospace",65371,"braceleftsmall",65115,"bracelefttp",63729,"braceleftvertical",65079,"braceright",125,"bracerightbt",63742,"bracerightmid",63741,"bracerightmonospace",65373,"bracerightsmall",65116,"bracerighttp",63740,"bracerightvertical",65080,"bracketleft",91,"bracketleftbt",63728,"bracketleftex",63727,"bracketleftmonospace",65339,"bracketlefttp",63726,"bracketright",93,"bracketrightbt",63739,"bracketrightex",63738,"bracketrightmonospace",65341,"bracketrighttp",63737,"breve",728,"brevebelowcmb",814,"brevecmb",774,"breveinvertedbelowcmb",815,"breveinvertedcmb",785,"breveinverteddoublecmb",865,"bridgebelowcmb",810,"bridgeinvertedbelowcmb",826,"brokenbar",166,"bstroke",384,"bsuperior",63210,"btopbar",387,"buhiragana",12406,"bukatakana",12502,"bullet",8226,"bulletinverse",9688,"bulletoperator",8729,"bullseye",9678,"c",99,"caarmenian",1390,"cabengali",2458,"cacute",263,"cadeva",2330,"cagujarati",2714,"cagurmukhi",2586,"calsquare",13192,"candrabindubengali",2433,"candrabinducmb",784,"candrabindudeva",2305,"candrabindugujarati",2689,"capslock",8682,"careof",8453,"caron",711,"caronbelowcmb",812,"caroncmb",780,"carriagereturn",8629,"cbopomofo",12568,"ccaron",269,"ccedilla",231,"ccedillaacute",7689,"ccircle",9426,"ccircumflex",265,"ccurl",597,"cdot",267,"cdotaccent",267,"cdsquare",13253,"cedilla",184,"cedillacmb",807,"cent",162,"centigrade",8451,"centinferior",63199,"centmonospace",65504,"centoldstyle",63394,"centsuperior",63200,"chaarmenian",1401,"chabengali",2459,"chadeva",2331,"chagujarati",2715,"chagurmukhi",2587,"chbopomofo",12564,"cheabkhasiancyrillic",1213,"checkmark",10003,"checyrillic",1095,"chedescenderabkhasiancyrillic",1215,"chedescendercyrillic",1207,"chedieresiscyrillic",1269,"cheharmenian",1395,"chekhakassiancyrillic",1228,"cheverticalstrokecyrillic",1209,"chi",967,"chieuchacirclekorean",12919,"chieuchaparenkorean",12823,"chieuchcirclekorean",12905,"chieuchkorean",12618,"chieuchparenkorean",12809,"chochangthai",3594,"chochanthai",3592,"chochingthai",3593,"chochoethai",3596,"chook",392,"cieucacirclekorean",12918,"cieucaparenkorean",12822,"cieuccirclekorean",12904,"cieuckorean",12616,"cieucparenkorean",12808,"cieucuparenkorean",12828,"circle",9675,"circlecopyrt",169,"circlemultiply",8855,"circleot",8857,"circleplus",8853,"circlepostalmark",12342,"circlewithlefthalfblack",9680,"circlewithrighthalfblack",9681,"circumflex",710,"circumflexbelowcmb",813,"circumflexcmb",770,"clear",8999,"clickalveolar",450,"clickdental",448,"clicklateral",449,"clickretroflex",451,"club",9827,"clubsuitblack",9827,"clubsuitwhite",9831,"cmcubedsquare",13220,"cmonospace",65347,"cmsquaredsquare",13216,"coarmenian",1409,"colon",58,"colonmonetary",8353,"colonmonospace",65306,"colonsign",8353,"colonsmall",65109,"colontriangularhalfmod",721,"colontriangularmod",720,"comma",44,"commaabovecmb",787,"commaaboverightcmb",789,"commaaccent",63171,"commaarabic",1548,"commaarmenian",1373,"commainferior",63201,"commamonospace",65292,"commareversedabovecmb",788,"commareversedmod",701,"commasmall",65104,"commasuperior",63202,"commaturnedabovecmb",786,"commaturnedmod",699,"compass",9788,"congruent",8773,"contourintegral",8750,"control",8963,"controlACK",6,"controlBEL",7,"controlBS",8,"controlCAN",24,"controlCR",13,"controlDC1",17,"controlDC2",18,"controlDC3",19,"controlDC4",20,"controlDEL",127,"controlDLE",16,"controlEM",25,"controlENQ",5,"controlEOT",4,"controlESC",27,"controlETB",23,"controlETX",3,"controlFF",12,"controlFS",28,"controlGS",29,"controlHT",9,"controlLF",10,"controlNAK",21,"controlNULL",0,"controlRS",30,"controlSI",15,"controlSO",14,"controlSOT",2,"controlSTX",1,"controlSUB",26,"controlSYN",22,"controlUS",31,"controlVT",11,"copyright",169,"copyrightsans",63721,"copyrightserif",63193,"cornerbracketleft",12300,"cornerbracketlefthalfwidth",65378,"cornerbracketleftvertical",65089,"cornerbracketright",12301,"cornerbracketrighthalfwidth",65379,"cornerbracketrightvertical",65090,"corporationsquare",13183,"cosquare",13255,"coverkgsquare",13254,"cparen",9374,"cruzeiro",8354,"cstretched",663,"curlyand",8911,"curlyor",8910,"currency",164,"cyrBreve",63185,"cyrFlex",63186,"cyrbreve",63188,"cyrflex",63189,"d",100,"daarmenian",1380,"dabengali",2470,"dadarabic",1590,"dadeva",2342,"dadfinalarabic",65214,"dadinitialarabic",65215,"dadmedialarabic",65216,"dagesh",1468,"dageshhebrew",1468,"dagger",8224,"daggerdbl",8225,"dagujarati",2726,"dagurmukhi",2598,"dahiragana",12384,"dakatakana",12480,"dalarabic",1583,"dalet",1491,"daletdagesh",64307,"daletdageshhebrew",64307,"dalethebrew",1491,"dalfinalarabic",65194,"dammaarabic",1615,"dammalowarabic",1615,"dammatanaltonearabic",1612,"dammatanarabic",1612,"danda",2404,"dargahebrew",1447,"dargalefthebrew",1447,"dasiapneumatacyrilliccmb",1157,"dblGrave",63187,"dblanglebracketleft",12298,"dblanglebracketleftvertical",65085,"dblanglebracketright",12299,"dblanglebracketrightvertical",65086,"dblarchinvertedbelowcmb",811,"dblarrowleft",8660,"dblarrowright",8658,"dbldanda",2405,"dblgrave",63190,"dblgravecmb",783,"dblintegral",8748,"dbllowline",8215,"dbllowlinecmb",819,"dbloverlinecmb",831,"dblprimemod",698,"dblverticalbar",8214,"dblverticallineabovecmb",782,"dbopomofo",12553,"dbsquare",13256,"dcaron",271,"dcedilla",7697,"dcircle",9427,"dcircumflexbelow",7699,"dcroat",273,"ddabengali",2465,"ddadeva",2337,"ddagujarati",2721,"ddagurmukhi",2593,"ddalarabic",1672,"ddalfinalarabic",64393,"dddhadeva",2396,"ddhabengali",2466,"ddhadeva",2338,"ddhagujarati",2722,"ddhagurmukhi",2594,"ddotaccent",7691,"ddotbelow",7693,"decimalseparatorarabic",1643,"decimalseparatorpersian",1643,"decyrillic",1076,"degree",176,"dehihebrew",1453,"dehiragana",12391,"deicoptic",1007,"dekatakana",12487,"deleteleft",9003,"deleteright",8998,"delta",948,"deltaturned",397,"denominatorminusonenumeratorbengali",2552,"dezh",676,"dhabengali",2471,"dhadeva",2343,"dhagujarati",2727,"dhagurmukhi",2599,"dhook",599,"dialytikatonos",901,"dialytikatonoscmb",836,"diamond",9830,"diamondsuitwhite",9826,"dieresis",168,"dieresisacute",63191,"dieresisbelowcmb",804,"dieresiscmb",776,"dieresisgrave",63192,"dieresistonos",901,"dihiragana",12386,"dikatakana",12482,"dittomark",12291,"divide",247,"divides",8739,"divisionslash",8725,"djecyrillic",1106,"dkshade",9619,"dlinebelow",7695,"dlsquare",13207,"dmacron",273,"dmonospace",65348,"dnblock",9604,"dochadathai",3598,"dodekthai",3604,"dohiragana",12393,"dokatakana",12489,"dollar",36,"dollarinferior",63203,"dollarmonospace",65284,"dollaroldstyle",63268,"dollarsmall",65129,"dollarsuperior",63204,"dong",8363,"dorusquare",13094,"dotaccent",729,"dotaccentcmb",775,"dotbelowcmb",803,"dotbelowcomb",803,"dotkatakana",12539,"dotlessi",305,"dotlessj",63166,"dotlessjstrokehook",644,"dotmath",8901,"dottedcircle",9676,"doubleyodpatah",64287,"doubleyodpatahhebrew",64287,"downtackbelowcmb",798,"downtackmod",725,"dparen",9375,"dsuperior",63211,"dtail",598,"dtopbar",396,"duhiragana",12389,"dukatakana",12485,"dz",499,"dzaltone",675,"dzcaron",454,"dzcurl",677,"dzeabkhasiancyrillic",1249,"dzecyrillic",1109,"dzhecyrillic",1119,"e",101,"eacute",233,"earth",9793,"ebengali",2447,"ebopomofo",12572,"ebreve",277,"ecandradeva",2317,"ecandragujarati",2701,"ecandravowelsigndeva",2373,"ecandravowelsigngujarati",2757,"ecaron",283,"ecedillabreve",7709,"echarmenian",1381,"echyiwnarmenian",1415,"ecircle",9428,"ecircumflex",234,"ecircumflexacute",7871,"ecircumflexbelow",7705,"ecircumflexdotbelow",7879,"ecircumflexgrave",7873,"ecircumflexhookabove",7875,"ecircumflextilde",7877,"ecyrillic",1108,"edblgrave",517,"edeva",2319,"edieresis",235,"edot",279,"edotaccent",279,"edotbelow",7865,"eegurmukhi",2575,"eematragurmukhi",2631,"efcyrillic",1092,"egrave",232,"egujarati",2703,"eharmenian",1383,"ehbopomofo",12573,"ehiragana",12360,"ehookabove",7867,"eibopomofo",12575,"eight",56,"eightarabic",1640,"eightbengali",2542,"eightcircle",9319,"eightcircleinversesansserif",10129,"eightdeva",2414,"eighteencircle",9329,"eighteenparen",9349,"eighteenperiod",9369,"eightgujarati",2798,"eightgurmukhi",2670,"eighthackarabic",1640,"eighthangzhou",12328,"eighthnotebeamed",9835,"eightideographicparen",12839,"eightinferior",8328,"eightmonospace",65304,"eightoldstyle",63288,"eightparen",9339,"eightperiod",9359,"eightpersian",1784,"eightroman",8567,"eightsuperior",8312,"eightthai",3672,"einvertedbreve",519,"eiotifiedcyrillic",1125,"ekatakana",12456,"ekatakanahalfwidth",65396,"ekonkargurmukhi",2676,"ekorean",12628,"elcyrillic",1083,"element",8712,"elevencircle",9322,"elevenparen",9342,"elevenperiod",9362,"elevenroman",8570,"ellipsis",8230,"ellipsisvertical",8942,"emacron",275,"emacronacute",7703,"emacrongrave",7701,"emcyrillic",1084,"emdash",8212,"emdashvertical",65073,"emonospace",65349,"emphasismarkarmenian",1371,"emptyset",8709,"enbopomofo",12579,"encyrillic",1085,"endash",8211,"endashvertical",65074,"endescendercyrillic",1187,"eng",331,"engbopomofo",12581,"enghecyrillic",1189,"enhookcyrillic",1224,"enspace",8194,"eogonek",281,"eokorean",12627,"eopen",603,"eopenclosed",666,"eopenreversed",604,"eopenreversedclosed",606,"eopenreversedhook",605,"eparen",9376,"epsilon",949,"epsilontonos",941,"equal",61,"equalmonospace",65309,"equalsmall",65126,"equalsuperior",8316,"equivalence",8801,"erbopomofo",12582,"ercyrillic",1088,"ereversed",600,"ereversedcyrillic",1101,"escyrillic",1089,"esdescendercyrillic",1195,"esh",643,"eshcurl",646,"eshortdeva",2318,"eshortvowelsigndeva",2374,"eshreversedloop",426,"eshsquatreversed",645,"esmallhiragana",12359,"esmallkatakana",12455,"esmallkatakanahalfwidth",65386,"estimated",8494,"esuperior",63212,"eta",951,"etarmenian",1384,"etatonos",942,"eth",240,"etilde",7869,"etildebelow",7707,"etnahtafoukhhebrew",1425,"etnahtafoukhlefthebrew",1425,"etnahtahebrew",1425,"etnahtalefthebrew",1425,"eturned",477,"eukorean",12641,"euro",8364,"evowelsignbengali",2503,"evowelsigndeva",2375,"evowelsigngujarati",2759,"exclam",33,"exclamarmenian",1372,"exclamdbl",8252,"exclamdown",161,"exclamdownsmall",63393,"exclammonospace",65281,"exclamsmall",63265,"existential",8707,"ezh",658,"ezhcaron",495,"ezhcurl",659,"ezhreversed",441,"ezhtail",442,"f",102,"fadeva",2398,"fagurmukhi",2654,"fahrenheit",8457,"fathaarabic",1614,"fathalowarabic",1614,"fathatanarabic",1611,"fbopomofo",12552,"fcircle",9429,"fdotaccent",7711,"feharabic",1601,"feharmenian",1414,"fehfinalarabic",65234,"fehinitialarabic",65235,"fehmedialarabic",65236,"feicoptic",997,"female",9792,"ff",64256,"f_f",64256,"ffi",64259,"ffl",64260,"fi",64257,"fifteencircle",9326,"fifteenparen",9346,"fifteenperiod",9366,"figuredash",8210,"filledbox",9632,"filledrect",9644,"finalkaf",1498,"finalkafdagesh",64314,"finalkafdageshhebrew",64314,"finalkafhebrew",1498,"finalmem",1501,"finalmemhebrew",1501,"finalnun",1503,"finalnunhebrew",1503,"finalpe",1507,"finalpehebrew",1507,"finaltsadi",1509,"finaltsadihebrew",1509,"firsttonechinese",713,"fisheye",9673,"fitacyrillic",1139,"five",53,"fivearabic",1637,"fivebengali",2539,"fivecircle",9316,"fivecircleinversesansserif",10126,"fivedeva",2411,"fiveeighths",8541,"fivegujarati",2795,"fivegurmukhi",2667,"fivehackarabic",1637,"fivehangzhou",12325,"fiveideographicparen",12836,"fiveinferior",8325,"fivemonospace",65301,"fiveoldstyle",63285,"fiveparen",9336,"fiveperiod",9356,"fivepersian",1781,"fiveroman",8564,"fivesuperior",8309,"fivethai",3669,"fl",64258,"florin",402,"fmonospace",65350,"fmsquare",13209,"fofanthai",3615,"fofathai",3613,"fongmanthai",3663,"forall",8704,"four",52,"fourarabic",1636,"fourbengali",2538,"fourcircle",9315,"fourcircleinversesansserif",10125,"fourdeva",2410,"fourgujarati",2794,"fourgurmukhi",2666,"fourhackarabic",1636,"fourhangzhou",12324,"fourideographicparen",12835,"fourinferior",8324,"fourmonospace",65300,"fournumeratorbengali",2551,"fouroldstyle",63284,"fourparen",9335,"fourperiod",9355,"fourpersian",1780,"fourroman",8563,"foursuperior",8308,"fourteencircle",9325,"fourteenparen",9345,"fourteenperiod",9365,"fourthai",3668,"fourthtonechinese",715,"fparen",9377,"fraction",8260,"franc",8355,"g",103,"gabengali",2455,"gacute",501,"gadeva",2327,"gafarabic",1711,"gaffinalarabic",64403,"gafinitialarabic",64404,"gafmedialarabic",64405,"gagujarati",2711,"gagurmukhi",2583,"gahiragana",12364,"gakatakana",12460,"gamma",947,"gammalatinsmall",611,"gammasuperior",736,"gangiacoptic",1003,"gbopomofo",12557,"gbreve",287,"gcaron",487,"gcedilla",291,"gcircle",9430,"gcircumflex",285,"gcommaaccent",291,"gdot",289,"gdotaccent",289,"gecyrillic",1075,"gehiragana",12370,"gekatakana",12466,"geometricallyequal",8785,"gereshaccenthebrew",1436,"gereshhebrew",1523,"gereshmuqdamhebrew",1437,"germandbls",223,"gershayimaccenthebrew",1438,"gershayimhebrew",1524,"getamark",12307,"ghabengali",2456,"ghadarmenian",1394,"ghadeva",2328,"ghagujarati",2712,"ghagurmukhi",2584,"ghainarabic",1594,"ghainfinalarabic",65230,"ghaininitialarabic",65231,"ghainmedialarabic",65232,"ghemiddlehookcyrillic",1173,"ghestrokecyrillic",1171,"gheupturncyrillic",1169,"ghhadeva",2394,"ghhagurmukhi",2650,"ghook",608,"ghzsquare",13203,"gihiragana",12366,"gikatakana",12462,"gimarmenian",1379,"gimel",1490,"gimeldagesh",64306,"gimeldageshhebrew",64306,"gimelhebrew",1490,"gjecyrillic",1107,"glottalinvertedstroke",446,"glottalstop",660,"glottalstopinverted",662,"glottalstopmod",704,"glottalstopreversed",661,"glottalstopreversedmod",705,"glottalstopreversedsuperior",740,"glottalstopstroke",673,"glottalstopstrokereversed",674,"gmacron",7713,"gmonospace",65351,"gohiragana",12372,"gokatakana",12468,"gparen",9378,"gpasquare",13228,"gradient",8711,"grave",96,"gravebelowcmb",790,"gravecmb",768,"gravecomb",768,"gravedeva",2387,"gravelowmod",718,"gravemonospace",65344,"gravetonecmb",832,"greater",62,"greaterequal",8805,"greaterequalorless",8923,"greatermonospace",65310,"greaterorequivalent",8819,"greaterorless",8823,"greateroverequal",8807,"greatersmall",65125,"gscript",609,"gstroke",485,"guhiragana",12368,"guillemotleft",171,"guillemotright",187,"guilsinglleft",8249,"guilsinglright",8250,"gukatakana",12464,"guramusquare",13080,"gysquare",13257,"h",104,"haabkhasiancyrillic",1193,"haaltonearabic",1729,"habengali",2489,"hadescendercyrillic",1203,"hadeva",2361,"hagujarati",2745,"hagurmukhi",2617,"haharabic",1581,"hahfinalarabic",65186,"hahinitialarabic",65187,"hahiragana",12399,"hahmedialarabic",65188,"haitusquare",13098,"hakatakana",12495,"hakatakanahalfwidth",65418,"halantgurmukhi",2637,"hamzaarabic",1569,"hamzalowarabic",1569,"hangulfiller",12644,"hardsigncyrillic",1098,"harpoonleftbarbup",8636,"harpoonrightbarbup",8640,"hasquare",13258,"hatafpatah",1458,"hatafpatah16",1458,"hatafpatah23",1458,"hatafpatah2f",1458,"hatafpatahhebrew",1458,"hatafpatahnarrowhebrew",1458,"hatafpatahquarterhebrew",1458,"hatafpatahwidehebrew",1458,"hatafqamats",1459,"hatafqamats1b",1459,"hatafqamats28",1459,"hatafqamats34",1459,"hatafqamatshebrew",1459,"hatafqamatsnarrowhebrew",1459,"hatafqamatsquarterhebrew",1459,"hatafqamatswidehebrew",1459,"hatafsegol",1457,"hatafsegol17",1457,"hatafsegol24",1457,"hatafsegol30",1457,"hatafsegolhebrew",1457,"hatafsegolnarrowhebrew",1457,"hatafsegolquarterhebrew",1457,"hatafsegolwidehebrew",1457,"hbar",295,"hbopomofo",12559,"hbrevebelow",7723,"hcedilla",7721,"hcircle",9431,"hcircumflex",293,"hdieresis",7719,"hdotaccent",7715,"hdotbelow",7717,"he",1492,"heart",9829,"heartsuitblack",9829,"heartsuitwhite",9825,"hedagesh",64308,"hedageshhebrew",64308,"hehaltonearabic",1729,"heharabic",1607,"hehebrew",1492,"hehfinalaltonearabic",64423,"hehfinalalttwoarabic",65258,"hehfinalarabic",65258,"hehhamzaabovefinalarabic",64421,"hehhamzaaboveisolatedarabic",64420,"hehinitialaltonearabic",64424,"hehinitialarabic",65259,"hehiragana",12408,"hehmedialaltonearabic",64425,"hehmedialarabic",65260,"heiseierasquare",13179,"hekatakana",12504,"hekatakanahalfwidth",65421,"hekutaarusquare",13110,"henghook",615,"herutusquare",13113,"het",1495,"hethebrew",1495,"hhook",614,"hhooksuperior",689,"hieuhacirclekorean",12923,"hieuhaparenkorean",12827,"hieuhcirclekorean",12909,"hieuhkorean",12622,"hieuhparenkorean",12813,"hihiragana",12402,"hikatakana",12498,"hikatakanahalfwidth",65419,"hiriq",1460,"hiriq14",1460,"hiriq21",1460,"hiriq2d",1460,"hiriqhebrew",1460,"hiriqnarrowhebrew",1460,"hiriqquarterhebrew",1460,"hiriqwidehebrew",1460,"hlinebelow",7830,"hmonospace",65352,"hoarmenian",1392,"hohipthai",3627,"hohiragana",12411,"hokatakana",12507,"hokatakanahalfwidth",65422,"holam",1465,"holam19",1465,"holam26",1465,"holam32",1465,"holamhebrew",1465,"holamnarrowhebrew",1465,"holamquarterhebrew",1465,"holamwidehebrew",1465,"honokhukthai",3630,"hookabovecomb",777,"hookcmb",777,"hookpalatalizedbelowcmb",801,"hookretroflexbelowcmb",802,"hoonsquare",13122,"horicoptic",1001,"horizontalbar",8213,"horncmb",795,"hotsprings",9832,"house",8962,"hparen",9379,"hsuperior",688,"hturned",613,"huhiragana",12405,"huiitosquare",13107,"hukatakana",12501,"hukatakanahalfwidth",65420,"hungarumlaut",733,"hungarumlautcmb",779,"hv",405,"hyphen",45,"hypheninferior",63205,"hyphenmonospace",65293,"hyphensmall",65123,"hyphensuperior",63206,"hyphentwo",8208,"i",105,"iacute",237,"iacyrillic",1103,"ibengali",2439,"ibopomofo",12583,"ibreve",301,"icaron",464,"icircle",9432,"icircumflex",238,"icyrillic",1110,"idblgrave",521,"ideographearthcircle",12943,"ideographfirecircle",12939,"ideographicallianceparen",12863,"ideographiccallparen",12858,"ideographiccentrecircle",12965,"ideographicclose",12294,"ideographiccomma",12289,"ideographiccommaleft",65380,"ideographiccongratulationparen",12855,"ideographiccorrectcircle",12963,"ideographicearthparen",12847,"ideographicenterpriseparen",12861,"ideographicexcellentcircle",12957,"ideographicfestivalparen",12864,"ideographicfinancialcircle",12950,"ideographicfinancialparen",12854,"ideographicfireparen",12843,"ideographichaveparen",12850,"ideographichighcircle",12964,"ideographiciterationmark",12293,"ideographiclaborcircle",12952,"ideographiclaborparen",12856,"ideographicleftcircle",12967,"ideographiclowcircle",12966,"ideographicmedicinecircle",12969,"ideographicmetalparen",12846,"ideographicmoonparen",12842,"ideographicnameparen",12852,"ideographicperiod",12290,"ideographicprintcircle",12958,"ideographicreachparen",12867,"ideographicrepresentparen",12857,"ideographicresourceparen",12862,"ideographicrightcircle",12968,"ideographicsecretcircle",12953,"ideographicselfparen",12866,"ideographicsocietyparen",12851,"ideographicspace",12288,"ideographicspecialparen",12853,"ideographicstockparen",12849,"ideographicstudyparen",12859,"ideographicsunparen",12848,"ideographicsuperviseparen",12860,"ideographicwaterparen",12844,"ideographicwoodparen",12845,"ideographiczero",12295,"ideographmetalcircle",12942,"ideographmooncircle",12938,"ideographnamecircle",12948,"ideographsuncircle",12944,"ideographwatercircle",12940,"ideographwoodcircle",12941,"ideva",2311,"idieresis",239,"idieresisacute",7727,"idieresiscyrillic",1253,"idotbelow",7883,"iebrevecyrillic",1239,"iecyrillic",1077,"ieungacirclekorean",12917,"ieungaparenkorean",12821,"ieungcirclekorean",12903,"ieungkorean",12615,"ieungparenkorean",12807,"igrave",236,"igujarati",2695,"igurmukhi",2567,"ihiragana",12356,"ihookabove",7881,"iibengali",2440,"iicyrillic",1080,"iideva",2312,"iigujarati",2696,"iigurmukhi",2568,"iimatragurmukhi",2624,"iinvertedbreve",523,"iishortcyrillic",1081,"iivowelsignbengali",2496,"iivowelsigndeva",2368,"iivowelsigngujarati",2752,"ij",307,"ikatakana",12452,"ikatakanahalfwidth",65394,"ikorean",12643,"ilde",732,"iluyhebrew",1452,"imacron",299,"imacroncyrillic",1251,"imageorapproximatelyequal",8787,"imatragurmukhi",2623,"imonospace",65353,"increment",8710,"infinity",8734,"iniarmenian",1387,"integral",8747,"integralbottom",8993,"integralbt",8993,"integralex",63733,"integraltop",8992,"integraltp",8992,"intersection",8745,"intisquare",13061,"invbullet",9688,"invcircle",9689,"invsmileface",9787,"iocyrillic",1105,"iogonek",303,"iota",953,"iotadieresis",970,"iotadieresistonos",912,"iotalatin",617,"iotatonos",943,"iparen",9380,"irigurmukhi",2674,"ismallhiragana",12355,"ismallkatakana",12451,"ismallkatakanahalfwidth",65384,"issharbengali",2554,"istroke",616,"isuperior",63213,"iterationhiragana",12445,"iterationkatakana",12541,"itilde",297,"itildebelow",7725,"iubopomofo",12585,"iucyrillic",1102,"ivowelsignbengali",2495,"ivowelsigndeva",2367,"ivowelsigngujarati",2751,"izhitsacyrillic",1141,"izhitsadblgravecyrillic",1143,"j",106,"jaarmenian",1393,"jabengali",2460,"jadeva",2332,"jagujarati",2716,"jagurmukhi",2588,"jbopomofo",12560,"jcaron",496,"jcircle",9433,"jcircumflex",309,"jcrossedtail",669,"jdotlessstroke",607,"jecyrillic",1112,"jeemarabic",1580,"jeemfinalarabic",65182,"jeeminitialarabic",65183,"jeemmedialarabic",65184,"jeharabic",1688,"jehfinalarabic",64395,"jhabengali",2461,"jhadeva",2333,"jhagujarati",2717,"jhagurmukhi",2589,"jheharmenian",1403,"jis",12292,"jmonospace",65354,"jparen",9381,"jsuperior",690,"k",107,"kabashkircyrillic",1185,"kabengali",2453,"kacute",7729,"kacyrillic",1082,"kadescendercyrillic",1179,"kadeva",2325,"kaf",1499,"kafarabic",1603,"kafdagesh",64315,"kafdageshhebrew",64315,"kaffinalarabic",65242,"kafhebrew",1499,"kafinitialarabic",65243,"kafmedialarabic",65244,"kafrafehebrew",64333,"kagujarati",2709,"kagurmukhi",2581,"kahiragana",12363,"kahookcyrillic",1220,"kakatakana",12459,"kakatakanahalfwidth",65398,"kappa",954,"kappasymbolgreek",1008,"kapyeounmieumkorean",12657,"kapyeounphieuphkorean",12676,"kapyeounpieupkorean",12664,"kapyeounssangpieupkorean",12665,"karoriisquare",13069,"kashidaautoarabic",1600,"kashidaautonosidebearingarabic",1600,"kasmallkatakana",12533,"kasquare",13188,"kasraarabic",1616,"kasratanarabic",1613,"kastrokecyrillic",1183,"katahiraprolongmarkhalfwidth",65392,"kaverticalstrokecyrillic",1181,"kbopomofo",12558,"kcalsquare",13193,"kcaron",489,"kcedilla",311,"kcircle",9434,"kcommaaccent",311,"kdotbelow",7731,"keharmenian",1412,"kehiragana",12369,"kekatakana",12465,"kekatakanahalfwidth",65401,"kenarmenian",1391,"kesmallkatakana",12534,"kgreenlandic",312,"khabengali",2454,"khacyrillic",1093,"khadeva",2326,"khagujarati",2710,"khagurmukhi",2582,"khaharabic",1582,"khahfinalarabic",65190,"khahinitialarabic",65191,"khahmedialarabic",65192,"kheicoptic",999,"khhadeva",2393,"khhagurmukhi",2649,"khieukhacirclekorean",12920,"khieukhaparenkorean",12824,"khieukhcirclekorean",12906,"khieukhkorean",12619,"khieukhparenkorean",12810,"khokhaithai",3586,"khokhonthai",3589,"khokhuatthai",3587,"khokhwaithai",3588,"khomutthai",3675,"khook",409,"khorakhangthai",3590,"khzsquare",13201,"kihiragana",12365,"kikatakana",12461,"kikatakanahalfwidth",65399,"kiroguramusquare",13077,"kiromeetorusquare",13078,"kirosquare",13076,"kiyeokacirclekorean",12910,"kiyeokaparenkorean",12814,"kiyeokcirclekorean",12896,"kiyeokkorean",12593,"kiyeokparenkorean",12800,"kiyeoksioskorean",12595,"kjecyrillic",1116,"klinebelow",7733,"klsquare",13208,"kmcubedsquare",13222,"kmonospace",65355,"kmsquaredsquare",13218,"kohiragana",12371,"kohmsquare",13248,"kokaithai",3585,"kokatakana",12467,"kokatakanahalfwidth",65402,"kooposquare",13086,"koppacyrillic",1153,"koreanstandardsymbol",12927,"koroniscmb",835,"kparen",9382,"kpasquare",13226,"ksicyrillic",1135,"ktsquare",13263,"kturned",670,"kuhiragana",12367,"kukatakana",12463,"kukatakanahalfwidth",65400,"kvsquare",13240,"kwsquare",13246,"l",108,"labengali",2482,"lacute",314,"ladeva",2354,"lagujarati",2738,"lagurmukhi",2610,"lakkhangyaothai",3653,"lamaleffinalarabic",65276,"lamalefhamzaabovefinalarabic",65272,"lamalefhamzaaboveisolatedarabic",65271,"lamalefhamzabelowfinalarabic",65274,"lamalefhamzabelowisolatedarabic",65273,"lamalefisolatedarabic",65275,"lamalefmaddaabovefinalarabic",65270,"lamalefmaddaaboveisolatedarabic",65269,"lamarabic",1604,"lambda",955,"lambdastroke",411,"lamed",1500,"lameddagesh",64316,"lameddageshhebrew",64316,"lamedhebrew",1500,"lamfinalarabic",65246,"lamhahinitialarabic",64714,"laminitialarabic",65247,"lamjeeminitialarabic",64713,"lamkhahinitialarabic",64715,"lamlamhehisolatedarabic",65010,"lammedialarabic",65248,"lammeemhahinitialarabic",64904,"lammeeminitialarabic",64716,"largecircle",9711,"lbar",410,"lbelt",620,"lbopomofo",12556,"lcaron",318,"lcedilla",316,"lcircle",9435,"lcircumflexbelow",7741,"lcommaaccent",316,"ldot",320,"ldotaccent",320,"ldotbelow",7735,"ldotbelowmacron",7737,"leftangleabovecmb",794,"lefttackbelowcmb",792,"less",60,"lessequal",8804,"lessequalorgreater",8922,"lessmonospace",65308,"lessorequivalent",8818,"lessorgreater",8822,"lessoverequal",8806,"lesssmall",65124,"lezh",622,"lfblock",9612,"lhookretroflex",621,"lira",8356,"liwnarmenian",1388,"lj",457,"ljecyrillic",1113,"ll",63168,"lladeva",2355,"llagujarati",2739,"llinebelow",7739,"llladeva",2356,"llvocalicbengali",2529,"llvocalicdeva",2401,"llvocalicvowelsignbengali",2531,"llvocalicvowelsigndeva",2403,"lmiddletilde",619,"lmonospace",65356,"lmsquare",13264,"lochulathai",3628,"logicaland",8743,"logicalnot",172,"logicalnotreversed",8976,"logicalor",8744,"lolingthai",3621,"longs",383,"lowlinecenterline",65102,"lowlinecmb",818,"lowlinedashed",65101,"lozenge",9674,"lparen",9383,"lslash",322,"lsquare",8467,"lsuperior",63214,"ltshade",9617,"luthai",3622,"lvocalicbengali",2444,"lvocalicdeva",2316,"lvocalicvowelsignbengali",2530,"lvocalicvowelsigndeva",2402,"lxsquare",13267,"m",109,"mabengali",2478,"macron",175,"macronbelowcmb",817,"macroncmb",772,"macronlowmod",717,"macronmonospace",65507,"macute",7743,"madeva",2350,"magujarati",2734,"magurmukhi",2606,"mahapakhhebrew",1444,"mahapakhlefthebrew",1444,"mahiragana",12414,"maichattawalowleftthai",63637,"maichattawalowrightthai",63636,"maichattawathai",3659,"maichattawaupperleftthai",63635,"maieklowleftthai",63628,"maieklowrightthai",63627,"maiekthai",3656,"maiekupperleftthai",63626,"maihanakatleftthai",63620,"maihanakatthai",3633,"maitaikhuleftthai",63625,"maitaikhuthai",3655,"maitholowleftthai",63631,"maitholowrightthai",63630,"maithothai",3657,"maithoupperleftthai",63629,"maitrilowleftthai",63634,"maitrilowrightthai",63633,"maitrithai",3658,"maitriupperleftthai",63632,"maiyamokthai",3654,"makatakana",12510,"makatakanahalfwidth",65423,"male",9794,"mansyonsquare",13127,"maqafhebrew",1470,"mars",9794,"masoracirclehebrew",1455,"masquare",13187,"mbopomofo",12551,"mbsquare",13268,"mcircle",9436,"mcubedsquare",13221,"mdotaccent",7745,"mdotbelow",7747,"meemarabic",1605,"meemfinalarabic",65250,"meeminitialarabic",65251,"meemmedialarabic",65252,"meemmeeminitialarabic",64721,"meemmeemisolatedarabic",64584,"meetorusquare",13133,"mehiragana",12417,"meizierasquare",13182,"mekatakana",12513,"mekatakanahalfwidth",65426,"mem",1502,"memdagesh",64318,"memdageshhebrew",64318,"memhebrew",1502,"menarmenian",1396,"merkhahebrew",1445,"merkhakefulahebrew",1446,"merkhakefulalefthebrew",1446,"merkhalefthebrew",1445,"mhook",625,"mhzsquare",13202,"middledotkatakanahalfwidth",65381,"middot",183,"mieumacirclekorean",12914,"mieumaparenkorean",12818,"mieumcirclekorean",12900,"mieumkorean",12609,"mieumpansioskorean",12656,"mieumparenkorean",12804,"mieumpieupkorean",12654,"mieumsioskorean",12655,"mihiragana",12415,"mikatakana",12511,"mikatakanahalfwidth",65424,"minus",8722,"minusbelowcmb",800,"minuscircle",8854,"minusmod",727,"minusplus",8723,"minute",8242,"miribaarusquare",13130,"mirisquare",13129,"mlonglegturned",624,"mlsquare",13206,"mmcubedsquare",13219,"mmonospace",65357,"mmsquaredsquare",13215,"mohiragana",12418,"mohmsquare",13249,"mokatakana",12514,"mokatakanahalfwidth",65427,"molsquare",13270,"momathai",3617,"moverssquare",13223,"moverssquaredsquare",13224,"mparen",9384,"mpasquare",13227,"mssquare",13235,"msuperior",63215,"mturned",623,"mu",181,"mu1",181,"muasquare",13186,"muchgreater",8811,"muchless",8810,"mufsquare",13196,"mugreek",956,"mugsquare",13197,"muhiragana",12416,"mukatakana",12512,"mukatakanahalfwidth",65425,"mulsquare",13205,"multiply",215,"mumsquare",13211,"munahhebrew",1443,"munahlefthebrew",1443,"musicalnote",9834,"musicalnotedbl",9835,"musicflatsign",9837,"musicsharpsign",9839,"mussquare",13234,"muvsquare",13238,"muwsquare",13244,"mvmegasquare",13241,"mvsquare",13239,"mwmegasquare",13247,"mwsquare",13245,"n",110,"nabengali",2472,"nabla",8711,"nacute",324,"nadeva",2344,"nagujarati",2728,"nagurmukhi",2600,"nahiragana",12394,"nakatakana",12490,"nakatakanahalfwidth",65413,"napostrophe",329,"nasquare",13185,"nbopomofo",12555,"nbspace",160,"ncaron",328,"ncedilla",326,"ncircle",9437,"ncircumflexbelow",7755,"ncommaaccent",326,"ndotaccent",7749,"ndotbelow",7751,"nehiragana",12397,"nekatakana",12493,"nekatakanahalfwidth",65416,"newsheqelsign",8362,"nfsquare",13195,"ngabengali",2457,"ngadeva",2329,"ngagujarati",2713,"ngagurmukhi",2585,"ngonguthai",3591,"nhiragana",12435,"nhookleft",626,"nhookretroflex",627,"nieunacirclekorean",12911,"nieunaparenkorean",12815,"nieuncieuckorean",12597,"nieuncirclekorean",12897,"nieunhieuhkorean",12598,"nieunkorean",12596,"nieunpansioskorean",12648,"nieunparenkorean",12801,"nieunsioskorean",12647,"nieuntikeutkorean",12646,"nihiragana",12395,"nikatakana",12491,"nikatakanahalfwidth",65414,"nikhahitleftthai",63641,"nikhahitthai",3661,"nine",57,"ninearabic",1641,"ninebengali",2543,"ninecircle",9320,"ninecircleinversesansserif",10130,"ninedeva",2415,"ninegujarati",2799,"ninegurmukhi",2671,"ninehackarabic",1641,"ninehangzhou",12329,"nineideographicparen",12840,"nineinferior",8329,"ninemonospace",65305,"nineoldstyle",63289,"nineparen",9340,"nineperiod",9360,"ninepersian",1785,"nineroman",8568,"ninesuperior",8313,"nineteencircle",9330,"nineteenparen",9350,"nineteenperiod",9370,"ninethai",3673,"nj",460,"njecyrillic",1114,"nkatakana",12531,"nkatakanahalfwidth",65437,"nlegrightlong",414,"nlinebelow",7753,"nmonospace",65358,"nmsquare",13210,"nnabengali",2467,"nnadeva",2339,"nnagujarati",2723,"nnagurmukhi",2595,"nnnadeva",2345,"nohiragana",12398,"nokatakana",12494,"nokatakanahalfwidth",65417,"nonbreakingspace",160,"nonenthai",3603,"nonuthai",3609,"noonarabic",1606,"noonfinalarabic",65254,"noonghunnaarabic",1722,"noonghunnafinalarabic",64415,"nooninitialarabic",65255,"noonjeeminitialarabic",64722,"noonjeemisolatedarabic",64587,"noonmedialarabic",65256,"noonmeeminitialarabic",64725,"noonmeemisolatedarabic",64590,"noonnoonfinalarabic",64653,"notcontains",8716,"notelement",8713,"notelementof",8713,"notequal",8800,"notgreater",8815,"notgreaternorequal",8817,"notgreaternorless",8825,"notidentical",8802,"notless",8814,"notlessnorequal",8816,"notparallel",8742,"notprecedes",8832,"notsubset",8836,"notsucceeds",8833,"notsuperset",8837,"nowarmenian",1398,"nparen",9385,"nssquare",13233,"nsuperior",8319,"ntilde",241,"nu",957,"nuhiragana",12396,"nukatakana",12492,"nukatakanahalfwidth",65415,"nuktabengali",2492,"nuktadeva",2364,"nuktagujarati",2748,"nuktagurmukhi",2620,"numbersign",35,"numbersignmonospace",65283,"numbersignsmall",65119,"numeralsigngreek",884,"numeralsignlowergreek",885,"numero",8470,"nun",1504,"nundagesh",64320,"nundageshhebrew",64320,"nunhebrew",1504,"nvsquare",13237,"nwsquare",13243,"nyabengali",2462,"nyadeva",2334,"nyagujarati",2718,"nyagurmukhi",2590,"o",111,"oacute",243,"oangthai",3629,"obarred",629,"obarredcyrillic",1257,"obarreddieresiscyrillic",1259,"obengali",2451,"obopomofo",12571,"obreve",335,"ocandradeva",2321,"ocandragujarati",2705,"ocandravowelsigndeva",2377,"ocandravowelsigngujarati",2761,"ocaron",466,"ocircle",9438,"ocircumflex",244,"ocircumflexacute",7889,"ocircumflexdotbelow",7897,"ocircumflexgrave",7891,"ocircumflexhookabove",7893,"ocircumflextilde",7895,"ocyrillic",1086,"odblacute",337,"odblgrave",525,"odeva",2323,"odieresis",246,"odieresiscyrillic",1255,"odotbelow",7885,"oe",339,"oekorean",12634,"ogonek",731,"ogonekcmb",808,"ograve",242,"ogujarati",2707,"oharmenian",1413,"ohiragana",12362,"ohookabove",7887,"ohorn",417,"ohornacute",7899,"ohorndotbelow",7907,"ohorngrave",7901,"ohornhookabove",7903,"ohorntilde",7905,"ohungarumlaut",337,"oi",419,"oinvertedbreve",527,"okatakana",12458,"okatakanahalfwidth",65397,"okorean",12631,"olehebrew",1451,"omacron",333,"omacronacute",7763,"omacrongrave",7761,"omdeva",2384,"omega",969,"omega1",982,"omegacyrillic",1121,"omegalatinclosed",631,"omegaroundcyrillic",1147,"omegatitlocyrillic",1149,"omegatonos",974,"omgujarati",2768,"omicron",959,"omicrontonos",972,"omonospace",65359,"one",49,"onearabic",1633,"onebengali",2535,"onecircle",9312,"onecircleinversesansserif",10122,"onedeva",2407,"onedotenleader",8228,"oneeighth",8539,"onefitted",63196,"onegujarati",2791,"onegurmukhi",2663,"onehackarabic",1633,"onehalf",189,"onehangzhou",12321,"oneideographicparen",12832,"oneinferior",8321,"onemonospace",65297,"onenumeratorbengali",2548,"oneoldstyle",63281,"oneparen",9332,"oneperiod",9352,"onepersian",1777,"onequarter",188,"oneroman",8560,"onesuperior",185,"onethai",3665,"onethird",8531,"oogonek",491,"oogonekmacron",493,"oogurmukhi",2579,"oomatragurmukhi",2635,"oopen",596,"oparen",9386,"openbullet",9702,"option",8997,"ordfeminine",170,"ordmasculine",186,"orthogonal",8735,"oshortdeva",2322,"oshortvowelsigndeva",2378,"oslash",248,"oslashacute",511,"osmallhiragana",12361,"osmallkatakana",12457,"osmallkatakanahalfwidth",65387,"ostrokeacute",511,"osuperior",63216,"otcyrillic",1151,"otilde",245,"otildeacute",7757,"otildedieresis",7759,"oubopomofo",12577,"overline",8254,"overlinecenterline",65098,"overlinecmb",773,"overlinedashed",65097,"overlinedblwavy",65100,"overlinewavy",65099,"overscore",175,"ovowelsignbengali",2507,"ovowelsigndeva",2379,"ovowelsigngujarati",2763,"p",112,"paampssquare",13184,"paasentosquare",13099,"pabengali",2474,"pacute",7765,"padeva",2346,"pagedown",8671,"pageup",8670,"pagujarati",2730,"pagurmukhi",2602,"pahiragana",12401,"paiyannoithai",3631,"pakatakana",12497,"palatalizationcyrilliccmb",1156,"palochkacyrillic",1216,"pansioskorean",12671,"paragraph",182,"parallel",8741,"parenleft",40,"parenleftaltonearabic",64830,"parenleftbt",63725,"parenleftex",63724,"parenleftinferior",8333,"parenleftmonospace",65288,"parenleftsmall",65113,"parenleftsuperior",8317,"parenlefttp",63723,"parenleftvertical",65077,"parenright",41,"parenrightaltonearabic",64831,"parenrightbt",63736,"parenrightex",63735,"parenrightinferior",8334,"parenrightmonospace",65289,"parenrightsmall",65114,"parenrightsuperior",8318,"parenrighttp",63734,"parenrightvertical",65078,"partialdiff",8706,"paseqhebrew",1472,"pashtahebrew",1433,"pasquare",13225,"patah",1463,"patah11",1463,"patah1d",1463,"patah2a",1463,"patahhebrew",1463,"patahnarrowhebrew",1463,"patahquarterhebrew",1463,"patahwidehebrew",1463,"pazerhebrew",1441,"pbopomofo",12550,"pcircle",9439,"pdotaccent",7767,"pe",1508,"pecyrillic",1087,"pedagesh",64324,"pedageshhebrew",64324,"peezisquare",13115,"pefinaldageshhebrew",64323,"peharabic",1662,"peharmenian",1402,"pehebrew",1508,"pehfinalarabic",64343,"pehinitialarabic",64344,"pehiragana",12410,"pehmedialarabic",64345,"pekatakana",12506,"pemiddlehookcyrillic",1191,"perafehebrew",64334,"percent",37,"percentarabic",1642,"percentmonospace",65285,"percentsmall",65130,"period",46,"periodarmenian",1417,"periodcentered",183,"periodhalfwidth",65377,"periodinferior",63207,"periodmonospace",65294,"periodsmall",65106,"periodsuperior",63208,"perispomenigreekcmb",834,"perpendicular",8869,"perthousand",8240,"peseta",8359,"pfsquare",13194,"phabengali",2475,"phadeva",2347,"phagujarati",2731,"phagurmukhi",2603,"phi",966,"phi1",981,"phieuphacirclekorean",12922,"phieuphaparenkorean",12826,"phieuphcirclekorean",12908,"phieuphkorean",12621,"phieuphparenkorean",12812,"philatin",632,"phinthuthai",3642,"phisymbolgreek",981,"phook",421,"phophanthai",3614,"phophungthai",3612,"phosamphaothai",3616,"pi",960,"pieupacirclekorean",12915,"pieupaparenkorean",12819,"pieupcieuckorean",12662,"pieupcirclekorean",12901,"pieupkiyeokkorean",12658,"pieupkorean",12610,"pieupparenkorean",12805,"pieupsioskiyeokkorean",12660,"pieupsioskorean",12612,"pieupsiostikeutkorean",12661,"pieupthieuthkorean",12663,"pieuptikeutkorean",12659,"pihiragana",12404,"pikatakana",12500,"pisymbolgreek",982,"piwrarmenian",1411,"plus",43,"plusbelowcmb",799,"pluscircle",8853,"plusminus",177,"plusmod",726,"plusmonospace",65291,"plussmall",65122,"plussuperior",8314,"pmonospace",65360,"pmsquare",13272,"pohiragana",12413,"pointingindexdownwhite",9759,"pointingindexleftwhite",9756,"pointingindexrightwhite",9758,"pointingindexupwhite",9757,"pokatakana",12509,"poplathai",3611,"postalmark",12306,"postalmarkface",12320,"pparen",9387,"precedes",8826,"prescription",8478,"primemod",697,"primereversed",8245,"product",8719,"projective",8965,"prolongedkana",12540,"propellor",8984,"propersubset",8834,"propersuperset",8835,"proportion",8759,"proportional",8733,"psi",968,"psicyrillic",1137,"psilipneumatacyrilliccmb",1158,"pssquare",13232,"puhiragana",12407,"pukatakana",12503,"pvsquare",13236,"pwsquare",13242,"q",113,"qadeva",2392,"qadmahebrew",1448,"qafarabic",1602,"qaffinalarabic",65238,"qafinitialarabic",65239,"qafmedialarabic",65240,"qamats",1464,"qamats10",1464,"qamats1a",1464,"qamats1c",1464,"qamats27",1464,"qamats29",1464,"qamats33",1464,"qamatsde",1464,"qamatshebrew",1464,"qamatsnarrowhebrew",1464,"qamatsqatanhebrew",1464,"qamatsqatannarrowhebrew",1464,"qamatsqatanquarterhebrew",1464,"qamatsqatanwidehebrew",1464,"qamatsquarterhebrew",1464,"qamatswidehebrew",1464,"qarneyparahebrew",1439,"qbopomofo",12561,"qcircle",9440,"qhook",672,"qmonospace",65361,"qof",1511,"qofdagesh",64327,"qofdageshhebrew",64327,"qofhebrew",1511,"qparen",9388,"quarternote",9833,"qubuts",1467,"qubuts18",1467,"qubuts25",1467,"qubuts31",1467,"qubutshebrew",1467,"qubutsnarrowhebrew",1467,"qubutsquarterhebrew",1467,"qubutswidehebrew",1467,"question",63,"questionarabic",1567,"questionarmenian",1374,"questiondown",191,"questiondownsmall",63423,"questiongreek",894,"questionmonospace",65311,"questionsmall",63295,"quotedbl",34,"quotedblbase",8222,"quotedblleft",8220,"quotedblmonospace",65282,"quotedblprime",12318,"quotedblprimereversed",12317,"quotedblright",8221,"quoteleft",8216,"quoteleftreversed",8219,"quotereversed",8219,"quoteright",8217,"quoterightn",329,"quotesinglbase",8218,"quotesingle",39,"quotesinglemonospace",65287,"r",114,"raarmenian",1404,"rabengali",2480,"racute",341,"radeva",2352,"radical",8730,"radicalex",63717,"radoverssquare",13230,"radoverssquaredsquare",13231,"radsquare",13229,"rafe",1471,"rafehebrew",1471,"ragujarati",2736,"ragurmukhi",2608,"rahiragana",12425,"rakatakana",12521,"rakatakanahalfwidth",65431,"ralowerdiagonalbengali",2545,"ramiddlediagonalbengali",2544,"ramshorn",612,"ratio",8758,"rbopomofo",12566,"rcaron",345,"rcedilla",343,"rcircle",9441,"rcommaaccent",343,"rdblgrave",529,"rdotaccent",7769,"rdotbelow",7771,"rdotbelowmacron",7773,"referencemark",8251,"reflexsubset",8838,"reflexsuperset",8839,"registered",174,"registersans",63720,"registerserif",63194,"reharabic",1585,"reharmenian",1408,"rehfinalarabic",65198,"rehiragana",12428,"rekatakana",12524,"rekatakanahalfwidth",65434,"resh",1512,"reshdageshhebrew",64328,"reshhebrew",1512,"reversedtilde",8765,"reviahebrew",1431,"reviamugrashhebrew",1431,"revlogicalnot",8976,"rfishhook",638,"rfishhookreversed",639,"rhabengali",2525,"rhadeva",2397,"rho",961,"rhook",637,"rhookturned",635,"rhookturnedsuperior",693,"rhosymbolgreek",1009,"rhotichookmod",734,"rieulacirclekorean",12913,"rieulaparenkorean",12817,"rieulcirclekorean",12899,"rieulhieuhkorean",12608,"rieulkiyeokkorean",12602,"rieulkiyeoksioskorean",12649,"rieulkorean",12601,"rieulmieumkorean",12603,"rieulpansioskorean",12652,"rieulparenkorean",12803,"rieulphieuphkorean",12607,"rieulpieupkorean",12604,"rieulpieupsioskorean",12651,"rieulsioskorean",12605,"rieulthieuthkorean",12606,"rieultikeutkorean",12650,"rieulyeorinhieuhkorean",12653,"rightangle",8735,"righttackbelowcmb",793,"righttriangle",8895,"rihiragana",12426,"rikatakana",12522,"rikatakanahalfwidth",65432,"ring",730,"ringbelowcmb",805,"ringcmb",778,"ringhalfleft",703,"ringhalfleftarmenian",1369,"ringhalfleftbelowcmb",796,"ringhalfleftcentered",723,"ringhalfright",702,"ringhalfrightbelowcmb",825,"ringhalfrightcentered",722,"rinvertedbreve",531,"rittorusquare",13137,"rlinebelow",7775,"rlongleg",636,"rlonglegturned",634,"rmonospace",65362,"rohiragana",12429,"rokatakana",12525,"rokatakanahalfwidth",65435,"roruathai",3619,"rparen",9389,"rrabengali",2524,"rradeva",2353,"rragurmukhi",2652,"rreharabic",1681,"rrehfinalarabic",64397,"rrvocalicbengali",2528,"rrvocalicdeva",2400,"rrvocalicgujarati",2784,"rrvocalicvowelsignbengali",2500,"rrvocalicvowelsigndeva",2372,"rrvocalicvowelsigngujarati",2756,"rsuperior",63217,"rtblock",9616,"rturned",633,"rturnedsuperior",692,"ruhiragana",12427,"rukatakana",12523,"rukatakanahalfwidth",65433,"rupeemarkbengali",2546,"rupeesignbengali",2547,"rupiah",63197,"ruthai",3620,"rvocalicbengali",2443,"rvocalicdeva",2315,"rvocalicgujarati",2699,"rvocalicvowelsignbengali",2499,"rvocalicvowelsigndeva",2371,"rvocalicvowelsigngujarati",2755,"s",115,"sabengali",2488,"sacute",347,"sacutedotaccent",7781,"sadarabic",1589,"sadeva",2360,"sadfinalarabic",65210,"sadinitialarabic",65211,"sadmedialarabic",65212,"sagujarati",2744,"sagurmukhi",2616,"sahiragana",12373,"sakatakana",12469,"sakatakanahalfwidth",65403,"sallallahoualayhewasallamarabic",65018,"samekh",1505,"samekhdagesh",64321,"samekhdageshhebrew",64321,"samekhhebrew",1505,"saraaathai",3634,"saraaethai",3649,"saraaimaimalaithai",3652,"saraaimaimuanthai",3651,"saraamthai",3635,"saraathai",3632,"saraethai",3648,"saraiileftthai",63622,"saraiithai",3637,"saraileftthai",63621,"saraithai",3636,"saraothai",3650,"saraueeleftthai",63624,"saraueethai",3639,"saraueleftthai",63623,"sarauethai",3638,"sarauthai",3640,"sarauuthai",3641,"sbopomofo",12569,"scaron",353,"scarondotaccent",7783,"scedilla",351,"schwa",601,"schwacyrillic",1241,"schwadieresiscyrillic",1243,"schwahook",602,"scircle",9442,"scircumflex",349,"scommaaccent",537,"sdotaccent",7777,"sdotbelow",7779,"sdotbelowdotaccent",7785,"seagullbelowcmb",828,"second",8243,"secondtonechinese",714,"section",167,"seenarabic",1587,"seenfinalarabic",65202,"seeninitialarabic",65203,"seenmedialarabic",65204,"segol",1462,"segol13",1462,"segol1f",1462,"segol2c",1462,"segolhebrew",1462,"segolnarrowhebrew",1462,"segolquarterhebrew",1462,"segoltahebrew",1426,"segolwidehebrew",1462,"seharmenian",1405,"sehiragana",12379,"sekatakana",12475,"sekatakanahalfwidth",65406,"semicolon",59,"semicolonarabic",1563,"semicolonmonospace",65307,"semicolonsmall",65108,"semivoicedmarkkana",12444,"semivoicedmarkkanahalfwidth",65439,"sentisquare",13090,"sentosquare",13091,"seven",55,"sevenarabic",1639,"sevenbengali",2541,"sevencircle",9318,"sevencircleinversesansserif",10128,"sevendeva",2413,"seveneighths",8542,"sevengujarati",2797,"sevengurmukhi",2669,"sevenhackarabic",1639,"sevenhangzhou",12327,"sevenideographicparen",12838,"seveninferior",8327,"sevenmonospace",65303,"sevenoldstyle",63287,"sevenparen",9338,"sevenperiod",9358,"sevenpersian",1783,"sevenroman",8566,"sevensuperior",8311,"seventeencircle",9328,"seventeenparen",9348,"seventeenperiod",9368,"seventhai",3671,"sfthyphen",173,"shaarmenian",1399,"shabengali",2486,"shacyrillic",1096,"shaddaarabic",1617,"shaddadammaarabic",64609,"shaddadammatanarabic",64606,"shaddafathaarabic",64608,"shaddakasraarabic",64610,"shaddakasratanarabic",64607,"shade",9618,"shadedark",9619,"shadelight",9617,"shademedium",9618,"shadeva",2358,"shagujarati",2742,"shagurmukhi",2614,"shalshelethebrew",1427,"shbopomofo",12565,"shchacyrillic",1097,"sheenarabic",1588,"sheenfinalarabic",65206,"sheeninitialarabic",65207,"sheenmedialarabic",65208,"sheicoptic",995,"sheqel",8362,"sheqelhebrew",8362,"sheva",1456,"sheva115",1456,"sheva15",1456,"sheva22",1456,"sheva2e",1456,"shevahebrew",1456,"shevanarrowhebrew",1456,"shevaquarterhebrew",1456,"shevawidehebrew",1456,"shhacyrillic",1211,"shimacoptic",1005,"shin",1513,"shindagesh",64329,"shindageshhebrew",64329,"shindageshshindot",64300,"shindageshshindothebrew",64300,"shindageshsindot",64301,"shindageshsindothebrew",64301,"shindothebrew",1473,"shinhebrew",1513,"shinshindot",64298,"shinshindothebrew",64298,"shinsindot",64299,"shinsindothebrew",64299,"shook",642,"sigma",963,"sigma1",962,"sigmafinal",962,"sigmalunatesymbolgreek",1010,"sihiragana",12375,"sikatakana",12471,"sikatakanahalfwidth",65404,"siluqhebrew",1469,"siluqlefthebrew",1469,"similar",8764,"sindothebrew",1474,"siosacirclekorean",12916,"siosaparenkorean",12820,"sioscieuckorean",12670,"sioscirclekorean",12902,"sioskiyeokkorean",12666,"sioskorean",12613,"siosnieunkorean",12667,"siosparenkorean",12806,"siospieupkorean",12669,"siostikeutkorean",12668,"six",54,"sixarabic",1638,"sixbengali",2540,"sixcircle",9317,"sixcircleinversesansserif",10127,"sixdeva",2412,"sixgujarati",2796,"sixgurmukhi",2668,"sixhackarabic",1638,"sixhangzhou",12326,"sixideographicparen",12837,"sixinferior",8326,"sixmonospace",65302,"sixoldstyle",63286,"sixparen",9337,"sixperiod",9357,"sixpersian",1782,"sixroman",8565,"sixsuperior",8310,"sixteencircle",9327,"sixteencurrencydenominatorbengali",2553,"sixteenparen",9347,"sixteenperiod",9367,"sixthai",3670,"slash",47,"slashmonospace",65295,"slong",383,"slongdotaccent",7835,"smileface",9786,"smonospace",65363,"sofpasuqhebrew",1475,"softhyphen",173,"softsigncyrillic",1100,"sohiragana",12381,"sokatakana",12477,"sokatakanahalfwidth",65407,"soliduslongoverlaycmb",824,"solidusshortoverlaycmb",823,"sorusithai",3625,"sosalathai",3624,"sosothai",3595,"sosuathai",3626,"space",32,"spacehackarabic",32,"spade",9824,"spadesuitblack",9824,"spadesuitwhite",9828,"sparen",9390,"squarebelowcmb",827,"squarecc",13252,"squarecm",13213,"squarediagonalcrosshatchfill",9641,"squarehorizontalfill",9636,"squarekg",13199,"squarekm",13214,"squarekmcapital",13262,"squareln",13265,"squarelog",13266,"squaremg",13198,"squaremil",13269,"squaremm",13212,"squaremsquared",13217,"squareorthogonalcrosshatchfill",9638,"squareupperlefttolowerrightfill",9639,"squareupperrighttolowerleftfill",9640,"squareverticalfill",9637,"squarewhitewithsmallblack",9635,"srsquare",13275,"ssabengali",2487,"ssadeva",2359,"ssagujarati",2743,"ssangcieuckorean",12617,"ssanghieuhkorean",12677,"ssangieungkorean",12672,"ssangkiyeokkorean",12594,"ssangnieunkorean",12645,"ssangpieupkorean",12611,"ssangsioskorean",12614,"ssangtikeutkorean",12600,"ssuperior",63218,"sterling",163,"sterlingmonospace",65505,"strokelongoverlaycmb",822,"strokeshortoverlaycmb",821,"subset",8834,"subsetnotequal",8842,"subsetorequal",8838,"succeeds",8827,"suchthat",8715,"suhiragana",12377,"sukatakana",12473,"sukatakanahalfwidth",65405,"sukunarabic",1618,"summation",8721,"sun",9788,"superset",8835,"supersetnotequal",8843,"supersetorequal",8839,"svsquare",13276,"syouwaerasquare",13180,"t",116,"tabengali",2468,"tackdown",8868,"tackleft",8867,"tadeva",2340,"tagujarati",2724,"tagurmukhi",2596,"taharabic",1591,"tahfinalarabic",65218,"tahinitialarabic",65219,"tahiragana",12383,"tahmedialarabic",65220,"taisyouerasquare",13181,"takatakana",12479,"takatakanahalfwidth",65408,"tatweelarabic",1600,"tau",964,"tav",1514,"tavdages",64330,"tavdagesh",64330,"tavdageshhebrew",64330,"tavhebrew",1514,"tbar",359,"tbopomofo",12554,"tcaron",357,"tccurl",680,"tcedilla",355,"tcheharabic",1670,"tchehfinalarabic",64379,"tchehinitialarabic",64380,"tchehmedialarabic",64381,"tcircle",9443,"tcircumflexbelow",7793,"tcommaaccent",355,"tdieresis",7831,"tdotaccent",7787,"tdotbelow",7789,"tecyrillic",1090,"tedescendercyrillic",1197,"teharabic",1578,"tehfinalarabic",65174,"tehhahinitialarabic",64674,"tehhahisolatedarabic",64524,"tehinitialarabic",65175,"tehiragana",12390,"tehjeeminitialarabic",64673,"tehjeemisolatedarabic",64523,"tehmarbutaarabic",1577,"tehmarbutafinalarabic",65172,"tehmedialarabic",65176,"tehmeeminitialarabic",64676,"tehmeemisolatedarabic",64526,"tehnoonfinalarabic",64627,"tekatakana",12486,"tekatakanahalfwidth",65411,"telephone",8481,"telephoneblack",9742,"telishagedolahebrew",1440,"telishaqetanahebrew",1449,"tencircle",9321,"tenideographicparen",12841,"tenparen",9341,"tenperiod",9361,"tenroman",8569,"tesh",679,"tet",1496,"tetdagesh",64312,"tetdageshhebrew",64312,"tethebrew",1496,"tetsecyrillic",1205,"tevirhebrew",1435,"tevirlefthebrew",1435,"thabengali",2469,"thadeva",2341,"thagujarati",2725,"thagurmukhi",2597,"thalarabic",1584,"thalfinalarabic",65196,"thanthakhatlowleftthai",63640,"thanthakhatlowrightthai",63639,"thanthakhatthai",3660,"thanthakhatupperleftthai",63638,"theharabic",1579,"thehfinalarabic",65178,"thehinitialarabic",65179,"thehmedialarabic",65180,"thereexists",8707,"therefore",8756,"theta",952,"theta1",977,"thetasymbolgreek",977,"thieuthacirclekorean",12921,"thieuthaparenkorean",12825,"thieuthcirclekorean",12907,"thieuthkorean",12620,"thieuthparenkorean",12811,"thirteencircle",9324,"thirteenparen",9344,"thirteenperiod",9364,"thonangmonthothai",3601,"thook",429,"thophuthaothai",3602,"thorn",254,"thothahanthai",3607,"thothanthai",3600,"thothongthai",3608,"thothungthai",3606,"thousandcyrillic",1154,"thousandsseparatorarabic",1644,"thousandsseparatorpersian",1644,"three",51,"threearabic",1635,"threebengali",2537,"threecircle",9314,"threecircleinversesansserif",10124,"threedeva",2409,"threeeighths",8540,"threegujarati",2793,"threegurmukhi",2665,"threehackarabic",1635,"threehangzhou",12323,"threeideographicparen",12834,"threeinferior",8323,"threemonospace",65299,"threenumeratorbengali",2550,"threeoldstyle",63283,"threeparen",9334,"threeperiod",9354,"threepersian",1779,"threequarters",190,"threequartersemdash",63198,"threeroman",8562,"threesuperior",179,"threethai",3667,"thzsquare",13204,"tihiragana",12385,"tikatakana",12481,"tikatakanahalfwidth",65409,"tikeutacirclekorean",12912,"tikeutaparenkorean",12816,"tikeutcirclekorean",12898,"tikeutkorean",12599,"tikeutparenkorean",12802,"tilde",732,"tildebelowcmb",816,"tildecmb",771,"tildecomb",771,"tildedoublecmb",864,"tildeoperator",8764,"tildeoverlaycmb",820,"tildeverticalcmb",830,"timescircle",8855,"tipehahebrew",1430,"tipehalefthebrew",1430,"tippigurmukhi",2672,"titlocyrilliccmb",1155,"tiwnarmenian",1407,"tlinebelow",7791,"tmonospace",65364,"toarmenian",1385,"tohiragana",12392,"tokatakana",12488,"tokatakanahalfwidth",65412,"tonebarextrahighmod",741,"tonebarextralowmod",745,"tonebarhighmod",742,"tonebarlowmod",744,"tonebarmidmod",743,"tonefive",445,"tonesix",389,"tonetwo",424,"tonos",900,"tonsquare",13095,"topatakthai",3599,"tortoiseshellbracketleft",12308,"tortoiseshellbracketleftsmall",65117,"tortoiseshellbracketleftvertical",65081,"tortoiseshellbracketright",12309,"tortoiseshellbracketrightsmall",65118,"tortoiseshellbracketrightvertical",65082,"totaothai",3605,"tpalatalhook",427,"tparen",9391,"trademark",8482,"trademarksans",63722,"trademarkserif",63195,"tretroflexhook",648,"triagdn",9660,"triaglf",9668,"triagrt",9658,"triagup",9650,"ts",678,"tsadi",1510,"tsadidagesh",64326,"tsadidageshhebrew",64326,"tsadihebrew",1510,"tsecyrillic",1094,"tsere",1461,"tsere12",1461,"tsere1e",1461,"tsere2b",1461,"tserehebrew",1461,"tserenarrowhebrew",1461,"tserequarterhebrew",1461,"tserewidehebrew",1461,"tshecyrillic",1115,"tsuperior",63219,"ttabengali",2463,"ttadeva",2335,"ttagujarati",2719,"ttagurmukhi",2591,"tteharabic",1657,"ttehfinalarabic",64359,"ttehinitialarabic",64360,"ttehmedialarabic",64361,"tthabengali",2464,"tthadeva",2336,"tthagujarati",2720,"tthagurmukhi",2592,"tturned",647,"tuhiragana",12388,"tukatakana",12484,"tukatakanahalfwidth",65410,"tusmallhiragana",12387,"tusmallkatakana",12483,"tusmallkatakanahalfwidth",65391,"twelvecircle",9323,"twelveparen",9343,"twelveperiod",9363,"twelveroman",8571,"twentycircle",9331,"twentyhangzhou",21316,"twentyparen",9351,"twentyperiod",9371,"two",50,"twoarabic",1634,"twobengali",2536,"twocircle",9313,"twocircleinversesansserif",10123,"twodeva",2408,"twodotenleader",8229,"twodotleader",8229,"twodotleadervertical",65072,"twogujarati",2792,"twogurmukhi",2664,"twohackarabic",1634,"twohangzhou",12322,"twoideographicparen",12833,"twoinferior",8322,"twomonospace",65298,"twonumeratorbengali",2549,"twooldstyle",63282,"twoparen",9333,"twoperiod",9353,"twopersian",1778,"tworoman",8561,"twostroke",443,"twosuperior",178,"twothai",3666,"twothirds",8532,"u",117,"uacute",250,"ubar",649,"ubengali",2441,"ubopomofo",12584,"ubreve",365,"ucaron",468,"ucircle",9444,"ucircumflex",251,"ucircumflexbelow",7799,"ucyrillic",1091,"udattadeva",2385,"udblacute",369,"udblgrave",533,"udeva",2313,"udieresis",252,"udieresisacute",472,"udieresisbelow",7795,"udieresiscaron",474,"udieresiscyrillic",1265,"udieresisgrave",476,"udieresismacron",470,"udotbelow",7909,"ugrave",249,"ugujarati",2697,"ugurmukhi",2569,"uhiragana",12358,"uhookabove",7911,"uhorn",432,"uhornacute",7913,"uhorndotbelow",7921,"uhorngrave",7915,"uhornhookabove",7917,"uhorntilde",7919,"uhungarumlaut",369,"uhungarumlautcyrillic",1267,"uinvertedbreve",535,"ukatakana",12454,"ukatakanahalfwidth",65395,"ukcyrillic",1145,"ukorean",12636,"umacron",363,"umacroncyrillic",1263,"umacrondieresis",7803,"umatragurmukhi",2625,"umonospace",65365,"underscore",95,"underscoredbl",8215,"underscoremonospace",65343,"underscorevertical",65075,"underscorewavy",65103,"union",8746,"universal",8704,"uogonek",371,"uparen",9392,"upblock",9600,"upperdothebrew",1476,"upsilon",965,"upsilondieresis",971,"upsilondieresistonos",944,"upsilonlatin",650,"upsilontonos",973,"uptackbelowcmb",797,"uptackmod",724,"uragurmukhi",2675,"uring",367,"ushortcyrillic",1118,"usmallhiragana",12357,"usmallkatakana",12453,"usmallkatakanahalfwidth",65385,"ustraightcyrillic",1199,"ustraightstrokecyrillic",1201,"utilde",361,"utildeacute",7801,"utildebelow",7797,"uubengali",2442,"uudeva",2314,"uugujarati",2698,"uugurmukhi",2570,"uumatragurmukhi",2626,"uuvowelsignbengali",2498,"uuvowelsigndeva",2370,"uuvowelsigngujarati",2754,"uvowelsignbengali",2497,"uvowelsigndeva",2369,"uvowelsigngujarati",2753,"v",118,"vadeva",2357,"vagujarati",2741,"vagurmukhi",2613,"vakatakana",12535,"vav",1493,"vavdagesh",64309,"vavdagesh65",64309,"vavdageshhebrew",64309,"vavhebrew",1493,"vavholam",64331,"vavholamhebrew",64331,"vavvavhebrew",1520,"vavyodhebrew",1521,"vcircle",9445,"vdotbelow",7807,"vecyrillic",1074,"veharabic",1700,"vehfinalarabic",64363,"vehinitialarabic",64364,"vehmedialarabic",64365,"vekatakana",12537,"venus",9792,"verticalbar",124,"verticallineabovecmb",781,"verticallinebelowcmb",809,"verticallinelowmod",716,"verticallinemod",712,"vewarmenian",1406,"vhook",651,"vikatakana",12536,"viramabengali",2509,"viramadeva",2381,"viramagujarati",2765,"visargabengali",2435,"visargadeva",2307,"visargagujarati",2691,"vmonospace",65366,"voarmenian",1400,"voicediterationhiragana",12446,"voicediterationkatakana",12542,"voicedmarkkana",12443,"voicedmarkkanahalfwidth",65438,"vokatakana",12538,"vparen",9393,"vtilde",7805,"vturned",652,"vuhiragana",12436,"vukatakana",12532,"w",119,"wacute",7811,"waekorean",12633,"wahiragana",12431,"wakatakana",12527,"wakatakanahalfwidth",65436,"wakorean",12632,"wasmallhiragana",12430,"wasmallkatakana",12526,"wattosquare",13143,"wavedash",12316,"wavyunderscorevertical",65076,"wawarabic",1608,"wawfinalarabic",65262,"wawhamzaabovearabic",1572,"wawhamzaabovefinalarabic",65158,"wbsquare",13277,"wcircle",9446,"wcircumflex",373,"wdieresis",7813,"wdotaccent",7815,"wdotbelow",7817,"wehiragana",12433,"weierstrass",8472,"wekatakana",12529,"wekorean",12638,"weokorean",12637,"wgrave",7809,"whitebullet",9702,"whitecircle",9675,"whitecircleinverse",9689,"whitecornerbracketleft",12302,"whitecornerbracketleftvertical",65091,"whitecornerbracketright",12303,"whitecornerbracketrightvertical",65092,"whitediamond",9671,"whitediamondcontainingblacksmalldiamond",9672,"whitedownpointingsmalltriangle",9663,"whitedownpointingtriangle",9661,"whiteleftpointingsmalltriangle",9667,"whiteleftpointingtriangle",9665,"whitelenticularbracketleft",12310,"whitelenticularbracketright",12311,"whiterightpointingsmalltriangle",9657,"whiterightpointingtriangle",9655,"whitesmallsquare",9643,"whitesmilingface",9786,"whitesquare",9633,"whitestar",9734,"whitetelephone",9743,"whitetortoiseshellbracketleft",12312,"whitetortoiseshellbracketright",12313,"whiteuppointingsmalltriangle",9653,"whiteuppointingtriangle",9651,"wihiragana",12432,"wikatakana",12528,"wikorean",12639,"wmonospace",65367,"wohiragana",12434,"wokatakana",12530,"wokatakanahalfwidth",65382,"won",8361,"wonmonospace",65510,"wowaenthai",3623,"wparen",9394,"wring",7832,"wsuperior",695,"wturned",653,"wynn",447,"x",120,"xabovecmb",829,"xbopomofo",12562,"xcircle",9447,"xdieresis",7821,"xdotaccent",7819,"xeharmenian",1389,"xi",958,"xmonospace",65368,"xparen",9395,"xsuperior",739,"y",121,"yaadosquare",13134,"yabengali",2479,"yacute",253,"yadeva",2351,"yaekorean",12626,"yagujarati",2735,"yagurmukhi",2607,"yahiragana",12420,"yakatakana",12516,"yakatakanahalfwidth",65428,"yakorean",12625,"yamakkanthai",3662,"yasmallhiragana",12419,"yasmallkatakana",12515,"yasmallkatakanahalfwidth",65388,"yatcyrillic",1123,"ycircle",9448,"ycircumflex",375,"ydieresis",255,"ydotaccent",7823,"ydotbelow",7925,"yeharabic",1610,"yehbarreearabic",1746,"yehbarreefinalarabic",64431,"yehfinalarabic",65266,"yehhamzaabovearabic",1574,"yehhamzaabovefinalarabic",65162,"yehhamzaaboveinitialarabic",65163,"yehhamzaabovemedialarabic",65164,"yehinitialarabic",65267,"yehmedialarabic",65268,"yehmeeminitialarabic",64733,"yehmeemisolatedarabic",64600,"yehnoonfinalarabic",64660,"yehthreedotsbelowarabic",1745,"yekorean",12630,"yen",165,"yenmonospace",65509,"yeokorean",12629,"yeorinhieuhkorean",12678,"yerahbenyomohebrew",1450,"yerahbenyomolefthebrew",1450,"yericyrillic",1099,"yerudieresiscyrillic",1273,"yesieungkorean",12673,"yesieungpansioskorean",12675,"yesieungsioskorean",12674,"yetivhebrew",1434,"ygrave",7923,"yhook",436,"yhookabove",7927,"yiarmenian",1397,"yicyrillic",1111,"yikorean",12642,"yinyang",9775,"yiwnarmenian",1410,"ymonospace",65369,"yod",1497,"yoddagesh",64313,"yoddageshhebrew",64313,"yodhebrew",1497,"yodyodhebrew",1522,"yodyodpatahhebrew",64287,"yohiragana",12424,"yoikorean",12681,"yokatakana",12520,"yokatakanahalfwidth",65430,"yokorean",12635,"yosmallhiragana",12423,"yosmallkatakana",12519,"yosmallkatakanahalfwidth",65390,"yotgreek",1011,"yoyaekorean",12680,"yoyakorean",12679,"yoyakthai",3618,"yoyingthai",3597,"yparen",9396,"ypogegrammeni",890,"ypogegrammenigreekcmb",837,"yr",422,"yring",7833,"ysuperior",696,"ytilde",7929,"yturned",654,"yuhiragana",12422,"yuikorean",12684,"yukatakana",12518,"yukatakanahalfwidth",65429,"yukorean",12640,"yusbigcyrillic",1131,"yusbigiotifiedcyrillic",1133,"yuslittlecyrillic",1127,"yuslittleiotifiedcyrillic",1129,"yusmallhiragana",12421,"yusmallkatakana",12517,"yusmallkatakanahalfwidth",65389,"yuyekorean",12683,"yuyeokorean",12682,"yyabengali",2527,"yyadeva",2399,"z",122,"zaarmenian",1382,"zacute",378,"zadeva",2395,"zagurmukhi",2651,"zaharabic",1592,"zahfinalarabic",65222,"zahinitialarabic",65223,"zahiragana",12374,"zahmedialarabic",65224,"zainarabic",1586,"zainfinalarabic",65200,"zakatakana",12470,"zaqefgadolhebrew",1429,"zaqefqatanhebrew",1428,"zarqahebrew",1432,"zayin",1494,"zayindagesh",64310,"zayindageshhebrew",64310,"zayinhebrew",1494,"zbopomofo",12567,"zcaron",382,"zcircle",9449,"zcircumflex",7825,"zcurl",657,"zdot",380,"zdotaccent",380,"zdotbelow",7827,"zecyrillic",1079,"zedescendercyrillic",1177,"zedieresiscyrillic",1247,"zehiragana",12380,"zekatakana",12476,"zero",48,"zeroarabic",1632,"zerobengali",2534,"zerodeva",2406,"zerogujarati",2790,"zerogurmukhi",2662,"zerohackarabic",1632,"zeroinferior",8320,"zeromonospace",65296,"zerooldstyle",63280,"zeropersian",1776,"zerosuperior",8304,"zerothai",3664,"zerowidthjoiner",65279,"zerowidthnonjoiner",8204,"zerowidthspace",8203,"zeta",950,"zhbopomofo",12563,"zhearmenian",1386,"zhebrevecyrillic",1218,"zhecyrillic",1078,"zhedescendercyrillic",1175,"zhedieresiscyrillic",1245,"zihiragana",12376,"zikatakana",12472,"zinorhebrew",1454,"zlinebelow",7829,"zmonospace",65370,"zohiragana",12382,"zokatakana",12478,"zparen",9397,"zretroflexhook",656,"zstroke",438,"zuhiragana",12378,"zukatakana",12474,".notdef",0,"angbracketleftbig",9001,"angbracketleftBig",9001,"angbracketleftbigg",9001,"angbracketleftBigg",9001,"angbracketrightBig",9002,"angbracketrightbig",9002,"angbracketrightBigg",9002,"angbracketrightbigg",9002,"arrowhookleft",8618,"arrowhookright",8617,"arrowlefttophalf",8636,"arrowleftbothalf",8637,"arrownortheast",8599,"arrownorthwest",8598,"arrowrighttophalf",8640,"arrowrightbothalf",8641,"arrowsoutheast",8600,"arrowsouthwest",8601,"backslashbig",8726,"backslashBig",8726,"backslashBigg",8726,"backslashbigg",8726,"bardbl",8214,"bracehtipdownleft",65079,"bracehtipdownright",65079,"bracehtipupleft",65080,"bracehtipupright",65080,"braceleftBig",123,"braceleftbig",123,"braceleftbigg",123,"braceleftBigg",123,"bracerightBig",125,"bracerightbig",125,"bracerightbigg",125,"bracerightBigg",125,"bracketleftbig",91,"bracketleftBig",91,"bracketleftbigg",91,"bracketleftBigg",91,"bracketrightBig",93,"bracketrightbig",93,"bracketrightbigg",93,"bracketrightBigg",93,"ceilingleftbig",8968,"ceilingleftBig",8968,"ceilingleftBigg",8968,"ceilingleftbigg",8968,"ceilingrightbig",8969,"ceilingrightBig",8969,"ceilingrightbigg",8969,"ceilingrightBigg",8969,"circledotdisplay",8857,"circledottext",8857,"circlemultiplydisplay",8855,"circlemultiplytext",8855,"circleplusdisplay",8853,"circleplustext",8853,"contintegraldisplay",8750,"contintegraltext",8750,"coproductdisplay",8720,"coproducttext",8720,"floorleftBig",8970,"floorleftbig",8970,"floorleftbigg",8970,"floorleftBigg",8970,"floorrightbig",8971,"floorrightBig",8971,"floorrightBigg",8971,"floorrightbigg",8971,"hatwide",770,"hatwider",770,"hatwidest",770,"intercal",7488,"integraldisplay",8747,"integraltext",8747,"intersectiondisplay",8898,"intersectiontext",8898,"logicalanddisplay",8743,"logicalandtext",8743,"logicalordisplay",8744,"logicalortext",8744,"parenleftBig",40,"parenleftbig",40,"parenleftBigg",40,"parenleftbigg",40,"parenrightBig",41,"parenrightbig",41,"parenrightBigg",41,"parenrightbigg",41,"prime",8242,"productdisplay",8719,"producttext",8719,"radicalbig",8730,"radicalBig",8730,"radicalBigg",8730,"radicalbigg",8730,"radicalbt",8730,"radicaltp",8730,"radicalvertex",8730,"slashbig",47,"slashBig",47,"slashBigg",47,"slashbigg",47,"summationdisplay",8721,"summationtext",8721,"tildewide",732,"tildewider",732,"tildewidest",732,"uniondisplay",8899,"unionmultidisplay",8846,"unionmultitext",8846,"unionsqdisplay",8852,"unionsqtext",8852,"uniontext",8899,"vextenddouble",8741,"vextendsingle",8739]})),_getDingbatsGlyphsUnicode=(0,_core_utils_js__WEBPACK_IMPORTED_MODULE_0__.getArrayLookupTableFactory)((function(){return["space",32,"a1",9985,"a2",9986,"a202",9987,"a3",9988,"a4",9742,"a5",9990,"a119",9991,"a118",9992,"a117",9993,"a11",9755,"a12",9758,"a13",9996,"a14",9997,"a15",9998,"a16",9999,"a105",1e4,"a17",10001,"a18",10002,"a19",10003,"a20",10004,"a21",10005,"a22",10006,"a23",10007,"a24",10008,"a25",10009,"a26",10010,"a27",10011,"a28",10012,"a6",10013,"a7",10014,"a8",10015,"a9",10016,"a10",10017,"a29",10018,"a30",10019,"a31",10020,"a32",10021,"a33",10022,"a34",10023,"a35",9733,"a36",10025,"a37",10026,"a38",10027,"a39",10028,"a40",10029,"a41",10030,"a42",10031,"a43",10032,"a44",10033,"a45",10034,"a46",10035,"a47",10036,"a48",10037,"a49",10038,"a50",10039,"a51",10040,"a52",10041,"a53",10042,"a54",10043,"a55",10044,"a56",10045,"a57",10046,"a58",10047,"a59",10048,"a60",10049,"a61",10050,"a62",10051,"a63",10052,"a64",10053,"a65",10054,"a66",10055,"a67",10056,"a68",10057,"a69",10058,"a70",10059,"a71",9679,"a72",10061,"a73",9632,"a74",10063,"a203",10064,"a75",10065,"a204",10066,"a76",9650,"a77",9660,"a78",9670,"a79",10070,"a81",9687,"a82",10072,"a83",10073,"a84",10074,"a97",10075,"a98",10076,"a99",10077,"a100",10078,"a101",10081,"a102",10082,"a103",10083,"a104",10084,"a106",10085,"a107",10086,"a108",10087,"a112",9827,"a111",9830,"a110",9829,"a109",9824,"a120",9312,"a121",9313,"a122",9314,"a123",9315,"a124",9316,"a125",9317,"a126",9318,"a127",9319,"a128",9320,"a129",9321,"a130",10102,"a131",10103,"a132",10104,"a133",10105,"a134",10106,"a135",10107,"a136",10108,"a137",10109,"a138",10110,"a139",10111,"a140",10112,"a141",10113,"a142",10114,"a143",10115,"a144",10116,"a145",10117,"a146",10118,"a147",10119,"a148",10120,"a149",10121,"a150",10122,"a151",10123,"a152",10124,"a153",10125,"a154",10126,"a155",10127,"a156",10128,"a157",10129,"a158",10130,"a159",10131,"a160",10132,"a161",8594,"a163",8596,"a164",8597,"a196",10136,"a165",10137,"a192",10138,"a166",10139,"a167",10140,"a168",10141,"a169",10142,"a170",10143,"a171",10144,"a172",10145,"a173",10146,"a162",10147,"a174",10148,"a175",10149,"a176",10150,"a177",10151,"a178",10152,"a179",10153,"a193",10154,"a180",10155,"a199",10156,"a181",10157,"a200",10158,"a182",10159,"a201",10161,"a183",10162,"a184",10163,"a197",10164,"a185",10165,"a194",10166,"a198",10167,"a186",10168,"a195",10169,"a187",10170,"a188",10171,"a189",10172,"a190",10173,"a191",10174,"a89",10088,"a90",10089,"a93",10090,"a94",10091,"a91",10092,"a92",10093,"a205",10094,"a85",10095,"a206",10096,"a86",10097,"a87",10098,"a88",10099,"a95",10100,"a96",10101,".notdef",0]}))},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSymbolsFonts=exports.getSupplementalGlyphMapForCalibri=exports.getSupplementalGlyphMapForArialBlack=exports.getStdFontMap=exports.getSerifFonts=exports.getNonStdFontMap=exports.getGlyphMapForStandardFonts=void 0;var _core_utils=__w_pdfjs_require__(8),getStdFontMap=(0,_core_utils.getLookupTableFactory)((function(t){t.ArialNarrow="Helvetica",t["ArialNarrow-Bold"]="Helvetica-Bold",t["ArialNarrow-BoldItalic"]="Helvetica-BoldOblique",t["ArialNarrow-Italic"]="Helvetica-Oblique",t.ArialBlack="Helvetica",t["ArialBlack-Bold"]="Helvetica-Bold",t["ArialBlack-BoldItalic"]="Helvetica-BoldOblique",t["ArialBlack-Italic"]="Helvetica-Oblique",t["Arial-Black"]="Helvetica",t["Arial-Black-Bold"]="Helvetica-Bold",t["Arial-Black-BoldItalic"]="Helvetica-BoldOblique",t["Arial-Black-Italic"]="Helvetica-Oblique",t.Arial="Helvetica",t["Arial-Bold"]="Helvetica-Bold",t["Arial-BoldItalic"]="Helvetica-BoldOblique",t["Arial-Italic"]="Helvetica-Oblique",t["Arial-BoldItalicMT"]="Helvetica-BoldOblique",t["Arial-BoldMT"]="Helvetica-Bold",t["Arial-ItalicMT"]="Helvetica-Oblique",t.ArialMT="Helvetica",t["Courier-Bold"]="Courier-Bold",t["Courier-BoldItalic"]="Courier-BoldOblique",t["Courier-Italic"]="Courier-Oblique",t.CourierNew="Courier",t["CourierNew-Bold"]="Courier-Bold",t["CourierNew-BoldItalic"]="Courier-BoldOblique",t["CourierNew-Italic"]="Courier-Oblique",t["CourierNewPS-BoldItalicMT"]="Courier-BoldOblique",t["CourierNewPS-BoldMT"]="Courier-Bold",t["CourierNewPS-ItalicMT"]="Courier-Oblique",t.CourierNewPSMT="Courier",t.Helvetica="Helvetica",t["Helvetica-Bold"]="Helvetica-Bold",t["Helvetica-BoldItalic"]="Helvetica-BoldOblique",t["Helvetica-BoldOblique"]="Helvetica-BoldOblique",t["Helvetica-Italic"]="Helvetica-Oblique",t["Helvetica-Oblique"]="Helvetica-Oblique",t["Symbol-Bold"]="Symbol",t["Symbol-BoldItalic"]="Symbol",t["Symbol-Italic"]="Symbol",t.TimesNewRoman="Times-Roman",t["TimesNewRoman-Bold"]="Times-Bold",t["TimesNewRoman-BoldItalic"]="Times-BoldItalic",t["TimesNewRoman-Italic"]="Times-Italic",t.TimesNewRomanPS="Times-Roman",t["TimesNewRomanPS-Bold"]="Times-Bold",t["TimesNewRomanPS-BoldItalic"]="Times-BoldItalic",t["TimesNewRomanPS-BoldItalicMT"]="Times-BoldItalic",t["TimesNewRomanPS-BoldMT"]="Times-Bold",t["TimesNewRomanPS-Italic"]="Times-Italic",t["TimesNewRomanPS-ItalicMT"]="Times-Italic",t.TimesNewRomanPSMT="Times-Roman",t["TimesNewRomanPSMT-Bold"]="Times-Bold",t["TimesNewRomanPSMT-BoldItalic"]="Times-BoldItalic",t["TimesNewRomanPSMT-Italic"]="Times-Italic"}));exports.getStdFontMap=getStdFontMap;var getNonStdFontMap=(0,_core_utils.getLookupTableFactory)((function(t){t.Calibri="Helvetica",t["Calibri-Bold"]="Helvetica-Bold",t["Calibri-BoldItalic"]="Helvetica-BoldOblique",t["Calibri-Italic"]="Helvetica-Oblique",t.CenturyGothic="Helvetica",t["CenturyGothic-Bold"]="Helvetica-Bold",t["CenturyGothic-BoldItalic"]="Helvetica-BoldOblique",t["CenturyGothic-Italic"]="Helvetica-Oblique",t.ComicSansMS="Comic Sans MS",t["ComicSansMS-Bold"]="Comic Sans MS-Bold",t["ComicSansMS-BoldItalic"]="Comic Sans MS-BoldItalic",t["ComicSansMS-Italic"]="Comic Sans MS-Italic",t.LucidaConsole="Courier",t["LucidaConsole-Bold"]="Courier-Bold",t["LucidaConsole-BoldItalic"]="Courier-BoldOblique",t["LucidaConsole-Italic"]="Courier-Oblique",t["LucidaSans-Demi"]="Helvetica-Bold",t["MS-Gothic"]="MS Gothic",t["MS-Gothic-Bold"]="MS Gothic-Bold",t["MS-Gothic-BoldItalic"]="MS Gothic-BoldItalic",t["MS-Gothic-Italic"]="MS Gothic-Italic",t["MS-Mincho"]="MS Mincho",t["MS-Mincho-Bold"]="MS Mincho-Bold",t["MS-Mincho-BoldItalic"]="MS Mincho-BoldItalic",t["MS-Mincho-Italic"]="MS Mincho-Italic",t["MS-PGothic"]="MS PGothic",t["MS-PGothic-Bold"]="MS PGothic-Bold",t["MS-PGothic-BoldItalic"]="MS PGothic-BoldItalic",t["MS-PGothic-Italic"]="MS PGothic-Italic",t["MS-PMincho"]="MS PMincho",t["MS-PMincho-Bold"]="MS PMincho-Bold",t["MS-PMincho-BoldItalic"]="MS PMincho-BoldItalic",t["MS-PMincho-Italic"]="MS PMincho-Italic",t.NuptialScript="Times-Italic",t.SegoeUISymbol="Helvetica",t.Wingdings="ZapfDingbats",t["Wingdings-Regular"]="ZapfDingbats"}));exports.getNonStdFontMap=getNonStdFontMap;var getSerifFonts=(0,_core_utils.getLookupTableFactory)((function(t){t["Adobe Jenson"]=!0,t["Adobe Text"]=!0,t.Albertus=!0,t.Aldus=!0,t.Alexandria=!0,t.Algerian=!0,t["American Typewriter"]=!0,t.Antiqua=!0,t.Apex=!0,t.Arno=!0,t.Aster=!0,t.Aurora=!0,t.Baskerville=!0,t.Bell=!0,t.Bembo=!0,t["Bembo Schoolbook"]=!0,t.Benguiat=!0,t["Berkeley Old Style"]=!0,t["Bernhard Modern"]=!0,t["Berthold City"]=!0,t.Bodoni=!0,t["Bauer Bodoni"]=!0,t["Book Antiqua"]=!0,t.Bookman=!0,t["Bordeaux Roman"]=!0,t["Californian FB"]=!0,t.Calisto=!0,t.Calvert=!0,t.Capitals=!0,t.Cambria=!0,t.Cartier=!0,t.Caslon=!0,t.Catull=!0,t.Centaur=!0,t["Century Old Style"]=!0,t["Century Schoolbook"]=!0,t.Chaparral=!0,t["Charis SIL"]=!0,t.Cheltenham=!0,t["Cholla Slab"]=!0,t.Clarendon=!0,t.Clearface=!0,t.Cochin=!0,t.Colonna=!0,t["Computer Modern"]=!0,t["Concrete Roman"]=!0,t.Constantia=!0,t["Cooper Black"]=!0,t.Corona=!0,t.Ecotype=!0,t.Egyptienne=!0,t.Elephant=!0,t.Excelsior=!0,t.Fairfield=!0,t["FF Scala"]=!0,t.Folkard=!0,t.Footlight=!0,t.FreeSerif=!0,t["Friz Quadrata"]=!0,t.Garamond=!0,t.Gentium=!0,t.Georgia=!0,t.Gloucester=!0,t["Goudy Old Style"]=!0,t["Goudy Schoolbook"]=!0,t["Goudy Pro Font"]=!0,t.Granjon=!0,t["Guardian Egyptian"]=!0,t.Heather=!0,t.Hercules=!0,t["High Tower Text"]=!0,t.Hiroshige=!0,t["Hoefler Text"]=!0,t["Humana Serif"]=!0,t.Imprint=!0,t["Ionic No. 5"]=!0,t.Janson=!0,t.Joanna=!0,t.Korinna=!0,t.Lexicon=!0,t["Liberation Serif"]=!0,t["Linux Libertine"]=!0,t.Literaturnaya=!0,t.Lucida=!0,t["Lucida Bright"]=!0,t.Melior=!0,t.Memphis=!0,t.Miller=!0,t.Minion=!0,t.Modern=!0,t["Mona Lisa"]=!0,t["Mrs Eaves"]=!0,t["MS Serif"]=!0,t["Museo Slab"]=!0,t["New York"]=!0,t["Nimbus Roman"]=!0,t["NPS Rawlinson Roadway"]=!0,t.NuptialScript=!0,t.Palatino=!0,t.Perpetua=!0,t.Plantin=!0,t["Plantin Schoolbook"]=!0,t.Playbill=!0,t["Poor Richard"]=!0,t["Rawlinson Roadway"]=!0,t.Renault=!0,t.Requiem=!0,t.Rockwell=!0,t.Roman=!0,t["Rotis Serif"]=!0,t.Sabon=!0,t.Scala=!0,t.Seagull=!0,t.Sistina=!0,t.Souvenir=!0,t.STIX=!0,t["Stone Informal"]=!0,t["Stone Serif"]=!0,t.Sylfaen=!0,t.Times=!0,t.Trajan=!0,t["Trinité"]=!0,t["Trump Mediaeval"]=!0,t.Utopia=!0,t["Vale Type"]=!0,t["Bitstream Vera"]=!0,t["Vera Serif"]=!0,t.Versailles=!0,t.Wanted=!0,t.Weiss=!0,t["Wide Latin"]=!0,t.Windsor=!0,t.XITS=!0}));exports.getSerifFonts=getSerifFonts;var getSymbolsFonts=(0,_core_utils.getLookupTableFactory)((function(t){t.Dingbats=!0,t.Symbol=!0,t.ZapfDingbats=!0}));exports.getSymbolsFonts=getSymbolsFonts;var getGlyphMapForStandardFonts=(0,_core_utils.getLookupTableFactory)((function(t){t[2]=10,t[3]=32,t[4]=33,t[5]=34,t[6]=35,t[7]=36,t[8]=37,t[9]=38,t[10]=39,t[11]=40,t[12]=41,t[13]=42,t[14]=43,t[15]=44,t[16]=45,t[17]=46,t[18]=47,t[19]=48,t[20]=49,t[21]=50,t[22]=51,t[23]=52,t[24]=53,t[25]=54,t[26]=55,t[27]=56,t[28]=57,t[29]=58,t[30]=894,t[31]=60,t[32]=61,t[33]=62,t[34]=63,t[35]=64,t[36]=65,t[37]=66,t[38]=67,t[39]=68,t[40]=69,t[41]=70,t[42]=71,t[43]=72,t[44]=73,t[45]=74,t[46]=75,t[47]=76,t[48]=77,t[49]=78,t[50]=79,t[51]=80,t[52]=81,t[53]=82,t[54]=83,t[55]=84,t[56]=85,t[57]=86,t[58]=87,t[59]=88,t[60]=89,t[61]=90,t[62]=91,t[63]=92,t[64]=93,t[65]=94,t[66]=95,t[67]=96,t[68]=97,t[69]=98,t[70]=99,t[71]=100,t[72]=101,t[73]=102,t[74]=103,t[75]=104,t[76]=105,t[77]=106,t[78]=107,t[79]=108,t[80]=109,t[81]=110,t[82]=111,t[83]=112,t[84]=113,t[85]=114,t[86]=115,t[87]=116,t[88]=117,t[89]=118,t[90]=119,t[91]=120,t[92]=121,t[93]=122,t[94]=123,t[95]=124,t[96]=125,t[97]=126,t[98]=196,t[99]=197,t[100]=199,t[101]=201,t[102]=209,t[103]=214,t[104]=220,t[105]=225,t[106]=224,t[107]=226,t[108]=228,t[109]=227,t[110]=229,t[111]=231,t[112]=233,t[113]=232,t[114]=234,t[115]=235,t[116]=237,t[117]=236,t[118]=238,t[119]=239,t[120]=241,t[121]=243,t[122]=242,t[123]=244,t[124]=246,t[125]=245,t[126]=250,t[127]=249,t[128]=251,t[129]=252,t[130]=8224,t[131]=176,t[132]=162,t[133]=163,t[134]=167,t[135]=8226,t[136]=182,t[137]=223,t[138]=174,t[139]=169,t[140]=8482,t[141]=180,t[142]=168,t[143]=8800,t[144]=198,t[145]=216,t[146]=8734,t[147]=177,t[148]=8804,t[149]=8805,t[150]=165,t[151]=181,t[152]=8706,t[153]=8721,t[154]=8719,t[156]=8747,t[157]=170,t[158]=186,t[159]=8486,t[160]=230,t[161]=248,t[162]=191,t[163]=161,t[164]=172,t[165]=8730,t[166]=402,t[167]=8776,t[168]=8710,t[169]=171,t[170]=187,t[171]=8230,t[210]=218,t[223]=711,t[224]=321,t[225]=322,t[227]=353,t[229]=382,t[234]=253,t[252]=263,t[253]=268,t[254]=269,t[258]=258,t[260]=260,t[261]=261,t[265]=280,t[266]=281,t[268]=283,t[269]=313,t[275]=323,t[276]=324,t[278]=328,t[284]=345,t[285]=346,t[286]=347,t[292]=367,t[295]=377,t[296]=378,t[298]=380,t[305]=963,t[306]=964,t[307]=966,t[308]=8215,t[309]=8252,t[310]=8319,t[311]=8359,t[312]=8592,t[313]=8593,t[337]=9552,t[493]=1039,t[494]=1040,t[705]=1524,t[706]=8362,t[710]=64288,t[711]=64298,t[759]=1617,t[761]=1776,t[763]=1778,t[775]=1652,t[777]=1764,t[778]=1780,t[779]=1781,t[780]=1782,t[782]=771,t[783]=64726,t[786]=8363,t[788]=8532,t[790]=768,t[791]=769,t[792]=768,t[795]=803,t[797]=64336,t[798]=64337,t[799]=64342,t[800]=64343,t[801]=64344,t[802]=64345,t[803]=64362,t[804]=64363,t[805]=64364,t[2424]=7821,t[2425]=7822,t[2426]=7823,t[2427]=7824,t[2428]=7825,t[2429]=7826,t[2430]=7827,t[2433]=7682,t[2678]=8045,t[2679]=8046,t[2830]=1552,t[2838]=686,t[2840]=751,t[2842]=753,t[2843]=754,t[2844]=755,t[2846]=757,t[2856]=767,t[2857]=848,t[2858]=849,t[2862]=853,t[2863]=854,t[2864]=855,t[2865]=861,t[2866]=862,t[2906]=7460,t[2908]=7462,t[2909]=7463,t[2910]=7464,t[2912]=7466,t[2913]=7467,t[2914]=7468,t[2916]=7470,t[2917]=7471,t[2918]=7472,t[2920]=7474,t[2921]=7475,t[2922]=7476,t[2924]=7478,t[2925]=7479,t[2926]=7480,t[2928]=7482,t[2929]=7483,t[2930]=7484,t[2932]=7486,t[2933]=7487,t[2934]=7488,t[2936]=7490,t[2937]=7491,t[2938]=7492,t[2940]=7494,t[2941]=7495,t[2942]=7496,t[2944]=7498,t[2946]=7500,t[2948]=7502,t[2950]=7504,t[2951]=7505,t[2952]=7506,t[2954]=7508,t[2955]=7509,t[2956]=7510,t[2958]=7512,t[2959]=7513,t[2960]=7514,t[2962]=7516,t[2963]=7517,t[2964]=7518,t[2966]=7520,t[2967]=7521,t[2968]=7522,t[2970]=7524,t[2971]=7525,t[2972]=7526,t[2974]=7528,t[2975]=7529,t[2976]=7530,t[2978]=1537,t[2979]=1538,t[2980]=1539,t[2982]=1549,t[2983]=1551,t[2984]=1552,t[2986]=1554,t[2987]=1555,t[2988]=1556,t[2990]=1623,t[2991]=1624,t[2995]=1775,t[2999]=1791,t[3002]=64290,t[3003]=64291,t[3004]=64292,t[3006]=64294,t[3007]=64295,t[3008]=64296,t[3011]=1900,t[3014]=8223,t[3015]=8244,t[3017]=7532,t[3018]=7533,t[3019]=7534,t[3075]=7590,t[3076]=7591,t[3079]=7594,t[3080]=7595,t[3083]=7598,t[3084]=7599,t[3087]=7602,t[3088]=7603,t[3091]=7606,t[3092]=7607,t[3095]=7610,t[3096]=7611,t[3099]=7614,t[3100]=7615,t[3103]=7618,t[3104]=7619,t[3107]=8337,t[3108]=8338,t[3116]=1884,t[3119]=1885,t[3120]=1885,t[3123]=1886,t[3124]=1886,t[3127]=1887,t[3128]=1887,t[3131]=1888,t[3132]=1888,t[3135]=1889,t[3136]=1889,t[3139]=1890,t[3140]=1890,t[3143]=1891,t[3144]=1891,t[3147]=1892,t[3148]=1892,t[3153]=580,t[3154]=581,t[3157]=584,t[3158]=585,t[3161]=588,t[3162]=589,t[3165]=891,t[3166]=892,t[3169]=1274,t[3170]=1275,t[3173]=1278,t[3174]=1279,t[3181]=7622,t[3182]=7623,t[3282]=11799,t[3316]=578,t[3379]=42785,t[3393]=1159,t[3416]=8377}));exports.getGlyphMapForStandardFonts=getGlyphMapForStandardFonts;var getSupplementalGlyphMapForArialBlack=(0,_core_utils.getLookupTableFactory)((function(t){t[227]=322,t[264]=261,t[291]=346}));exports.getSupplementalGlyphMapForArialBlack=getSupplementalGlyphMapForArialBlack;var getSupplementalGlyphMapForCalibri=(0,_core_utils.getLookupTableFactory)((function(t){t[1]=32,t[4]=65,t[17]=66,t[18]=67,t[24]=68,t[28]=69,t[38]=70,t[39]=71,t[44]=72,t[47]=73,t[58]=74,t[60]=75,t[62]=76,t[68]=77,t[69]=78,t[75]=79,t[87]=80,t[89]=81,t[90]=82,t[94]=83,t[100]=84,t[104]=85,t[115]=86,t[116]=87,t[121]=88,t[122]=89,t[127]=90,t[258]=97,t[268]=261,t[271]=98,t[272]=99,t[273]=263,t[282]=100,t[286]=101,t[295]=281,t[296]=102,t[336]=103,t[346]=104,t[349]=105,t[361]=106,t[364]=107,t[367]=108,t[371]=322,t[373]=109,t[374]=110,t[381]=111,t[383]=243,t[393]=112,t[395]=113,t[396]=114,t[400]=115,t[401]=347,t[410]=116,t[437]=117,t[448]=118,t[449]=119,t[454]=120,t[455]=121,t[460]=122,t[463]=380,t[853]=44,t[855]=58,t[856]=46,t[876]=47,t[878]=45,t[882]=45,t[894]=40,t[895]=41,t[896]=91,t[897]=93,t[923]=64,t[1004]=48,t[1005]=49,t[1006]=50,t[1007]=51,t[1008]=52,t[1009]=53,t[1010]=54,t[1011]=55,t[1012]=56,t[1013]=57,t[1081]=37,t[1085]=43,t[1086]=45}));exports.getSupplementalGlyphMapForCalibri=getSupplementalGlyphMapForCalibri},function(__unused_webpack_module,__webpack_exports__,__w_pdfjs_require__){__w_pdfjs_require__.r(__webpack_exports__),__w_pdfjs_require__.d(__webpack_exports__,{getNormalizedUnicodes:function(){return _getNormalizedUnicodes},getUnicodeForGlyph:function(){return _getUnicodeForGlyph},getUnicodeRangeFor:function(){return _getUnicodeRangeFor},mapSpecialUnicodeValues:function(){return _mapSpecialUnicodeValues},reverseIfRtl:function(){return _reverseIfRtl}});var _core_utils_js__WEBPACK_IMPORTED_MODULE_0__=__w_pdfjs_require__(8),getSpecialPUASymbols=(0,_core_utils_js__WEBPACK_IMPORTED_MODULE_0__.getLookupTableFactory)((function(t){t[63721]=169,t[63193]=169,t[63720]=174,t[63194]=174,t[63722]=8482,t[63195]=8482,t[63729]=9127,t[63730]=9128,t[63731]=9129,t[63740]=9131,t[63741]=9132,t[63742]=9133,t[63726]=9121,t[63727]=9122,t[63728]=9123,t[63737]=9124,t[63738]=9125,t[63739]=9126,t[63723]=9115,t[63724]=9116,t[63725]=9117,t[63734]=9118,t[63735]=9119,t[63736]=9120}));function _mapSpecialUnicodeValues(code){return code>=65520&&code<=65535?0:code>=62976&&code<=63743?getSpecialPUASymbols()[code]||code:173===code?45:code}function _getUnicodeForGlyph(name,glyphsUnicodeMap){var unicode=glyphsUnicodeMap[name];if(void 0!==unicode)return unicode;if(!name)return-1;if("u"===name[0]){var hexStr,nameLen=name.length;if(7===nameLen&&"n"===name[1]&&"i"===name[2])hexStr=name.substring(3);else{if(!(nameLen>=5&&nameLen<=7))return-1;hexStr=name.substring(1)}if(hexStr===hexStr.toUpperCase()&&(unicode=parseInt(hexStr,16))>=0)return unicode}return-1}var UnicodeRanges=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function _getUnicodeRangeFor(value){for(var i=0,ii=UnicodeRanges.length;i<ii;i++){var range=UnicodeRanges[i];if(value>=range.begin&&value<range.end)return i}return-1}var _getNormalizedUnicodes=(0,_core_utils_js__WEBPACK_IMPORTED_MODULE_0__.getArrayLookupTableFactory)((function(){return["¨"," ̈","¯"," ̄","´"," ́","µ","μ","¸"," ̧","Ĳ","IJ","ĳ","ij","Ŀ","L·","ŀ","l·","ŉ","ʼn","ſ","s","Ǆ","DŽ","ǅ","Dž","ǆ","dž","Ǉ","LJ","ǈ","Lj","ǉ","lj","Ǌ","NJ","ǋ","Nj","ǌ","nj","Ǳ","DZ","ǲ","Dz","ǳ","dz","˘"," ̆","˙"," ̇","˚"," ̊","˛"," ̨","˜"," ̃","˝"," ̋","ͺ"," ͅ","΄"," ́","ϐ","β","ϑ","θ","ϒ","Υ","ϕ","φ","ϖ","π","ϰ","κ","ϱ","ρ","ϲ","ς","ϴ","Θ","ϵ","ε","Ϲ","Σ","և","եւ","ٵ","اٴ","ٶ","وٴ","ٷ","ۇٴ","ٸ","يٴ","ำ","ํา","ຳ","ໍາ","ໜ","ຫນ","ໝ","ຫມ","ཷ","ྲཱྀ","ཹ","ླཱྀ","ẚ","aʾ","᾽"," ̓","᾿"," ̓","῀"," ͂","῾"," ̔"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","‗"," ̳","․",".","‥","..","…","...","″","′′","‴","′′′","‶","‵‵","‷","‵‵‵","‼","!!","‾"," ̅","⁇","??","⁈","?!","⁉","!?","⁗","′′′′"," "," ","₨","Rs","℀","a/c","℁","a/s","℃","°C","℅","c/o","℆","c/u","ℇ","Ɛ","℉","°F","№","No","℡","TEL","ℵ","א","ℶ","ב","ℷ","ג","ℸ","ד","℻","FAX","Ⅰ","I","Ⅱ","II","Ⅲ","III","Ⅳ","IV","Ⅴ","V","Ⅵ","VI","Ⅶ","VII","Ⅷ","VIII","Ⅸ","IX","Ⅹ","X","Ⅺ","XI","Ⅻ","XII","Ⅼ","L","Ⅽ","C","Ⅾ","D","Ⅿ","M","ⅰ","i","ⅱ","ii","ⅲ","iii","ⅳ","iv","ⅴ","v","ⅵ","vi","ⅶ","vii","ⅷ","viii","ⅸ","ix","ⅹ","x","ⅺ","xi","ⅻ","xii","ⅼ","l","ⅽ","c","ⅾ","d","ⅿ","m","∬","∫∫","∭","∫∫∫","∯","∮∮","∰","∮∮∮","⑴","(1)","⑵","(2)","⑶","(3)","⑷","(4)","⑸","(5)","⑹","(6)","⑺","(7)","⑻","(8)","⑼","(9)","⑽","(10)","⑾","(11)","⑿","(12)","⒀","(13)","⒁","(14)","⒂","(15)","⒃","(16)","⒄","(17)","⒅","(18)","⒆","(19)","⒇","(20)","⒈","1.","⒉","2.","⒊","3.","⒋","4.","⒌","5.","⒍","6.","⒎","7.","⒏","8.","⒐","9.","⒑","10.","⒒","11.","⒓","12.","⒔","13.","⒕","14.","⒖","15.","⒗","16.","⒘","17.","⒙","18.","⒚","19.","⒛","20.","⒜","(a)","⒝","(b)","⒞","(c)","⒟","(d)","⒠","(e)","⒡","(f)","⒢","(g)","⒣","(h)","⒤","(i)","⒥","(j)","⒦","(k)","⒧","(l)","⒨","(m)","⒩","(n)","⒪","(o)","⒫","(p)","⒬","(q)","⒭","(r)","⒮","(s)","⒯","(t)","⒰","(u)","⒱","(v)","⒲","(w)","⒳","(x)","⒴","(y)","⒵","(z)","⨌","∫∫∫∫","⩴","::=","⩵","==","⩶","===","⺟","母","⻳","龟","⼀","一","⼁","丨","⼂","丶","⼃","丿","⼄","乙","⼅","亅","⼆","二","⼇","亠","⼈","人","⼉","儿","⼊","入","⼋","八","⼌","冂","⼍","冖","⼎","冫","⼏","几","⼐","凵","⼑","刀","⼒","力","⼓","勹","⼔","匕","⼕","匚","⼖","匸","⼗","十","⼘","卜","⼙","卩","⼚","厂","⼛","厶","⼜","又","⼝","口","⼞","囗","⼟","土","⼠","士","⼡","夂","⼢","夊","⼣","夕","⼤","大","⼥","女","⼦","子","⼧","宀","⼨","寸","⼩","小","⼪","尢","⼫","尸","⼬","屮","⼭","山","⼮","巛","⼯","工","⼰","己","⼱","巾","⼲","干","⼳","幺","⼴","广","⼵","廴","⼶","廾","⼷","弋","⼸","弓","⼹","彐","⼺","彡","⼻","彳","⼼","心","⼽","戈","⼾","戶","⼿","手","⽀","支","⽁","攴","⽂","文","⽃","斗","⽄","斤","⽅","方","⽆","无","⽇","日","⽈","曰","⽉","月","⽊","木","⽋","欠","⽌","止","⽍","歹","⽎","殳","⽏","毋","⽐","比","⽑","毛","⽒","氏","⽓","气","⽔","水","⽕","火","⽖","爪","⽗","父","⽘","爻","⽙","爿","⽚","片","⽛","牙","⽜","牛","⽝","犬","⽞","玄","⽟","玉","⽠","瓜","⽡","瓦","⽢","甘","⽣","生","⽤","用","⽥","田","⽦","疋","⽧","疒","⽨","癶","⽩","白","⽪","皮","⽫","皿","⽬","目","⽭","矛","⽮","矢","⽯","石","⽰","示","⽱","禸","⽲","禾","⽳","穴","⽴","立","⽵","竹","⽶","米","⽷","糸","⽸","缶","⽹","网","⽺","羊","⽻","羽","⽼","老","⽽","而","⽾","耒","⽿","耳","⾀","聿","⾁","肉","⾂","臣","⾃","自","⾄","至","⾅","臼","⾆","舌","⾇","舛","⾈","舟","⾉","艮","⾊","色","⾋","艸","⾌","虍","⾍","虫","⾎","血","⾏","行","⾐","衣","⾑","襾","⾒","見","⾓","角","⾔","言","⾕","谷","⾖","豆","⾗","豕","⾘","豸","⾙","貝","⾚","赤","⾛","走","⾜","足","⾝","身","⾞","車","⾟","辛","⾠","辰","⾡","辵","⾢","邑","⾣","酉","⾤","釆","⾥","里","⾦","金","⾧","長","⾨","門","⾩","阜","⾪","隶","⾫","隹","⾬","雨","⾭","靑","⾮","非","⾯","面","⾰","革","⾱","韋","⾲","韭","⾳","音","⾴","頁","⾵","風","⾶","飛","⾷","食","⾸","首","⾹","香","⾺","馬","⾻","骨","⾼","高","⾽","髟","⾾","鬥","⾿","鬯","⿀","鬲","⿁","鬼","⿂","魚","⿃","鳥","⿄","鹵","⿅","鹿","⿆","麥","⿇","麻","⿈","黃","⿉","黍","⿊","黑","⿋","黹","⿌","黽","⿍","鼎","⿎","鼓","⿏","鼠","⿐","鼻","⿑","齊","⿒","齒","⿓","龍","⿔","龜","⿕","龠","〶","〒","〸","十","〹","卄","〺","卅","゛"," ゙","゜"," ゚","ㄱ","ᄀ","ㄲ","ᄁ","ㄳ","ᆪ","ㄴ","ᄂ","ㄵ","ᆬ","ㄶ","ᆭ","ㄷ","ᄃ","ㄸ","ᄄ","ㄹ","ᄅ","ㄺ","ᆰ","ㄻ","ᆱ","ㄼ","ᆲ","ㄽ","ᆳ","ㄾ","ᆴ","ㄿ","ᆵ","ㅀ","ᄚ","ㅁ","ᄆ","ㅂ","ᄇ","ㅃ","ᄈ","ㅄ","ᄡ","ㅅ","ᄉ","ㅆ","ᄊ","ㅇ","ᄋ","ㅈ","ᄌ","ㅉ","ᄍ","ㅊ","ᄎ","ㅋ","ᄏ","ㅌ","ᄐ","ㅍ","ᄑ","ㅎ","ᄒ","ㅏ","ᅡ","ㅐ","ᅢ","ㅑ","ᅣ","ㅒ","ᅤ","ㅓ","ᅥ","ㅔ","ᅦ","ㅕ","ᅧ","ㅖ","ᅨ","ㅗ","ᅩ","ㅘ","ᅪ","ㅙ","ᅫ","ㅚ","ᅬ","ㅛ","ᅭ","ㅜ","ᅮ","ㅝ","ᅯ","ㅞ","ᅰ","ㅟ","ᅱ","ㅠ","ᅲ","ㅡ","ᅳ","ㅢ","ᅴ","ㅣ","ᅵ","ㅤ","ᅠ","ㅥ","ᄔ","ㅦ","ᄕ","ㅧ","ᇇ","ㅨ","ᇈ","ㅩ","ᇌ","ㅪ","ᇎ","ㅫ","ᇓ","ㅬ","ᇗ","ㅭ","ᇙ","ㅮ","ᄜ","ㅯ","ᇝ","ㅰ","ᇟ","ㅱ","ᄝ","ㅲ","ᄞ","ㅳ","ᄠ","ㅴ","ᄢ","ㅵ","ᄣ","ㅶ","ᄧ","ㅷ","ᄩ","ㅸ","ᄫ","ㅹ","ᄬ","ㅺ","ᄭ","ㅻ","ᄮ","ㅼ","ᄯ","ㅽ","ᄲ","ㅾ","ᄶ","ㅿ","ᅀ","ㆀ","ᅇ","ㆁ","ᅌ","ㆂ","ᇱ","ㆃ","ᇲ","ㆄ","ᅗ","ㆅ","ᅘ","ㆆ","ᅙ","ㆇ","ᆄ","ㆈ","ᆅ","ㆉ","ᆈ","ㆊ","ᆑ","ㆋ","ᆒ","ㆌ","ᆔ","ㆍ","ᆞ","ㆎ","ᆡ","㈀","(ᄀ)","㈁","(ᄂ)","㈂","(ᄃ)","㈃","(ᄅ)","㈄","(ᄆ)","㈅","(ᄇ)","㈆","(ᄉ)","㈇","(ᄋ)","㈈","(ᄌ)","㈉","(ᄎ)","㈊","(ᄏ)","㈋","(ᄐ)","㈌","(ᄑ)","㈍","(ᄒ)","㈎","(가)","㈏","(나)","㈐","(다)","㈑","(라)","㈒","(마)","㈓","(바)","㈔","(사)","㈕","(아)","㈖","(자)","㈗","(차)","㈘","(카)","㈙","(타)","㈚","(파)","㈛","(하)","㈜","(주)","㈝","(오전)","㈞","(오후)","㈠","(一)","㈡","(二)","㈢","(三)","㈣","(四)","㈤","(五)","㈥","(六)","㈦","(七)","㈧","(八)","㈨","(九)","㈩","(十)","㈪","(月)","㈫","(火)","㈬","(水)","㈭","(木)","㈮","(金)","㈯","(土)","㈰","(日)","㈱","(株)","㈲","(有)","㈳","(社)","㈴","(名)","㈵","(特)","㈶","(財)","㈷","(祝)","㈸","(労)","㈹","(代)","㈺","(呼)","㈻","(学)","㈼","(監)","㈽","(企)","㈾","(資)","㈿","(協)","㉀","(祭)","㉁","(休)","㉂","(自)","㉃","(至)","㋀","1月","㋁","2月","㋂","3月","㋃","4月","㋄","5月","㋅","6月","㋆","7月","㋇","8月","㋈","9月","㋉","10月","㋊","11月","㋋","12月","㍘","0点","㍙","1点","㍚","2点","㍛","3点","㍜","4点","㍝","5点","㍞","6点","㍟","7点","㍠","8点","㍡","9点","㍢","10点","㍣","11点","㍤","12点","㍥","13点","㍦","14点","㍧","15点","㍨","16点","㍩","17点","㍪","18点","㍫","19点","㍬","20点","㍭","21点","㍮","22点","㍯","23点","㍰","24点","㏠","1日","㏡","2日","㏢","3日","㏣","4日","㏤","5日","㏥","6日","㏦","7日","㏧","8日","㏨","9日","㏩","10日","㏪","11日","㏫","12日","㏬","13日","㏭","14日","㏮","15日","㏯","16日","㏰","17日","㏱","18日","㏲","19日","㏳","20日","㏴","21日","㏵","22日","㏶","23日","㏷","24日","㏸","25日","㏹","26日","㏺","27日","㏻","28日","㏼","29日","㏽","30日","㏾","31日","ﬀ","ff","ﬁ","fi","ﬂ","fl","ﬃ","ffi","ﬄ","ffl","ﬅ","ſt","ﬆ","st","ﬓ","մն","ﬔ","մե","ﬕ","մի","ﬖ","վն","ﬗ","մխ","ﭏ","אל","ﭐ","ٱ","ﭑ","ٱ","ﭒ","ٻ","ﭓ","ٻ","ﭔ","ٻ","ﭕ","ٻ","ﭖ","پ","ﭗ","پ","ﭘ","پ","ﭙ","پ","ﭚ","ڀ","ﭛ","ڀ","ﭜ","ڀ","ﭝ","ڀ","ﭞ","ٺ","ﭟ","ٺ","ﭠ","ٺ","ﭡ","ٺ","ﭢ","ٿ","ﭣ","ٿ","ﭤ","ٿ","ﭥ","ٿ","ﭦ","ٹ","ﭧ","ٹ","ﭨ","ٹ","ﭩ","ٹ","ﭪ","ڤ","ﭫ","ڤ","ﭬ","ڤ","ﭭ","ڤ","ﭮ","ڦ","ﭯ","ڦ","ﭰ","ڦ","ﭱ","ڦ","ﭲ","ڄ","ﭳ","ڄ","ﭴ","ڄ","ﭵ","ڄ","ﭶ","ڃ","ﭷ","ڃ","ﭸ","ڃ","ﭹ","ڃ","ﭺ","چ","ﭻ","چ","ﭼ","چ","ﭽ","چ","ﭾ","ڇ","ﭿ","ڇ","ﮀ","ڇ","ﮁ","ڇ","ﮂ","ڍ","ﮃ","ڍ","ﮄ","ڌ","ﮅ","ڌ","ﮆ","ڎ","ﮇ","ڎ","ﮈ","ڈ","ﮉ","ڈ","ﮊ","ژ","ﮋ","ژ","ﮌ","ڑ","ﮍ","ڑ","ﮎ","ک","ﮏ","ک","ﮐ","ک","ﮑ","ک","ﮒ","گ","ﮓ","گ","ﮔ","گ","ﮕ","گ","ﮖ","ڳ","ﮗ","ڳ","ﮘ","ڳ","ﮙ","ڳ","ﮚ","ڱ","ﮛ","ڱ","ﮜ","ڱ","ﮝ","ڱ","ﮞ","ں","ﮟ","ں","ﮠ","ڻ","ﮡ","ڻ","ﮢ","ڻ","ﮣ","ڻ","ﮤ","ۀ","ﮥ","ۀ","ﮦ","ہ","ﮧ","ہ","ﮨ","ہ","ﮩ","ہ","ﮪ","ھ","ﮫ","ھ","ﮬ","ھ","ﮭ","ھ","ﮮ","ے","ﮯ","ے","ﮰ","ۓ","ﮱ","ۓ","ﯓ","ڭ","ﯔ","ڭ","ﯕ","ڭ","ﯖ","ڭ","ﯗ","ۇ","ﯘ","ۇ","ﯙ","ۆ","ﯚ","ۆ","ﯛ","ۈ","ﯜ","ۈ","ﯝ","ٷ","ﯞ","ۋ","ﯟ","ۋ","ﯠ","ۅ","ﯡ","ۅ","ﯢ","ۉ","ﯣ","ۉ","ﯤ","ې","ﯥ","ې","ﯦ","ې","ﯧ","ې","ﯨ","ى","ﯩ","ى","ﯪ","ئا","ﯫ","ئا","ﯬ","ئە","ﯭ","ئە","ﯮ","ئو","ﯯ","ئو","ﯰ","ئۇ","ﯱ","ئۇ","ﯲ","ئۆ","ﯳ","ئۆ","ﯴ","ئۈ","ﯵ","ئۈ","ﯶ","ئې","ﯷ","ئې","ﯸ","ئې","ﯹ","ئى","ﯺ","ئى","ﯻ","ئى","ﯼ","ی","ﯽ","ی","ﯾ","ی","ﯿ","ی","ﰀ","ئج","ﰁ","ئح","ﰂ","ئم","ﰃ","ئى","ﰄ","ئي","ﰅ","بج","ﰆ","بح","ﰇ","بخ","ﰈ","بم","ﰉ","بى","ﰊ","بي","ﰋ","تج","ﰌ","تح","ﰍ","تخ","ﰎ","تم","ﰏ","تى","ﰐ","تي","ﰑ","ثج","ﰒ","ثم","ﰓ","ثى","ﰔ","ثي","ﰕ","جح","ﰖ","جم","ﰗ","حج","ﰘ","حم","ﰙ","خج","ﰚ","خح","ﰛ","خم","ﰜ","سج","ﰝ","سح","ﰞ","سخ","ﰟ","سم","ﰠ","صح","ﰡ","صم","ﰢ","ضج","ﰣ","ضح","ﰤ","ضخ","ﰥ","ضم","ﰦ","طح","ﰧ","طم","ﰨ","ظم","ﰩ","عج","ﰪ","عم","ﰫ","غج","ﰬ","غم","ﰭ","فج","ﰮ","فح","ﰯ","فخ","ﰰ","فم","ﰱ","فى","ﰲ","في","ﰳ","قح","ﰴ","قم","ﰵ","قى","ﰶ","قي","ﰷ","كا","ﰸ","كج","ﰹ","كح","ﰺ","كخ","ﰻ","كل","ﰼ","كم","ﰽ","كى","ﰾ","كي","ﰿ","لج","ﱀ","لح","ﱁ","لخ","ﱂ","لم","ﱃ","لى","ﱄ","لي","ﱅ","مج","ﱆ","مح","ﱇ","مخ","ﱈ","مم","ﱉ","مى","ﱊ","مي","ﱋ","نج","ﱌ","نح","ﱍ","نخ","ﱎ","نم","ﱏ","نى","ﱐ","ني","ﱑ","هج","ﱒ","هم","ﱓ","هى","ﱔ","هي","ﱕ","يج","ﱖ","يح","ﱗ","يخ","ﱘ","يم","ﱙ","يى","ﱚ","يي","ﱛ","ذٰ","ﱜ","رٰ","ﱝ","ىٰ","ﱞ"," ٌّ","ﱟ"," ٍّ","ﱠ"," َّ","ﱡ"," ُّ","ﱢ"," ِّ","ﱣ"," ّٰ","ﱤ","ئر","ﱥ","ئز","ﱦ","ئم","ﱧ","ئن","ﱨ","ئى","ﱩ","ئي","ﱪ","بر","ﱫ","بز","ﱬ","بم","ﱭ","بن","ﱮ","بى","ﱯ","بي","ﱰ","تر","ﱱ","تز","ﱲ","تم","ﱳ","تن","ﱴ","تى","ﱵ","تي","ﱶ","ثر","ﱷ","ثز","ﱸ","ثم","ﱹ","ثن","ﱺ","ثى","ﱻ","ثي","ﱼ","فى","ﱽ","في","ﱾ","قى","ﱿ","قي","ﲀ","كا","ﲁ","كل","ﲂ","كم","ﲃ","كى","ﲄ","كي","ﲅ","لم","ﲆ","لى","ﲇ","لي","ﲈ","ما","ﲉ","مم","ﲊ","نر","ﲋ","نز","ﲌ","نم","ﲍ","نن","ﲎ","نى","ﲏ","ني","ﲐ","ىٰ","ﲑ","ير","ﲒ","يز","ﲓ","يم","ﲔ","ين","ﲕ","يى","ﲖ","يي","ﲗ","ئج","ﲘ","ئح","ﲙ","ئخ","ﲚ","ئم","ﲛ","ئه","ﲜ","بج","ﲝ","بح","ﲞ","بخ","ﲟ","بم","ﲠ","به","ﲡ","تج","ﲢ","تح","ﲣ","تخ","ﲤ","تم","ﲥ","ته","ﲦ","ثم","ﲧ","جح","ﲨ","جم","ﲩ","حج","ﲪ","حم","ﲫ","خج","ﲬ","خم","ﲭ","سج","ﲮ","سح","ﲯ","سخ","ﲰ","سم","ﲱ","صح","ﲲ","صخ","ﲳ","صم","ﲴ","ضج","ﲵ","ضح","ﲶ","ضخ","ﲷ","ضم","ﲸ","طح","ﲹ","ظم","ﲺ","عج","ﲻ","عم","ﲼ","غج","ﲽ","غم","ﲾ","فج","ﲿ","فح","ﳀ","فخ","ﳁ","فم","ﳂ","قح","ﳃ","قم","ﳄ","كج","ﳅ","كح","ﳆ","كخ","ﳇ","كل","ﳈ","كم","ﳉ","لج","ﳊ","لح","ﳋ","لخ","ﳌ","لم","ﳍ","له","ﳎ","مج","ﳏ","مح","ﳐ","مخ","ﳑ","مم","ﳒ","نج","ﳓ","نح","ﳔ","نخ","ﳕ","نم","ﳖ","نه","ﳗ","هج","ﳘ","هم","ﳙ","هٰ","ﳚ","يج","ﳛ","يح","ﳜ","يخ","ﳝ","يم","ﳞ","يه","ﳟ","ئم","ﳠ","ئه","ﳡ","بم","ﳢ","به","ﳣ","تم","ﳤ","ته","ﳥ","ثم","ﳦ","ثه","ﳧ","سم","ﳨ","سه","ﳩ","شم","ﳪ","شه","ﳫ","كل","ﳬ","كم","ﳭ","لم","ﳮ","نم","ﳯ","نه","ﳰ","يم","ﳱ","يه","ﳲ","ـَّ","ﳳ","ـُّ","ﳴ","ـِّ","ﳵ","طى","ﳶ","طي","ﳷ","عى","ﳸ","عي","ﳹ","غى","ﳺ","غي","ﳻ","سى","ﳼ","سي","ﳽ","شى","ﳾ","شي","ﳿ","حى","ﴀ","حي","ﴁ","جى","ﴂ","جي","ﴃ","خى","ﴄ","خي","ﴅ","صى","ﴆ","صي","ﴇ","ضى","ﴈ","ضي","ﴉ","شج","ﴊ","شح","ﴋ","شخ","ﴌ","شم","ﴍ","شر","ﴎ","سر","ﴏ","صر","ﴐ","ضر","ﴑ","طى","ﴒ","طي","ﴓ","عى","ﴔ","عي","ﴕ","غى","ﴖ","غي","ﴗ","سى","ﴘ","سي","ﴙ","شى","ﴚ","شي","ﴛ","حى","ﴜ","حي","ﴝ","جى","ﴞ","جي","ﴟ","خى","ﴠ","خي","ﴡ","صى","ﴢ","صي","ﴣ","ضى","ﴤ","ضي","ﴥ","شج","ﴦ","شح","ﴧ","شخ","ﴨ","شم","ﴩ","شر","ﴪ","سر","ﴫ","صر","ﴬ","ضر","ﴭ","شج","ﴮ","شح","ﴯ","شخ","ﴰ","شم","ﴱ","سه","ﴲ","شه","ﴳ","طم","ﴴ","سج","ﴵ","سح","ﴶ","سخ","ﴷ","شج","ﴸ","شح","ﴹ","شخ","ﴺ","طم","ﴻ","ظم","ﴼ","اً","ﴽ","اً","ﵐ","تجم","ﵑ","تحج","ﵒ","تحج","ﵓ","تحم","ﵔ","تخم","ﵕ","تمج","ﵖ","تمح","ﵗ","تمخ","ﵘ","جمح","ﵙ","جمح","ﵚ","حمي","ﵛ","حمى","ﵜ","سحج","ﵝ","سجح","ﵞ","سجى","ﵟ","سمح","ﵠ","سمح","ﵡ","سمج","ﵢ","سمم","ﵣ","سمم","ﵤ","صحح","ﵥ","صحح","ﵦ","صمم","ﵧ","شحم","ﵨ","شحم","ﵩ","شجي","ﵪ","شمخ","ﵫ","شمخ","ﵬ","شمم","ﵭ","شمم","ﵮ","ضحى","ﵯ","ضخم","ﵰ","ضخم","ﵱ","طمح","ﵲ","طمح","ﵳ","طمم","ﵴ","طمي","ﵵ","عجم","ﵶ","عمم","ﵷ","عمم","ﵸ","عمى","ﵹ","غمم","ﵺ","غمي","ﵻ","غمى","ﵼ","فخم","ﵽ","فخم","ﵾ","قمح","ﵿ","قمم","ﶀ","لحم","ﶁ","لحي","ﶂ","لحى","ﶃ","لجج","ﶄ","لجج","ﶅ","لخم","ﶆ","لخم","ﶇ","لمح","ﶈ","لمح","ﶉ","محج","ﶊ","محم","ﶋ","محي","ﶌ","مجح","ﶍ","مجم","ﶎ","مخج","ﶏ","مخم","ﶒ","مجخ","ﶓ","همج","ﶔ","همم","ﶕ","نحم","ﶖ","نحى","ﶗ","نجم","ﶘ","نجم","ﶙ","نجى","ﶚ","نمي","ﶛ","نمى","ﶜ","يمم","ﶝ","يمم","ﶞ","بخي","ﶟ","تجي","ﶠ","تجى","ﶡ","تخي","ﶢ","تخى","ﶣ","تمي","ﶤ","تمى","ﶥ","جمي","ﶦ","جحى","ﶧ","جمى","ﶨ","سخى","ﶩ","صحي","ﶪ","شحي","ﶫ","ضحي","ﶬ","لجي","ﶭ","لمي","ﶮ","يحي","ﶯ","يجي","ﶰ","يمي","ﶱ","ممي","ﶲ","قمي","ﶳ","نحي","ﶴ","قمح","ﶵ","لحم","ﶶ","عمي","ﶷ","كمي","ﶸ","نجح","ﶹ","مخي","ﶺ","لجم","ﶻ","كمم","ﶼ","لجم","ﶽ","نجح","ﶾ","جحي","ﶿ","حجي","ﷀ","مجي","ﷁ","فمي","ﷂ","بحي","ﷃ","كمم","ﷄ","عجم","ﷅ","صمم","ﷆ","سخي","ﷇ","نجي","﹉","‾","﹊","‾","﹋","‾","﹌","‾","﹍","_","﹎","_","﹏","_","ﺀ","ء","ﺁ","آ","ﺂ","آ","ﺃ","أ","ﺄ","أ","ﺅ","ؤ","ﺆ","ؤ","ﺇ","إ","ﺈ","إ","ﺉ","ئ","ﺊ","ئ","ﺋ","ئ","ﺌ","ئ","ﺍ","ا","ﺎ","ا","ﺏ","ب","ﺐ","ب","ﺑ","ب","ﺒ","ب","ﺓ","ة","ﺔ","ة","ﺕ","ت","ﺖ","ت","ﺗ","ت","ﺘ","ت","ﺙ","ث","ﺚ","ث","ﺛ","ث","ﺜ","ث","ﺝ","ج","ﺞ","ج","ﺟ","ج","ﺠ","ج","ﺡ","ح","ﺢ","ح","ﺣ","ح","ﺤ","ح","ﺥ","خ","ﺦ","خ","ﺧ","خ","ﺨ","خ","ﺩ","د","ﺪ","د","ﺫ","ذ","ﺬ","ذ","ﺭ","ر","ﺮ","ر","ﺯ","ز","ﺰ","ز","ﺱ","س","ﺲ","س","ﺳ","س","ﺴ","س","ﺵ","ش","ﺶ","ش","ﺷ","ش","ﺸ","ش","ﺹ","ص","ﺺ","ص","ﺻ","ص","ﺼ","ص","ﺽ","ض","ﺾ","ض","ﺿ","ض","ﻀ","ض","ﻁ","ط","ﻂ","ط","ﻃ","ط","ﻄ","ط","ﻅ","ظ","ﻆ","ظ","ﻇ","ظ","ﻈ","ظ","ﻉ","ع","ﻊ","ع","ﻋ","ع","ﻌ","ع","ﻍ","غ","ﻎ","غ","ﻏ","غ","ﻐ","غ","ﻑ","ف","ﻒ","ف","ﻓ","ف","ﻔ","ف","ﻕ","ق","ﻖ","ق","ﻗ","ق","ﻘ","ق","ﻙ","ك","ﻚ","ك","ﻛ","ك","ﻜ","ك","ﻝ","ل","ﻞ","ل","ﻟ","ل","ﻠ","ل","ﻡ","م","ﻢ","م","ﻣ","م","ﻤ","م","ﻥ","ن","ﻦ","ن","ﻧ","ن","ﻨ","ن","ﻩ","ه","ﻪ","ه","ﻫ","ه","ﻬ","ه","ﻭ","و","ﻮ","و","ﻯ","ى","ﻰ","ى","ﻱ","ي","ﻲ","ي","ﻳ","ي","ﻴ","ي","ﻵ","لآ","ﻶ","لآ","ﻷ","لأ","ﻸ","لأ","ﻹ","لإ","ﻺ","لإ","ﻻ","لا","ﻼ","لا"]}));function _reverseIfRtl(chars){var value,range,charsLength=chars.length;if(charsLength<=1||!((value=chars.charCodeAt(0))>=(range=UnicodeRanges[13]).begin&&value<range.end||value>=(range=UnicodeRanges[11]).begin&&value<range.end))return chars;for(var s="",ii=charsLength-1;ii>=0;ii--)s+=chars[ii];return s}},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.FontRendererFactory=void 0;var _util=__w_pdfjs_require__(2),_cff_parser=__w_pdfjs_require__(30),_glyphlist=__w_pdfjs_require__(33),_encodings=__w_pdfjs_require__(32),_stream=__w_pdfjs_require__(12),FontRendererFactory=function(){function getLong(data,offset){return data[offset]<<24|data[offset+1]<<16|data[offset+2]<<8|data[offset+3]}function getUshort(data,offset){return data[offset]<<8|data[offset+1]}function getSubroutineBias(subrs){var numSubrs=subrs.length,bias=32768;return numSubrs<1240?bias=107:numSubrs<33900&&(bias=1131),bias}function parseCmap(data,start,end){var ranges,p,i,offset=1===getUshort(data,start+2)?getLong(data,start+8):getLong(data,start+16),format=getUshort(data,start+offset);if(4===format){getUshort(data,start+offset+2);var segCount=getUshort(data,start+offset+6)>>1;for(p=start+offset+14,ranges=[],i=0;i<segCount;i++,p+=2)ranges[i]={end:getUshort(data,p)};for(p+=2,i=0;i<segCount;i++,p+=2)ranges[i].start=getUshort(data,p);for(i=0;i<segCount;i++,p+=2)ranges[i].idDelta=getUshort(data,p);for(i=0;i<segCount;i++,p+=2){var idOffset=getUshort(data,p);if(0!==idOffset){ranges[i].ids=[];for(var j=0,jj=ranges[i].end-ranges[i].start+1;j<jj;j++)ranges[i].ids[j]=getUshort(data,p+idOffset),idOffset+=2}}return ranges}if(12===format){getLong(data,start+offset+4);var groups=getLong(data,start+offset+12);for(p=start+offset+16,ranges=[],i=0;i<groups;i++)ranges.push({start:getLong(data,p),end:getLong(data,p+4),idDelta:getLong(data,p+8)-getLong(data,p)}),p+=12;return ranges}throw new _util.FormatError("unsupported cmap: ".concat(format))}function parseCff(data,start,end,seacAnalysisEnabled){var cff=new _cff_parser.CFFParser(new _stream.Stream(data,start,end-start),{},seacAnalysisEnabled).parse();return{glyphs:cff.charStrings.objects,subrs:cff.topDict.privateDict&&cff.topDict.privateDict.subrsIndex&&cff.topDict.privateDict.subrsIndex.objects,gsubrs:cff.globalSubrIndex&&cff.globalSubrIndex.objects,isCFFCIDFont:cff.isCIDFont,fdSelect:cff.fdSelect,fdArray:cff.fdArray}}function lookupCmap(ranges,unicode){for(var code=unicode.codePointAt(0),gid=0,l=0,r=ranges.length-1;l<r;){var c=l+r+1>>1;code<ranges[c].start?r=c-1:l=c}return ranges[l].start<=code&&code<=ranges[l].end&&(gid=ranges[l].idDelta+(ranges[l].ids?ranges[l].ids[code-ranges[l].start]:code)&65535),{charCode:code,glyphId:gid}}function compileGlyf(code,cmds,font){function moveTo(x,y){cmds.push({cmd:"moveTo",args:[x,y]})}function lineTo(x,y){cmds.push({cmd:"lineTo",args:[x,y]})}function quadraticCurveTo(xa,ya,x,y){cmds.push({cmd:"quadraticCurveTo",args:[xa,ya,x,y]})}var flags,i=0,numberOfContours=(code[i]<<24|code[i+1]<<16)>>16,x=0,y=0;if(i+=10,numberOfContours<0)do{flags=code[i]<<8|code[i+1];var arg1,arg2,glyphIndex=code[i+2]<<8|code[i+3];i+=4,1&flags?(arg1=(code[i]<<24|code[i+1]<<16)>>16,arg2=(code[i+2]<<24|code[i+3]<<16)>>16,i+=4):(arg1=code[i++],arg2=code[i++]),2&flags?(x=arg1,y=arg2):(x=0,y=0);var scaleX=1,scaleY=1,scale01=0,scale10=0;8&flags?(scaleX=scaleY=(code[i]<<24|code[i+1]<<16)/1073741824,i+=2):64&flags?(scaleX=(code[i]<<24|code[i+1]<<16)/1073741824,scaleY=(code[i+2]<<24|code[i+3]<<16)/1073741824,i+=4):128&flags&&(scaleX=(code[i]<<24|code[i+1]<<16)/1073741824,scale01=(code[i+2]<<24|code[i+3]<<16)/1073741824,scale10=(code[i+4]<<24|code[i+5]<<16)/1073741824,scaleY=(code[i+6]<<24|code[i+7]<<16)/1073741824,i+=8);var subglyph=font.glyphs[glyphIndex];subglyph&&(cmds.push({cmd:"save"}),cmds.push({cmd:"transform",args:[scaleX,scale01,scale10,scaleY,x,y]}),compileGlyf(subglyph,cmds,font),cmds.push({cmd:"restore"}))}while(32&flags);else{var j,jj,endPtsOfContours=[];for(j=0;j<numberOfContours;j++)endPtsOfContours.push(code[i]<<8|code[i+1]),i+=2;i+=2+(code[i]<<8|code[i+1]);for(var numberOfPoints=endPtsOfContours[endPtsOfContours.length-1]+1,points=[];points.length<numberOfPoints;){var repeat=1;for(8&(flags=code[i++])&&(repeat+=code[i++]);repeat-- >0;)points.push({flags:flags})}for(j=0;j<numberOfPoints;j++){switch(18&points[j].flags){case 0:x+=(code[i]<<24|code[i+1]<<16)>>16,i+=2;break;case 2:x-=code[i++];break;case 18:x+=code[i++]}points[j].x=x}for(j=0;j<numberOfPoints;j++){switch(36&points[j].flags){case 0:y+=(code[i]<<24|code[i+1]<<16)>>16,i+=2;break;case 4:y-=code[i++];break;case 36:y+=code[i++]}points[j].y=y}var startPoint=0;for(i=0;i<numberOfContours;i++){var endPoint=endPtsOfContours[i],contour=points.slice(startPoint,endPoint+1);if(1&contour[0].flags)contour.push(contour[0]);else if(1&contour[contour.length-1].flags)contour.unshift(contour[contour.length-1]);else{var p={flags:1,x:(contour[0].x+contour[contour.length-1].x)/2,y:(contour[0].y+contour[contour.length-1].y)/2};contour.unshift(p),contour.push(p)}for(moveTo(contour[0].x,contour[0].y),j=1,jj=contour.length;j<jj;j++)1&contour[j].flags?lineTo(contour[j].x,contour[j].y):1&contour[j+1].flags?(quadraticCurveTo(contour[j].x,contour[j].y,contour[j+1].x,contour[j+1].y),j++):quadraticCurveTo(contour[j].x,contour[j].y,(contour[j].x+contour[j+1].x)/2,(contour[j].y+contour[j+1].y)/2);startPoint=endPoint+1}}}function compileCharString(charStringCode,cmds,font,glyphId){function moveTo(x,y){cmds.push({cmd:"moveTo",args:[x,y]})}function lineTo(x,y){cmds.push({cmd:"lineTo",args:[x,y]})}function bezierCurveTo(x1,y1,x2,y2,x,y){cmds.push({cmd:"bezierCurveTo",args:[x1,y1,x2,y2,x,y]})}var stack=[],x=0,y=0,stems=0;!function parse(code){for(var i=0;i<code.length;){var xa,xb,ya,yb,y1,y2,n,subrCode,stackClean=!1,v=code[i++];switch(v){case 1:case 3:case 18:case 23:stems+=stack.length>>1,stackClean=!0;break;case 4:y+=stack.pop(),moveTo(x,y),stackClean=!0;break;case 5:for(;stack.length>0;)x+=stack.shift(),y+=stack.shift(),lineTo(x,y);break;case 6:for(;stack.length>0&&(lineTo(x+=stack.shift(),y),0!==stack.length);)y+=stack.shift(),lineTo(x,y);break;case 7:for(;stack.length>0&&(y+=stack.shift(),lineTo(x,y),0!==stack.length);)lineTo(x+=stack.shift(),y);break;case 8:for(;stack.length>0;)xa=x+stack.shift(),ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb+stack.shift(),bezierCurveTo(xa,ya,xb,yb,x,y);break;case 10:if(n=stack.pop(),subrCode=null,font.isCFFCIDFont){var fdIndex=font.fdSelect.getFDIndex(glyphId);if(fdIndex>=0&&fdIndex<font.fdArray.length){var fontDict=font.fdArray[fdIndex],subrs=void 0;fontDict.privateDict&&fontDict.privateDict.subrsIndex&&(subrs=fontDict.privateDict.subrsIndex.objects),subrs&&(subrCode=subrs[n+=getSubroutineBias(subrs)])}else(0,_util.warn)("Invalid fd index for glyph index.")}else subrCode=font.subrs[n+font.subrsBias];subrCode&&parse(subrCode);break;case 11:return;case 12:switch(v=code[i++]){case 34:xb=(xa=x+stack.shift())+stack.shift(),y1=y+stack.shift(),x=xb+stack.shift(),bezierCurveTo(xa,y,xb,y1,x,y1),xb=(xa=x+stack.shift())+stack.shift(),x=xb+stack.shift(),bezierCurveTo(xa,y1,xb,y,x,y);break;case 35:xa=x+stack.shift(),ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb+stack.shift(),bezierCurveTo(xa,ya,xb,yb,x,y),xa=x+stack.shift(),ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb+stack.shift(),bezierCurveTo(xa,ya,xb,yb,x,y),stack.pop();break;case 36:bezierCurveTo(xa=x+stack.shift(),y1=y+stack.shift(),xb=xa+stack.shift(),y2=y1+stack.shift(),x=xb+stack.shift(),y2),bezierCurveTo(xa=x+stack.shift(),y2,xb=xa+stack.shift(),y2+stack.shift(),x=xb+stack.shift(),y);break;case 37:var x0=x,y0=y;xa=x+stack.shift(),ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb+stack.shift(),bezierCurveTo(xa,ya,xb,yb,x,y),xa=x+stack.shift(),ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb,y=yb,Math.abs(x-x0)>Math.abs(y-y0)?x+=stack.shift():y+=stack.shift(),bezierCurveTo(xa,ya,xb,yb,x,y);break;default:throw new _util.FormatError("unknown operator: 12 ".concat(v))}break;case 14:if(stack.length>=4){var achar=stack.pop(),bchar=stack.pop();y=stack.pop(),x=stack.pop(),cmds.push({cmd:"save"}),cmds.push({cmd:"translate",args:[x,y]});var cmap=lookupCmap(font.cmap,String.fromCharCode(font.glyphNameMap[_encodings.StandardEncoding[achar]]));compileCharString(font.glyphs[cmap.glyphId],cmds,font,cmap.glyphId),cmds.push({cmd:"restore"}),cmap=lookupCmap(font.cmap,String.fromCharCode(font.glyphNameMap[_encodings.StandardEncoding[bchar]])),compileCharString(font.glyphs[cmap.glyphId],cmds,font,cmap.glyphId)}return;case 19:case 20:i+=(stems+=stack.length>>1)+7>>3,stackClean=!0;break;case 21:y+=stack.pop(),moveTo(x+=stack.pop(),y),stackClean=!0;break;case 22:moveTo(x+=stack.pop(),y),stackClean=!0;break;case 24:for(;stack.length>2;)xa=x+stack.shift(),ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb+stack.shift(),bezierCurveTo(xa,ya,xb,yb,x,y);x+=stack.shift(),y+=stack.shift(),lineTo(x,y);break;case 25:for(;stack.length>6;)x+=stack.shift(),y+=stack.shift(),lineTo(x,y);xa=x+stack.shift(),ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb+stack.shift(),bezierCurveTo(xa,ya,xb,yb,x,y);break;case 26:for(stack.length%2&&(x+=stack.shift());stack.length>0;)xa=x,ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb,y=yb+stack.shift(),bezierCurveTo(xa,ya,xb,yb,x,y);break;case 27:for(stack.length%2&&(y+=stack.shift());stack.length>0;)bezierCurveTo(xa=x+stack.shift(),ya=y,xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb);break;case 28:stack.push((code[i]<<24|code[i+1]<<16)>>16),i+=2;break;case 29:n=stack.pop()+font.gsubrsBias,(subrCode=font.gsubrs[n])&&parse(subrCode);break;case 30:for(;stack.length>0&&(xa=x,ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb+(1===stack.length?stack.shift():0),bezierCurveTo(xa,ya,xb,yb,x,y),0!==stack.length);)xa=x+stack.shift(),ya=y,xb=xa+stack.shift(),yb=ya+stack.shift(),y=yb+stack.shift(),bezierCurveTo(xa,ya,xb,yb,x=xb+(1===stack.length?stack.shift():0),y);break;case 31:for(;stack.length>0&&(xa=x+stack.shift(),ya=y,xb=xa+stack.shift(),yb=ya+stack.shift(),y=yb+stack.shift(),bezierCurveTo(xa,ya,xb,yb,x=xb+(1===stack.length?stack.shift():0),y),0!==stack.length);)xa=x,ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb+(1===stack.length?stack.shift():0),bezierCurveTo(xa,ya,xb,yb,x,y);break;default:if(v<32)throw new _util.FormatError("unknown operator: ".concat(v));v<247?stack.push(v-139):v<251?stack.push(256*(v-247)+code[i++]+108):v<255?stack.push(256*-(v-251)-code[i++]-108):(stack.push((code[i]<<24|code[i+1]<<16|code[i+2]<<8|code[i+3])/65536),i+=4)}stackClean&&(stack.length=0)}}(charStringCode)}var NOOP=[],CompiledFont=function(){function CompiledFont(fontMatrix){_classCallCheck(this,CompiledFont),this.constructor===CompiledFont&&(0,_util.unreachable)("Cannot initialize CompiledFont."),this.fontMatrix=fontMatrix,this.compiledGlyphs=Object.create(null),this.compiledCharCodeToGlyphId=Object.create(null)}return _createClass(CompiledFont,[{key:"getPathJs",value:function(unicode){var cmap=lookupCmap(this.cmap,unicode),fn=this.compiledGlyphs[cmap.glyphId];return fn||(fn=this.compileGlyph(this.glyphs[cmap.glyphId],cmap.glyphId),this.compiledGlyphs[cmap.glyphId]=fn),void 0===this.compiledCharCodeToGlyphId[cmap.charCode]&&(this.compiledCharCodeToGlyphId[cmap.charCode]=cmap.glyphId),fn}},{key:"compileGlyph",value:function(code,glyphId){if(!code||0===code.length||14===code[0])return NOOP;var fontMatrix=this.fontMatrix;if(this.isCFFCIDFont){var fdIndex=this.fdSelect.getFDIndex(glyphId);fdIndex>=0&&fdIndex<this.fdArray.length?fontMatrix=this.fdArray[fdIndex].getByName("FontMatrix")||_util.FONT_IDENTITY_MATRIX:(0,_util.warn)("Invalid fd index for glyph index.")}var cmds=[];return cmds.push({cmd:"save"}),cmds.push({cmd:"transform",args:fontMatrix.slice()}),cmds.push({cmd:"scale",args:["size","-size"]}),this.compileGlyphImpl(code,cmds,glyphId),cmds.push({cmd:"restore"}),cmds}},{key:"compileGlyphImpl",value:function(){(0,_util.unreachable)("Children classes should implement this.")}},{key:"hasBuiltPath",value:function(unicode){var cmap=lookupCmap(this.cmap,unicode);return void 0!==this.compiledGlyphs[cmap.glyphId]&&void 0!==this.compiledCharCodeToGlyphId[cmap.charCode]}}]),CompiledFont}(),TrueTypeCompiled=function(_CompiledFont){_inherits(TrueTypeCompiled,_CompiledFont);var _super63=_createSuper(TrueTypeCompiled);function TrueTypeCompiled(glyphs,cmap,fontMatrix){var _this74;return _classCallCheck(this,TrueTypeCompiled),(_this74=_super63.call(this,fontMatrix||[488e-6,0,0,488e-6,0,0])).glyphs=glyphs,_this74.cmap=cmap,_this74}return _createClass(TrueTypeCompiled,[{key:"compileGlyphImpl",value:function(code,cmds){compileGlyf(code,cmds,this)}}]),TrueTypeCompiled}(CompiledFont),Type2Compiled=function(_CompiledFont2){_inherits(Type2Compiled,_CompiledFont2);var _super64=_createSuper(Type2Compiled);function Type2Compiled(cffInfo,cmap,fontMatrix,glyphNameMap){var _this75;return _classCallCheck(this,Type2Compiled),(_this75=_super64.call(this,fontMatrix||[.001,0,0,.001,0,0])).glyphs=cffInfo.glyphs,_this75.gsubrs=cffInfo.gsubrs||[],_this75.subrs=cffInfo.subrs||[],_this75.cmap=cmap,_this75.glyphNameMap=glyphNameMap||(0,_glyphlist.getGlyphsUnicode)(),_this75.gsubrsBias=getSubroutineBias(_this75.gsubrs),_this75.subrsBias=getSubroutineBias(_this75.subrs),_this75.isCFFCIDFont=cffInfo.isCFFCIDFont,_this75.fdSelect=cffInfo.fdSelect,_this75.fdArray=cffInfo.fdArray,_this75}return _createClass(Type2Compiled,[{key:"compileGlyphImpl",value:function(code,cmds,glyphId){compileCharString(code,cmds,this,glyphId)}}]),Type2Compiled}(CompiledFont);return{create:function(font,seacAnalysisEnabled){for(var cmap,glyf,loca,cff,indexToLocFormat,unitsPerEm,data=new Uint8Array(font.data),numTables=getUshort(data,4),i=0,p=12;i<numTables;i++,p+=16){var tag=(0,_util.bytesToString)(data.subarray(p,p+4)),offset=getLong(data,p+8),length=getLong(data,p+12);switch(tag){case"cmap":cmap=parseCmap(data,offset);break;case"glyf":glyf=data.subarray(offset,offset+length);break;case"loca":loca=data.subarray(offset,offset+length);break;case"head":unitsPerEm=getUshort(data,offset+18),indexToLocFormat=getUshort(data,offset+50);break;case"CFF ":cff=parseCff(data,offset,offset+length,seacAnalysisEnabled)}}if(glyf){var fontMatrix=unitsPerEm?[1/unitsPerEm,0,0,1/unitsPerEm,0,0]:font.fontMatrix;return new TrueTypeCompiled(function(glyf,loca,isGlyphLocationsLong){var itemSize,itemDecode;isGlyphLocationsLong?(itemSize=4,itemDecode=function(data,offset){return data[offset]<<24|data[offset+1]<<16|data[offset+2]<<8|data[offset+3]}):(itemSize=2,itemDecode=function(data,offset){return data[offset]<<9|data[offset+1]<<1});for(var glyphs=[],startOffset=itemDecode(loca,0),j=itemSize;j<loca.length;j+=itemSize){var endOffset=itemDecode(loca,j);glyphs.push(glyf.subarray(startOffset,endOffset)),startOffset=endOffset}return glyphs}(glyf,loca,indexToLocFormat),cmap,fontMatrix)}return new Type2Compiled(cff,cmap,font.fontMatrix,font.glyphNameMap)}}}();exports.FontRendererFactory=FontRendererFactory},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.Type1Parser=void 0;var _encodings=__w_pdfjs_require__(32),_core_utils=__w_pdfjs_require__(8),_stream=__w_pdfjs_require__(12),_util=__w_pdfjs_require__(2),Type1CharString=function(){var COMMAND_MAP_vmoveto=[4],COMMAND_MAP_rlineto=[5],COMMAND_MAP_hlineto=[6],COMMAND_MAP_vlineto=[7],COMMAND_MAP_rrcurveto=[8],COMMAND_MAP_flex=[12,35],COMMAND_MAP_endchar=[14],COMMAND_MAP_rmoveto=[21],COMMAND_MAP_hmoveto=[22],COMMAND_MAP_vhcurveto=[30],COMMAND_MAP_hvcurveto=[31];function Type1CharString(){this.width=0,this.lsb=0,this.flexing=!1,this.output=[],this.stack=[]}return Type1CharString.prototype={convert:function(encoded,subrs,seacAnalysisEnabled){for(var wx,sbx,subrNumber,count=encoded.length,error=!1,i=0;i<count;i++){var value=encoded[i];if(value<32){switch(12===value&&(value=(value<<8)+encoded[++i]),value){case 1:case 3:case 9:case 3072:case 3073:case 3074:case 3105:this.stack=[];break;case 4:if(this.flexing){if(this.stack.length<1){error=!0;break}var dy=this.stack.pop();this.stack.push(0,dy);break}error=this.executeCommand(1,COMMAND_MAP_vmoveto);break;case 5:error=this.executeCommand(2,COMMAND_MAP_rlineto);break;case 6:error=this.executeCommand(1,COMMAND_MAP_hlineto);break;case 7:error=this.executeCommand(1,COMMAND_MAP_vlineto);break;case 8:error=this.executeCommand(6,COMMAND_MAP_rrcurveto);break;case 10:if(this.stack.length<1){error=!0;break}if(!subrs[subrNumber=this.stack.pop()]){error=!0;break}error=this.convert(subrs[subrNumber],subrs,seacAnalysisEnabled);break;case 11:return error;case 13:if(this.stack.length<2){error=!0;break}wx=this.stack.pop(),sbx=this.stack.pop(),this.lsb=sbx,this.width=wx,this.stack.push(wx,sbx),error=this.executeCommand(2,COMMAND_MAP_hmoveto);break;case 14:this.output.push(COMMAND_MAP_endchar[0]);break;case 21:if(this.flexing)break;error=this.executeCommand(2,COMMAND_MAP_rmoveto);break;case 22:if(this.flexing){this.stack.push(0);break}error=this.executeCommand(1,COMMAND_MAP_hmoveto);break;case 30:error=this.executeCommand(4,COMMAND_MAP_vhcurveto);break;case 31:error=this.executeCommand(4,COMMAND_MAP_hvcurveto);break;case 3078:if(seacAnalysisEnabled){var asb=this.stack[this.stack.length-5];this.seac=this.stack.splice(-4,4),this.seac[0]+=this.lsb-asb,error=this.executeCommand(0,COMMAND_MAP_endchar)}else error=this.executeCommand(4,COMMAND_MAP_endchar);break;case 3079:if(this.stack.length<4){error=!0;break}this.stack.pop(),wx=this.stack.pop();var sby=this.stack.pop();sbx=this.stack.pop(),this.lsb=sbx,this.width=wx,this.stack.push(wx,sbx,sby),error=this.executeCommand(3,COMMAND_MAP_rmoveto);break;case 3084:if(this.stack.length<2){error=!0;break}var num2=this.stack.pop(),num1=this.stack.pop();this.stack.push(num1/num2);break;case 3088:if(this.stack.length<2){error=!0;break}subrNumber=this.stack.pop();var numArgs=this.stack.pop();if(0===subrNumber&&3===numArgs){var flexArgs=this.stack.splice(this.stack.length-17,17);this.stack.push(flexArgs[2]+flexArgs[0],flexArgs[3]+flexArgs[1],flexArgs[4],flexArgs[5],flexArgs[6],flexArgs[7],flexArgs[8],flexArgs[9],flexArgs[10],flexArgs[11],flexArgs[12],flexArgs[13],flexArgs[14]),error=this.executeCommand(13,COMMAND_MAP_flex,!0),this.flexing=!1,this.stack.push(flexArgs[15],flexArgs[16])}else 1===subrNumber&&0===numArgs&&(this.flexing=!0);break;case 3089:break;default:(0,_util.warn)('Unknown type 1 charstring command of "'+value+'"')}if(error)break}else value<=246?value-=139:value=value<=250?256*(value-247)+encoded[++i]+108:value<=254?-256*(value-251)-encoded[++i]-108:(255&encoded[++i])<<24|(255&encoded[++i])<<16|(255&encoded[++i])<<8|(255&encoded[++i])<<0,this.stack.push(value)}return error},executeCommand:function(howManyArgs,command,keepStack){var stackLength=this.stack.length;if(howManyArgs>stackLength)return!0;for(var start=stackLength-howManyArgs,i=start;i<stackLength;i++){var value=this.stack[i];Number.isInteger(value)?this.output.push(28,value>>8&255,255&value):(value=65536*value|0,this.output.push(255,value>>24&255,value>>16&255,value>>8&255,255&value))}return this.output.push.apply(this.output,command),keepStack?this.stack.splice(start,howManyArgs):this.stack.length=0,!1}},Type1CharString}(),Type1Parser=function(){function isHexDigit(code){return code>=48&&code<=57||code>=65&&code<=70||code>=97&&code<=102}function decrypt(data,key,discardNumber){if(discardNumber>=data.length)return new Uint8Array(0);var i,j,r=0|key;for(i=0;i<discardNumber;i++)r=52845*(data[i]+r)+22719&65535;var count=data.length-discardNumber,decrypted=new Uint8Array(count);for(i=discardNumber,j=0;j<count;i++,j++){var value=data[i];decrypted[j]=value^r>>8,r=52845*(value+r)+22719&65535}return decrypted}function isSpecial(c){return 47===c||91===c||93===c||123===c||125===c||40===c||41===c}function Type1Parser(stream,encrypted,seacAnalysisEnabled){if(encrypted){var data=stream.getBytes(),isBinary=!((isHexDigit(data[0])||(0,_core_utils.isWhiteSpace)(data[0]))&&isHexDigit(data[1])&&isHexDigit(data[2])&&isHexDigit(data[3])&&isHexDigit(data[4])&&isHexDigit(data[5])&&isHexDigit(data[6])&&isHexDigit(data[7]));stream=new _stream.Stream(isBinary?decrypt(data,55665,4):function(data,key,discardNumber){var i,j,r=0|key,count=data.length,decrypted=new Uint8Array(count>>>1);for(i=0,j=0;i<count;i++){var digit1=data[i];if(isHexDigit(digit1)){var digit2;for(i++;i<count&&!isHexDigit(digit2=data[i]);)i++;if(i<count){var value=parseInt(String.fromCharCode(digit1,digit2),16);decrypted[j++]=value^r>>8,r=52845*(value+r)+22719&65535}}}return decrypted.slice(discardNumber,j)}(data,55665,4))}this.seacAnalysisEnabled=!!seacAnalysisEnabled,this.stream=stream,this.nextChar()}return Type1Parser.prototype={readNumberArray:function(){this.getToken();for(var array=[];;){var token=this.getToken();if(null===token||"]"===token||"}"===token)break;array.push(parseFloat(token||0))}return array},readNumber:function(){var token=this.getToken();return parseFloat(token||0)},readInt:function(){var token=this.getToken();return 0|parseInt(token||0,10)},readBoolean:function(){return"true"===this.getToken()?1:0},nextChar:function(){return this.currentChar=this.stream.getByte()},getToken:function(){for(var comment=!1,ch=this.currentChar;;){if(-1===ch)return null;if(comment)10!==ch&&13!==ch||(comment=!1);else if(37===ch)comment=!0;else if(!(0,_core_utils.isWhiteSpace)(ch))break;ch=this.nextChar()}if(isSpecial(ch))return this.nextChar(),String.fromCharCode(ch);var token="";do{token+=String.fromCharCode(ch),ch=this.nextChar()}while(ch>=0&&!(0,_core_utils.isWhiteSpace)(ch)&&!isSpecial(ch));return token},readCharStrings:function(bytes,lenIV){return-1===lenIV?bytes:decrypt(bytes,4330,lenIV)},extractFontProgram:function(properties){var stream=this.stream,subrs=[],charstrings=[],privateData=Object.create(null);privateData.lenIV=4;for(var token,length,data,lenIV,encoded,program={subrs:[],charstrings:[],properties:{privateData:privateData}};null!==(token=this.getToken());)if("/"===token)switch(token=this.getToken()){case"CharStrings":for(this.getToken(),this.getToken(),this.getToken(),this.getToken();null!==(token=this.getToken())&&"end"!==token;)if("/"===token){var glyph=this.getToken();length=this.readInt(),this.getToken(),data=length>0?stream.getBytes(length):new Uint8Array(0),lenIV=program.properties.privateData.lenIV,encoded=this.readCharStrings(data,lenIV),this.nextChar(),"noaccess"===(token=this.getToken())&&this.getToken(),charstrings.push({glyph:glyph,encoded:encoded})}break;case"Subrs":for(this.readInt(),this.getToken();"dup"===this.getToken();){var index=this.readInt();length=this.readInt(),this.getToken(),data=length>0?stream.getBytes(length):new Uint8Array(0),lenIV=program.properties.privateData.lenIV,encoded=this.readCharStrings(data,lenIV),this.nextChar(),"noaccess"===(token=this.getToken())&&this.getToken(),subrs[index]=encoded}break;case"BlueValues":case"OtherBlues":case"FamilyBlues":case"FamilyOtherBlues":var blueArray=this.readNumberArray();blueArray.length>0&&blueArray.length;break;case"StemSnapH":case"StemSnapV":program.properties.privateData[token]=this.readNumberArray();break;case"StdHW":case"StdVW":program.properties.privateData[token]=this.readNumberArray()[0];break;case"BlueShift":case"lenIV":case"BlueFuzz":case"BlueScale":case"LanguageGroup":case"ExpansionFactor":program.properties.privateData[token]=this.readNumber();break;case"ForceBold":program.properties.privateData[token]=this.readBoolean()}for(var i=0;i<charstrings.length;i++){glyph=charstrings[i].glyph,encoded=charstrings[i].encoded;var charString=new Type1CharString,error=charString.convert(encoded,subrs,this.seacAnalysisEnabled),output=charString.output;error&&(output=[14]);var charStringObject={glyphName:glyph,charstring:output,width:charString.width,lsb:charString.lsb,seac:charString.seac};if(".notdef"===glyph?program.charstrings.unshift(charStringObject):program.charstrings.push(charStringObject),properties.builtInEncoding){var _index=properties.builtInEncoding.indexOf(glyph);_index>-1&&void 0===properties.widths[_index]&&_index>=properties.firstChar&&_index<=properties.lastChar&&(properties.widths[_index]=charString.width)}}return program},extractFontHeader:function(properties){for(var token;null!==(token=this.getToken());)if("/"===token)switch(token=this.getToken()){case"FontMatrix":var matrix=this.readNumberArray();properties.fontMatrix=matrix;break;case"Encoding":var encoding,encodingArg=this.getToken();if(/^\d+$/.test(encodingArg)){encoding=[];var size=0|parseInt(encodingArg,10);this.getToken();for(var j=0;j<size;j++){for(token=this.getToken();"dup"!==token&&"def"!==token;)if(null===(token=this.getToken()))return;if("def"===token)break;var index=this.readInt();this.getToken();var glyph=this.getToken();encoding[index]=glyph,this.getToken()}}else encoding=(0,_encodings.getEncoding)(encodingArg);properties.builtInEncoding=encoding;break;case"FontBBox":var fontBBox=this.readNumberArray();properties.ascent=Math.max(fontBBox[3],fontBBox[1]),properties.descent=Math.min(fontBBox[1],fontBBox[3]),properties.ascentScaled=!0}}},Type1Parser}();exports.Type1Parser=Type1Parser},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTilingPatternIR=function(operatorList,dict,color){var matrix=dict.getArray("Matrix"),bbox=_util.Util.normalizeRect(dict.getArray("BBox")),xstep=dict.get("XStep"),ystep=dict.get("YStep"),paintType=dict.get("PaintType"),tilingType=dict.get("TilingType");if(bbox[2]-bbox[0]==0||bbox[3]-bbox[1]==0)throw new _util.FormatError("Invalid getTilingPatternIR /BBox array: [".concat(bbox,"]."));return["TilingPattern",color,operatorList,matrix,bbox,xstep,ystep,paintType,tilingType]},exports.Pattern=void 0;var _util=__w_pdfjs_require__(2),_colorspace=__w_pdfjs_require__(23),_primitives=__w_pdfjs_require__(5),_core_utils=__w_pdfjs_require__(8),ShadingType_AXIAL=2,ShadingType_RADIAL=3,ShadingType_FREE_FORM_MESH=4,ShadingType_LATTICE_FORM_MESH=5,ShadingType_COONS_PATCH_MESH=6,ShadingType_TENSOR_PATCH_MESH=7,Pattern=function(){function Pattern(){(0,_util.unreachable)("should not call Pattern constructor")}return Pattern.prototype={getPattern:function(ctx){(0,_util.unreachable)("Should not call Pattern.getStyle: ".concat(ctx))}},Pattern.parseShading=function(shading,matrix,xref,res,handler,pdfFunctionFactory,localColorSpaceCache){var dict=(0,_primitives.isStream)(shading)?shading.dict:shading,type=dict.get("ShadingType");try{switch(type){case ShadingType_AXIAL:case ShadingType_RADIAL:return new Shadings.RadialAxial(dict,matrix,xref,res,pdfFunctionFactory,localColorSpaceCache);case ShadingType_FREE_FORM_MESH:case ShadingType_LATTICE_FORM_MESH:case ShadingType_COONS_PATCH_MESH:case ShadingType_TENSOR_PATCH_MESH:return new Shadings.Mesh(shading,matrix,xref,res,pdfFunctionFactory,localColorSpaceCache);default:throw new _util.FormatError("Unsupported ShadingType: "+type)}}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;return handler.send("UnsupportedFeature",{featureId:_util.UNSUPPORTED_FEATURES.shadingPattern}),(0,_util.warn)(ex),new Shadings.Dummy}},Pattern}();exports.Pattern=Pattern;var Shadings={SMALL_NUMBER:1e-6};Shadings.RadialAxial=function(){function RadialAxial(dict,matrix,xref,resources,pdfFunctionFactory,localColorSpaceCache){this.matrix=matrix,this.coordsArr=dict.getArray("Coords"),this.shadingType=dict.get("ShadingType"),this.type="Pattern";var cs=_colorspace.ColorSpace.parse({cs:dict.getRaw("ColorSpace")||dict.getRaw("CS"),xref:xref,resources:resources,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache});this.cs=cs;var bbox=dict.getArray("BBox");Array.isArray(bbox)&&4===bbox.length?this.bbox=_util.Util.normalizeRect(bbox):this.bbox=null;var t0=0,t1=1;if(dict.has("Domain")){var domainArr=dict.getArray("Domain");t0=domainArr[0],t1=domainArr[1]}var extendStart=!1,extendEnd=!1;if(dict.has("Extend")){var extendArr=dict.getArray("Extend");extendStart=extendArr[0],extendEnd=extendArr[1]}if(!(this.shadingType!==ShadingType_RADIAL||extendStart&&extendEnd)){var x1=this.coordsArr[0],y1=this.coordsArr[1],r1=this.coordsArr[2],x2=this.coordsArr[3],y2=this.coordsArr[4],r2=this.coordsArr[5],distance=Math.sqrt((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2));r1<=r2+distance&&r2<=r1+distance&&(0,_util.warn)("Unsupported radial gradient.")}this.extendStart=extendStart,this.extendEnd=extendEnd;var fnObj=dict.getRaw("Function"),fn=pdfFunctionFactory.createFromArray(fnObj),step=(t1-t0)/10,colorStops=this.colorStops=[];if(t0>=t1||step<=0)(0,_util.info)("Bad shading domain.");else{for(var rgbColor,color=new Float32Array(cs.numComps),ratio=new Float32Array(1),_i44=0;_i44<=10;_i44++){ratio[0]=t0+_i44*step,fn(ratio,0,color,0),rgbColor=cs.getRgb(color,0);var cssColor=_util.Util.makeHexColor(rgbColor[0],rgbColor[1],rgbColor[2]);colorStops.push([_i44/10,cssColor])}var background="transparent";dict.has("Background")&&(rgbColor=cs.getRgb(dict.get("Background"),0),background=_util.Util.makeHexColor(rgbColor[0],rgbColor[1],rgbColor[2])),extendStart||(colorStops.unshift([0,background]),colorStops[1][0]+=Shadings.SMALL_NUMBER),extendEnd||(colorStops[colorStops.length-1][0]-=Shadings.SMALL_NUMBER,colorStops.push([1,background])),this.colorStops=colorStops}}return RadialAxial.prototype={getIR:function(){var type,p0,p1,r0,r1,coordsArr=this.coordsArr,shadingType=this.shadingType;shadingType===ShadingType_AXIAL?(p0=[coordsArr[0],coordsArr[1]],p1=[coordsArr[2],coordsArr[3]],r0=null,r1=null,type="axial"):shadingType===ShadingType_RADIAL?(p0=[coordsArr[0],coordsArr[1]],p1=[coordsArr[3],coordsArr[4]],r0=coordsArr[2],r1=coordsArr[5],type="radial"):(0,_util.unreachable)("getPattern type unknown: ".concat(shadingType));var matrix=this.matrix;if(matrix&&(p0=_util.Util.applyTransform(p0,matrix),p1=_util.Util.applyTransform(p1,matrix),shadingType===ShadingType_RADIAL)){var scale=_util.Util.singularValueDecompose2dScale(matrix);r0*=scale[0],r1*=scale[1]}return["RadialAxial",type,this.bbox,this.colorStops,p0,p1,r0,r1]}},RadialAxial}(),Shadings.Mesh=function(){function MeshStreamReader(stream,context){this.stream=stream,this.context=context,this.buffer=0,this.bufferLength=0;var numComps=context.numComps;this.tmpCompsBuf=new Float32Array(numComps);var csNumComps=context.colorSpace.numComps;this.tmpCsCompsBuf=context.colorFn?new Float32Array(csNumComps):this.tmpCompsBuf}MeshStreamReader.prototype={get hasData(){if(this.stream.end)return this.stream.pos<this.stream.end;if(this.bufferLength>0)return!0;var nextByte=this.stream.getByte();return!(nextByte<0||(this.buffer=nextByte,this.bufferLength=8,0))},readBits:function(n){var buffer=this.buffer,bufferLength=this.bufferLength;if(32===n){if(0===bufferLength)return(this.stream.getByte()<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte())>>>0;buffer=buffer<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte();var nextByte=this.stream.getByte();return this.buffer=nextByte&(1<<bufferLength)-1,(buffer<<8-bufferLength|(255&nextByte)>>bufferLength)>>>0}if(8===n&&0===bufferLength)return this.stream.getByte();for(;bufferLength<n;)buffer=buffer<<8|this.stream.getByte(),bufferLength+=8;return bufferLength-=n,this.bufferLength=bufferLength,this.buffer=buffer&(1<<bufferLength)-1,buffer>>bufferLength},align:function(){this.buffer=0,this.bufferLength=0},readFlag:function(){return this.readBits(this.context.bitsPerFlag)},readCoordinate:function(){var bitsPerCoordinate=this.context.bitsPerCoordinate,xi=this.readBits(bitsPerCoordinate),yi=this.readBits(bitsPerCoordinate),decode=this.context.decode,scale=bitsPerCoordinate<32?1/((1<<bitsPerCoordinate)-1):2.3283064365386963e-10;return[xi*scale*(decode[1]-decode[0])+decode[0],yi*scale*(decode[3]-decode[2])+decode[2]]},readComponents:function(){for(var numComps=this.context.numComps,bitsPerComponent=this.context.bitsPerComponent,scale=bitsPerComponent<32?1/((1<<bitsPerComponent)-1):2.3283064365386963e-10,decode=this.context.decode,components=this.tmpCompsBuf,i=0,j=4;i<numComps;i++,j+=2){var ci=this.readBits(bitsPerComponent);components[i]=ci*scale*(decode[j+1]-decode[j])+decode[j]}var color=this.tmpCsCompsBuf;return this.context.colorFn&&this.context.colorFn(components,0,color,0),this.context.colorSpace.getRgb(color,0)}};var cache,getB=(cache=[],function(count){return cache[count]||(cache[count]=function(count){for(var lut=[],i=0;i<=count;i++){var t=i/count,t_=1-t;lut.push(new Float32Array([t_*t_*t_,3*t*t_*t_,3*t*t*t_,t*t*t]))}return lut}(count)),cache[count]});function buildFigureFromPatch(mesh,index){var figure=mesh.figures[index];(0,_util.assert)("patch"===figure.type,"Unexpected patch mesh figure");var coords=mesh.coords,colors=mesh.colors,pi=figure.coords,ci=figure.colors,figureMinX=Math.min(coords[pi[0]][0],coords[pi[3]][0],coords[pi[12]][0],coords[pi[15]][0]),figureMinY=Math.min(coords[pi[0]][1],coords[pi[3]][1],coords[pi[12]][1],coords[pi[15]][1]),figureMaxX=Math.max(coords[pi[0]][0],coords[pi[3]][0],coords[pi[12]][0],coords[pi[15]][0]),figureMaxY=Math.max(coords[pi[0]][1],coords[pi[3]][1],coords[pi[12]][1],coords[pi[15]][1]),splitXBy=Math.ceil(20*(figureMaxX-figureMinX)/(mesh.bounds[2]-mesh.bounds[0]));splitXBy=Math.max(3,Math.min(20,splitXBy));var splitYBy=Math.ceil(20*(figureMaxY-figureMinY)/(mesh.bounds[3]-mesh.bounds[1]));splitYBy=Math.max(3,Math.min(20,splitYBy));for(var verticesPerRow=splitXBy+1,figureCoords=new Int32Array((splitYBy+1)*verticesPerRow),figureColors=new Int32Array((splitYBy+1)*verticesPerRow),k=0,cl=new Uint8Array(3),cr=new Uint8Array(3),c0=colors[ci[0]],c1=colors[ci[1]],c2=colors[ci[2]],c3=colors[ci[3]],bRow=getB(splitYBy),bCol=getB(splitXBy),row=0;row<=splitYBy;row++){cl[0]=(c0[0]*(splitYBy-row)+c2[0]*row)/splitYBy|0,cl[1]=(c0[1]*(splitYBy-row)+c2[1]*row)/splitYBy|0,cl[2]=(c0[2]*(splitYBy-row)+c2[2]*row)/splitYBy|0,cr[0]=(c1[0]*(splitYBy-row)+c3[0]*row)/splitYBy|0,cr[1]=(c1[1]*(splitYBy-row)+c3[1]*row)/splitYBy|0,cr[2]=(c1[2]*(splitYBy-row)+c3[2]*row)/splitYBy|0;for(var col=0;col<=splitXBy;col++,k++)if(0!==row&&row!==splitYBy||0!==col&&col!==splitXBy){for(var x=0,y=0,q=0,i=0;i<=3;i++)for(var j=0;j<=3;j++,q++){var m=bRow[row][i]*bCol[col][j];x+=coords[pi[q]][0]*m,y+=coords[pi[q]][1]*m}figureCoords[k]=coords.length,coords.push([x,y]),figureColors[k]=colors.length;var newColor=new Uint8Array(3);newColor[0]=(cl[0]*(splitXBy-col)+cr[0]*col)/splitXBy|0,newColor[1]=(cl[1]*(splitXBy-col)+cr[1]*col)/splitXBy|0,newColor[2]=(cl[2]*(splitXBy-col)+cr[2]*col)/splitXBy|0,colors.push(newColor)}}figureCoords[0]=pi[0],figureColors[0]=ci[0],figureCoords[splitXBy]=pi[3],figureColors[splitXBy]=ci[1],figureCoords[verticesPerRow*splitYBy]=pi[12],figureColors[verticesPerRow*splitYBy]=ci[2],figureCoords[verticesPerRow*splitYBy+splitXBy]=pi[15],figureColors[verticesPerRow*splitYBy+splitXBy]=ci[3],mesh.figures[index]={type:"lattice",coords:figureCoords,colors:figureColors,verticesPerRow:verticesPerRow}}function updateBounds(mesh){for(var minX=mesh.coords[0][0],minY=mesh.coords[0][1],maxX=minX,maxY=minY,i=1,ii=mesh.coords.length;i<ii;i++){var x=mesh.coords[i][0],y=mesh.coords[i][1];minX=minX>x?x:minX,minY=minY>y?y:minY,maxX=maxX<x?x:maxX,maxY=maxY<y?y:maxY}mesh.bounds=[minX,minY,maxX,maxY]}function Mesh(stream,matrix,xref,resources,pdfFunctionFactory,localColorSpaceCache){if(!(0,_primitives.isStream)(stream))throw new _util.FormatError("Mesh data is not a stream");var dict=stream.dict;this.matrix=matrix,this.shadingType=dict.get("ShadingType"),this.type="Pattern";var bbox=dict.getArray("BBox");Array.isArray(bbox)&&4===bbox.length?this.bbox=_util.Util.normalizeRect(bbox):this.bbox=null;var cs=_colorspace.ColorSpace.parse({cs:dict.getRaw("ColorSpace")||dict.getRaw("CS"),xref:xref,resources:resources,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache});this.cs=cs,this.background=dict.has("Background")?cs.getRgb(dict.get("Background"),0):null;var fnObj=dict.getRaw("Function"),fn=fnObj?pdfFunctionFactory.createFromArray(fnObj):null;this.coords=[],this.colors=[],this.figures=[];var reader=new MeshStreamReader(stream,{bitsPerCoordinate:dict.get("BitsPerCoordinate"),bitsPerComponent:dict.get("BitsPerComponent"),bitsPerFlag:dict.get("BitsPerFlag"),decode:dict.getArray("Decode"),colorFn:fn,colorSpace:cs,numComps:fn?1:cs.numComps}),patchMesh=!1;switch(this.shadingType){case ShadingType_FREE_FORM_MESH:!function(mesh,reader){for(var coords=mesh.coords,colors=mesh.colors,operators=[],ps=[],verticesLeft=0;reader.hasData;){var f=reader.readFlag(),coord=reader.readCoordinate(),color=reader.readComponents();if(0===verticesLeft){if(!(0<=f&&f<=2))throw new _util.FormatError("Unknown type4 flag");switch(f){case 0:verticesLeft=3;break;case 1:ps.push(ps[ps.length-2],ps[ps.length-1]),verticesLeft=1;break;case 2:ps.push(ps[ps.length-3],ps[ps.length-1]),verticesLeft=1}operators.push(f)}ps.push(coords.length),coords.push(coord),colors.push(color),verticesLeft--,reader.align()}mesh.figures.push({type:"triangles",coords:new Int32Array(ps),colors:new Int32Array(ps)})}(this,reader);break;case ShadingType_LATTICE_FORM_MESH:var verticesPerRow=0|dict.get("VerticesPerRow");if(verticesPerRow<2)throw new _util.FormatError("Invalid VerticesPerRow");!function(mesh,reader,verticesPerRow){for(var coords=mesh.coords,colors=mesh.colors,ps=[];reader.hasData;){var coord=reader.readCoordinate(),color=reader.readComponents();ps.push(coords.length),coords.push(coord),colors.push(color)}mesh.figures.push({type:"lattice",coords:new Int32Array(ps),colors:new Int32Array(ps),verticesPerRow:verticesPerRow})}(this,reader,verticesPerRow);break;case ShadingType_COONS_PATCH_MESH:!function(mesh,reader){for(var coords=mesh.coords,colors=mesh.colors,ps=new Int32Array(16),cs=new Int32Array(4);reader.hasData;){var i,ii,f=reader.readFlag();if(!(0<=f&&f<=3))throw new _util.FormatError("Unknown type6 flag");var pi=coords.length;for(i=0,ii=0!==f?8:12;i<ii;i++)coords.push(reader.readCoordinate());var tmp1,tmp2,tmp3,tmp4,ci=colors.length;for(i=0,ii=0!==f?2:4;i<ii;i++)colors.push(reader.readComponents());switch(f){case 0:ps[12]=pi+3,ps[13]=pi+4,ps[14]=pi+5,ps[15]=pi+6,ps[8]=pi+2,ps[11]=pi+7,ps[4]=pi+1,ps[7]=pi+8,ps[0]=pi,ps[1]=pi+11,ps[2]=pi+10,ps[3]=pi+9,cs[2]=ci+1,cs[3]=ci+2,cs[0]=ci,cs[1]=ci+3;break;case 1:tmp1=ps[12],tmp2=ps[13],tmp3=ps[14],tmp4=ps[15],ps[12]=tmp4,ps[13]=pi+0,ps[14]=pi+1,ps[15]=pi+2,ps[8]=tmp3,ps[11]=pi+3,ps[4]=tmp2,ps[7]=pi+4,ps[0]=tmp1,ps[1]=pi+7,ps[2]=pi+6,ps[3]=pi+5,tmp1=cs[2],tmp2=cs[3],cs[2]=tmp2,cs[3]=ci,cs[0]=tmp1,cs[1]=ci+1;break;case 2:tmp1=ps[15],tmp2=ps[11],ps[12]=ps[3],ps[13]=pi+0,ps[14]=pi+1,ps[15]=pi+2,ps[8]=ps[7],ps[11]=pi+3,ps[4]=tmp2,ps[7]=pi+4,ps[0]=tmp1,ps[1]=pi+7,ps[2]=pi+6,ps[3]=pi+5,tmp1=cs[3],cs[2]=cs[1],cs[3]=ci,cs[0]=tmp1,cs[1]=ci+1;break;case 3:ps[12]=ps[0],ps[13]=pi+0,ps[14]=pi+1,ps[15]=pi+2,ps[8]=ps[1],ps[11]=pi+3,ps[4]=ps[2],ps[7]=pi+4,ps[0]=ps[3],ps[1]=pi+7,ps[2]=pi+6,ps[3]=pi+5,cs[2]=cs[0],cs[3]=ci,cs[0]=cs[1],cs[1]=ci+1}ps[5]=coords.length,coords.push([(-4*coords[ps[0]][0]-coords[ps[15]][0]+6*(coords[ps[4]][0]+coords[ps[1]][0])-2*(coords[ps[12]][0]+coords[ps[3]][0])+3*(coords[ps[13]][0]+coords[ps[7]][0]))/9,(-4*coords[ps[0]][1]-coords[ps[15]][1]+6*(coords[ps[4]][1]+coords[ps[1]][1])-2*(coords[ps[12]][1]+coords[ps[3]][1])+3*(coords[ps[13]][1]+coords[ps[7]][1]))/9]),ps[6]=coords.length,coords.push([(-4*coords[ps[3]][0]-coords[ps[12]][0]+6*(coords[ps[2]][0]+coords[ps[7]][0])-2*(coords[ps[0]][0]+coords[ps[15]][0])+3*(coords[ps[4]][0]+coords[ps[14]][0]))/9,(-4*coords[ps[3]][1]-coords[ps[12]][1]+6*(coords[ps[2]][1]+coords[ps[7]][1])-2*(coords[ps[0]][1]+coords[ps[15]][1])+3*(coords[ps[4]][1]+coords[ps[14]][1]))/9]),ps[9]=coords.length,coords.push([(-4*coords[ps[12]][0]-coords[ps[3]][0]+6*(coords[ps[8]][0]+coords[ps[13]][0])-2*(coords[ps[0]][0]+coords[ps[15]][0])+3*(coords[ps[11]][0]+coords[ps[1]][0]))/9,(-4*coords[ps[12]][1]-coords[ps[3]][1]+6*(coords[ps[8]][1]+coords[ps[13]][1])-2*(coords[ps[0]][1]+coords[ps[15]][1])+3*(coords[ps[11]][1]+coords[ps[1]][1]))/9]),ps[10]=coords.length,coords.push([(-4*coords[ps[15]][0]-coords[ps[0]][0]+6*(coords[ps[11]][0]+coords[ps[14]][0])-2*(coords[ps[12]][0]+coords[ps[3]][0])+3*(coords[ps[2]][0]+coords[ps[8]][0]))/9,(-4*coords[ps[15]][1]-coords[ps[0]][1]+6*(coords[ps[11]][1]+coords[ps[14]][1])-2*(coords[ps[12]][1]+coords[ps[3]][1])+3*(coords[ps[2]][1]+coords[ps[8]][1]))/9]),mesh.figures.push({type:"patch",coords:new Int32Array(ps),colors:new Int32Array(cs)})}}(this,reader),patchMesh=!0;break;case ShadingType_TENSOR_PATCH_MESH:!function(mesh,reader){for(var coords=mesh.coords,colors=mesh.colors,ps=new Int32Array(16),cs=new Int32Array(4);reader.hasData;){var i,ii,f=reader.readFlag();if(!(0<=f&&f<=3))throw new _util.FormatError("Unknown type7 flag");var pi=coords.length;for(i=0,ii=0!==f?12:16;i<ii;i++)coords.push(reader.readCoordinate());var tmp1,tmp2,tmp3,tmp4,ci=colors.length;for(i=0,ii=0!==f?2:4;i<ii;i++)colors.push(reader.readComponents());switch(f){case 0:ps[12]=pi+3,ps[13]=pi+4,ps[14]=pi+5,ps[15]=pi+6,ps[8]=pi+2,ps[9]=pi+13,ps[10]=pi+14,ps[11]=pi+7,ps[4]=pi+1,ps[5]=pi+12,ps[6]=pi+15,ps[7]=pi+8,ps[0]=pi,ps[1]=pi+11,ps[2]=pi+10,ps[3]=pi+9,cs[2]=ci+1,cs[3]=ci+2,cs[0]=ci,cs[1]=ci+3;break;case 1:tmp1=ps[12],tmp2=ps[13],tmp3=ps[14],tmp4=ps[15],ps[12]=tmp4,ps[13]=pi+0,ps[14]=pi+1,ps[15]=pi+2,ps[8]=tmp3,ps[9]=pi+9,ps[10]=pi+10,ps[11]=pi+3,ps[4]=tmp2,ps[5]=pi+8,ps[6]=pi+11,ps[7]=pi+4,ps[0]=tmp1,ps[1]=pi+7,ps[2]=pi+6,ps[3]=pi+5,tmp1=cs[2],tmp2=cs[3],cs[2]=tmp2,cs[3]=ci,cs[0]=tmp1,cs[1]=ci+1;break;case 2:tmp1=ps[15],tmp2=ps[11],ps[12]=ps[3],ps[13]=pi+0,ps[14]=pi+1,ps[15]=pi+2,ps[8]=ps[7],ps[9]=pi+9,ps[10]=pi+10,ps[11]=pi+3,ps[4]=tmp2,ps[5]=pi+8,ps[6]=pi+11,ps[7]=pi+4,ps[0]=tmp1,ps[1]=pi+7,ps[2]=pi+6,ps[3]=pi+5,tmp1=cs[3],cs[2]=cs[1],cs[3]=ci,cs[0]=tmp1,cs[1]=ci+1;break;case 3:ps[12]=ps[0],ps[13]=pi+0,ps[14]=pi+1,ps[15]=pi+2,ps[8]=ps[1],ps[9]=pi+9,ps[10]=pi+10,ps[11]=pi+3,ps[4]=ps[2],ps[5]=pi+8,ps[6]=pi+11,ps[7]=pi+4,ps[0]=ps[3],ps[1]=pi+7,ps[2]=pi+6,ps[3]=pi+5,cs[2]=cs[0],cs[3]=ci,cs[0]=cs[1],cs[1]=ci+1}mesh.figures.push({type:"patch",coords:new Int32Array(ps),colors:new Int32Array(cs)})}}(this,reader),patchMesh=!0;break;default:(0,_util.unreachable)("Unsupported mesh type.")}if(patchMesh){updateBounds(this);for(var i=0,ii=this.figures.length;i<ii;i++)buildFigureFromPatch(this,i)}updateBounds(this),function(mesh){var i,ii,j,jj,coords=mesh.coords,coordsPacked=new Float32Array(2*coords.length);for(i=0,j=0,ii=coords.length;i<ii;i++){var xy=coords[i];coordsPacked[j++]=xy[0],coordsPacked[j++]=xy[1]}mesh.coords=coordsPacked;var colors=mesh.colors,colorsPacked=new Uint8Array(3*colors.length);for(i=0,j=0,ii=colors.length;i<ii;i++){var c=colors[i];colorsPacked[j++]=c[0],colorsPacked[j++]=c[1],colorsPacked[j++]=c[2]}mesh.colors=colorsPacked;var figures=mesh.figures;for(i=0,ii=figures.length;i<ii;i++){var figure=figures[i],ps=figure.coords,cs=figure.colors;for(j=0,jj=ps.length;j<jj;j++)ps[j]*=2,cs[j]*=3}}(this)}return Mesh.prototype={getIR:function(){return["Mesh",this.shadingType,this.coords,this.colors,this.figures,this.bounds,this.matrix,this.bbox,this.background]}},Mesh}(),Shadings.Dummy=function(){function Dummy(){this.type="Pattern"}return Dummy.prototype={getIR:function(){return["Dummy"]}},Dummy}()},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.isPDFFunction=function(v){var fnDict;if("object"!==_typeof(v))return!1;if((0,_primitives.isDict)(v))fnDict=v;else{if(!(0,_primitives.isStream)(v))return!1;fnDict=v.dict}return fnDict.has("FunctionType")},exports.PostScriptEvaluator=exports.PostScriptCompiler=exports.PDFFunctionFactory=void 0;var _primitives=__w_pdfjs_require__(5),_util=__w_pdfjs_require__(2),_ps_parser=__w_pdfjs_require__(40),_image_utils=__w_pdfjs_require__(24),PDFFunctionFactory=function(){function PDFFunctionFactory(_ref46){var xref=_ref46.xref,_ref46$isEvalSupporte=_ref46.isEvalSupported,isEvalSupported=void 0===_ref46$isEvalSupporte||_ref46$isEvalSupporte;_classCallCheck(this,PDFFunctionFactory),this.xref=xref,this.isEvalSupported=!1!==isEvalSupported}return _createClass(PDFFunctionFactory,[{key:"create",value:function(fn){var cachedFunction=this.getCached(fn);if(cachedFunction)return cachedFunction;var parsedFunction=PDFFunction.parse({xref:this.xref,isEvalSupported:this.isEvalSupported,fn:fn instanceof _primitives.Ref?this.xref.fetch(fn):fn});return this._cache(fn,parsedFunction),parsedFunction}},{key:"createFromArray",value:function(fnObj){var cachedFunction=this.getCached(fnObj);if(cachedFunction)return cachedFunction;var parsedFunction=PDFFunction.parseArray({xref:this.xref,isEvalSupported:this.isEvalSupported,fnObj:fnObj instanceof _primitives.Ref?this.xref.fetch(fnObj):fnObj});return this._cache(fnObj,parsedFunction),parsedFunction}},{key:"getCached",value:function(cacheKey){var fnRef;if(cacheKey instanceof _primitives.Ref?fnRef=cacheKey:cacheKey instanceof _primitives.Dict?fnRef=cacheKey.objId:(0,_primitives.isStream)(cacheKey)&&(fnRef=cacheKey.dict&&cacheKey.dict.objId),fnRef){var localFunction=this._localFunctionCache.getByRef(fnRef);if(localFunction)return localFunction}return null}},{key:"_cache",value:function(cacheKey,parsedFunction){if(!parsedFunction)throw new Error('PDFFunctionFactory._cache - expected "parsedFunction" argument.');var fnRef;cacheKey instanceof _primitives.Ref?fnRef=cacheKey:cacheKey instanceof _primitives.Dict?fnRef=cacheKey.objId:(0,_primitives.isStream)(cacheKey)&&(fnRef=cacheKey.dict&&cacheKey.dict.objId),fnRef&&this._localFunctionCache.set(null,fnRef,parsedFunction)}},{key:"_localFunctionCache",get:function(){return(0,_util.shadow)(this,"_localFunctionCache",new _image_utils.LocalFunctionCache)}}]),PDFFunctionFactory}();function toNumberArray(arr){if(!Array.isArray(arr))return null;for(var length=arr.length,_i45=0;_i45<length;_i45++)if("number"!=typeof arr[_i45]){for(var result=new Array(length),j=0;j<length;j++)result[j]=+arr[j];return result}return arr}exports.PDFFunctionFactory=PDFFunctionFactory;var PDFFunction={getSampleArray:function(size,outputSize,bps,stream){var i,ii,length=1;for(i=0,ii=size.length;i<ii;i++)length*=size[i];length*=outputSize;var array=new Array(length),codeSize=0,codeBuf=0,sampleMul=1/(Math.pow(2,bps)-1),strBytes=stream.getBytes((length*bps+7)/8),strIdx=0;for(i=0;i<length;i++){for(;codeSize<bps;)codeBuf<<=8,codeBuf|=strBytes[strIdx++],codeSize+=8;codeSize-=bps,array[i]=(codeBuf>>codeSize)*sampleMul,codeBuf&=(1<<codeSize)-1}return array},getIR:function(_ref47){var xref=_ref47.xref,isEvalSupported=_ref47.isEvalSupported,fn=_ref47.fn,dict=fn.dict;dict||(dict=fn);var typeFn=[this.constructSampled,null,this.constructInterpolated,this.constructStiched,this.constructPostScript][dict.get("FunctionType")];if(!typeFn)throw new _util.FormatError("Unknown type of function");return typeFn.call(this,{xref:xref,isEvalSupported:isEvalSupported,fn:fn,dict:dict})},fromIR:function(_ref48){var xref=_ref48.xref,isEvalSupported=_ref48.isEvalSupported,IR=_ref48.IR;switch(IR[0]){case 0:return this.constructSampledFromIR({xref:xref,isEvalSupported:isEvalSupported,IR:IR});case 2:return this.constructInterpolatedFromIR({xref:xref,isEvalSupported:isEvalSupported,IR:IR});case 3:return this.constructStichedFromIR({xref:xref,isEvalSupported:isEvalSupported,IR:IR});default:return this.constructPostScriptFromIR({xref:xref,isEvalSupported:isEvalSupported,IR:IR})}},parse:function(_ref49){var xref=_ref49.xref,isEvalSupported=_ref49.isEvalSupported,fn=_ref49.fn,IR=this.getIR({xref:xref,isEvalSupported:isEvalSupported,fn:fn});return this.fromIR({xref:xref,isEvalSupported:isEvalSupported,IR:IR})},parseArray:function(_ref50){var xref=_ref50.xref,isEvalSupported=_ref50.isEvalSupported,fnObj=_ref50.fnObj;if(!Array.isArray(fnObj))return this.parse({xref:xref,isEvalSupported:isEvalSupported,fn:fnObj});for(var fnArray=[],j=0,jj=fnObj.length;j<jj;j++)fnArray.push(this.parse({xref:xref,isEvalSupported:isEvalSupported,fn:xref.fetchIfRef(fnObj[j])}));return function(src,srcOffset,dest,destOffset){for(var i=0,ii=fnArray.length;i<ii;i++)fnArray[i](src,srcOffset,dest,destOffset+i)}},constructSampled:function(_ref51){_ref51.xref,_ref51.isEvalSupported;var fn=_ref51.fn,dict=_ref51.dict;function toMultiArray(arr){for(var inputLength=arr.length,out=[],index=0,i=0;i<inputLength;i+=2)out[index]=[arr[i],arr[i+1]],++index;return out}var domain=toNumberArray(dict.getArray("Domain")),range=toNumberArray(dict.getArray("Range"));if(!domain||!range)throw new _util.FormatError("No domain or range");var inputSize=domain.length/2,outputSize=range.length/2;domain=toMultiArray(domain),range=toMultiArray(range);var size=toNumberArray(dict.getArray("Size")),bps=dict.get("BitsPerSample"),order=dict.get("Order")||1;1!==order&&(0,_util.info)("No support for cubic spline interpolation: "+order);var encode=toNumberArray(dict.getArray("Encode"));if(encode)encode=toMultiArray(encode);else{encode=[];for(var i=0;i<inputSize;++i)encode.push([0,size[i]-1])}var decode=toNumberArray(dict.getArray("Decode"));return[0,inputSize,domain,encode,decode=decode?toMultiArray(decode):range,this.getSampleArray(size,outputSize,bps,fn),size,outputSize,Math.pow(2,bps)-1,range]},constructSampledFromIR:function(_ref52){_ref52.xref,_ref52.isEvalSupported;var IR=_ref52.IR;function interpolate(x,xmin,xmax,ymin,ymax){return ymin+(ymax-ymin)/(xmax-xmin)*(x-xmin)}return function(src,srcOffset,dest,destOffset){var i,j,m=IR[1],domain=IR[2],encode=IR[3],decode=IR[4],samples=IR[5],size=IR[6],n=IR[7],range=IR[9],cubeVertices=1<<m,cubeN=new Float64Array(cubeVertices),cubeVertex=new Uint32Array(cubeVertices);for(j=0;j<cubeVertices;j++)cubeN[j]=1;var k=n,pos=1;for(i=0;i<m;++i){var domain_2i=domain[i][0],domain_2i_1=domain[i][1],e=interpolate(Math.min(Math.max(src[srcOffset+i],domain_2i),domain_2i_1),domain_2i,domain_2i_1,encode[i][0],encode[i][1]),size_i=size[i],e0=(e=Math.min(Math.max(e,0),size_i-1))<size_i-1?Math.floor(e):e-1,n0=e0+1-e,n1=e-e0,offset0=e0*k,offset1=offset0+k;for(j=0;j<cubeVertices;j++)j&pos?(cubeN[j]*=n1,cubeVertex[j]+=offset1):(cubeN[j]*=n0,cubeVertex[j]+=offset0);k*=size_i,pos<<=1}for(j=0;j<n;++j){var rj=0;for(i=0;i<cubeVertices;i++)rj+=samples[cubeVertex[i]+j]*cubeN[i];rj=interpolate(rj,0,1,decode[j][0],decode[j][1]),dest[destOffset+j]=Math.min(Math.max(rj,range[j][0]),range[j][1])}}},constructInterpolated:function(_ref53){_ref53.xref,_ref53.isEvalSupported,_ref53.fn;for(var dict=_ref53.dict,c0=toNumberArray(dict.getArray("C0"))||[0],c1=toNumberArray(dict.getArray("C1"))||[1],n=dict.get("N"),length=c0.length,diff=[],i=0;i<length;++i)diff.push(c1[i]-c0[i]);return[2,c0,diff,n]},constructInterpolatedFromIR:function(_ref54){_ref54.xref,_ref54.isEvalSupported;var IR=_ref54.IR,c0=IR[1],diff=IR[2],n=IR[3],length=diff.length;return function(src,srcOffset,dest,destOffset){for(var x=1===n?src[srcOffset]:Math.pow(src[srcOffset],n),j=0;j<length;++j)dest[destOffset+j]=c0[j]+x*diff[j]}},constructStiched:function(_ref55){var xref=_ref55.xref,isEvalSupported=_ref55.isEvalSupported,dict=(_ref55.fn,_ref55.dict),domain=toNumberArray(dict.getArray("Domain"));if(!domain)throw new _util.FormatError("No domain");if(1!=domain.length/2)throw new _util.FormatError("Bad domain for stiched function");for(var fnRefs=dict.get("Functions"),fns=[],i=0,ii=fnRefs.length;i<ii;++i)fns.push(this.parse({xref:xref,isEvalSupported:isEvalSupported,fn:xref.fetchIfRef(fnRefs[i])}));return[3,domain,toNumberArray(dict.getArray("Bounds")),toNumberArray(dict.getArray("Encode")),fns]},constructStichedFromIR:function(_ref56){_ref56.xref,_ref56.isEvalSupported;var IR=_ref56.IR,domain=IR[1],bounds=IR[2],encode=IR[3],fns=IR[4],tmpBuf=new Float32Array(1);return function(src,srcOffset,dest,destOffset){for(var v=function(v,min,max){return v>max?v=max:v<min&&(v=min),v}(src[srcOffset],domain[0],domain[1]),i=0,ii=bounds.length;i<ii&&!(v<bounds[i]);++i);var dmin=domain[0];i>0&&(dmin=bounds[i-1]);var dmax=domain[1];i<bounds.length&&(dmax=bounds[i]);var rmin=encode[2*i],rmax=encode[2*i+1];tmpBuf[0]=dmin===dmax?rmin:rmin+(v-dmin)*(rmax-rmin)/(dmax-dmin),fns[i](tmpBuf,0,dest,destOffset)}},constructPostScript:function(_ref57){_ref57.xref,_ref57.isEvalSupported;var fn=_ref57.fn,dict=_ref57.dict,domain=toNumberArray(dict.getArray("Domain")),range=toNumberArray(dict.getArray("Range"));if(!domain)throw new _util.FormatError("No domain.");if(!range)throw new _util.FormatError("No range.");var lexer=new _ps_parser.PostScriptLexer(fn);return[4,domain,range,new _ps_parser.PostScriptParser(lexer).parse()]},constructPostScriptFromIR:function(_ref58){_ref58.xref;var isEvalSupported=_ref58.isEvalSupported,IR=_ref58.IR,domain=IR[1],range=IR[2],code=IR[3];if(isEvalSupported&&_util.IsEvalSupportedCached.value){var compiled=(new PostScriptCompiler).compile(code,domain,range);if(compiled)return new Function("src","srcOffset","dest","destOffset",compiled)}(0,_util.info)("Unable to compile PS function");var numOutputs=range.length>>1,numInputs=domain.length>>1,evaluator=new PostScriptEvaluator(code),cache=Object.create(null),cache_available=8192,tmpBuf=new Float32Array(numInputs);return function(src,srcOffset,dest,destOffset){var i,value,key="",input=tmpBuf;for(i=0;i<numInputs;i++)value=src[srcOffset+i],input[i]=value,key+=value+"_";var cachedValue=cache[key];if(void 0===cachedValue){var output=new Float32Array(numOutputs),stack=evaluator.execute(input),stackIndex=stack.length-numOutputs;for(i=0;i<numOutputs;i++){value=stack[stackIndex+i];var bound=range[2*i];(value<bound||value>(bound=range[2*i+1]))&&(value=bound),output[i]=value}cache_available>0&&(cache_available--,cache[key]=output),dest.set(output,destOffset)}else dest.set(cachedValue,destOffset)}}},PostScriptStack=function(){function PostScriptStack(initialStack){this.stack=initialStack?Array.prototype.slice.call(initialStack,0):[]}return PostScriptStack.prototype={push:function(value){if(this.stack.length>=100)throw new Error("PostScript function stack overflow.");this.stack.push(value)},pop:function(){if(this.stack.length<=0)throw new Error("PostScript function stack underflow.");return this.stack.pop()},copy:function(n){if(this.stack.length+n>=100)throw new Error("PostScript function stack overflow.");for(var stack=this.stack,i=stack.length-n,j=n-1;j>=0;j--,i++)stack.push(stack[i])},index:function(n){this.push(this.stack[this.stack.length-n-1])},roll:function(n,p){var i,j,t,stack=this.stack,l=stack.length-n,r=stack.length-1,c=l+(p-Math.floor(p/n)*n);for(i=l,j=r;i<j;i++,j--)t=stack[i],stack[i]=stack[j],stack[j]=t;for(i=l,j=c-1;i<j;i++,j--)t=stack[i],stack[i]=stack[j],stack[j]=t;for(i=c,j=r;i<j;i++,j--)t=stack[i],stack[i]=stack[j],stack[j]=t}},PostScriptStack}(),PostScriptEvaluator=function(){function PostScriptEvaluator(operators){this.operators=operators}return PostScriptEvaluator.prototype={execute:function(initialStack){for(var operator,a,b,stack=new PostScriptStack(initialStack),counter=0,operators=this.operators,length=operators.length;counter<length;)if("number"!=typeof(operator=operators[counter++]))switch(operator){case"jz":b=stack.pop(),(a=stack.pop())||(counter=b);break;case"j":counter=a=stack.pop();break;case"abs":a=stack.pop(),stack.push(Math.abs(a));break;case"add":b=stack.pop(),a=stack.pop(),stack.push(a+b);break;case"and":b=stack.pop(),a=stack.pop(),(0,_util.isBool)(a)&&(0,_util.isBool)(b)?stack.push(a&&b):stack.push(a&b);break;case"atan":a=stack.pop(),stack.push(Math.atan(a));break;case"bitshift":b=stack.pop(),(a=stack.pop())>0?stack.push(a<<b):stack.push(a>>b);break;case"ceiling":a=stack.pop(),stack.push(Math.ceil(a));break;case"copy":a=stack.pop(),stack.copy(a);break;case"cos":a=stack.pop(),stack.push(Math.cos(a));break;case"cvi":a=0|stack.pop(),stack.push(a);break;case"cvr":break;case"div":b=stack.pop(),a=stack.pop(),stack.push(a/b);break;case"dup":stack.copy(1);break;case"eq":b=stack.pop(),a=stack.pop(),stack.push(a===b);break;case"exch":stack.roll(2,1);break;case"exp":b=stack.pop(),a=stack.pop(),stack.push(Math.pow(a,b));break;case"false":stack.push(!1);break;case"floor":a=stack.pop(),stack.push(Math.floor(a));break;case"ge":b=stack.pop(),a=stack.pop(),stack.push(a>=b);break;case"gt":b=stack.pop(),a=stack.pop(),stack.push(a>b);break;case"idiv":b=stack.pop(),a=stack.pop(),stack.push(a/b|0);break;case"index":a=stack.pop(),stack.index(a);break;case"le":b=stack.pop(),a=stack.pop(),stack.push(a<=b);break;case"ln":a=stack.pop(),stack.push(Math.log(a));break;case"log":a=stack.pop(),stack.push(Math.log(a)/Math.LN10);break;case"lt":b=stack.pop(),a=stack.pop(),stack.push(a<b);break;case"mod":b=stack.pop(),a=stack.pop(),stack.push(a%b);break;case"mul":b=stack.pop(),a=stack.pop(),stack.push(a*b);break;case"ne":b=stack.pop(),a=stack.pop(),stack.push(a!==b);break;case"neg":a=stack.pop(),stack.push(-a);break;case"not":a=stack.pop(),(0,_util.isBool)(a)?stack.push(!a):stack.push(~a);break;case"or":b=stack.pop(),a=stack.pop(),(0,_util.isBool)(a)&&(0,_util.isBool)(b)?stack.push(a||b):stack.push(a|b);break;case"pop":stack.pop();break;case"roll":b=stack.pop(),a=stack.pop(),stack.roll(a,b);break;case"round":a=stack.pop(),stack.push(Math.round(a));break;case"sin":a=stack.pop(),stack.push(Math.sin(a));break;case"sqrt":a=stack.pop(),stack.push(Math.sqrt(a));break;case"sub":b=stack.pop(),a=stack.pop(),stack.push(a-b);break;case"true":stack.push(!0);break;case"truncate":a=(a=stack.pop())<0?Math.ceil(a):Math.floor(a),stack.push(a);break;case"xor":b=stack.pop(),a=stack.pop(),(0,_util.isBool)(a)&&(0,_util.isBool)(b)?stack.push(a!==b):stack.push(a^b);break;default:throw new _util.FormatError("Unknown operator ".concat(operator))}else stack.push(operator);return stack.stack}},PostScriptEvaluator}();exports.PostScriptEvaluator=PostScriptEvaluator;var PostScriptCompiler=function(){function AstNode(type){this.type=type}function AstArgument(index,min,max){AstNode.call(this,"args"),this.index=index,this.min=min,this.max=max}function AstLiteral(number){AstNode.call(this,"literal"),this.number=number,this.min=number,this.max=number}function AstBinaryOperation(op,arg1,arg2,min,max){AstNode.call(this,"binary"),this.op=op,this.arg1=arg1,this.arg2=arg2,this.min=min,this.max=max}function AstMin(arg,max){AstNode.call(this,"max"),this.arg=arg,this.min=arg.min,this.max=max}function AstVariable(index,min,max){AstNode.call(this,"var"),this.index=index,this.min=min,this.max=max}function AstVariableDefinition(variable,arg){AstNode.call(this,"definition"),this.variable=variable,this.arg=arg}function ExpressionBuilderVisitor(){this.parts=[]}function buildAddOperation(num1,num2){return"literal"===num2.type&&0===num2.number?num1:"literal"===num1.type&&0===num1.number?num2:"literal"===num2.type&&"literal"===num1.type?new AstLiteral(num1.number+num2.number):new AstBinaryOperation("+",num1,num2,num1.min+num2.min,num1.max+num2.max)}function buildMulOperation(num1,num2){if("literal"===num2.type){if(0===num2.number)return new AstLiteral(0);if(1===num2.number)return num1;if("literal"===num1.type)return new AstLiteral(num1.number*num2.number)}if("literal"===num1.type){if(0===num1.number)return new AstLiteral(0);if(1===num1.number)return num2}return new AstBinaryOperation("*",num1,num2,Math.min(num1.min*num2.min,num1.min*num2.max,num1.max*num2.min,num1.max*num2.max),Math.max(num1.min*num2.min,num1.min*num2.max,num1.max*num2.min,num1.max*num2.max))}function buildSubOperation(num1,num2){if("literal"===num2.type){if(0===num2.number)return num1;if("literal"===num1.type)return new AstLiteral(num1.number-num2.number)}return"binary"===num2.type&&"-"===num2.op&&"literal"===num1.type&&1===num1.number&&"literal"===num2.arg1.type&&1===num2.arg1.number?num2.arg2:new AstBinaryOperation("-",num1,num2,num1.min-num2.max,num1.max-num2.min)}function buildMinOperation(num1,max){return num1.min>=max?new AstLiteral(max):num1.max<=max?num1:new AstMin(num1,max)}function PostScriptCompiler(){}return AstNode.prototype.visit=function(visitor){(0,_util.unreachable)("abstract method")},AstArgument.prototype=Object.create(AstNode.prototype),AstArgument.prototype.visit=function(visitor){visitor.visitArgument(this)},AstLiteral.prototype=Object.create(AstNode.prototype),AstLiteral.prototype.visit=function(visitor){visitor.visitLiteral(this)},AstBinaryOperation.prototype=Object.create(AstNode.prototype),AstBinaryOperation.prototype.visit=function(visitor){visitor.visitBinaryOperation(this)},AstMin.prototype=Object.create(AstNode.prototype),AstMin.prototype.visit=function(visitor){visitor.visitMin(this)},AstVariable.prototype=Object.create(AstNode.prototype),AstVariable.prototype.visit=function(visitor){visitor.visitVariable(this)},AstVariableDefinition.prototype=Object.create(AstNode.prototype),AstVariableDefinition.prototype.visit=function(visitor){visitor.visitVariableDefinition(this)},ExpressionBuilderVisitor.prototype={visitArgument:function(arg){this.parts.push("Math.max(",arg.min,", Math.min(",arg.max,", src[srcOffset + ",arg.index,"]))")},visitVariable:function(variable){this.parts.push("v",variable.index)},visitLiteral:function(literal){this.parts.push(literal.number)},visitBinaryOperation:function(operation){this.parts.push("("),operation.arg1.visit(this),this.parts.push(" ",operation.op," "),operation.arg2.visit(this),this.parts.push(")")},visitVariableDefinition:function(definition){this.parts.push("var "),definition.variable.visit(this),this.parts.push(" = "),definition.arg.visit(this),this.parts.push(";")},visitMin:function(max){this.parts.push("Math.min("),max.arg.visit(this),this.parts.push(", ",max.max,")")},toString:function(){return this.parts.join("")}},PostScriptCompiler.prototype={compile:function(code,domain,range){for(var n,j,num1,num2,ast1,ast2,tmpVar,item,stack=[],instructions=[],inputSize=domain.length>>1,outputSize=range.length>>1,lastRegister=0,_i46=0;_i46<inputSize;_i46++)stack.push(new AstArgument(_i46,domain[2*_i46],domain[2*_i46+1]));for(var _i47=0,ii=code.length;_i47<ii;_i47++)if("number"!=typeof(item=code[_i47]))switch(item){case"add":if(stack.length<2)return null;num2=stack.pop(),num1=stack.pop(),stack.push(buildAddOperation(num1,num2));break;case"cvr":if(stack.length<1)return null;break;case"mul":if(stack.length<2)return null;num2=stack.pop(),num1=stack.pop(),stack.push(buildMulOperation(num1,num2));break;case"sub":if(stack.length<2)return null;num2=stack.pop(),num1=stack.pop(),stack.push(buildSubOperation(num1,num2));break;case"exch":if(stack.length<2)return null;ast1=stack.pop(),ast2=stack.pop(),stack.push(ast1,ast2);break;case"pop":if(stack.length<1)return null;stack.pop();break;case"index":if(stack.length<1)return null;if("literal"!==(num1=stack.pop()).type)return null;if((n=num1.number)<0||!Number.isInteger(n)||stack.length<n)return null;if("literal"===(ast1=stack[stack.length-n-1]).type||"var"===ast1.type){stack.push(ast1);break}tmpVar=new AstVariable(lastRegister++,ast1.min,ast1.max),stack[stack.length-n-1]=tmpVar,stack.push(tmpVar),instructions.push(new AstVariableDefinition(tmpVar,ast1));break;case"dup":if(stack.length<1)return null;if("number"==typeof code[_i47+1]&&"gt"===code[_i47+2]&&code[_i47+3]===_i47+7&&"jz"===code[_i47+4]&&"pop"===code[_i47+5]&&code[_i47+6]===code[_i47+1]){num1=stack.pop(),stack.push(buildMinOperation(num1,code[_i47+1])),_i47+=6;break}if("literal"===(ast1=stack[stack.length-1]).type||"var"===ast1.type){stack.push(ast1);break}tmpVar=new AstVariable(lastRegister++,ast1.min,ast1.max),stack[stack.length-1]=tmpVar,stack.push(tmpVar),instructions.push(new AstVariableDefinition(tmpVar,ast1));break;case"roll":if(stack.length<2)return null;if(num2=stack.pop(),num1=stack.pop(),"literal"!==num2.type||"literal"!==num1.type)return null;if(j=num2.number,(n=num1.number)<=0||!Number.isInteger(n)||!Number.isInteger(j)||stack.length<n)return null;if(0==(j=(j%n+n)%n))break;Array.prototype.push.apply(stack,stack.splice(stack.length-n,n-j));break;default:return null}else stack.push(new AstLiteral(item));if(stack.length!==outputSize)return null;var result=[];return instructions.forEach((function(instruction){var statementBuilder=new ExpressionBuilderVisitor;instruction.visit(statementBuilder),result.push(statementBuilder.toString())})),stack.forEach((function(expr,i){var statementBuilder=new ExpressionBuilderVisitor;expr.visit(statementBuilder);var min=range[2*i],max=range[2*i+1],out=[statementBuilder.toString()];min>expr.min&&(out.unshift("Math.max(",min,", "),out.push(")")),max<expr.max&&(out.unshift("Math.min(",max,", "),out.push(")")),out.unshift("dest[destOffset + ",i,"] = "),out.push(";"),result.push(out.join(""))})),result.join("\n")}},PostScriptCompiler}();exports.PostScriptCompiler=PostScriptCompiler},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.PostScriptParser=exports.PostScriptLexer=void 0;var _util=__w_pdfjs_require__(2),_primitives=__w_pdfjs_require__(5),_core_utils=__w_pdfjs_require__(8),PostScriptParser=function(){function PostScriptParser(lexer){_classCallCheck(this,PostScriptParser),this.lexer=lexer,this.operators=[],this.token=null,this.prev=null}return _createClass(PostScriptParser,[{key:"nextToken",value:function(){this.prev=this.token,this.token=this.lexer.getToken()}},{key:"accept",value:function(type){return this.token.type===type&&(this.nextToken(),!0)}},{key:"expect",value:function(type){if(this.accept(type))return!0;throw new _util.FormatError("Unexpected symbol: found ".concat(this.token.type," expected ").concat(type,"."))}},{key:"parse",value:function(){return this.nextToken(),this.expect(PostScriptTokenTypes.LBRACE),this.parseBlock(),this.expect(PostScriptTokenTypes.RBRACE),this.operators}},{key:"parseBlock",value:function(){for(;;)if(this.accept(PostScriptTokenTypes.NUMBER))this.operators.push(this.prev.value);else if(this.accept(PostScriptTokenTypes.OPERATOR))this.operators.push(this.prev.value);else{if(!this.accept(PostScriptTokenTypes.LBRACE))return;this.parseCondition()}}},{key:"parseCondition",value:function(){var conditionLocation=this.operators.length;if(this.operators.push(null,null),this.parseBlock(),this.expect(PostScriptTokenTypes.RBRACE),this.accept(PostScriptTokenTypes.IF))this.operators[conditionLocation]=this.operators.length,this.operators[conditionLocation+1]="jz";else{if(!this.accept(PostScriptTokenTypes.LBRACE))throw new _util.FormatError("PS Function: error parsing conditional.");var jumpLocation=this.operators.length;this.operators.push(null,null);var endOfTrue=this.operators.length;this.parseBlock(),this.expect(PostScriptTokenTypes.RBRACE),this.expect(PostScriptTokenTypes.IFELSE),this.operators[jumpLocation]=this.operators.length,this.operators[jumpLocation+1]="j",this.operators[conditionLocation]=endOfTrue,this.operators[conditionLocation+1]="jz"}}}]),PostScriptParser}();exports.PostScriptParser=PostScriptParser;var opCache,PostScriptTokenTypes={LBRACE:0,RBRACE:1,NUMBER:2,OPERATOR:3,IF:4,IFELSE:5},PostScriptToken=(opCache=Object.create(null),function(){function PostScriptToken(type,value){_classCallCheck(this,PostScriptToken),this.type=type,this.value=value}return _createClass(PostScriptToken,null,[{key:"getOperator",value:function(op){var opValue=opCache[op];return opValue||(opCache[op]=new PostScriptToken(PostScriptTokenTypes.OPERATOR,op))}},{key:"LBRACE",get:function(){return(0,_util.shadow)(this,"LBRACE",new PostScriptToken(PostScriptTokenTypes.LBRACE,"{"))}},{key:"RBRACE",get:function(){return(0,_util.shadow)(this,"RBRACE",new PostScriptToken(PostScriptTokenTypes.RBRACE,"}"))}},{key:"IF",get:function(){return(0,_util.shadow)(this,"IF",new PostScriptToken(PostScriptTokenTypes.IF,"IF"))}},{key:"IFELSE",get:function(){return(0,_util.shadow)(this,"IFELSE",new PostScriptToken(PostScriptTokenTypes.IFELSE,"IFELSE"))}}]),PostScriptToken}()),PostScriptLexer=function(){function PostScriptLexer(stream){_classCallCheck(this,PostScriptLexer),this.stream=stream,this.nextChar(),this.strBuf=[]}return _createClass(PostScriptLexer,[{key:"nextChar",value:function(){return this.currentChar=this.stream.getByte()}},{key:"getToken",value:function(){for(var comment=!1,ch=this.currentChar;;){if(ch<0)return _primitives.EOF;if(comment)10!==ch&&13!==ch||(comment=!1);else if(37===ch)comment=!0;else if(!(0,_core_utils.isWhiteSpace)(ch))break;ch=this.nextChar()}switch(0|ch){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return new PostScriptToken(PostScriptTokenTypes.NUMBER,this.getNumber());case 123:return this.nextChar(),PostScriptToken.LBRACE;case 125:return this.nextChar(),PostScriptToken.RBRACE}var strBuf=this.strBuf;for(strBuf.length=0,strBuf[0]=String.fromCharCode(ch);(ch=this.nextChar())>=0&&(ch>=65&&ch<=90||ch>=97&&ch<=122);)strBuf.push(String.fromCharCode(ch));var str=strBuf.join("");switch(str.toLowerCase()){case"if":return PostScriptToken.IF;case"ifelse":return PostScriptToken.IFELSE;default:return PostScriptToken.getOperator(str)}}},{key:"getNumber",value:function(){var ch=this.currentChar,strBuf=this.strBuf;for(strBuf.length=0,strBuf[0]=String.fromCharCode(ch);(ch=this.nextChar())>=0&&(ch>=48&&ch<=57||45===ch||46===ch);)strBuf.push(String.fromCharCode(ch));var value=parseFloat(strBuf.join(""));if(isNaN(value))throw new _util.FormatError("Invalid floating point number: ".concat(value));return value}}]),PostScriptLexer}();exports.PostScriptLexer=PostScriptLexer},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.bidi=function(str,startLevel,vertical){var isLTR=!0,strLength=str.length;if(0===strLength||vertical)return createBidiText(str,isLTR,vertical);chars.length=strLength,types.length=strLength;var i,ii,numBidi=0;for(i=0;i<strLength;++i){chars[i]=str.charAt(i);var charCode=str.charCodeAt(i),charType="L";charCode<=255?charType=baseTypes[charCode]:1424<=charCode&&charCode<=1524?charType="R":1536<=charCode&&charCode<=1791?(charType=arabicTypes[255&charCode])||(0,_util.warn)("Bidi: invalid Unicode character "+charCode.toString(16)):1792<=charCode&&charCode<=2220&&(charType="AL"),"R"!==charType&&"AL"!==charType&&"AN"!==charType||numBidi++,types[i]=charType}if(0===numBidi)return createBidiText(str,isLTR=!0);-1===startLevel&&(numBidi/strLength<.3?(isLTR=!0,startLevel=0):(isLTR=!1,startLevel=1));var levels=[];for(i=0;i<strLength;++i)levels[i]=startLevel;var t,e=isOdd(startLevel)?"R":"L",sor=e,eor=sor,lastType=sor;for(i=0;i<strLength;++i)"NSM"===types[i]?types[i]=lastType:lastType=types[i];for(lastType=sor,i=0;i<strLength;++i)"EN"===(t=types[i])?types[i]="AL"===lastType?"AN":"EN":"R"!==t&&"L"!==t&&"AL"!==t||(lastType=t);for(i=0;i<strLength;++i)"AL"===(t=types[i])&&(types[i]="R");for(i=1;i<strLength-1;++i)"ES"===types[i]&&"EN"===types[i-1]&&"EN"===types[i+1]&&(types[i]="EN"),"CS"!==types[i]||"EN"!==types[i-1]&&"AN"!==types[i-1]||types[i+1]!==types[i-1]||(types[i]=types[i-1]);for(i=0;i<strLength;++i)if("EN"===types[i]){var j;for(j=i-1;j>=0&&"ET"===types[j];--j)types[j]="EN";for(j=i+1;j<strLength&&"ET"===types[j];++j)types[j]="EN"}for(i=0;i<strLength;++i)"WS"!==(t=types[i])&&"ES"!==t&&"ET"!==t&&"CS"!==t||(types[i]="ON");for(lastType=sor,i=0;i<strLength;++i)"EN"===(t=types[i])?types[i]="L"===lastType?"L":"EN":"R"!==t&&"L"!==t||(lastType=t);for(i=0;i<strLength;++i)if("ON"===types[i]){var end=findUnequal(types,i+1,"ON"),before=sor;i>0&&(before=types[i-1]);var after=eor;end+1<strLength&&(after=types[end+1]),"L"!==before&&(before="R"),"L"!==after&&(after="R"),before===after&&setValues(types,i,end,before),i=end-1}for(i=0;i<strLength;++i)"ON"===types[i]&&(types[i]=e);for(i=0;i<strLength;++i)t=types[i],isEven(levels[i])?"R"===t?levels[i]+=1:"AN"!==t&&"EN"!==t||(levels[i]+=2):"L"!==t&&"AN"!==t&&"EN"!==t||(levels[i]+=1);var level,highestLevel=-1,lowestOddLevel=99;for(i=0,ii=levels.length;i<ii;++i)level=levels[i],highestLevel<level&&(highestLevel=level),lowestOddLevel>level&&isOdd(level)&&(lowestOddLevel=level);for(level=highestLevel;level>=lowestOddLevel;--level){var start=-1;for(i=0,ii=levels.length;i<ii;++i)levels[i]<level?start>=0&&(reverseValues(chars,start,i),start=-1):start<0&&(start=i);start>=0&&reverseValues(chars,start,levels.length)}for(i=0,ii=chars.length;i<ii;++i){var ch=chars[i];"<"!==ch&&">"!==ch||(chars[i]="")}return createBidiText(chars.join(""),isLTR)};var _util=__w_pdfjs_require__(2),baseTypes=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],arabicTypes=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function isOdd(i){return 0!=(1&i)}function isEven(i){return 0==(1&i)}function findUnequal(arr,start,value){for(var j=start,jj=arr.length;j<jj;++j)if(arr[j]!==value)return j;return j}function setValues(arr,start,end,value){for(var j=start;j<end;++j)arr[j]=value}function reverseValues(arr,start,end){for(var i=start,j=end-1;i<j;++i,--j){var temp=arr[i];arr[i]=arr[j],arr[j]=temp}}function createBidiText(str,isLTR){var vertical=arguments.length>2&&void 0!==arguments[2]&&arguments[2],dir="ltr";return vertical?dir="ttb":isLTR||(dir="rtl"),{str:str,dir:dir}}var chars=[],types=[]},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMetrics=void 0;var _core_utils=__w_pdfjs_require__(8),getMetrics=(0,_core_utils.getLookupTableFactory)((function(t){t.Courier=600,t["Courier-Bold"]=600,t["Courier-BoldOblique"]=600,t["Courier-Oblique"]=600,t.Helvetica=(0,_core_utils.getLookupTableFactory)((function(t){t.space=278,t.exclam=278,t.quotedbl=355,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=667,t.quoteright=222,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=278,t.semicolon=278,t.less=584,t.equal=584,t.greater=584,t.question=556,t.at=1015,t.A=667,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=500,t.K=667,t.L=556,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=278,t.backslash=278,t.bracketright=278,t.asciicircum=469,t.underscore=556,t.quoteleft=222,t.a=556,t.b=556,t.c=500,t.d=556,t.e=556,t.f=278,t.g=556,t.h=556,t.i=222,t.j=222,t.k=500,t.l=222,t.m=833,t.n=556,t.o=556,t.p=556,t.q=556,t.r=333,t.s=500,t.t=278,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=500,t.braceleft=334,t.bar=260,t.braceright=334,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=191,t.quotedblleft=333,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=537,t.bullet=350,t.quotesinglbase=222,t.quotedblbase=333,t.quotedblright=333,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=556,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=222,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=556,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=667,t.aacute=556,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=500,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=500,t.aring=556,t.Ncommaaccent=722,t.lacute=222,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=500,t.scedilla=500,t.iacute=278,t.lozenge=471,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=556,t.Amacron=667,t.rcaron=333,t.ccedilla=500,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=643,t.Umacron=722,t.uring=556,t.threesuperior=333,t.Ograve=778,t.Agrave=667,t.Abreve=667,t.multiply=584,t.uacute=556,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=500,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=260,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=333,t.omacron=556,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=222,t.tcaron=317,t.eogonek=556,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=556,t.zacute=500,t.iogonek=222,t.Oacute=778,t.oacute=556,t.amacron=556,t.sacute=500,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=333,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=556,t.Eogonek=667,t.dcroat=556,t.threequarters=834,t.Scedilla=667,t.lcaron=299,t.Kcommaaccent=667,t.Lacute=556,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=556,t.onehalf=834,t.lessequal=549,t.ocircumflex=556,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=556,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=556,t.Ccaron=722,t.ugrave=556,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=556,t.Rcommaaccent=722,t.Lcommaaccent=556,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=500,t.minus=584,t.Icircumflex=278,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=584,t.odieresis=556,t.udieresis=556,t.notequal=549,t.gcommaaccent=556,t.eth=556,t.zcaron=500,t.ncommaaccent=556,t.onesuperior=333,t.imacron=278,t.Euro=556})),t["Helvetica-Bold"]=(0,_core_utils.getLookupTableFactory)((function(t){t.space=278,t.exclam=333,t.quotedbl=474,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=722,t.quoteright=278,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=333,t.semicolon=333,t.less=584,t.equal=584,t.greater=584,t.question=611,t.at=975,t.A=722,t.B=722,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=556,t.K=722,t.L=611,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=584,t.underscore=556,t.quoteleft=278,t.a=556,t.b=611,t.c=556,t.d=611,t.e=556,t.f=333,t.g=611,t.h=611,t.i=278,t.j=278,t.k=556,t.l=278,t.m=889,t.n=611,t.o=611,t.p=611,t.q=611,t.r=389,t.s=556,t.t=333,t.u=611,t.v=556,t.w=778,t.x=556,t.y=556,t.z=500,t.braceleft=389,t.bar=280,t.braceright=389,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=238,t.quotedblleft=500,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=611,t.fl=611,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=556,t.bullet=350,t.quotesinglbase=278,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=611,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=278,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=611,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=722,t.aacute=556,t.Ucircumflex=722,t.yacute=556,t.scommaaccent=556,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=611,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=556,t.aring=556,t.Ncommaaccent=722,t.lacute=278,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=556,t.scedilla=556,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=611,t.acircumflex=556,t.Amacron=722,t.rcaron=389,t.ccedilla=556,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=743,t.Umacron=722,t.uring=611,t.threesuperior=333,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=584,t.uacute=611,t.Tcaron=611,t.partialdiff=494,t.ydieresis=556,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=556,t.nacute=611,t.umacron=611,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=280,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=611,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=389,t.eogonek=556,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=556,t.zacute=500,t.iogonek=278,t.Oacute=778,t.oacute=611,t.amacron=556,t.sacute=556,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=611,t.twosuperior=333,t.Odieresis=778,t.mu=611,t.igrave=278,t.ohungarumlaut=611,t.Eogonek=667,t.dcroat=611,t.threequarters=834,t.Scedilla=667,t.lcaron=400,t.Kcommaaccent=722,t.Lacute=611,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=611,t.onehalf=834,t.lessequal=549,t.ocircumflex=611,t.ntilde=611,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=611,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=611,t.Ccaron=722,t.ugrave=611,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=611,t.Rcommaaccent=722,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=556,t.minus=584,t.Icircumflex=278,t.ncaron=611,t.tcommaaccent=333,t.logicalnot=584,t.odieresis=611,t.udieresis=611,t.notequal=549,t.gcommaaccent=611,t.eth=611,t.zcaron=500,t.ncommaaccent=611,t.onesuperior=333,t.imacron=278,t.Euro=556})),t["Helvetica-BoldOblique"]=(0,_core_utils.getLookupTableFactory)((function(t){t.space=278,t.exclam=333,t.quotedbl=474,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=722,t.quoteright=278,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=333,t.semicolon=333,t.less=584,t.equal=584,t.greater=584,t.question=611,t.at=975,t.A=722,t.B=722,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=556,t.K=722,t.L=611,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=584,t.underscore=556,t.quoteleft=278,t.a=556,t.b=611,t.c=556,t.d=611,t.e=556,t.f=333,t.g=611,t.h=611,t.i=278,t.j=278,t.k=556,t.l=278,t.m=889,t.n=611,t.o=611,t.p=611,t.q=611,t.r=389,t.s=556,t.t=333,t.u=611,t.v=556,t.w=778,t.x=556,t.y=556,t.z=500,t.braceleft=389,t.bar=280,t.braceright=389,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=238,t.quotedblleft=500,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=611,t.fl=611,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=556,t.bullet=350,t.quotesinglbase=278,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=611,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=278,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=611,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=722,t.aacute=556,t.Ucircumflex=722,t.yacute=556,t.scommaaccent=556,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=611,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=556,t.aring=556,t.Ncommaaccent=722,t.lacute=278,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=556,t.scedilla=556,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=611,t.acircumflex=556,t.Amacron=722,t.rcaron=389,t.ccedilla=556,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=743,t.Umacron=722,t.uring=611,t.threesuperior=333,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=584,t.uacute=611,t.Tcaron=611,t.partialdiff=494,t.ydieresis=556,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=556,t.nacute=611,t.umacron=611,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=280,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=611,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=389,t.eogonek=556,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=556,t.zacute=500,t.iogonek=278,t.Oacute=778,t.oacute=611,t.amacron=556,t.sacute=556,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=611,t.twosuperior=333,t.Odieresis=778,t.mu=611,t.igrave=278,t.ohungarumlaut=611,t.Eogonek=667,t.dcroat=611,t.threequarters=834,t.Scedilla=667,t.lcaron=400,t.Kcommaaccent=722,t.Lacute=611,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=611,t.onehalf=834,t.lessequal=549,t.ocircumflex=611,t.ntilde=611,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=611,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=611,t.Ccaron=722,t.ugrave=611,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=611,t.Rcommaaccent=722,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=556,t.minus=584,t.Icircumflex=278,t.ncaron=611,t.tcommaaccent=333,t.logicalnot=584,t.odieresis=611,t.udieresis=611,t.notequal=549,t.gcommaaccent=611,t.eth=611,t.zcaron=500,t.ncommaaccent=611,t.onesuperior=333,t.imacron=278,t.Euro=556})),t["Helvetica-Oblique"]=(0,_core_utils.getLookupTableFactory)((function(t){t.space=278,t.exclam=278,t.quotedbl=355,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=667,t.quoteright=222,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=278,t.semicolon=278,t.less=584,t.equal=584,t.greater=584,t.question=556,t.at=1015,t.A=667,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=500,t.K=667,t.L=556,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=278,t.backslash=278,t.bracketright=278,t.asciicircum=469,t.underscore=556,t.quoteleft=222,t.a=556,t.b=556,t.c=500,t.d=556,t.e=556,t.f=278,t.g=556,t.h=556,t.i=222,t.j=222,t.k=500,t.l=222,t.m=833,t.n=556,t.o=556,t.p=556,t.q=556,t.r=333,t.s=500,t.t=278,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=500,t.braceleft=334,t.bar=260,t.braceright=334,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=191,t.quotedblleft=333,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=537,t.bullet=350,t.quotesinglbase=222,t.quotedblbase=333,t.quotedblright=333,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=556,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=222,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=556,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=667,t.aacute=556,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=500,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=500,t.aring=556,t.Ncommaaccent=722,t.lacute=222,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=500,t.scedilla=500,t.iacute=278,t.lozenge=471,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=556,t.Amacron=667,t.rcaron=333,t.ccedilla=500,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=643,t.Umacron=722,t.uring=556,t.threesuperior=333,t.Ograve=778,t.Agrave=667,t.Abreve=667,t.multiply=584,t.uacute=556,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=500,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=260,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=333,t.omacron=556,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=222,t.tcaron=317,t.eogonek=556,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=556,t.zacute=500,t.iogonek=222,t.Oacute=778,t.oacute=556,t.amacron=556,t.sacute=500,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=333,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=556,t.Eogonek=667,t.dcroat=556,t.threequarters=834,t.Scedilla=667,t.lcaron=299,t.Kcommaaccent=667,t.Lacute=556,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=556,t.onehalf=834,t.lessequal=549,t.ocircumflex=556,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=556,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=556,t.Ccaron=722,t.ugrave=556,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=556,t.Rcommaaccent=722,t.Lcommaaccent=556,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=500,t.minus=584,t.Icircumflex=278,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=584,t.odieresis=556,t.udieresis=556,t.notequal=549,t.gcommaaccent=556,t.eth=556,t.zcaron=500,t.ncommaaccent=556,t.onesuperior=333,t.imacron=278,t.Euro=556})),t.Symbol=(0,_core_utils.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.universal=713,t.numbersign=500,t.existential=549,t.percent=833,t.ampersand=778,t.suchthat=439,t.parenleft=333,t.parenright=333,t.asteriskmath=500,t.plus=549,t.comma=250,t.minus=549,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=278,t.semicolon=278,t.less=549,t.equal=549,t.greater=549,t.question=444,t.congruent=549,t.Alpha=722,t.Beta=667,t.Chi=722,t.Delta=612,t.Epsilon=611,t.Phi=763,t.Gamma=603,t.Eta=722,t.Iota=333,t.theta1=631,t.Kappa=722,t.Lambda=686,t.Mu=889,t.Nu=722,t.Omicron=722,t.Pi=768,t.Theta=741,t.Rho=556,t.Sigma=592,t.Tau=611,t.Upsilon=690,t.sigma1=439,t.Omega=768,t.Xi=645,t.Psi=795,t.Zeta=611,t.bracketleft=333,t.therefore=863,t.bracketright=333,t.perpendicular=658,t.underscore=500,t.radicalex=500,t.alpha=631,t.beta=549,t.chi=549,t.delta=494,t.epsilon=439,t.phi=521,t.gamma=411,t.eta=603,t.iota=329,t.phi1=603,t.kappa=549,t.lambda=549,t.mu=576,t.nu=521,t.omicron=549,t.pi=549,t.theta=521,t.rho=549,t.sigma=603,t.tau=439,t.upsilon=576,t.omega1=713,t.omega=686,t.xi=493,t.psi=686,t.zeta=494,t.braceleft=480,t.bar=200,t.braceright=480,t.similar=549,t.Euro=750,t.Upsilon1=620,t.minute=247,t.lessequal=549,t.fraction=167,t.infinity=713,t.florin=500,t.club=753,t.diamond=753,t.heart=753,t.spade=753,t.arrowboth=1042,t.arrowleft=987,t.arrowup=603,t.arrowright=987,t.arrowdown=603,t.degree=400,t.plusminus=549,t.second=411,t.greaterequal=549,t.multiply=549,t.proportional=713,t.partialdiff=494,t.bullet=460,t.divide=549,t.notequal=549,t.equivalence=549,t.approxequal=549,t.ellipsis=1e3,t.arrowvertex=603,t.arrowhorizex=1e3,t.carriagereturn=658,t.aleph=823,t.Ifraktur=686,t.Rfraktur=795,t.weierstrass=987,t.circlemultiply=768,t.circleplus=768,t.emptyset=823,t.intersection=768,t.union=768,t.propersuperset=713,t.reflexsuperset=713,t.notsubset=713,t.propersubset=713,t.reflexsubset=713,t.element=713,t.notelement=713,t.angle=768,t.gradient=713,t.registerserif=790,t.copyrightserif=790,t.trademarkserif=890,t.product=823,t.radical=549,t.dotmath=250,t.logicalnot=713,t.logicaland=603,t.logicalor=603,t.arrowdblboth=1042,t.arrowdblleft=987,t.arrowdblup=603,t.arrowdblright=987,t.arrowdbldown=603,t.lozenge=494,t.angleleft=329,t.registersans=790,t.copyrightsans=790,t.trademarksans=786,t.summation=713,t.parenlefttp=384,t.parenleftex=384,t.parenleftbt=384,t.bracketlefttp=384,t.bracketleftex=384,t.bracketleftbt=384,t.bracelefttp=494,t.braceleftmid=494,t.braceleftbt=494,t.braceex=494,t.angleright=329,t.integral=274,t.integraltp=686,t.integralex=686,t.integralbt=686,t.parenrighttp=384,t.parenrightex=384,t.parenrightbt=384,t.bracketrighttp=384,t.bracketrightex=384,t.bracketrightbt=384,t.bracerighttp=494,t.bracerightmid=494,t.bracerightbt=494,t.apple=790})),t["Times-Roman"]=(0,_core_utils.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.quotedbl=408,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=564,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=278,t.semicolon=278,t.less=564,t.equal=564,t.greater=564,t.question=444,t.at=921,t.A=722,t.B=667,t.C=667,t.D=722,t.E=611,t.F=556,t.G=722,t.H=722,t.I=333,t.J=389,t.K=722,t.L=611,t.M=889,t.N=722,t.O=722,t.P=556,t.Q=722,t.R=667,t.S=556,t.T=611,t.U=722,t.V=722,t.W=944,t.X=722,t.Y=722,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=469,t.underscore=500,t.quoteleft=333,t.a=444,t.b=500,t.c=444,t.d=500,t.e=444,t.f=333,t.g=500,t.h=500,t.i=278,t.j=278,t.k=500,t.l=278,t.m=778,t.n=500,t.o=500,t.p=500,t.q=500,t.r=333,t.s=389,t.t=278,t.u=500,t.v=500,t.w=722,t.x=500,t.y=500,t.z=444,t.braceleft=480,t.bar=200,t.braceright=480,t.asciitilde=541,t.exclamdown=333,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=180,t.quotedblleft=444,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=453,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=444,t.quotedblright=444,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=444,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=889,t.ordfeminine=276,t.Lslash=611,t.Oslash=722,t.OE=889,t.ordmasculine=310,t.ae=667,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=500,t.Idieresis=333,t.eacute=444,t.abreve=444,t.uhungarumlaut=500,t.ecaron=444,t.Ydieresis=722,t.divide=564,t.Yacute=722,t.Acircumflex=722,t.aacute=444,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=444,t.Uacute=722,t.uogonek=500,t.Edieresis=611,t.Dcroat=722,t.commaaccent=250,t.copyright=760,t.Emacron=611,t.ccaron=444,t.aring=444,t.Ncommaaccent=722,t.lacute=278,t.agrave=444,t.Tcommaaccent=611,t.Cacute=667,t.atilde=444,t.Edotaccent=611,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=471,t.Rcaron=667,t.Gcommaaccent=722,t.ucircumflex=500,t.acircumflex=444,t.Amacron=722,t.rcaron=333,t.ccedilla=444,t.Zdotaccent=611,t.Thorn=556,t.Omacron=722,t.Racute=667,t.Sacute=556,t.dcaron=588,t.Umacron=722,t.uring=500,t.threesuperior=300,t.Ograve=722,t.Agrave=722,t.Abreve=722,t.multiply=564,t.uacute=500,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=611,t.adieresis=444,t.edieresis=444,t.cacute=444,t.nacute=500,t.umacron=500,t.Ncaron=722,t.Iacute=333,t.plusminus=564,t.brokenbar=200,t.registered=760,t.Gbreve=722,t.Idotaccent=333,t.summation=600,t.Egrave=611,t.racute=333,t.omacron=500,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=326,t.eogonek=444,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=444,t.zacute=444,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=444,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=500,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=611,t.dcroat=500,t.threequarters=750,t.Scedilla=556,t.lcaron=344,t.Kcommaaccent=722,t.Lacute=611,t.trademark=980,t.edotaccent=444,t.Igrave=333,t.Imacron=333,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=500,t.Uhungarumlaut=722,t.Eacute=611,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=500,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=667,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=722,t.zdotaccent=444,t.Ecaron=611,t.Iogonek=333,t.kcommaaccent=500,t.minus=564,t.Icircumflex=333,t.ncaron=500,t.tcommaaccent=278,t.logicalnot=564,t.odieresis=500,t.udieresis=500,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=444,t.ncommaaccent=500,t.onesuperior=300,t.imacron=278,t.Euro=500})),t["Times-Bold"]=(0,_core_utils.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.quotedbl=555,t.numbersign=500,t.dollar=500,t.percent=1e3,t.ampersand=833,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=570,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=570,t.equal=570,t.greater=570,t.question=500,t.at=930,t.A=722,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=778,t.I=389,t.J=500,t.K=778,t.L=667,t.M=944,t.N=722,t.O=778,t.P=611,t.Q=778,t.R=722,t.S=556,t.T=667,t.U=722,t.V=722,t.W=1e3,t.X=722,t.Y=722,t.Z=667,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=581,t.underscore=500,t.quoteleft=333,t.a=500,t.b=556,t.c=444,t.d=556,t.e=444,t.f=333,t.g=500,t.h=556,t.i=278,t.j=333,t.k=556,t.l=278,t.m=833,t.n=556,t.o=500,t.p=556,t.q=556,t.r=444,t.s=389,t.t=333,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=444,t.braceleft=394,t.bar=220,t.braceright=394,t.asciitilde=520,t.exclamdown=333,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=278,t.quotedblleft=500,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=540,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=300,t.Lslash=667,t.Oslash=778,t.OE=1e3,t.ordmasculine=330,t.ae=722,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=556,t.Idieresis=389,t.eacute=444,t.abreve=500,t.uhungarumlaut=556,t.ecaron=444,t.Ydieresis=722,t.divide=570,t.Yacute=722,t.Acircumflex=722,t.aacute=500,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=747,t.Emacron=667,t.ccaron=444,t.aring=500,t.Ncommaaccent=722,t.lacute=278,t.agrave=500,t.Tcommaaccent=667,t.Cacute=722,t.atilde=500,t.Edotaccent=667,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=500,t.Amacron=722,t.rcaron=444,t.ccedilla=444,t.Zdotaccent=667,t.Thorn=611,t.Omacron=778,t.Racute=722,t.Sacute=556,t.dcaron=672,t.Umacron=722,t.uring=556,t.threesuperior=300,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=570,t.uacute=556,t.Tcaron=667,t.partialdiff=494,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=389,t.plusminus=570,t.brokenbar=220,t.registered=747,t.Gbreve=778,t.Idotaccent=389,t.summation=600,t.Egrave=667,t.racute=444,t.omacron=500,t.Zacute=667,t.Zcaron=667,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=416,t.eogonek=444,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=444,t.zacute=444,t.iogonek=278,t.Oacute=778,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=300,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=667,t.dcroat=556,t.threequarters=750,t.Scedilla=556,t.lcaron=394,t.Kcommaaccent=778,t.Lacute=667,t.trademark=1e3,t.edotaccent=444,t.Igrave=389,t.Imacron=389,t.Lcaron=667,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=778,t.degree=400,t.ograve=500,t.Ccaron=722,t.ugrave=556,t.radical=549,t.Dcaron=722,t.rcommaaccent=444,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=722,t.Lcommaaccent=667,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=444,t.Ecaron=667,t.Iogonek=389,t.kcommaaccent=556,t.minus=570,t.Icircumflex=389,t.ncaron=556,t.tcommaaccent=333,t.logicalnot=570,t.odieresis=500,t.udieresis=556,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=444,t.ncommaaccent=556,t.onesuperior=300,t.imacron=278,t.Euro=500})),t["Times-BoldItalic"]=(0,_core_utils.getLookupTableFactory)((function(t){t.space=250,t.exclam=389,t.quotedbl=555,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=570,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=570,t.equal=570,t.greater=570,t.question=500,t.at=832,t.A=667,t.B=667,t.C=667,t.D=722,t.E=667,t.F=667,t.G=722,t.H=778,t.I=389,t.J=500,t.K=667,t.L=611,t.M=889,t.N=722,t.O=722,t.P=611,t.Q=722,t.R=667,t.S=556,t.T=611,t.U=722,t.V=667,t.W=889,t.X=667,t.Y=611,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=570,t.underscore=500,t.quoteleft=333,t.a=500,t.b=500,t.c=444,t.d=500,t.e=444,t.f=333,t.g=500,t.h=556,t.i=278,t.j=278,t.k=500,t.l=278,t.m=778,t.n=556,t.o=500,t.p=500,t.q=500,t.r=389,t.s=389,t.t=278,t.u=556,t.v=444,t.w=667,t.x=500,t.y=444,t.z=389,t.braceleft=348,t.bar=220,t.braceright=348,t.asciitilde=570,t.exclamdown=389,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=278,t.quotedblleft=500,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=500,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=944,t.ordfeminine=266,t.Lslash=611,t.Oslash=722,t.OE=944,t.ordmasculine=300,t.ae=722,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=500,t.Idieresis=389,t.eacute=444,t.abreve=500,t.uhungarumlaut=556,t.ecaron=444,t.Ydieresis=611,t.divide=570,t.Yacute=611,t.Acircumflex=667,t.aacute=500,t.Ucircumflex=722,t.yacute=444,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=747,t.Emacron=667,t.ccaron=444,t.aring=500,t.Ncommaaccent=722,t.lacute=278,t.agrave=500,t.Tcommaaccent=611,t.Cacute=667,t.atilde=500,t.Edotaccent=667,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=494,t.Rcaron=667,t.Gcommaaccent=722,t.ucircumflex=556,t.acircumflex=500,t.Amacron=667,t.rcaron=389,t.ccedilla=444,t.Zdotaccent=611,t.Thorn=611,t.Omacron=722,t.Racute=667,t.Sacute=556,t.dcaron=608,t.Umacron=722,t.uring=556,t.threesuperior=300,t.Ograve=722,t.Agrave=667,t.Abreve=667,t.multiply=570,t.uacute=556,t.Tcaron=611,t.partialdiff=494,t.ydieresis=444,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=389,t.plusminus=570,t.brokenbar=220,t.registered=747,t.Gbreve=722,t.Idotaccent=389,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=500,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=366,t.eogonek=444,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=444,t.zacute=389,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=576,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=667,t.dcroat=500,t.threequarters=750,t.Scedilla=556,t.lcaron=382,t.Kcommaaccent=667,t.Lacute=611,t.trademark=1e3,t.edotaccent=444,t.Igrave=389,t.Imacron=389,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=556,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=667,t.Lcommaaccent=611,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=722,t.zdotaccent=389,t.Ecaron=667,t.Iogonek=389,t.kcommaaccent=500,t.minus=606,t.Icircumflex=389,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=606,t.odieresis=500,t.udieresis=556,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=389,t.ncommaaccent=556,t.onesuperior=300,t.imacron=278,t.Euro=500})),t["Times-Italic"]=(0,_core_utils.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.quotedbl=420,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=675,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=675,t.equal=675,t.greater=675,t.question=500,t.at=920,t.A=611,t.B=611,t.C=667,t.D=722,t.E=611,t.F=611,t.G=722,t.H=722,t.I=333,t.J=444,t.K=667,t.L=556,t.M=833,t.N=667,t.O=722,t.P=611,t.Q=722,t.R=611,t.S=500,t.T=556,t.U=722,t.V=611,t.W=833,t.X=611,t.Y=556,t.Z=556,t.bracketleft=389,t.backslash=278,t.bracketright=389,t.asciicircum=422,t.underscore=500,t.quoteleft=333,t.a=500,t.b=500,t.c=444,t.d=500,t.e=444,t.f=278,t.g=500,t.h=500,t.i=278,t.j=278,t.k=444,t.l=278,t.m=722,t.n=500,t.o=500,t.p=500,t.q=500,t.r=389,t.s=389,t.t=278,t.u=500,t.v=444,t.w=667,t.x=444,t.y=444,t.z=389,t.braceleft=400,t.bar=275,t.braceright=400,t.asciitilde=541,t.exclamdown=389,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=214,t.quotedblleft=556,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=523,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=556,t.quotedblright=556,t.guillemotright=500,t.ellipsis=889,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=889,t.AE=889,t.ordfeminine=276,t.Lslash=556,t.Oslash=722,t.OE=944,t.ordmasculine=310,t.ae=667,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=667,t.germandbls=500,t.Idieresis=333,t.eacute=444,t.abreve=500,t.uhungarumlaut=500,t.ecaron=444,t.Ydieresis=556,t.divide=675,t.Yacute=556,t.Acircumflex=611,t.aacute=500,t.Ucircumflex=722,t.yacute=444,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=500,t.Edieresis=611,t.Dcroat=722,t.commaaccent=250,t.copyright=760,t.Emacron=611,t.ccaron=444,t.aring=500,t.Ncommaaccent=667,t.lacute=278,t.agrave=500,t.Tcommaaccent=556,t.Cacute=667,t.atilde=500,t.Edotaccent=611,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=471,t.Rcaron=611,t.Gcommaaccent=722,t.ucircumflex=500,t.acircumflex=500,t.Amacron=611,t.rcaron=389,t.ccedilla=444,t.Zdotaccent=556,t.Thorn=611,t.Omacron=722,t.Racute=611,t.Sacute=500,t.dcaron=544,t.Umacron=722,t.uring=500,t.threesuperior=300,t.Ograve=722,t.Agrave=611,t.Abreve=611,t.multiply=675,t.uacute=500,t.Tcaron=556,t.partialdiff=476,t.ydieresis=444,t.Nacute=667,t.icircumflex=278,t.Ecircumflex=611,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=500,t.umacron=500,t.Ncaron=667,t.Iacute=333,t.plusminus=675,t.brokenbar=275,t.registered=760,t.Gbreve=722,t.Idotaccent=333,t.summation=600,t.Egrave=611,t.racute=389,t.omacron=500,t.Zacute=556,t.Zcaron=556,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=300,t.eogonek=444,t.Uogonek=722,t.Aacute=611,t.Adieresis=611,t.egrave=444,t.zacute=389,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=500,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=611,t.dcroat=500,t.threequarters=750,t.Scedilla=500,t.lcaron=300,t.Kcommaaccent=667,t.Lacute=556,t.trademark=980,t.edotaccent=444,t.Igrave=333,t.Imacron=333,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=500,t.Uhungarumlaut=722,t.Eacute=611,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=500,t.Scommaaccent=500,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=500,t.radical=453,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=667,t.otilde=500,t.Rcommaaccent=611,t.Lcommaaccent=556,t.Atilde=611,t.Aogonek=611,t.Aring=611,t.Otilde=722,t.zdotaccent=389,t.Ecaron=611,t.Iogonek=333,t.kcommaaccent=444,t.minus=675,t.Icircumflex=333,t.ncaron=500,t.tcommaaccent=278,t.logicalnot=675,t.odieresis=500,t.udieresis=500,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=389,t.ncommaaccent=500,t.onesuperior=300,t.imacron=278,t.Euro=500})),t.ZapfDingbats=(0,_core_utils.getLookupTableFactory)((function(t){t.space=278,t.a1=974,t.a2=961,t.a202=974,t.a3=980,t.a4=719,t.a5=789,t.a119=790,t.a118=791,t.a117=690,t.a11=960,t.a12=939,t.a13=549,t.a14=855,t.a15=911,t.a16=933,t.a105=911,t.a17=945,t.a18=974,t.a19=755,t.a20=846,t.a21=762,t.a22=761,t.a23=571,t.a24=677,t.a25=763,t.a26=760,t.a27=759,t.a28=754,t.a6=494,t.a7=552,t.a8=537,t.a9=577,t.a10=692,t.a29=786,t.a30=788,t.a31=788,t.a32=790,t.a33=793,t.a34=794,t.a35=816,t.a36=823,t.a37=789,t.a38=841,t.a39=823,t.a40=833,t.a41=816,t.a42=831,t.a43=923,t.a44=744,t.a45=723,t.a46=749,t.a47=790,t.a48=792,t.a49=695,t.a50=776,t.a51=768,t.a52=792,t.a53=759,t.a54=707,t.a55=708,t.a56=682,t.a57=701,t.a58=826,t.a59=815,t.a60=789,t.a61=789,t.a62=707,t.a63=687,t.a64=696,t.a65=689,t.a66=786,t.a67=787,t.a68=713,t.a69=791,t.a70=785,t.a71=791,t.a72=873,t.a73=761,t.a74=762,t.a203=762,t.a75=759,t.a204=759,t.a76=892,t.a77=892,t.a78=788,t.a79=784,t.a81=438,t.a82=138,t.a83=277,t.a84=415,t.a97=392,t.a98=392,t.a99=668,t.a100=668,t.a89=390,t.a90=390,t.a93=317,t.a94=317,t.a91=276,t.a92=276,t.a205=509,t.a85=509,t.a206=410,t.a86=410,t.a87=234,t.a88=234,t.a95=334,t.a96=334,t.a101=732,t.a102=544,t.a103=544,t.a104=910,t.a106=667,t.a107=760,t.a108=760,t.a112=776,t.a111=595,t.a110=694,t.a109=626,t.a120=788,t.a121=788,t.a122=788,t.a123=788,t.a124=788,t.a125=788,t.a126=788,t.a127=788,t.a128=788,t.a129=788,t.a130=788,t.a131=788,t.a132=788,t.a133=788,t.a134=788,t.a135=788,t.a136=788,t.a137=788,t.a138=788,t.a139=788,t.a140=788,t.a141=788,t.a142=788,t.a143=788,t.a144=788,t.a145=788,t.a146=788,t.a147=788,t.a148=788,t.a149=788,t.a150=788,t.a151=788,t.a152=788,t.a153=788,t.a154=788,t.a155=788,t.a156=788,t.a157=788,t.a158=788,t.a159=788,t.a160=894,t.a161=838,t.a163=1016,t.a164=458,t.a196=748,t.a165=924,t.a192=748,t.a166=918,t.a167=927,t.a168=928,t.a169=928,t.a170=834,t.a171=873,t.a172=828,t.a173=924,t.a162=924,t.a174=917,t.a175=930,t.a176=931,t.a177=463,t.a178=883,t.a179=836,t.a193=836,t.a180=867,t.a199=867,t.a181=696,t.a200=696,t.a182=874,t.a201=874,t.a183=760,t.a184=946,t.a197=771,t.a185=865,t.a194=771,t.a198=888,t.a186=967,t.a195=888,t.a187=831,t.a188=873,t.a189=927,t.a190=970,t.a191=918}))}));exports.getMetrics=getMetrics},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.MurmurHash3_64=void 0;var _util=__w_pdfjs_require__(2),MurmurHash3_64=function(){function MurmurHash3_64(seed){_classCallCheck(this,MurmurHash3_64),this.h1=seed?4294967295&seed:3285377520,this.h2=seed?4294967295&seed:3285377520}return _createClass(MurmurHash3_64,[{key:"update",value:function(input){var data,length;if((0,_util.isString)(input)){data=new Uint8Array(2*input.length),length=0;for(var _i48=0,ii=input.length;_i48<ii;_i48++){var code=input.charCodeAt(_i48);code<=255?data[length++]=code:(data[length++]=code>>>8,data[length++]=255&code)}}else{if(!(0,_util.isArrayBuffer)(input))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");length=(data=input.slice()).byteLength}for(var blockCounts=length>>2,tailLength=length-4*blockCounts,dataUint32=new Uint32Array(data.buffer,0,blockCounts),k1=0,k2=0,h1=this.h1,h2=this.h2,C1=3432918353,C2=461845907,_i49=0;_i49<blockCounts;_i49++)1&_i49?h1=5*(h1=(h1^=k1=(k1=(k1=(k1=dataUint32[_i49])*C1&4294901760|11601*k1&65535)<<15|k1>>>17)*C2&4294901760|13715*k1&65535)<<13|h1>>>19)+3864292196:h2=5*(h2=(h2^=k2=(k2=(k2=(k2=dataUint32[_i49])*C1&4294901760|11601*k2&65535)<<15|k2>>>17)*C2&4294901760|13715*k2&65535)<<13|h2>>>19)+3864292196;switch(k1=0,tailLength){case 3:k1^=data[4*blockCounts+2]<<16;case 2:k1^=data[4*blockCounts+1]<<8;case 1:k1=(k1=(k1=(k1^=data[4*blockCounts])*C1&4294901760|11601*k1&65535)<<15|k1>>>17)*C2&4294901760|13715*k1&65535,1&blockCounts?h1^=k1:h2^=k1}this.h1=h1,this.h2=h2}},{key:"hexdigest",value:function(){var h1=this.h1,h2=this.h2;h1=3981806797*(h1^=h2>>>1)&4294901760|36045*h1&65535,h1=444984403*(h1^=(h2=4283543511*h2&4294901760|(2950163797*(h2<<16|h1>>>16)&4294901760)>>>16)>>>1)&4294901760|60499*h1&65535;var hex1=((h1^=(h2=3301882366*h2&4294901760|(3120437893*(h2<<16|h1>>>16)&4294901760)>>>16)>>>1)>>>0).toString(16),hex2=(h2>>>0).toString(16);return hex1.padStart(8,"0")+hex2.padStart(8,"0")}}]),MurmurHash3_64}();exports.MurmurHash3_64=MurmurHash3_64},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.OperatorList=void 0;var _util=__w_pdfjs_require__(2),QueueOptimizer=function(){function addState(parentState,pattern,checkFn,iterateFn,processFn){for(var state=parentState,i=0,ii=pattern.length-1;i<ii;i++){var item=pattern[i];state=state[item]||(state[item]=[])}state[pattern[pattern.length-1]]={checkFn:checkFn,iterateFn:iterateFn,processFn:processFn}}var InitialState=[];function QueueOptimizer(queue){this.queue=queue,this.state=null,this.context={iCurr:0,fnArray:queue.fnArray,argsArray:queue.argsArray},this.match=null,this.lastProcessed=0}return addState(InitialState,[_util.OPS.save,_util.OPS.transform,_util.OPS.paintInlineImageXObject,_util.OPS.restore],null,(function(context,i){var fnArray=context.fnArray,pos=(i-(context.iCurr-3))%4;switch(pos){case 0:return fnArray[i]===_util.OPS.save;case 1:return fnArray[i]===_util.OPS.transform;case 2:return fnArray[i]===_util.OPS.paintInlineImageXObject;case 3:return fnArray[i]===_util.OPS.restore}throw new Error("iterateInlineImageGroup - invalid pos: ".concat(pos))}),(function(context,i){var fnArray=context.fnArray,argsArray=context.argsArray,curr=context.iCurr,iFirstSave=curr-3,iFirstTransform=curr-2,iFirstPIIXO=curr-1,count=Math.min(Math.floor((i-iFirstSave)/4),200);if(count<10)return i-(i-iFirstSave)%4;var q,maxX=0,map=[],maxLineHeight=0,currentX=1,currentY=1;for(q=0;q<count;q++){var transform=argsArray[iFirstTransform+(q<<2)],img=argsArray[iFirstPIIXO+(q<<2)][0];currentX+img.width>1e3&&(maxX=Math.max(maxX,currentX),currentY+=maxLineHeight+2,currentX=0,maxLineHeight=0),map.push({transform:transform,x:currentX,y:currentY,w:img.width,h:img.height}),currentX+=img.width+2,maxLineHeight=Math.max(maxLineHeight,img.height)}var imgWidth=Math.max(maxX,currentX)+1,imgHeight=currentY+maxLineHeight+1,imgData=new Uint8ClampedArray(imgWidth*imgHeight*4),imgRowSize=imgWidth<<2;for(q=0;q<count;q++){var data=argsArray[iFirstPIIXO+(q<<2)][0].data,rowSize=map[q].w<<2,dataOffset=0,offset=map[q].x+map[q].y*imgWidth<<2;imgData.set(data.subarray(0,rowSize),offset-imgRowSize);for(var k=0,kk=map[q].h;k<kk;k++)imgData.set(data.subarray(dataOffset,dataOffset+rowSize),offset),dataOffset+=rowSize,offset+=imgRowSize;for(imgData.set(data.subarray(dataOffset-rowSize,dataOffset),offset);offset>=0;)data[offset-4]=data[offset],data[offset-3]=data[offset+1],data[offset-2]=data[offset+2],data[offset-1]=data[offset+3],data[offset+rowSize]=data[offset+rowSize-4],data[offset+rowSize+1]=data[offset+rowSize-3],data[offset+rowSize+2]=data[offset+rowSize-2],data[offset+rowSize+3]=data[offset+rowSize-1],offset-=imgRowSize}return fnArray.splice(iFirstSave,4*count,_util.OPS.paintInlineImageXObjectGroup),argsArray.splice(iFirstSave,4*count,[{width:imgWidth,height:imgHeight,kind:_util.ImageKind.RGBA_32BPP,data:imgData},map]),iFirstSave+1})),addState(InitialState,[_util.OPS.save,_util.OPS.transform,_util.OPS.paintImageMaskXObject,_util.OPS.restore],null,(function(context,i){var fnArray=context.fnArray,pos=(i-(context.iCurr-3))%4;switch(pos){case 0:return fnArray[i]===_util.OPS.save;case 1:return fnArray[i]===_util.OPS.transform;case 2:return fnArray[i]===_util.OPS.paintImageMaskXObject;case 3:return fnArray[i]===_util.OPS.restore}throw new Error("iterateImageMaskGroup - invalid pos: ".concat(pos))}),(function(context,i){var q,fnArray=context.fnArray,argsArray=context.argsArray,curr=context.iCurr,iFirstSave=curr-3,iFirstTransform=curr-2,iFirstPIMXO=curr-1,count=Math.floor((i-iFirstSave)/4);if(count=function(iFirstSave,count,fnArray,argsArray){for(var iFirstPIMXO=iFirstSave+2,i=0;i<count;i++){var arg=argsArray[iFirstPIMXO+4*i],imageMask=1===arg.length&&arg[0];if(!imageMask||1!==imageMask.width||1!==imageMask.height||imageMask.data.length&&(1!==imageMask.data.length||0!==imageMask.data[0]))break;fnArray[iFirstPIMXO+4*i]=_util.OPS.paintSolidColorImageMask}return count-i}(iFirstSave,count,fnArray,argsArray),count<10)return i-(i-iFirstSave)%4;var iTransform,transformArgs,isSameImage=!1,firstPIMXOArg0=argsArray[iFirstPIMXO][0],firstTransformArg0=argsArray[iFirstTransform][0],firstTransformArg1=argsArray[iFirstTransform][1],firstTransformArg2=argsArray[iFirstTransform][2],firstTransformArg3=argsArray[iFirstTransform][3];if(firstTransformArg1===firstTransformArg2){isSameImage=!0,iTransform=iFirstTransform+4;var iPIMXO=iFirstPIMXO+4;for(q=1;q<count;q++,iTransform+=4,iPIMXO+=4)if(transformArgs=argsArray[iTransform],argsArray[iPIMXO][0]!==firstPIMXOArg0||transformArgs[0]!==firstTransformArg0||transformArgs[1]!==firstTransformArg1||transformArgs[2]!==firstTransformArg2||transformArgs[3]!==firstTransformArg3){q<10?isSameImage=!1:count=q;break}}if(isSameImage){count=Math.min(count,1e3);var positions=new Float32Array(2*count);for(iTransform=iFirstTransform,q=0;q<count;q++,iTransform+=4)transformArgs=argsArray[iTransform],positions[q<<1]=transformArgs[4],positions[1+(q<<1)]=transformArgs[5];fnArray.splice(iFirstSave,4*count,_util.OPS.paintImageMaskXObjectRepeat),argsArray.splice(iFirstSave,4*count,[firstPIMXOArg0,firstTransformArg0,firstTransformArg1,firstTransformArg2,firstTransformArg3,positions])}else{count=Math.min(count,100);var images=[];for(q=0;q<count;q++){transformArgs=argsArray[iFirstTransform+(q<<2)];var maskParams=argsArray[iFirstPIMXO+(q<<2)][0];images.push({data:maskParams.data,width:maskParams.width,height:maskParams.height,transform:transformArgs})}fnArray.splice(iFirstSave,4*count,_util.OPS.paintImageMaskXObjectGroup),argsArray.splice(iFirstSave,4*count,[images])}return iFirstSave+1})),addState(InitialState,[_util.OPS.save,_util.OPS.transform,_util.OPS.paintImageXObject,_util.OPS.restore],(function(context){var argsArray=context.argsArray,iFirstTransform=context.iCurr-2;return 0===argsArray[iFirstTransform][1]&&0===argsArray[iFirstTransform][2]}),(function(context,i){var fnArray=context.fnArray,argsArray=context.argsArray,pos=(i-(context.iCurr-3))%4;switch(pos){case 0:return fnArray[i]===_util.OPS.save;case 1:if(fnArray[i]!==_util.OPS.transform)return!1;var iFirstTransform=context.iCurr-2,firstTransformArg0=argsArray[iFirstTransform][0],firstTransformArg3=argsArray[iFirstTransform][3];return argsArray[i][0]===firstTransformArg0&&0===argsArray[i][1]&&0===argsArray[i][2]&&argsArray[i][3]===firstTransformArg3;case 2:if(fnArray[i]!==_util.OPS.paintImageXObject)return!1;var firstPIXOArg0=argsArray[context.iCurr-1][0];return argsArray[i][0]===firstPIXOArg0;case 3:return fnArray[i]===_util.OPS.restore}throw new Error("iterateImageGroup - invalid pos: ".concat(pos))}),(function(context,i){var fnArray=context.fnArray,argsArray=context.argsArray,curr=context.iCurr,iFirstSave=curr-3,iFirstTransform=curr-2,firstPIXOArg0=argsArray[curr-1][0],firstTransformArg0=argsArray[iFirstTransform][0],firstTransformArg3=argsArray[iFirstTransform][3],count=Math.min(Math.floor((i-iFirstSave)/4),1e3);if(count<3)return i-(i-iFirstSave)%4;for(var positions=new Float32Array(2*count),iTransform=iFirstTransform,q=0;q<count;q++,iTransform+=4){var transformArgs=argsArray[iTransform];positions[q<<1]=transformArgs[4],positions[1+(q<<1)]=transformArgs[5]}var args=[firstPIXOArg0,firstTransformArg0,firstTransformArg3,positions];return fnArray.splice(iFirstSave,4*count,_util.OPS.paintImageXObjectRepeat),argsArray.splice(iFirstSave,4*count,args),iFirstSave+1})),addState(InitialState,[_util.OPS.beginText,_util.OPS.setFont,_util.OPS.setTextMatrix,_util.OPS.showText,_util.OPS.endText],null,(function(context,i){var fnArray=context.fnArray,argsArray=context.argsArray,pos=(i-(context.iCurr-4))%5;switch(pos){case 0:return fnArray[i]===_util.OPS.beginText;case 1:return fnArray[i]===_util.OPS.setFont;case 2:return fnArray[i]===_util.OPS.setTextMatrix;case 3:if(fnArray[i]!==_util.OPS.showText)return!1;var iFirstSetFont=context.iCurr-3,firstSetFontArg0=argsArray[iFirstSetFont][0],firstSetFontArg1=argsArray[iFirstSetFont][1];return argsArray[i][0]===firstSetFontArg0&&argsArray[i][1]===firstSetFontArg1;case 4:return fnArray[i]===_util.OPS.endText}throw new Error("iterateShowTextGroup - invalid pos: ".concat(pos))}),(function(context,i){var fnArray=context.fnArray,argsArray=context.argsArray,curr=context.iCurr,iFirstBeginText=curr-4,iFirstSetFont=curr-3,iFirstSetTextMatrix=curr-2,iFirstShowText=curr-1,iFirstEndText=curr,firstSetFontArg0=argsArray[iFirstSetFont][0],firstSetFontArg1=argsArray[iFirstSetFont][1],count=Math.min(Math.floor((i-iFirstBeginText)/5),1e3);if(count<3)return i-(i-iFirstBeginText)%5;var iFirst=iFirstBeginText;iFirstBeginText>=4&&fnArray[iFirstBeginText-4]===fnArray[iFirstSetFont]&&fnArray[iFirstBeginText-3]===fnArray[iFirstSetTextMatrix]&&fnArray[iFirstBeginText-2]===fnArray[iFirstShowText]&&fnArray[iFirstBeginText-1]===fnArray[iFirstEndText]&&argsArray[iFirstBeginText-4][0]===firstSetFontArg0&&argsArray[iFirstBeginText-4][1]===firstSetFontArg1&&(count++,iFirst-=5);for(var iEndText=iFirst+4,q=1;q<count;q++)fnArray.splice(iEndText,3),argsArray.splice(iEndText,3),iEndText+=2;return iEndText+1})),QueueOptimizer.prototype={_optimize:function(){var fnArray=this.queue.fnArray,i=this.lastProcessed,ii=fnArray.length,state=this.state,match=this.match;if(state||match||i+1!==ii||InitialState[fnArray[i]]){for(var context=this.context;i<ii;){if(match){if((0,match.iterateFn)(context,i)){i++;continue}if(i=(0,match.processFn)(context,i+1),match=null,state=null,i>=(ii=fnArray.length))break}(state=(state||InitialState)[fnArray[i]])&&!Array.isArray(state)?(context.iCurr=i,i++,!state.checkFn||(0,state.checkFn)(context)?(match=state,state=null):state=null):i++}this.state=state,this.match=match,this.lastProcessed=i}else this.lastProcessed=ii},push:function(fn,args){this.queue.fnArray.push(fn),this.queue.argsArray.push(args),this._optimize()},flush:function(){for(;this.match;){var length=this.queue.fnArray.length;this.lastProcessed=(0,this.match.processFn)(this.context,length),this.match=null,this.state=null,this._optimize()}},reset:function(){this.state=null,this.match=null,this.lastProcessed=0}},QueueOptimizer}(),NullOptimizer=function(){function NullOptimizer(queue){this.queue=queue}return NullOptimizer.prototype={push:function(fn,args){this.queue.fnArray.push(fn),this.queue.argsArray.push(args)},flush:function(){},reset:function(){}},NullOptimizer}(),OperatorList=function(){function OperatorList(intent,streamSink){this._streamSink=streamSink,this.fnArray=[],this.argsArray=[],this.optimizer=streamSink&&"oplist"!==intent?new QueueOptimizer(this):new NullOptimizer(this),this.dependencies=new Set,this._totalLength=0,this.weight=0,this._resolved=streamSink?null:Promise.resolve()}return OperatorList.prototype={get length(){return this.argsArray.length},get ready(){return this._resolved||this._streamSink.ready},get totalLength(){return this._totalLength+this.length},addOp:function(fn,args){this.optimizer.push(fn,args),this.weight++,this._streamSink&&(this.weight>=1e3||this.weight>=995&&(fn===_util.OPS.restore||fn===_util.OPS.endText))&&this.flush()},addDependency:function(dependency){this.dependencies.has(dependency)||(this.dependencies.add(dependency),this.addOp(_util.OPS.dependency,[dependency]))},addDependencies:function(dependencies){var _step49,_iterator49=_createForOfIteratorHelper(dependencies);try{for(_iterator49.s();!(_step49=_iterator49.n()).done;){var dependency=_step49.value;this.addDependency(dependency)}}catch(err){_iterator49.e(err)}finally{_iterator49.f()}},addOpList:function(opList){if(opList instanceof OperatorList){var _step50,_iterator50=_createForOfIteratorHelper(opList.dependencies);try{for(_iterator50.s();!(_step50=_iterator50.n()).done;){var dependency=_step50.value;this.dependencies.add(dependency)}}catch(err){_iterator50.e(err)}finally{_iterator50.f()}for(var i=0,ii=opList.length;i<ii;i++)this.addOp(opList.fnArray[i],opList.argsArray[i])}else(0,_util.warn)('addOpList - ignoring invalid "opList" parameter.')},getIR:function(){return{fnArray:this.fnArray,argsArray:this.argsArray,length:this.length}},get _transfers(){for(var transfers=[],fnArray=this.fnArray,argsArray=this.argsArray,length=this.length,_i50=0;_i50<length;_i50++)switch(fnArray[_i50]){case _util.OPS.paintInlineImageXObject:case _util.OPS.paintInlineImageXObjectGroup:case _util.OPS.paintImageMaskXObject:var arg=argsArray[_i50][0];arg.cached||transfers.push(arg.data.buffer)}return transfers},flush:function(){var lastChunk=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.optimizer.flush();var length=this.length;this._totalLength+=length,this._streamSink.enqueue({fnArray:this.fnArray,argsArray:this.argsArray,lastChunk:lastChunk,length:length},1,this._transfers),this.dependencies.clear(),this.fnArray.length=0,this.argsArray.length=0,this.weight=0,this.optimizer.reset()}},OperatorList}();exports.OperatorList=OperatorList},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFImage=void 0;var _util=__w_pdfjs_require__(2),_primitives=__w_pdfjs_require__(5),_colorspace=__w_pdfjs_require__(23),_stream=__w_pdfjs_require__(12),_jpeg_stream=__w_pdfjs_require__(18),_jpx=__w_pdfjs_require__(21);function decodeAndClamp(value,addend,coefficient,max){return(value=addend+value*coefficient)<0?value=0:value>max&&(value=max),value}function resizeImageMask(src,bpc,w1,h1,w2,h2){var dest,length=w2*h2;dest=bpc<=8?new Uint8Array(length):bpc<=16?new Uint16Array(length):new Uint32Array(length);var i,j,py,oldIndex,xRatio=w1/w2,yRatio=h1/h2,newIndex=0,xScaled=new Uint16Array(w2),w1Scanline=w1;for(i=0;i<w2;i++)xScaled[i]=Math.floor(i*xRatio);for(i=0;i<h2;i++)for(py=Math.floor(i*yRatio)*w1Scanline,j=0;j<w2;j++)oldIndex=py+xScaled[j],dest[newIndex++]=src[oldIndex];return dest}var PDFImage=function(){function PDFImage(_ref59){var xref=_ref59.xref,res=_ref59.res,image=_ref59.image,_ref59$isInline=_ref59.isInline,isInline=void 0!==_ref59$isInline&&_ref59$isInline,_ref59$smask=_ref59.smask,smask=void 0===_ref59$smask?null:_ref59$smask,_ref59$mask=_ref59.mask,mask=void 0===_ref59$mask?null:_ref59$mask,_ref59$isMask=_ref59.isMask,isMask=void 0!==_ref59$isMask&&_ref59$isMask,pdfFunctionFactory=_ref59.pdfFunctionFactory,localColorSpaceCache=_ref59.localColorSpaceCache;_classCallCheck(this,PDFImage),this.image=image;var dict=image.dict,filter=dict.get("Filter");if((0,_primitives.isName)(filter))switch(filter.name){case"JPXDecode":var jpxImage=new _jpx.JpxImage;jpxImage.parseImageProperties(image.stream),image.stream.reset(),image.width=jpxImage.width,image.height=jpxImage.height,image.bitsPerComponent=jpxImage.bitsPerComponent,image.numComps=jpxImage.componentsCount;break;case"JBIG2Decode":image.bitsPerComponent=1,image.numComps=1}var width=dict.get("Width","W"),height=dict.get("Height","H");if(Number.isInteger(image.width)&&image.width>0&&Number.isInteger(image.height)&&image.height>0&&(image.width!==width||image.height!==height)&&((0,_util.warn)("PDFImage - using the Width/Height of the image data, rather than the image dictionary."),width=image.width,height=image.height),width<1||height<1)throw new _util.FormatError("Invalid image width: ".concat(width," or height: ").concat(height));this.width=width,this.height=height,this.interpolate=dict.get("Interpolate","I")||!1,this.imageMask=dict.get("ImageMask","IM")||!1,this.matte=dict.get("Matte")||!1;var bitsPerComponent=image.bitsPerComponent;if(!bitsPerComponent&&!(bitsPerComponent=dict.get("BitsPerComponent","BPC"))){if(!this.imageMask)throw new _util.FormatError("Bits per component missing in image: ".concat(this.imageMask));bitsPerComponent=1}if(this.bpc=bitsPerComponent,!this.imageMask){var colorSpace=dict.getRaw("ColorSpace")||dict.getRaw("CS");if(!colorSpace)switch((0,_util.info)("JPX images (which do not require color spaces)"),image.numComps){case 1:colorSpace=_primitives.Name.get("DeviceGray");break;case 3:colorSpace=_primitives.Name.get("DeviceRGB");break;case 4:colorSpace=_primitives.Name.get("DeviceCMYK");break;default:throw new Error("JPX images with ".concat(image.numComps," ")+"color components not supported.")}this.colorSpace=_colorspace.ColorSpace.parse({cs:colorSpace,xref:xref,resources:isInline?res:null,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache}),this.numComps=this.colorSpace.numComps}if(this.decode=dict.getArray("Decode","D"),this.needsDecode=!1,this.decode&&(this.colorSpace&&!this.colorSpace.isDefaultDecode(this.decode,bitsPerComponent)||isMask&&!_colorspace.ColorSpace.isDefaultDecode(this.decode,1))){this.needsDecode=!0;var max=(1<<bitsPerComponent)-1;this.decodeCoefficients=[],this.decodeAddends=[];for(var isIndexed=this.colorSpace&&"Indexed"===this.colorSpace.name,i=0,j=0;i<this.decode.length;i+=2,++j){var dmin=this.decode[i],dmax=this.decode[i+1];this.decodeCoefficients[j]=isIndexed?(dmax-dmin)/max:dmax-dmin,this.decodeAddends[j]=isIndexed?dmin:max*dmin}}smask?this.smask=new PDFImage({xref:xref,res:res,image:smask,isInline:isInline,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache}):mask&&((0,_primitives.isStream)(mask)?mask.dict.get("ImageMask","IM")?this.mask=new PDFImage({xref:xref,res:res,image:mask,isInline:isInline,isMask:!0,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache}):(0,_util.warn)("Ignoring /Mask in image without /ImageMask."):this.mask=mask)}var _buildImage;return _createClass(PDFImage,[{key:"drawWidth",get:function(){return Math.max(this.width,this.smask&&this.smask.width||0,this.mask&&this.mask.width||0)}},{key:"drawHeight",get:function(){return Math.max(this.height,this.smask&&this.smask.height||0,this.mask&&this.mask.height||0)}},{key:"decodeBuffer",value:function(buffer){var i,ii,bpc=this.bpc,numComps=this.numComps,decodeAddends=this.decodeAddends,decodeCoefficients=this.decodeCoefficients,max=(1<<bpc)-1;if(1!==bpc){var index=0;for(i=0,ii=this.width*this.height;i<ii;i++)for(var j=0;j<numComps;j++)buffer[index]=decodeAndClamp(buffer[index],decodeAddends[j],decodeCoefficients[j],max),index++}else for(i=0,ii=buffer.length;i<ii;i++)buffer[i]=+!buffer[i]}},{key:"getComponents",value:function(buffer){var bpc=this.bpc;if(8===bpc)return buffer;var output,width=this.width,height=this.height,numComps=this.numComps,length=width*height*numComps,bufferPos=0;output=bpc<=8?new Uint8Array(length):bpc<=16?new Uint16Array(length):new Uint32Array(length);var ii,buf,rowComps=width*numComps,max=(1<<bpc)-1,i=0;if(1===bpc)for(var mask,loop1End,loop2End,j=0;j<height;j++){for(loop1End=i+(-8&rowComps),loop2End=i+rowComps;i<loop1End;)buf=buffer[bufferPos++],output[i]=buf>>7&1,output[i+1]=buf>>6&1,output[i+2]=buf>>5&1,output[i+3]=buf>>4&1,output[i+4]=buf>>3&1,output[i+5]=buf>>2&1,output[i+6]=buf>>1&1,output[i+7]=1&buf,i+=8;if(i<loop2End)for(buf=buffer[bufferPos++],mask=128;i<loop2End;)output[i++]=+!!(buf&mask),mask>>=1}else{var bits=0;for(buf=0,i=0,ii=length;i<ii;++i){for(i%rowComps==0&&(buf=0,bits=0);bits<bpc;)buf=buf<<8|buffer[bufferPos++],bits+=8;var remainingBits=bits-bpc,value=buf>>remainingBits;value<0?value=0:value>max&&(value=max),output[i]=value,buf&=(1<<remainingBits)-1,bits=remainingBits}}return output}},{key:"fillOpacity",value:function(rgbaBuf,width,height,actualHeight,image){var alphaBuf,sw,sh,i,ii,j,smask=this.smask,mask=this.mask;if(smask)sw=smask.width,sh=smask.height,alphaBuf=new Uint8ClampedArray(sw*sh),smask.fillGrayBuffer(alphaBuf),sw===width&&sh===height||(alphaBuf=resizeImageMask(alphaBuf,smask.bpc,sw,sh,width,height));else if(mask)if(mask instanceof PDFImage){for(sw=mask.width,sh=mask.height,alphaBuf=new Uint8ClampedArray(sw*sh),mask.numComps=1,mask.fillGrayBuffer(alphaBuf),i=0,ii=sw*sh;i<ii;++i)alphaBuf[i]=255-alphaBuf[i];sw===width&&sh===height||(alphaBuf=resizeImageMask(alphaBuf,mask.bpc,sw,sh,width,height))}else{if(!Array.isArray(mask))throw new _util.FormatError("Unknown mask format.");alphaBuf=new Uint8ClampedArray(width*height);var numComps=this.numComps;for(i=0,ii=width*height;i<ii;++i){var opacity=0,imageOffset=i*numComps;for(j=0;j<numComps;++j){var color=image[imageOffset+j],maskOffset=2*j;if(color<mask[maskOffset]||color>mask[maskOffset+1]){opacity=255;break}}alphaBuf[i]=opacity}}if(alphaBuf)for(i=0,j=3,ii=width*actualHeight;i<ii;++i,j+=4)rgbaBuf[j]=alphaBuf[i];else for(i=0,j=3,ii=width*actualHeight;i<ii;++i,j+=4)rgbaBuf[j]=255}},{key:"undoPreblend",value:function(buffer,width,height){var matte=this.smask&&this.smask.matte;if(matte)for(var matteRgb=this.colorSpace.getRgb(matte,0),matteR=matteRgb[0],matteG=matteRgb[1],matteB=matteRgb[2],length=width*height*4,i=0;i<length;i+=4){var alpha=buffer[i+3];if(0!==alpha){var k=255/alpha;buffer[i]=(buffer[i]-matteR)*k+matteR,buffer[i+1]=(buffer[i+1]-matteG)*k+matteG,buffer[i+2]=(buffer[i+2]-matteB)*k+matteB}else buffer[i]=255,buffer[i+1]=255,buffer[i+2]=255}}},{key:"createImageData",value:function(){var imgArray,forceRGBA=arguments.length>0&&void 0!==arguments[0]&&arguments[0],drawWidth=this.drawWidth,drawHeight=this.drawHeight,imgData={width:drawWidth,height:drawHeight,kind:0,data:null},numComps=this.numComps,originalWidth=this.width,originalHeight=this.height,bpc=this.bpc,rowBytes=originalWidth*numComps*bpc+7>>3;if(!forceRGBA){var kind;if("DeviceGray"===this.colorSpace.name&&1===bpc?kind=_util.ImageKind.GRAYSCALE_1BPP:"DeviceRGB"!==this.colorSpace.name||8!==bpc||this.needsDecode||(kind=_util.ImageKind.RGB_24BPP),kind&&!this.smask&&!this.mask&&drawWidth===originalWidth&&drawHeight===originalHeight){if(imgData.kind=kind,imgArray=this.getImageBytes(originalHeight*rowBytes),this.image instanceof _stream.DecodeStream)imgData.data=imgArray;else{var newArray=new Uint8ClampedArray(imgArray.length);newArray.set(imgArray),imgData.data=newArray}if(this.needsDecode){(0,_util.assert)(kind===_util.ImageKind.GRAYSCALE_1BPP,"PDFImage.createImageData: The image must be grayscale.");for(var buffer=imgData.data,i=0,ii=buffer.length;i<ii;i++)buffer[i]^=255}return imgData}if(this.image instanceof _jpeg_stream.JpegStream&&!this.smask&&!this.mask){var imageLength=originalHeight*rowBytes;switch(this.colorSpace.name){case"DeviceGray":imageLength*=3;case"DeviceRGB":case"DeviceCMYK":return imgData.kind=_util.ImageKind.RGB_24BPP,imgData.data=this.getImageBytes(imageLength,drawWidth,drawHeight,!0),imgData}}}var alpha01,maybeUndoPreblend,actualHeight=0|(imgArray=this.getImageBytes(originalHeight*rowBytes)).length/rowBytes*drawHeight/originalHeight,comps=this.getComponents(imgArray);return forceRGBA||this.smask||this.mask?(imgData.kind=_util.ImageKind.RGBA_32BPP,imgData.data=new Uint8ClampedArray(drawWidth*drawHeight*4),alpha01=1,maybeUndoPreblend=!0,this.fillOpacity(imgData.data,drawWidth,drawHeight,actualHeight,comps)):(imgData.kind=_util.ImageKind.RGB_24BPP,imgData.data=new Uint8ClampedArray(drawWidth*drawHeight*3),alpha01=0,maybeUndoPreblend=!1),this.needsDecode&&this.decodeBuffer(comps),this.colorSpace.fillRgb(imgData.data,originalWidth,originalHeight,drawWidth,drawHeight,actualHeight,bpc,comps,alpha01),maybeUndoPreblend&&this.undoPreblend(imgData.data,drawWidth,actualHeight),imgData}},{key:"fillGrayBuffer",value:function(buffer){var numComps=this.numComps;if(1!==numComps)throw new _util.FormatError("Reading gray scale from a color image: ".concat(numComps));var i,length,width=this.width,height=this.height,bpc=this.bpc,rowBytes=width*numComps*bpc+7>>3,imgArray=this.getImageBytes(height*rowBytes),comps=this.getComponents(imgArray);if(1!==bpc){this.needsDecode&&this.decodeBuffer(comps),length=width*height;var scale=255/((1<<bpc)-1);for(i=0;i<length;++i)buffer[i]=scale*comps[i]}else if(length=width*height,this.needsDecode)for(i=0;i<length;++i)buffer[i]=comps[i]-1&255;else for(i=0;i<length;++i)buffer[i]=255&-comps[i]}},{key:"getImageBytes",value:function(length,drawWidth,drawHeight){var forceRGB=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.image.reset(),this.image.drawWidth=drawWidth||this.width,this.image.drawHeight=drawHeight||this.height,this.image.forceRGB=!!forceRGB,this.image.getBytes(length,!0)}}],[{key:"buildImage",value:(_buildImage=_asyncToGenerator(regeneratorRuntime.mark((function _callee28(_ref60){var xref,res,image,_ref60$isInline,isInline,pdfFunctionFactory,localColorSpaceCache,imageData,smaskData,maskData,smask,mask;return regeneratorRuntime.wrap((function(_context28){for(;;)switch(_context28.prev=_context28.next){case 0:return xref=_ref60.xref,res=_ref60.res,image=_ref60.image,_ref60$isInline=_ref60.isInline,isInline=void 0!==_ref60$isInline&&_ref60$isInline,pdfFunctionFactory=_ref60.pdfFunctionFactory,localColorSpaceCache=_ref60.localColorSpaceCache,imageData=image,smaskData=null,maskData=null,smask=image.dict.get("SMask"),mask=image.dict.get("Mask"),smask?smaskData=smask:mask&&((0,_primitives.isStream)(mask)||Array.isArray(mask)?maskData=mask:(0,_util.warn)("Unsupported mask format.")),_context28.abrupt("return",new PDFImage({xref:xref,res:res,image:imageData,isInline:isInline,smask:smaskData,mask:maskData,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache}));case 8:case"end":return _context28.stop()}}),_callee28)}))),function(_x46){return _buildImage.apply(this,arguments)})},{key:"createMask",value:function(_ref61){var data,i,imgArray=_ref61.imgArray,width=_ref61.width,height=_ref61.height,imageIsFromDecodeStream=_ref61.imageIsFromDecodeStream,inverseDecode=_ref61.inverseDecode,computedLength=(width+7>>3)*height,actualLength=imgArray.byteLength;if(!imageIsFromDecodeStream||inverseDecode&&computedLength!==actualLength)if(inverseDecode)for((data=new Uint8ClampedArray(computedLength)).set(imgArray),i=actualLength;i<computedLength;i++)data[i]=255;else(data=new Uint8ClampedArray(actualLength)).set(imgArray);else data=imgArray;if(inverseDecode)for(i=0;i<actualLength;i++)data[i]^=255;return{data:data,width:width,height:height}}}]),PDFImage}();exports.PDFImage=PDFImage},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.incrementalUpdate=function(_ref62){var originalData=_ref62.originalData,xrefInfo=_ref62.xrefInfo,newRefs=_ref62.newRefs,_ref62$xref=_ref62.xref,xref=void 0===_ref62$xref?null:_ref62$xref,_ref62$datasetsRef=_ref62.datasetsRef;!function(datasetsRef,newRefs,xref){if(null!==datasetsRef&&null!==xref){var _step53,datasets=xref.fetchIfRef(datasetsRef),str=(0,_util.bytesToString)(datasets.getBytes()),xml=new _xml_parser.SimpleXMLParser({hasAttributes:!0}).parseFromString(str),_iterator53=_createForOfIteratorHelper(newRefs);try{for(_iterator53.s();!(_step53=_iterator53.n()).done;){var xfa=_step53.value.xfa;if(xfa){var path=xfa.path,value=xfa.value;if(path){var node=xml.documentElement.searchNode((0,_core_utils.parseXFAPath)(path),0);node?node.childNodes=[new _xml_parser.SimpleDOMNode("#text",value)]:(0,_util.warn)("Node not found for path: ".concat(path))}}}}catch(err){_iterator53.e(err)}finally{_iterator53.f()}var buffer=[];xml.documentElement.dump(buffer);var updatedXml=buffer.join(""),encrypt=xref.encrypt;encrypt&&(updatedXml=encrypt.createCipherTransform(datasetsRef.num,datasetsRef.gen).encryptString(updatedXml));var data="".concat(datasetsRef.num," ").concat(datasetsRef.gen," obj\n")+"<< /Type /EmbeddedFile /Length ".concat(updatedXml.length,">>\nstream\n")+updatedXml+"\nendstream\nendobj\n";newRefs.push({ref:datasetsRef,data:data})}}(void 0===_ref62$datasetsRef?null:_ref62$datasetsRef,newRefs,xref);var buffer,baseOffset,newXref=new _primitives.Dict(null),refForXrefTable=xrefInfo.newRef,lastByte=originalData[originalData.length-1];10===lastByte||13===lastByte?(buffer=[],baseOffset=originalData.length):(buffer=["\n"],baseOffset=originalData.length+1),newXref.set("Size",refForXrefTable.num+1),newXref.set("Prev",xrefInfo.startXRef),newXref.set("Type",_primitives.Name.get("XRef")),null!==xrefInfo.rootRef&&newXref.set("Root",xrefInfo.rootRef),null!==xrefInfo.infoRef&&newXref.set("Info",xrefInfo.infoRef),null!==xrefInfo.encrypt&&newXref.set("Encrypt",xrefInfo.encrypt),newRefs.push({ref:refForXrefTable,data:""}),newRefs=newRefs.sort((function(a,b){return a.ref.num-b.ref.num}));var _step54,xrefTableData=[[0,1,65535]],indexes=[0,1],maxOffset=0,_iterator54=_createForOfIteratorHelper(newRefs);try{for(_iterator54.s();!(_step54=_iterator54.n()).done;){var _step54$value=_step54.value,ref=_step54$value.ref,data=_step54$value.data;maxOffset=Math.max(maxOffset,baseOffset),xrefTableData.push([1,baseOffset,Math.min(ref.gen,65535)]),baseOffset+=data.length,indexes.push(ref.num),indexes.push(1),buffer.push(data)}}catch(err){_iterator54.e(err)}finally{_iterator54.f()}if(newXref.set("Index",indexes),0!==xrefInfo.fileIds.length){var md5=function(filesize,xrefInfo){for(var time=Math.floor(Date.now()/1e3),filename=xrefInfo.filename||"",md5Buffer=[time.toString(),filename,filesize.toString()],md5BufferLen=md5Buffer.reduce((function(a,str){return a+str.length}),0),_i53=0,_Object$values=Object.values(xrefInfo.info);_i53<_Object$values.length;_i53++){var value=_Object$values[_i53];md5Buffer.push(value),md5BufferLen+=value.length}for(var array=new Uint8Array(md5BufferLen),offset=0,_i54=0,_md5Buffer=md5Buffer;_i54<_md5Buffer.length;_i54++){var str=_md5Buffer[_i54];writeString(str,offset,array),offset+=str.length}return(0,_util.bytesToString)((0,_crypto.calculateMD5)(array))}(baseOffset,xrefInfo);newXref.set("ID",[xrefInfo.fileIds[0],md5])}var sizes=[1,Math.ceil(Math.log2(maxOffset)/8),2],tableLength=(sizes[0]+sizes[1]+sizes[2])*xrefTableData.length;newXref.set("W",sizes),newXref.set("Length",tableLength),buffer.push("".concat(refForXrefTable.num," ").concat(refForXrefTable.gen," obj\n")),writeDict(newXref,buffer,null),buffer.push(" stream\n");var bufferLen=buffer.reduce((function(a,str){return a+str.length}),0),footer="\nendstream\nendobj\nstartxref\n".concat(baseOffset,"\n%%EOF\n"),array=new Uint8Array(originalData.length+bufferLen+tableLength+footer.length);array.set(originalData);var _step55,offset=originalData.length,_iterator55=_createForOfIteratorHelper(buffer);try{for(_iterator55.s();!(_step55=_iterator55.n()).done;){var str=_step55.value;writeString(str,offset,array),offset+=str.length}}catch(err){_iterator55.e(err)}finally{_iterator55.f()}for(var _i55=0,_xrefTableData=xrefTableData;_i55<_xrefTableData.length;_i55++){var _xrefTableData$_i=_slicedToArray(_xrefTableData[_i55],3),type=_xrefTableData$_i[0],objOffset=_xrefTableData$_i[1],gen=_xrefTableData$_i[2];offset=writeInt(type,sizes[0],offset,array),offset=writeInt(objOffset,sizes[1],offset,array),offset=writeInt(gen,sizes[2],offset,array)}return writeString(footer,offset,array),array},exports.writeDict=writeDict;var _util=__w_pdfjs_require__(2),_primitives=__w_pdfjs_require__(5),_core_utils=__w_pdfjs_require__(8),_xml_parser=__w_pdfjs_require__(47),_crypto=__w_pdfjs_require__(22);function writeDict(dict,buffer,transform){buffer.push("<<");var _step51,_iterator51=_createForOfIteratorHelper(dict.getKeys());try{for(_iterator51.s();!(_step51=_iterator51.n()).done;){var key=_step51.value;buffer.push(" /".concat((0,_core_utils.escapePDFName)(key)," ")),writeValue(dict.getRaw(key),buffer,transform)}}catch(err){_iterator51.e(err)}finally{_iterator51.f()}buffer.push(">>")}function writeValue(value,buffer,transform){(0,_primitives.isName)(value)?buffer.push("/".concat((0,_core_utils.escapePDFName)(value.name))):(0,_primitives.isRef)(value)?buffer.push("".concat(value.num," ").concat(value.gen," R")):Array.isArray(value)?function(array,buffer,transform){buffer.push("[");var _step52,first=!0,_iterator52=_createForOfIteratorHelper(array);try{for(_iterator52.s();!(_step52=_iterator52.n()).done;){var val=_step52.value;first?first=!1:buffer.push(" "),writeValue(val,buffer,transform)}}catch(err){_iterator52.e(err)}finally{_iterator52.f()}buffer.push("]")}(value,buffer,transform):"string"==typeof value?(null!==transform&&(value=transform.encryptString(value)),buffer.push("(".concat((0,_util.escapeString)(value),")"))):"number"==typeof value?buffer.push(function(value){if(Number.isInteger(value))return value.toString();var roundedValue=Math.round(100*value);return roundedValue%100==0?(roundedValue/100).toString():roundedValue%10==0?value.toFixed(1):value.toFixed(2)}(value)):(0,_primitives.isDict)(value)?writeDict(value,buffer,transform):(0,_primitives.isStream)(value)&&function(stream,buffer,transform){writeDict(stream.dict,buffer,transform),buffer.push(" stream\n");var string=(0,_util.bytesToString)(stream.getBytes());null!==transform&&(string=transform.encryptString(string)),buffer.push(string),buffer.push("\nendstream\n")}(value,buffer,transform)}function writeInt(number,size,offset,buffer){for(var _i51=size+offset-1;_i51>offset-1;_i51--)buffer[_i51]=255&number,number>>=8;return offset+size}function writeString(string,offset,buffer){for(var _i52=0,len=string.length;_i52<len;_i52++)buffer[offset+_i52]=255&string.charCodeAt(_i52)}},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleXMLParser=exports.SimpleDOMNode=void 0;var _util=__w_pdfjs_require__(2),XMLParserErrorCode_NoError=0,XMLParserErrorCode_UnterminatedCdat=-2,XMLParserErrorCode_UnterminatedXmlDeclaration=-3,XMLParserErrorCode_UnterminatedDoctypeDeclaration=-4,XMLParserErrorCode_UnterminatedComment=-5,XMLParserErrorCode_MalformedElement=-6,XMLParserErrorCode_UnterminatedElement=-9;function isWhitespace(s,index){var ch=s[index];return" "===ch||"\n"===ch||"\r"===ch||"\t"===ch}var XMLParserBase=function(){function XMLParserBase(){_classCallCheck(this,XMLParserBase)}return _createClass(XMLParserBase,[{key:"_resolveEntities",value:function(s){var _this76=this;return s.replace(/&([^;]+);/g,(function(all,entity){if("#x"===entity.substring(0,2))return String.fromCodePoint(parseInt(entity.substring(2),16));if("#"===entity.substring(0,1))return String.fromCodePoint(parseInt(entity.substring(1),10));switch(entity){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return _this76.onResolveEntity(entity)}))}},{key:"_parseContent",value:function(s,start){var attributes=[],pos=start;function skipWs(){for(;pos<s.length&&isWhitespace(s,pos);)++pos}for(;pos<s.length&&!isWhitespace(s,pos)&&">"!==s[pos]&&"/"!==s[pos];)++pos;var name=s.substring(start,pos);for(skipWs();pos<s.length&&">"!==s[pos]&&"/"!==s[pos]&&"?"!==s[pos];){skipWs();for(var attrValue,attrName="";pos<s.length&&!isWhitespace(s,pos)&&"="!==s[pos];)attrName+=s[pos],++pos;if(skipWs(),"="!==s[pos])return null;++pos,skipWs();var attrEndChar=s[pos];if('"'!==attrEndChar&&"'"!==attrEndChar)return null;var attrEndIndex=s.indexOf(attrEndChar,++pos);if(attrEndIndex<0)return null;attrValue=s.substring(pos,attrEndIndex),attributes.push({name:attrName,value:this._resolveEntities(attrValue)}),pos=attrEndIndex+1,skipWs()}return{name:name,attributes:attributes,parsed:pos-start}}},{key:"_parseProcessingInstruction",value:function(s,start){for(var pos=start;pos<s.length&&!isWhitespace(s,pos)&&">"!==s[pos]&&"/"!==s[pos];)++pos;var name=s.substring(start,pos);!function(){for(;pos<s.length&&isWhitespace(s,pos);)++pos}();for(var attrStart=pos;pos<s.length&&("?"!==s[pos]||">"!==s[pos+1]);)++pos;return{name:name,value:s.substring(attrStart,pos),parsed:pos-start}}},{key:"parseXml",value:function(s){for(var i=0;i<s.length;){var j=i;if("<"===s[i]){var q=void 0;switch(s[++j]){case"/":if(++j,(q=s.indexOf(">",j))<0)return void this.onError(XMLParserErrorCode_UnterminatedElement);this.onEndElement(s.substring(j,q)),j=q+1;break;case"?":++j;var pi=this._parseProcessingInstruction(s,j);if("?>"!==s.substring(j+pi.parsed,j+pi.parsed+2))return void this.onError(XMLParserErrorCode_UnterminatedXmlDeclaration);this.onPi(pi.name,pi.value),j+=pi.parsed+2;break;case"!":if("--"===s.substring(j+1,j+3)){if((q=s.indexOf("--\x3e",j+3))<0)return void this.onError(XMLParserErrorCode_UnterminatedComment);this.onComment(s.substring(j+3,q)),j=q+3}else if("[CDATA["===s.substring(j+1,j+8)){if((q=s.indexOf("]]>",j+8))<0)return void this.onError(XMLParserErrorCode_UnterminatedCdat);this.onCdata(s.substring(j+8,q)),j=q+3}else{if("DOCTYPE"!==s.substring(j+1,j+8))return void this.onError(XMLParserErrorCode_MalformedElement);var q2=s.indexOf("[",j+8),complexDoctype=!1;if((q=s.indexOf(">",j+8))<0)return void this.onError(XMLParserErrorCode_UnterminatedDoctypeDeclaration);if(q2>0&&q>q2){if((q=s.indexOf("]>",j+8))<0)return void this.onError(XMLParserErrorCode_UnterminatedDoctypeDeclaration);complexDoctype=!0}var doctypeContent=s.substring(j+8,q+(complexDoctype?1:0));this.onDoctype(doctypeContent),j=q+(complexDoctype?2:1)}break;default:var content=this._parseContent(s,j);if(null===content)return void this.onError(XMLParserErrorCode_MalformedElement);var isClosed=!1;if("/>"===s.substring(j+content.parsed,j+content.parsed+2))isClosed=!0;else if(">"!==s.substring(j+content.parsed,j+content.parsed+1))return void this.onError(XMLParserErrorCode_UnterminatedElement);this.onBeginElement(content.name,content.attributes,isClosed),j+=content.parsed+(isClosed?2:1)}}else{for(;j<s.length&&"<"!==s[j];)j++;var text=s.substring(i,j);this.onText(this._resolveEntities(text))}i=j}}},{key:"onResolveEntity",value:function(name){return"&".concat(name,";")}},{key:"onPi",value:function(name,value){}},{key:"onComment",value:function(text){}},{key:"onCdata",value:function(text){}},{key:"onDoctype",value:function(doctypeContent){}},{key:"onText",value:function(text){}},{key:"onBeginElement",value:function(name,attributes,isEmpty){}},{key:"onEndElement",value:function(name){}},{key:"onError",value:function(code){}}]),XMLParserBase}(),SimpleDOMNode=function(){function SimpleDOMNode(nodeName,nodeValue){_classCallCheck(this,SimpleDOMNode),this.nodeName=nodeName,this.nodeValue=nodeValue,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}return _createClass(SimpleDOMNode,[{key:"firstChild",get:function(){return this.childNodes&&this.childNodes[0]}},{key:"nextSibling",get:function(){var childNodes=this.parentNode.childNodes;if(childNodes){var index=childNodes.indexOf(this);if(-1!==index)return childNodes[index+1]}}},{key:"textContent",get:function(){return this.childNodes?this.childNodes.map((function(child){return child.textContent})).join(""):this.nodeValue||""}},{key:"hasChildNodes",value:function(){return this.childNodes&&this.childNodes.length>0}},{key:"searchNode",value:function(paths,pos){if(pos>=paths.length)return this;for(var component=paths[pos],stack=[],node=this;;){if(component.name===node.nodeName){if(0!==component.pos){if(0===stack.length)return null;var _step56,siblingPos=0,_iterator56=_createForOfIteratorHelper(_slicedToArray(stack.pop(),1)[0].childNodes);try{for(_iterator56.s();!(_step56=_iterator56.n()).done;){var child=_step56.value;if(component.name===child.nodeName){if(siblingPos===component.pos)return child.searchNode(paths,pos+1);siblingPos++}}}catch(err){_iterator56.e(err)}finally{_iterator56.f()}return node.searchNode(paths,pos+1)}var res=node.searchNode(paths,pos+1);if(null!==res)return res}if(node.childNodes&&0!==node.childNodes.length)stack.push([node,0]),node=node.childNodes[0];else{if(0===stack.length)return null;for(;0!==stack.length;){var _stack$pop4=_slicedToArray(stack.pop(),2),_parent=_stack$pop4[0],newPos=_stack$pop4[1]+1;if(newPos<_parent.childNodes.length){stack.push([_parent,newPos]),node=_parent.childNodes[newPos];break}}if(0===stack.length)return null}}}},{key:"dump",value:function(buffer){if("#text"!==this.nodeName){if(buffer.push("<".concat(this.nodeName)),this.attributes){var _step57,_iterator57=_createForOfIteratorHelper(this.attributes);try{for(_iterator57.s();!(_step57=_iterator57.n()).done;){var attribute=_step57.value;buffer.push(" ".concat(attribute.name,'="').concat((0,_util.encodeToXmlString)(attribute.value),'"'))}}catch(err){_iterator57.e(err)}finally{_iterator57.f()}}if(this.hasChildNodes()){buffer.push(">");var _step58,_iterator58=_createForOfIteratorHelper(this.childNodes);try{for(_iterator58.s();!(_step58=_iterator58.n()).done;)_step58.value.dump(buffer)}catch(err){_iterator58.e(err)}finally{_iterator58.f()}buffer.push("</".concat(this.nodeName,">"))}else this.nodeValue?buffer.push(">".concat((0,_util.encodeToXmlString)(this.nodeValue),"</").concat(this.nodeName,">")):buffer.push("/>")}else buffer.push((0,_util.encodeToXmlString)(this.nodeValue))}}]),SimpleDOMNode}();exports.SimpleDOMNode=SimpleDOMNode;var SimpleXMLParser=function(_XMLParserBase){_inherits(SimpleXMLParser,_XMLParserBase);var _super65=_createSuper(SimpleXMLParser);function SimpleXMLParser(_ref63){var _this77,_ref63$hasAttributes=_ref63.hasAttributes,hasAttributes=void 0!==_ref63$hasAttributes&&_ref63$hasAttributes,_ref63$lowerCaseName=_ref63.lowerCaseName,lowerCaseName=void 0!==_ref63$lowerCaseName&&_ref63$lowerCaseName;return _classCallCheck(this,SimpleXMLParser),(_this77=_super65.call(this))._currentFragment=null,_this77._stack=null,_this77._errorCode=XMLParserErrorCode_NoError,_this77._hasAttributes=hasAttributes,_this77._lowerCaseName=lowerCaseName,_this77}return _createClass(SimpleXMLParser,[{key:"parseFromString",value:function(data){if(this._currentFragment=[],this._stack=[],this._errorCode=XMLParserErrorCode_NoError,this.parseXml(data),this._errorCode===XMLParserErrorCode_NoError){var documentElement=_slicedToArray(this._currentFragment,1)[0];if(documentElement)return{documentElement:documentElement}}}},{key:"onResolveEntity",value:function(name){return"apos"===name?"'":_get(_getPrototypeOf(SimpleXMLParser.prototype),"onResolveEntity",this).call(this,name)}},{key:"onText",value:function(text){if(!function(s){for(var _i56=0,ii=s.length;_i56<ii;_i56++)if(!isWhitespace(s,_i56))return!1;return!0}(text)){var node=new SimpleDOMNode("#text",text);this._currentFragment.push(node)}}},{key:"onCdata",value:function(text){var node=new SimpleDOMNode("#text",text);this._currentFragment.push(node)}},{key:"onBeginElement",value:function(name,attributes,isEmpty){this._lowerCaseName&&(name=name.toLowerCase());var node=new SimpleDOMNode(name);node.childNodes=[],this._hasAttributes&&(node.attributes=attributes),this._currentFragment.push(node),isEmpty||(this._stack.push(this._currentFragment),this._currentFragment=node.childNodes)}},{key:"onEndElement",value:function(name){this._currentFragment=this._stack.pop()||[];var lastElement=this._currentFragment[this._currentFragment.length-1];if(lastElement)for(var _i57=0,ii=lastElement.childNodes.length;_i57<ii;_i57++)lastElement.childNodes[_i57].parentNode=lastElement}},{key:"onError",value:function(code){this._errorCode=code}}]),SimpleXMLParser}(XMLParserBase);exports.SimpleXMLParser=SimpleXMLParser},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.MessageHandler=void 0;var _util=__w_pdfjs_require__(2),CallbackKind_DATA=1,CallbackKind_ERROR=2,StreamKind_CANCEL=1,StreamKind_CANCEL_COMPLETE=2,StreamKind_CLOSE=3,StreamKind_ENQUEUE=4,StreamKind_ERROR=5,StreamKind_PULL=6,StreamKind_PULL_COMPLETE=7,StreamKind_START_COMPLETE=8;function wrapReason(reason){if("object"!==_typeof(reason)||null===reason)return reason;switch(reason.name){case"AbortException":return new _util.AbortException(reason.message);case"MissingPDFException":return new _util.MissingPDFException(reason.message);case"UnexpectedResponseException":return new _util.UnexpectedResponseException(reason.message,reason.status);case"UnknownErrorException":return new _util.UnknownErrorException(reason.message,reason.details);default:return new _util.UnknownErrorException(reason.message,reason.toString())}}var MessageHandler=function(){function MessageHandler(sourceName,targetName,comObj){var _this78=this;_classCallCheck(this,MessageHandler),this.sourceName=sourceName,this.targetName=targetName,this.comObj=comObj,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(event){var data=event.data;if(data.targetName===_this78.sourceName)if(data.stream)_this78._processStreamMessage(data);else if(data.callback){var callbackId=data.callbackId,capability=_this78.callbackCapabilities[callbackId];if(!capability)throw new Error("Cannot resolve callback ".concat(callbackId));if(delete _this78.callbackCapabilities[callbackId],data.callback===CallbackKind_DATA)capability.resolve(data.data);else{if(data.callback!==CallbackKind_ERROR)throw new Error("Unexpected callback case");capability.reject(wrapReason(data.reason))}}else{var action=_this78.actionHandler[data.action];if(!action)throw new Error("Unknown action from worker: ".concat(data.action));if(data.callbackId){var cbSourceName=_this78.sourceName,cbTargetName=data.sourceName;new Promise((function(resolve){resolve(action(data.data))})).then((function(result){comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind_DATA,callbackId:data.callbackId,data:result})}),(function(reason){comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind_ERROR,callbackId:data.callbackId,reason:wrapReason(reason)})}))}else data.streamId?_this78._createStreamSink(data):action(data.data)}},comObj.addEventListener("message",this._onComObjOnMessage)}var _deleteStreamController2;return _createClass(MessageHandler,[{key:"on",value:function(actionName,handler){var ah=this.actionHandler;if(ah[actionName])throw new Error('There is already an actionName called "'.concat(actionName,'"'));ah[actionName]=handler}},{key:"send",value:function(actionName,data,transfers){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,data:data},transfers)}},{key:"sendWithPromise",value:function(actionName,data,transfers){var callbackId=this.callbackId++,capability=(0,_util.createPromiseCapability)();this.callbackCapabilities[callbackId]=capability;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,callbackId:callbackId,data:data},transfers)}catch(ex){capability.reject(ex)}return capability.promise}},{key:"sendWithStream",value:function(actionName,data,queueingStrategy,transfers){var _this79=this,streamId=this.streamId++,sourceName=this.sourceName,targetName=this.targetName,comObj=this.comObj;return new ReadableStream({start:function(controller){var startCapability=(0,_util.createPromiseCapability)();return _this79.streamControllers[streamId]={controller:controller,startCall:startCapability,pullCall:null,cancelCall:null,isClosed:!1},_this79._postMessage({sourceName:sourceName,targetName:targetName,action:actionName,streamId:streamId,data:data,desiredSize:controller.desiredSize},transfers),startCapability.promise},pull:function(controller){var pullCapability=(0,_util.createPromiseCapability)();return _this79.streamControllers[streamId].pullCall=pullCapability,comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_PULL,streamId:streamId,desiredSize:controller.desiredSize}),pullCapability.promise},cancel:function(reason){(0,_util.assert)(reason instanceof Error,"cancel must have a valid reason");var cancelCapability=(0,_util.createPromiseCapability)();return _this79.streamControllers[streamId].cancelCall=cancelCapability,_this79.streamControllers[streamId].isClosed=!0,comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_CANCEL,streamId:streamId,reason:wrapReason(reason)}),cancelCapability.promise}},queueingStrategy)}},{key:"_createStreamSink",value:function(data){var self=this,action=this.actionHandler[data.action],streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj,streamSink={enqueue:function(chunk){var size=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,transfers=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var lastDesiredSize=this.desiredSize;this.desiredSize-=size,lastDesiredSize>0&&this.desiredSize<=0&&(this.sinkCapability=(0,_util.createPromiseCapability)(),this.ready=this.sinkCapability.promise),self._postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_ENQUEUE,streamId:streamId,chunk:chunk},transfers)}},close:function(){this.isCancelled||(this.isCancelled=!0,comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_CLOSE,streamId:streamId}),delete self.streamSinks[streamId])},error:function(reason){(0,_util.assert)(reason instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_ERROR,streamId:streamId,reason:wrapReason(reason)}))},sinkCapability:(0,_util.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:data.desiredSize,ready:null};streamSink.sinkCapability.resolve(),streamSink.ready=streamSink.sinkCapability.promise,this.streamSinks[streamId]=streamSink,new Promise((function(resolve){resolve(action(data.data,streamSink))})).then((function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_START_COMPLETE,streamId:streamId,success:!0})}),(function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_START_COMPLETE,streamId:streamId,reason:wrapReason(reason)})}))}},{key:"_processStreamMessage",value:function(data){var streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;switch(data.stream){case StreamKind_START_COMPLETE:data.success?this.streamControllers[streamId].startCall.resolve():this.streamControllers[streamId].startCall.reject(wrapReason(data.reason));break;case StreamKind_PULL_COMPLETE:data.success?this.streamControllers[streamId].pullCall.resolve():this.streamControllers[streamId].pullCall.reject(wrapReason(data.reason));break;case StreamKind_PULL:if(!this.streamSinks[streamId]){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_PULL_COMPLETE,streamId:streamId,success:!0});break}this.streamSinks[streamId].desiredSize<=0&&data.desiredSize>0&&this.streamSinks[streamId].sinkCapability.resolve(),this.streamSinks[streamId].desiredSize=data.desiredSize;var onPull=this.streamSinks[data.streamId].onPull;new Promise((function(resolve){resolve(onPull&&onPull())})).then((function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_PULL_COMPLETE,streamId:streamId,success:!0})}),(function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_PULL_COMPLETE,streamId:streamId,reason:wrapReason(reason)})}));break;case StreamKind_ENQUEUE:if((0,_util.assert)(this.streamControllers[streamId],"enqueue should have stream controller"),this.streamControllers[streamId].isClosed)break;this.streamControllers[streamId].controller.enqueue(data.chunk);break;case StreamKind_CLOSE:if((0,_util.assert)(this.streamControllers[streamId],"close should have stream controller"),this.streamControllers[streamId].isClosed)break;this.streamControllers[streamId].isClosed=!0,this.streamControllers[streamId].controller.close(),this._deleteStreamController(streamId);break;case StreamKind_ERROR:(0,_util.assert)(this.streamControllers[streamId],"error should have stream controller"),this.streamControllers[streamId].controller.error(wrapReason(data.reason)),this._deleteStreamController(streamId);break;case StreamKind_CANCEL_COMPLETE:data.success?this.streamControllers[streamId].cancelCall.resolve():this.streamControllers[streamId].cancelCall.reject(wrapReason(data.reason)),this._deleteStreamController(streamId);break;case StreamKind_CANCEL:if(!this.streamSinks[streamId])break;var onCancel=this.streamSinks[data.streamId].onCancel;new Promise((function(resolve){resolve(onCancel&&onCancel(wrapReason(data.reason)))})).then((function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_CANCEL_COMPLETE,streamId:streamId,success:!0})}),(function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_CANCEL_COMPLETE,streamId:streamId,reason:wrapReason(reason)})})),this.streamSinks[streamId].sinkCapability.reject(wrapReason(data.reason)),this.streamSinks[streamId].isCancelled=!0,delete this.streamSinks[streamId];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:(_deleteStreamController2=_asyncToGenerator(regeneratorRuntime.mark((function _callee29(streamId){return regeneratorRuntime.wrap((function(_context29){for(;;)switch(_context29.prev=_context29.next){case 0:return _context29.next=2,Promise.allSettled([this.streamControllers[streamId].startCall,this.streamControllers[streamId].pullCall,this.streamControllers[streamId].cancelCall].map((function(capability){return capability&&capability.promise})));case 2:delete this.streamControllers[streamId];case 3:case"end":return _context29.stop()}}),_callee29,this)}))),function(_x47){return _deleteStreamController2.apply(this,arguments)})},{key:"_postMessage",value:function(message,transfers){transfers&&this.postMessageTransfers?this.comObj.postMessage(message,transfers):this.comObj.postMessage(message)}},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]),MessageHandler}();exports.MessageHandler=MessageHandler},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFWorkerStream=void 0;var _util=__w_pdfjs_require__(2),PDFWorkerStream=function(){function PDFWorkerStream(msgHandler){_classCallCheck(this,PDFWorkerStream),this._msgHandler=msgHandler,this._contentLength=null,this._fullRequestReader=null,this._rangeRequestReaders=[]}return _createClass(PDFWorkerStream,[{key:"getFullReader",value:function(){return(0,_util.assert)(!this._fullRequestReader,"PDFWorkerStream.getFullReader can only be called once."),this._fullRequestReader=new PDFWorkerStreamReader(this._msgHandler),this._fullRequestReader}},{key:"getRangeReader",value:function(begin,end){var reader=new PDFWorkerStreamRangeReader(begin,end,this._msgHandler);return this._rangeRequestReaders.push(reader),reader}},{key:"cancelAllRequests",value:function(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason),this._rangeRequestReaders.slice(0).forEach((function(reader){reader.cancel(reason)}))}}]),PDFWorkerStream}();exports.PDFWorkerStream=PDFWorkerStream;var PDFWorkerStreamReader=function(){function PDFWorkerStreamReader(msgHandler){var _this80=this;_classCallCheck(this,PDFWorkerStreamReader),this._msgHandler=msgHandler,this.onProgress=null,this._contentLength=null,this._isRangeSupported=!1,this._isStreamingSupported=!1;var readableStream=this._msgHandler.sendWithStream("GetReader");this._reader=readableStream.getReader(),this._headersReady=this._msgHandler.sendWithPromise("ReaderHeadersReady").then((function(data){_this80._isStreamingSupported=data.isStreamingSupported,_this80._isRangeSupported=data.isRangeSupported,_this80._contentLength=data.contentLength}))}var _read;return _createClass(PDFWorkerStreamReader,[{key:"headersReady",get:function(){return this._headersReady}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"read",value:(_read=_asyncToGenerator(regeneratorRuntime.mark((function _callee30(){var _yield$this$_reader$r,value;return regeneratorRuntime.wrap((function(_context30){for(;;)switch(_context30.prev=_context30.next){case 0:return _context30.next=2,this._reader.read();case 2:if(_yield$this$_reader$r=_context30.sent,value=_yield$this$_reader$r.value,!_yield$this$_reader$r.done){_context30.next=7;break}return _context30.abrupt("return",{value:void 0,done:!0});case 7:return _context30.abrupt("return",{value:value.buffer,done:!1});case 8:case"end":return _context30.stop()}}),_callee30,this)}))),function(){return _read.apply(this,arguments)})},{key:"cancel",value:function(reason){this._reader.cancel(reason)}}]),PDFWorkerStreamReader}(),PDFWorkerStreamRangeReader=function(){function PDFWorkerStreamRangeReader(begin,end,msgHandler){_classCallCheck(this,PDFWorkerStreamRangeReader),this._msgHandler=msgHandler,this.onProgress=null;var readableStream=this._msgHandler.sendWithStream("GetRangeReader",{begin:begin,end:end});this._reader=readableStream.getReader()}var _read2;return _createClass(PDFWorkerStreamRangeReader,[{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(_read2=_asyncToGenerator(regeneratorRuntime.mark((function _callee31(){var _yield$this$_reader$r2,value;return regeneratorRuntime.wrap((function(_context31){for(;;)switch(_context31.prev=_context31.next){case 0:return _context31.next=2,this._reader.read();case 2:if(_yield$this$_reader$r2=_context31.sent,value=_yield$this$_reader$r2.value,!_yield$this$_reader$r2.done){_context31.next=7;break}return _context31.abrupt("return",{value:void 0,done:!0});case 7:return _context31.abrupt("return",{value:value.buffer,done:!1});case 8:case"end":return _context31.stop()}}),_callee31,this)}))),function(){return _read2.apply(this,arguments)})},{key:"cancel",value:function(reason){this._reader.cancel(reason)}}]),PDFWorkerStreamRangeReader}()}],__webpack_module_cache__={};function __w_pdfjs_require__(moduleId){if(__webpack_module_cache__[moduleId])return __webpack_module_cache__[moduleId].exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__w_pdfjs_require__),module.exports}return __w_pdfjs_require__.d=function(exports,definition){for(var key in definition)__w_pdfjs_require__.o(definition,key)&&!__w_pdfjs_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__w_pdfjs_require__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)},__w_pdfjs_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__w_pdfjs_require__(0)}()},"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=factory():"function"==typeof define&&define.amd?define("report_reflectionexporter/pdf.worker",[],factory):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?exports["pdfjs-dist/build/pdf.worker"]=factory():root["pdfjs-dist/build/pdf.worker"]=root.pdfjsWorker=factory();

//# sourceMappingURL=pdf.worker.min.js.map